// @bun
var xl=Object.create;var{getPrototypeOf:bl,defineProperty:wO,getOwnPropertyNames:gl}=Object;var fl=Object.prototype.hasOwnProperty;var DO=($,J,W)=>{W=$!=null?xl(bl($)):{};let X=J||!$||!$.__esModule?wO(W,"default",{value:$,enumerable:!0}):W;for(let Y of gl($))if(!fl.call(X,Y))wO(X,Y,{get:()=>$[Y],enumerable:!0});return X};var A0=($,J)=>()=>(J||$((J={exports:{}}).exports,J),J.exports);var x$=($,J)=>{for(var W in J)wO($,W,{get:J[W],enumerable:!0,configurable:!0,set:(X)=>J[W]=()=>X})};var C=($,J)=>()=>($&&(J=$($=0)),J);var I0=import.meta.require;var vk=A0((T30,Gr)=>{Gr.exports={name:"dotenv",version:"17.2.3",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard",pretest:"npm run lint && npm run dts-check",test:"tap run tests/**/*.js --allow-empty-coverage --disable-coverage --timeout=60000","test:coverage":"tap run tests/**/*.js --show-full-coverage --timeout=60000 --coverage-report=text --coverage-report=lcov",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},homepage:"https://github.com/motdotla/dotenv#readme",funding:"https://dotenvx.com",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@types/node":"^18.11.3",decache:"^4.6.2",sinon:"^14.0.1",standard:"^17.0.0","standard-version":"^9.5.0",tap:"^19.2.0",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}});var bk=A0((q30,R5)=>{var fO=I0("fs"),RG=I0("path"),zr=I0("os"),wr=I0("crypto"),Dr=vk(),mO=Dr.version,Ck=["\uD83D\uDD10 encrypt with Dotenvx: https://dotenvx.com","\uD83D\uDD10 prevent committing .env to code: https://dotenvx.com/precommit","\uD83D\uDD10 prevent building .env in docker: https://dotenvx.com/prebuild","\uD83D\uDCE1 add observability to secrets: https://dotenvx.com/ops","\uD83D\uDC65 sync secrets across teammates & machines: https://dotenvx.com/ops","\uD83D\uDDC2\uFE0F backup and recover secrets: https://dotenvx.com/ops","\u2705 audit secrets and track compliance: https://dotenvx.com/ops","\uD83D\uDD04 add secrets lifecycle management: https://dotenvx.com/ops","\uD83D\uDD11 add access controls to secrets: https://dotenvx.com/ops","\uD83D\uDEE0\uFE0F  run anywhere with `dotenvx run -- yourcommand`","\u2699\uFE0F  specify custom .env file path with { path: '/custom/path/.env' }","\u2699\uFE0F  enable debug logging with { debug: true }","\u2699\uFE0F  override existing env vars with { override: true }","\u2699\uFE0F  suppress all logs with { quiet: true }","\u2699\uFE0F  write to custom object with { processEnv: myObject }","\u2699\uFE0F  load multiple .env files with { path: ['.env.local', '.env'] }"];function Kr(){return Ck[Math.floor(Math.random()*Ck.length)]}function pW($){if(typeof $==="string")return!["false","0","no","off",""].includes($.toLowerCase());return Boolean($)}function Or(){return process.stdout.isTTY}function Fr($){return Or()?`\x1B[2m${$}\x1B[0m`:$}var Er=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function Mr($){let J={},W=$.toString();W=W.replace(/\r\n?/mg,`
`);let X;while((X=Er.exec(W))!=null){let Y=X[1],U=X[2]||"";U=U.trim();let Z=U[0];if(U=U.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),Z==='"')U=U.replace(/\\n/g,`
`),U=U.replace(/\\r/g,"\r");J[Y]=U}return J}function Vr($){$=$||{};let J=xk($);$.path=J;let W=I4.configDotenv($);if(!W.parsed){let Z=Error(`MISSING_DATA: Cannot parse ${J} for an unknown reason`);throw Z.code="MISSING_DATA",Z}let X=hk($).split(","),Y=X.length,U;for(let Z=0;Z<Y;Z++)try{let H=X[Z].trim(),G=Ar(W,H);U=I4.decrypt(G.ciphertext,G.key);break}catch(H){if(Z+1>=Y)throw H}return I4.parse(U)}function Qr($){console.error(`[dotenv@${mO}][WARN] ${$}`)}function N2($){console.log(`[dotenv@${mO}][DEBUG] ${$}`)}function qk($){console.log(`[dotenv@${mO}] ${$}`)}function hk($){if($&&$.DOTENV_KEY&&$.DOTENV_KEY.length>0)return $.DOTENV_KEY;if(process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0)return process.env.DOTENV_KEY;return""}function Ar($,J){let W;try{W=new URL(J)}catch(H){if(H.code==="ERR_INVALID_URL"){let G=Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw G.code="INVALID_DOTENV_KEY",G}throw H}let X=W.password;if(!X){let H=Error("INVALID_DOTENV_KEY: Missing key part");throw H.code="INVALID_DOTENV_KEY",H}let Y=W.searchParams.get("environment");if(!Y){let H=Error("INVALID_DOTENV_KEY: Missing environment part");throw H.code="INVALID_DOTENV_KEY",H}let U=`DOTENV_VAULT_${Y.toUpperCase()}`,Z=$.parsed[U];if(!Z){let H=Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${U} in your .env.vault file.`);throw H.code="NOT_FOUND_DOTENV_ENVIRONMENT",H}return{ciphertext:Z,key:X}}function xk($){let J=null;if($&&$.path&&$.path.length>0)if(Array.isArray($.path)){for(let W of $.path)if(fO.existsSync(W))J=W.endsWith(".vault")?W:`${W}.vault`}else J=$.path.endsWith(".vault")?$.path:`${$.path}.vault`;else J=RG.resolve(process.cwd(),".env.vault");if(fO.existsSync(J))return J;return null}function Tk($){return $[0]==="~"?RG.join(zr.homedir(),$.slice(1)):$}function Ir($){let J=pW(process.env.DOTENV_CONFIG_DEBUG||$&&$.debug),W=pW(process.env.DOTENV_CONFIG_QUIET||$&&$.quiet);if(J||!W)qk("Loading env from encrypted .env.vault");let X=I4._parseVault($),Y=process.env;if($&&$.processEnv!=null)Y=$.processEnv;return I4.populate(Y,X,$),{parsed:X}}function Lr($){let J=RG.resolve(process.cwd(),".env"),W="utf8",X=process.env;if($&&$.processEnv!=null)X=$.processEnv;let Y=pW(X.DOTENV_CONFIG_DEBUG||$&&$.debug),U=pW(X.DOTENV_CONFIG_QUIET||$&&$.quiet);if($&&$.encoding)W=$.encoding;else if(Y)N2("No encoding is specified. UTF-8 is used by default");let Z=[J];if($&&$.path)if(!Array.isArray($.path))Z=[Tk($.path)];else{Z=[];for(let w of $.path)Z.push(Tk(w))}let H,G={};for(let w of Z)try{let D=I4.parse(fO.readFileSync(w,{encoding:W}));I4.populate(G,D,$)}catch(D){if(Y)N2(`Failed to load ${w} ${D.message}`);H=D}let z=I4.populate(X,G,$);if(Y=pW(X.DOTENV_CONFIG_DEBUG||Y),U=pW(X.DOTENV_CONFIG_QUIET||U),Y||!U){let w=Object.keys(z).length,D=[];for(let K of Z)try{let O=RG.relative(process.cwd(),K);D.push(O)}catch(O){if(Y)N2(`Failed to load ${K} ${O.message}`);H=O}qk(`injecting env (${w}) from ${D.join(",")} ${Fr(`-- tip: ${Kr()}`)}`)}if(H)return{parsed:G,error:H};else return{parsed:G}}function Pr($){if(hk($).length===0)return I4.configDotenv($);let J=xk($);if(!J)return Qr(`You set DOTENV_KEY but you are missing a .env.vault file at ${J}. Did you forget to build it?`),I4.configDotenv($);return I4._configVault($)}function _r($,J){let W=Buffer.from(J.slice(-64),"hex"),X=Buffer.from($,"base64"),Y=X.subarray(0,12),U=X.subarray(-16);X=X.subarray(12,-16);try{let Z=wr.createDecipheriv("aes-256-gcm",W,Y);return Z.setAuthTag(U),`${Z.update(X)}${Z.final()}`}catch(Z){let H=Z instanceof RangeError,G=Z.message==="Invalid key length",z=Z.message==="Unsupported state or unable to authenticate data";if(H||G){let w=Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw w.code="INVALID_DOTENV_KEY",w}else if(z){let w=Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw w.code="DECRYPTION_FAILED",w}else throw Z}}function Nr($,J,W={}){let X=Boolean(W&&W.debug),Y=Boolean(W&&W.override),U={};if(typeof J!=="object"){let Z=Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw Z.code="OBJECT_REQUIRED",Z}for(let Z of Object.keys(J))if(Object.prototype.hasOwnProperty.call($,Z)){if(Y===!0)$[Z]=J[Z],U[Z]=J[Z];if(X)if(Y===!0)N2(`"${Z}" is already defined and WAS overwritten`);else N2(`"${Z}" is already defined and was NOT overwritten`)}else $[Z]=J[Z],U[Z]=J[Z];return U}var I4={configDotenv:Lr,_configVault:Ir,_parseVault:Vr,config:Pr,decrypt:_r,parse:Mr,populate:Nr};q30.configDotenv=I4.configDotenv;q30._configVault=I4._configVault;q30._parseVault=I4._parseVault;q30.config=I4.config;q30.decrypt=I4.decrypt;q30.parse=I4.parse;q30.populate=I4.populate;R5.exports=I4});var fk=A0((h30,gk)=>{var Y7={};if(process.env.DOTENV_CONFIG_ENCODING!=null)Y7.encoding=process.env.DOTENV_CONFIG_ENCODING;if(process.env.DOTENV_CONFIG_PATH!=null)Y7.path=process.env.DOTENV_CONFIG_PATH;if(process.env.DOTENV_CONFIG_QUIET!=null)Y7.quiet=process.env.DOTENV_CONFIG_QUIET;if(process.env.DOTENV_CONFIG_DEBUG!=null)Y7.debug=process.env.DOTENV_CONFIG_DEBUG;if(process.env.DOTENV_CONFIG_OVERRIDE!=null)Y7.override=process.env.DOTENV_CONFIG_OVERRIDE;if(process.env.DOTENV_CONFIG_DOTENV_KEY!=null)Y7.DOTENV_KEY=process.env.DOTENV_CONFIG_DOTENV_KEY;gk.exports=Y7});var yk=A0((x30,mk)=>{var Tr=/^dotenv_config_(encoding|path|quiet|debug|override|DOTENV_KEY)=(.+)$/;mk.exports=function(J){let W=J.reduce(function(X,Y){let U=Y.match(Tr);if(U)X[U[1]]=U[2];return X},{});if(!("quiet"in W))W.quiet="true";return W}});var ck=A0(()=>{(function(){bk().config(Object.assign({},fk(),yk()(process.argv)))})()});function A$($){return typeof $>"u"||$===void 0}function X1($){return typeof $==="string"}function G8($){return typeof $==="number"}function c5($){return typeof $==="boolean"}function o9($){return $===null}function SX($){return $ instanceof Date}function s9($){return typeof $==="bigint"}function vz($){return typeof Buffer<"u"&&Buffer.isBuffer($)}function Y1($){return typeof $==="function"}function M1($){return typeof $==="object"&&$!==null}function Cz($){if(!M1($)||A10($)!=="[object Object]")return!1;if(Object.getPrototypeOf($)===null)return!0;let J=$;while(Object.getPrototypeOf(J)!==null)J=Object.getPrototypeOf(J);return Object.getPrototypeOf($)===J}function Tq($){return $[$.length-1]}function V($){return Object.freeze($)}function sU($){if(v4($))return $;else return[$]}function v4($){return Array.isArray($)}function I$($){return $}function Tz($,J){if(v4($)&&v4(J))return O10($,J);else if(M1($)&&M1(J))return F10($,J);return $===J}function O10($,J){if($.length!==J.length)return!1;for(let W=0;W<$.length;++W)if(!Tz($[W],J[W]))return!1;return!0}function F10($,J){if(vz($)&&vz(J))return E10($,J);else if(SX($)&&SX(J))return M10($,J);return V10($,J)}function E10($,J){return Buffer.compare($,J)===0}function M10($,J){return $.getTime()===J.getTime()}function V10($,J){let W=Object.keys($),X=Object.keys(J);if(W.length!==X.length)return!1;for(let Y of W)if(!Tz($[Y],J[Y]))return!1;return!0}function A10($){if($==null)return $===void 0?"[object Undefined]":"[object Null]";return Q10.call($)}var Q10;var g=C(()=>{Q10=Object.prototype.toString});var r0;var C7=C(()=>{g();r0=V({is($){return $.kind==="AlterTableNode"},create($){return V({kind:"AlterTableNode",table:$})},cloneWithTableProps($,J){return V({...$,...J})},cloneWithColumnAlteration($,J){return V({...$,columnAlterations:$.columnAlterations?[...$.columnAlterations,J]:[J]})}})});var F0;var V1=C(()=>{g();F0=V({is($){return $.kind==="IdentifierNode"},create($){return V({kind:"IdentifierNode",name:$})}})});var z8;var qz=C(()=>{g();V1();z8=V({is($){return $.kind==="CreateIndexNode"},create($){return V({kind:"CreateIndexNode",name:F0.create($)})},cloneWith($,J){return V({...$,...J})},cloneWithColumns($,J){return V({...$,columns:[...$.columns||[],...J]})}})});var hz;var xz=C(()=>{g();V1();hz=V({is($){return $.kind==="CreateSchemaNode"},create($,J){return V({kind:"CreateSchemaNode",schema:F0.create($),...J})},cloneWith($,J){return V({...$,...J})}})});var qq,U$;var jX=C(()=>{g();qq=["preserve rows","delete rows","drop"],U$=V({is($){return $.kind==="CreateTableNode"},create($){return V({kind:"CreateTableNode",table:$,columns:V([])})},cloneWithColumn($,J){return V({...$,columns:V([...$.columns,J])})},cloneWithConstraint($,J){return V({...$,constraints:$.constraints?V([...$.constraints,J]):V([J])})},cloneWithFrontModifier($,J){return V({...$,frontModifiers:$.frontModifiers?V([...$.frontModifiers,J]):V([J])})},cloneWithEndModifier($,J){return V({...$,endModifiers:$.endModifiers?V([...$.endModifiers,J]):V([J])})},cloneWith($,J){return V({...$,...J})}})});var Z$;var u5=C(()=>{g();V1();Z$=V({is($){return $.kind==="SchemableIdentifierNode"},create($){return V({kind:"SchemableIdentifierNode",identifier:F0.create($)})},createWithSchema($,J){return V({kind:"SchemableIdentifierNode",schema:F0.create($),identifier:F0.create(J)})}})});var e9;var eU=C(()=>{g();u5();e9=V({is($){return $.kind==="DropIndexNode"},create($,J){return V({kind:"DropIndexNode",name:Z$.create($),...J})},cloneWith($,J){return V({...$,...J})}})});var $Z;var bz=C(()=>{g();V1();$Z=V({is($){return $.kind==="DropSchemaNode"},create($,J){return V({kind:"DropSchemaNode",schema:F0.create($),...J})},cloneWith($,J){return V({...$,...J})}})});var JZ;var gz=C(()=>{g();JZ=V({is($){return $.kind==="DropTableNode"},create($,J){return V({kind:"DropTableNode",table:$,...J})},cloneWith($,J){return V({...$,...J})}})});var C4;var w8=C(()=>{g();C4=V({is($){return $.kind==="AliasNode"},create($,J){return V({kind:"AliasNode",node:$,alias:J})}})});var K6;var kX=C(()=>{g();u5();K6=V({is($){return $.kind==="TableNode"},create($){return V({kind:"TableNode",table:Z$.create($)})},createWithSchema($,J){return V({kind:"TableNode",table:Z$.createWithSchema($,J)})}})});function _1($){return M1($)&&Y1($.toOperationNode)}var c$=C(()=>{g()});function fz($){return M1($)&&"expressionType"in $&&_1($)}function hq($){return M1($)&&"expression"in $&&X1($.alias)&&_1($)}var mz=C(()=>{c$();g()});var $5;var QI=C(()=>{g();$5=V({is($){return $.kind==="SelectModifierNode"},create($,J){return V({kind:"SelectModifierNode",modifier:$,of:J})},createWithExpression($){return V({kind:"SelectModifierNode",rawModifier:$})}})});var u$;var $J=C(()=>{g();u$=V({is($){return $.kind==="AndNode"},create($,J){return V({kind:"AndNode",left:$,right:J})}})});var D8;var T7=C(()=>{g();D8=V({is($){return $.kind==="OrNode"},create($,J){return V({kind:"OrNode",left:$,right:J})}})});var yz;var AI=C(()=>{g();$J();T7();yz=V({is($){return $.kind==="OnNode"},create($){return V({kind:"OnNode",on:$})},cloneWithOperation($,J,W){return V({...$,on:J==="And"?u$.create($.on,W):D8.create($.on,W)})}})});var K8;var vX=C(()=>{g();AI();K8=V({is($){return $.kind==="JoinNode"},create($,J){return V({kind:"JoinNode",joinType:$,table:J,on:void 0})},createWithOn($,J,W){return V({kind:"JoinNode",joinType:$,table:J,on:yz.create(W)})},cloneWithOn($,J){return V({...$,on:$.on?yz.cloneWithOperation($.on,"And",J):yz.create(J)})}})});var p5;var WZ=C(()=>{g();p5=V({is($){return $.kind==="BinaryOperationNode"},create($,J,W){return V({kind:"BinaryOperationNode",leftOperand:$,operator:J,rightOperand:W})}})});function II($){return X1($)&&xq.includes($)}var I10,L10,xq,P10,_10,N10,bq,H$;var d5=C(()=>{g();I10=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","^@","&&","?","?&","?|","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp","is distinct from","is not distinct from"],L10=["+","-","*","/","%","^","&","|","#","<<",">>"],xq=["->","->>"],P10=[...I10,...L10,"&&","||"],_10=["exists","not exists"],N10=["not","-",..._10],bq=[...P10,...xq,...N10,"between","between symmetric"],H$=V({is($){return $.kind==="OperatorNode"},create($){return V({kind:"OperatorNode",operator:$})}})});var p0;var G$=C(()=>{g();V1();p0=V({is($){return $.kind==="ColumnNode"},create($){return V({kind:"ColumnNode",column:F0.create($)})}})});var CX;var XZ=C(()=>{g();CX=V({is($){return $.kind==="SelectAllNode"},create(){return V({kind:"SelectAllNode"})}})});var TX;var cz=C(()=>{XZ();g();TX=V({is($){return $.kind==="ReferenceNode"},create($,J){return V({kind:"ReferenceNode",table:J,column:$})},createSelectAll($){return V({kind:"ReferenceNode",table:$,column:CX.create()})}})});class LI{#$;get dynamicReference(){return this.#$}get refType(){return}constructor($){this.#$=$}toOperationNode(){return PI(this.#$)}}function uz($){return M1($)&&_1($)&&X1($.dynamicReference)}var YZ=C(()=>{c$();l4();g()});var O8;var pz=C(()=>{g();O8=V({is($){return $.kind==="OrderByItemNode"},create($,J){return V({kind:"OrderByItemNode",orderBy:$,direction:J})},cloneWith($,J){return V({...$,...J})}})});var n0;var y6=C(()=>{g();n0=V({is($){return $.kind==="RawNode"},create($,J){return V({kind:"RawNode",sqlFragments:V($),parameters:V(J)})},createWithSql($){return n0.create([$],[])},createWithChild($){return n0.create(["",""],[$])},createWithChildren($){return n0.create(Array($.length+1).fill(""),$)}})});var gq;var _I=C(()=>{g();V1();gq={is($){return $.kind==="CollateNode"},create($){return V({kind:"CollateNode",collation:F0.create($)})}}});class JJ{#$;constructor($){this.#$=V($)}desc(){return new JJ({node:O8.cloneWith(this.#$.node,{direction:n0.createWithSql("desc")})})}asc(){return new JJ({node:O8.cloneWith(this.#$.node,{direction:n0.createWithSql("asc")})})}nullsLast(){return new JJ({node:O8.cloneWith(this.#$.node,{nulls:"last"})})}nullsFirst(){return new JJ({node:O8.cloneWith(this.#$.node,{nulls:"first"})})}collate($){return new JJ({node:O8.cloneWith(this.#$.node,{collation:gq.create($)})})}toOperationNode(){return this.#$.node}}var NI=C(()=>{_I();pz();y6();g()});function F8($){if(fq.has($))return;fq.add($),console.log($)}var fq;var qX=C(()=>{fq=new Set});function RI($){return $==="asc"||$==="desc"}function F6($){if($.length===2)return[BI($[0],$[1])];if($.length===1){let[J]=$;if(Array.isArray(J))return F8("orderBy(array) is deprecated, use multiple orderBy calls instead."),J.map((W)=>BI(W));return[BI(J)]}throw Error(`Invalid number of arguments at order by! expected 1-2, received ${$.length}`)}function BI($,J){let W=B10($);if(O8.is(W)){if(J)throw Error("Cannot specify direction twice!");return W}return mq(W,J)}function B10($){if(l5($))return p$($);if(uz($))return $.toOperationNode();let[J,W]=$.split(" ");if(W)return F8("`orderBy('column asc')` is deprecated. Use `orderBy('column', 'asc')` instead."),mq(O6(J),W);return O6($)}function mq($,J){if(typeof J==="string"){if(!RI(J))throw Error(`Invalid order by direction: ${J}`);return O8.create($,n0.createWithSql(J))}if(fz(J))return F8("`orderBy(..., expr)` is deprecated. Use `orderBy(..., 'asc')` or `orderBy(..., (ob) => ...)` instead."),O8.create($,J.toOperationNode());let W=O8.create($);if(!J)return W;return J(new JJ({node:W})).toOperationNode()}var q7=C(()=>{YZ();mz();pz();y6();NI();qX();E8();l4()});var hX;var dz=C(()=>{g();hX=V({is($){return $.kind==="JSONReferenceNode"},create($,J){return V({kind:"JSONReferenceNode",reference:$,traversal:J})},cloneWithTraversal($,J){return V({...$,traversal:J})}})});var lz;var rz=C(()=>{g();lz=V({is($){return $.kind==="JSONOperatorChainNode"},create($){return V({kind:"JSONOperatorChainNode",operator:$,values:V([])})},cloneWithValue($,J){return V({...$,values:V([...$.values,J])})}})});var WJ;var UZ=C(()=>{g();WJ=V({is($){return $.kind==="JSONPathNode"},create($){return V({kind:"JSONPathNode",inOperator:$,pathLegs:V([])})},cloneWithLeg($,J){return V({...$,pathLegs:V([...$.pathLegs,J])})}})});function PI($){if(X1($))return O6($);return $.toOperationNode()}function r5($){if(v4($))return $.map((J)=>r4(J));else return[r4($)]}function r4($){if(l5($))return p$($);return PI($)}function yq($,J){let W=O6($);if(II(J))return hX.create(W,lz.create(H$.create(J)));let X=J.slice(0,-1);if(II(X))return hX.create(W,WJ.create(H$.create(X)));throw Error(`Invalid JSON operator: ${J}`)}function O6($){if(!$.includes("."))return TX.create(p0.create($));let W=$.split(".").map(jI);if(W.length===3)return R10(W);if(W.length===2)return S10(W);throw Error(`invalid column reference ${$}`)}function cq($){if($.includes(" as ")){let[W,X]=$.split(" as ").map(jI);return C4.create(O6(W),F0.create(X))}else return O6($)}function SI($){return p0.create($)}function xX($){if($.includes(" ")){let[W,X]=$.split(" ").map(jI);if(!RI(X))throw Error(`invalid order direction "${X}" next to "${W}"`);return F6([W,X])[0]}else return SI($)}function R10($){let[J,W,X]=$;return TX.create(p0.create(X),K6.createWithSchema(J,W))}function S10($){let[J,W]=$;return TX.create(p0.create(W),K6.create(J))}function jI($){return $.trim()}var l4=C(()=>{w8();G$();cz();kX();g();E8();V1();q7();d5();dz();rz();UZ()});var bX;var ZZ=C(()=>{g();bX=V({is($){return $.kind==="PrimitiveValueListNode"},create($){return V({kind:"PrimitiveValueListNode",values:V([...$])})}})});var M8;var XJ=C(()=>{g();M8=V({is($){return $.kind==="ValueListNode"},create($){return V({kind:"ValueListNode",values:V($)})}})});var Z4;var V8=C(()=>{g();Z4=V({is($){return $.kind==="ValueNode"},create($){return V({kind:"ValueNode",value:$})},createImmediate($){return V({kind:"ValueNode",value:$,immediate:!0})}})});function uq($){if(v4($))return j10($);return K1($)}function K1($){if(l5($))return p$($);return Z4.create($)}function nz($){return G8($)||c5($)||o9($)}function HZ($){if(!nz($))throw Error(`unsafe immediate value ${JSON.stringify($)}`);return Z4.createImmediate($)}function j10($){if($.some(l5))return M8.create($.map((J)=>K1(J)));return bX.create($)}var J5=C(()=>{ZZ();XJ();V8();g();E8()});var E6;var gX=C(()=>{g();E6=V({is($){return $.kind==="ParensNode"},create($){return V({kind:"ParensNode",node:$})}})});function Q1($){if($.length===3)return iz($[0],$[1],$[2]);else if($.length===1)return K1($[0]);throw Error(`invalid arguments: ${JSON.stringify($)}`)}function iz($,J,W){if(k10(J)&&dq(W))return p5.create(r4($),kI(J),Z4.createImmediate(W));return p5.create(r4($),kI(J),uq(W))}function T4($,J,W){return p5.create(r4($),kI(J),r4(W))}function vI($,J){return fX(Object.entries($).filter(([,W])=>!A$(W)).map(([W,X])=>iz(W,dq(X)?"is":"=",X)),J)}function fX($,J,W=!0){let X=J==="and"?u$.create:D8.create;if($.length===0)return p5.create(Z4.createImmediate(1),H$.create("="),Z4.createImmediate(J==="and"?1:0));let Y=pq($[0]);for(let U=1;U<$.length;++U)Y=X(Y,pq($[U]));if($.length>1&&W)return E6.create(Y);return Y}function k10($){return $==="is"||$==="is not"}function dq($){return o9($)||c5($)}function kI($){if(X1($)&&bq.includes($))return H$.create($);if(_1($))return $.toOperationNode();throw Error(`invalid operator ${JSON.stringify($)}`)}function pq($){return _1($)?$.toOperationNode():$}var M6=C(()=>{WZ();g();c$();d5();l4();J5();V8();$J();gX();T7()});var n5;var GZ=C(()=>{g();n5=V({is($){return $.kind==="OrderByNode"},create($){return V({kind:"OrderByNode",items:V([...$])})},cloneWithItems($,J){return V({...$,items:V([...$.items,...J])})}})});var CI;var TI=C(()=>{g();CI=V({is($){return $.kind==="PartitionByNode"},create($){return V({kind:"PartitionByNode",items:V($)})},cloneWithItems($,J){return V({...$,items:V([...$.items,...J])})}})});var zZ;var tz=C(()=>{g();GZ();TI();zZ=V({is($){return $.kind==="OverNode"},create(){return V({kind:"OverNode"})},cloneWithOrderByItems($,J){return V({...$,orderBy:$.orderBy?n5.cloneWithItems($.orderBy,J):n5.create(J)})},cloneWithPartitionByItems($,J){return V({...$,partitionBy:$.partitionBy?CI.cloneWithItems($.partitionBy,J):CI.create(J)})}})});var h7;var wZ=C(()=>{g();h7=V({is($){return $.kind==="FromNode"},create($){return V({kind:"FromNode",froms:V($)})},cloneWithFroms($,J){return V({...$,froms:V([...$.froms,...J])})}})});var qI;var hI=C(()=>{g();qI=V({is($){return $.kind==="GroupByNode"},create($){return V({kind:"GroupByNode",items:V($)})},cloneWithItems($,J){return V({...$,items:V([...$.items,...J])})}})});var xI;var bI=C(()=>{g();$J();T7();xI=V({is($){return $.kind==="HavingNode"},create($){return V({kind:"HavingNode",having:$})},cloneWithOperation($,J,W){return V({...$,having:J==="And"?u$.create($.having,W):D8.create($.having,W)})}})});var o1;var x7=C(()=>{g();o1=V({is($){return $.kind==="InsertQueryNode"},create($,J,W){return V({kind:"InsertQueryNode",into:$,...J&&{with:J},replace:W})},createWithoutInto(){return V({kind:"InsertQueryNode"})},cloneWith($,J){return V({...$,...J})}})});var az;var oz=C(()=>{g();az=V({is($){return $.kind==="ListNode"},create($){return V({kind:"ListNode",items:V($)})}})});var W5;var mX=C(()=>{g();wZ();oz();W5=V({is($){return $.kind==="UpdateQueryNode"},create($,J){return V({kind:"UpdateQueryNode",table:$.length===1?$[0]:az.create($),...J&&{with:J}})},createWithoutTable(){return V({kind:"UpdateQueryNode"})},cloneWithFromItems($,J){return V({...$,from:$.from?h7.cloneWithFroms($.from,J):h7.create(J)})},cloneWithUpdates($,J){return V({...$,updates:$.updates?V([...$.updates,...J]):J})},cloneWithLimit($,J){return V({...$,limit:J})}})});var gI;var fI=C(()=>{g();gI=V({is($){return $.kind==="UsingNode"},create($){return V({kind:"UsingNode",tables:V($)})},cloneWithTables($,J){return V({...$,tables:V([...$.tables,...J])})}})});var YJ;var DZ=C(()=>{g();wZ();fI();c6();YJ=V({is($){return $.kind==="DeleteQueryNode"},create($,J){return V({kind:"DeleteQueryNode",from:h7.create($),...J&&{with:J}})},cloneWithOrderByItems:($,J)=>J0.cloneWithOrderByItems($,J),cloneWithoutOrderBy:($)=>J0.cloneWithoutOrderBy($),cloneWithLimit($,J){return V({...$,limit:J})},cloneWithoutLimit($){return V({...$,limit:void 0})},cloneWithUsing($,J){return V({...$,using:$.using!==void 0?gI.cloneWithTables($.using,J):gI.create(J)})}})});var n4;var KZ=C(()=>{g();$J();T7();n4=V({is($){return $.kind==="WhereNode"},create($){return V({kind:"WhereNode",where:$})},cloneWithOperation($,J,W){return V({...$,where:J==="And"?u$.create($.where,W):D8.create($.where,W)})}})});var mI;var yI=C(()=>{g();mI=V({is($){return $.kind==="ReturningNode"},create($){return V({kind:"ReturningNode",selections:V($)})},cloneWithSelections($,J){return V({...$,selections:$.selections?V([...$.selections,...J]):V(J)})}})});var lq;var cI=C(()=>{g();lq=V({is($){return $.kind==="ExplainNode"},create($,J){return V({kind:"ExplainNode",format:$,options:J})}})});var u6;var b7=C(()=>{g();u6=V({is($){return $.kind==="WhenNode"},create($){return V({kind:"WhenNode",condition:$})},cloneWithResult($,J){return V({...$,result:J})}})});var V6;var OZ=C(()=>{g();b7();V6=V({is($){return $.kind==="MergeQueryNode"},create($,J){return V({kind:"MergeQueryNode",into:$,...J&&{with:J}})},cloneWithUsing($,J){return V({...$,using:J})},cloneWithWhen($,J){return V({...$,whens:$.whens?V([...$.whens,J]):V([J])})},cloneWithThen($,J){return V({...$,whens:$.whens?V([...$.whens.slice(0,-1),u6.cloneWithResult($.whens[$.whens.length-1],J)]):void 0})}})});var uI;var pI=C(()=>{g();uI=V({is($){return $.kind==="OutputNode"},create($){return V({kind:"OutputNode",selections:V($)})},cloneWithSelections($,J){return V({...$,selections:$.selections?V([...$.selections,...J]):V(J)})}})});var J0;var c6=C(()=>{x7();UJ();mX();DZ();KZ();g();yI();cI();OZ();pI();GZ();J0=V({is($){return s0.is($)||o1.is($)||W5.is($)||YJ.is($)||V6.is($)},cloneWithEndModifier($,J){return V({...$,endModifiers:$.endModifiers?V([...$.endModifiers,J]):V([J])})},cloneWithWhere($,J){return V({...$,where:$.where?n4.cloneWithOperation($.where,"And",J):n4.create(J)})},cloneWithJoin($,J){return V({...$,joins:$.joins?V([...$.joins,J]):V([J])})},cloneWithReturning($,J){return V({...$,returning:$.returning?mI.cloneWithSelections($.returning,J):mI.create(J)})},cloneWithoutReturning($){return V({...$,returning:void 0})},cloneWithoutWhere($){return V({...$,where:void 0})},cloneWithExplain($,J,W){return V({...$,explain:lq.create(J,W?.toOperationNode())})},cloneWithTop($,J){return V({...$,top:J})},cloneWithOutput($,J){return V({...$,output:$.output?uI.cloneWithSelections($.output,J):uI.create(J)})},cloneWithOrderByItems($,J){return V({...$,orderBy:$.orderBy?n5.cloneWithItems($.orderBy,J):n5.create(J)})},cloneWithoutOrderBy($){return V({...$,orderBy:void 0})}})});var s0;var UJ=C(()=>{g();wZ();hI();bI();c6();s0=V({is($){return $.kind==="SelectQueryNode"},create($){return V({kind:"SelectQueryNode",...$&&{with:$}})},createFrom($,J){return V({kind:"SelectQueryNode",from:h7.create($),...J&&{with:J}})},cloneWithSelections($,J){return V({...$,selections:$.selections?V([...$.selections,...J]):V(J)})},cloneWithDistinctOn($,J){return V({...$,distinctOn:$.distinctOn?V([...$.distinctOn,...J]):V(J)})},cloneWithFrontModifier($,J){return V({...$,frontModifiers:$.frontModifiers?V([...$.frontModifiers,J]):V([J])})},cloneWithOrderByItems:($,J)=>J0.cloneWithOrderByItems($,J),cloneWithGroupByItems($,J){return V({...$,groupBy:$.groupBy?qI.cloneWithItems($.groupBy,J):qI.create(J)})},cloneWithLimit($,J){return V({...$,limit:J})},cloneWithOffset($,J){return V({...$,offset:J})},cloneWithFetch($,J){return V({...$,fetch:J})},cloneWithHaving($,J){return V({...$,having:$.having?xI.cloneWithOperation($.having,"And",J):xI.create(J)})},cloneWithSetOperations($,J){return V({...$,setOperations:$.setOperations?V([...$.setOperations,...J]):V([...J])})},cloneWithoutSelections($){return V({...$,selections:[]})},cloneWithoutLimit($){return V({...$,limit:void 0})},cloneWithoutOffset($){return V({...$,offset:void 0})},cloneWithoutOrderBy:($)=>J0.cloneWithoutOrderBy($),cloneWithoutGroupBy($){return V({...$,groupBy:void 0})}})});class yX{#$;constructor($){this.#$=V($)}on(...$){return new yX({...this.#$,joinNode:K8.cloneWithOn(this.#$.joinNode,Q1($))})}onRef($,J,W){return new yX({...this.#$,joinNode:K8.cloneWithOn(this.#$.joinNode,T4($,J,W))})}onTrue(){return new yX({...this.#$,joinNode:K8.cloneWithOn(this.#$.joinNode,n0.createWithSql("true"))})}$call($){return $(this)}toOperationNode(){return this.#$.joinNode}}var dI=C(()=>{vX();y6();M6();g()});var rq;var lI=C(()=>{g();rq=V({is($){return $.kind==="PartitionByItemNode"},create($){return V({kind:"PartitionByItemNode",partitionBy:$})}})});function nq($){return r5($).map(rq.create)}var iq=C(()=>{lI();l4()});class cX{#$;constructor($){this.#$=V($)}orderBy(...$){return new cX({overNode:zZ.cloneWithOrderByItems(this.#$.overNode,F6($))})}clearOrderBy(){return new cX({overNode:J0.cloneWithoutOrderBy(this.#$.overNode)})}partitionBy($){return new cX({overNode:zZ.cloneWithPartitionByItems(this.#$.overNode,nq($))})}$call($){return $(this)}toOperationNode(){return this.#$.overNode}}var tq=C(()=>{tz();c6();q7();iq();g()});var uX;var rI=C(()=>{g();cz();XZ();uX=V({is($){return $.kind==="SelectionNode"},create($){return V({kind:"SelectionNode",selection:$})},createSelectAll(){return V({kind:"SelectionNode",selection:CX.create()})},createSelectAllFromTable($){return V({kind:"SelectionNode",selection:TX.createSelectAll($)})}})});function N4($){if(Y1($))return N4($(p6()));else if(v4($))return $.map((J)=>aq(J));else return[aq($)]}function aq($){if(X1($))return uX.create(cq($));else if(uz($))return uX.create($.toOperationNode());else return uX.create(sz($))}function q4($){if(!$)return[uX.createSelectAll()];else if(Array.isArray($))return $.map(oq);else return[oq($)]}function oq($){if(X1($))return uX.createSelectAllFromTable(i0($));throw Error(`invalid value selectAll expression: ${JSON.stringify($)}`)}var ZJ=C(()=>{g();rI();l4();YZ();E8();i4();HJ()});var sq;var nI=C(()=>{g();sq=V({is($){return $.kind==="ValuesNode"},create($){return V({kind:"ValuesNode",values:V($)})}})});var eq;var iI=C(()=>{g();eq=V({is($){return $.kind==="DefaultInsertValueNode"},create(){return V({kind:"DefaultInsertValueNode"})}})});function ez($){let J=Y1($)?$(p6()):$,W=v4(J)?J:V([J]);return v10(W)}function v10($){let J=C10($);return[V([...J.keys()].map(p0.create)),sq.create($.map((W)=>T10(W,J)))]}function C10($){let J=new Map;for(let W of $){let X=Object.keys(W);for(let Y of X)if(!J.has(Y)&&W[Y]!==void 0)J.set(Y,J.size)}return J}function T10($,J){let W=Object.keys($),X=Array.from({length:J.size}),Y=!1,U=W.length;for(let H of W){let G=J.get(H);if(A$(G)){U--;continue}let z=$[H];if(A$(z)||l5(z))Y=!0;X[G]=z}if(U<J.size||Y){let H=eq.create();return M8.create(X.map((G)=>A$(G)?H:K1(G)))}return bX.create(X)}var tI=C(()=>{G$();ZZ();XJ();g();J5();nI();E8();iI();HJ()});var aI;var oI=C(()=>{g();aI=V({is($){return $.kind==="ColumnUpdateNode"},create($,J){return V({kind:"ColumnUpdateNode",column:$,value:J})}})});function $h(...$){if($.length===2)return[aI.create(r4($[0]),K1($[1]))];return FZ($[0])}function FZ($){let J=Y1($)?$(p6()):$;return Object.entries(J).filter(([W,X])=>X!==void 0).map(([W,X])=>{return aI.create(p0.create(W),K1(X))})}var $w=C(()=>{G$();oI();HJ();g();J5();l4()});var Jh;var sI=C(()=>{g();Jh=V({is($){return $.kind==="OnDuplicateKeyNode"},create($){return V({kind:"OnDuplicateKeyNode",updates:$})}})});class eI{insertId;numInsertedOrUpdatedRows;constructor($,J){this.insertId=$,this.numInsertedOrUpdatedRows=J}}function X5($){return Object.prototype.hasOwnProperty.call($,"prototype")}var Q8;var g7=C(()=>{Q8=class Q8 extends Error{node;constructor($){super("no result");this.node=$}}});var L$;var Jw=C(()=>{g();KZ();L$=V({is($){return $.kind==="OnConflictNode"},create(){return V({kind:"OnConflictNode"})},cloneWith($,J){return V({...$,...J})},cloneWithIndexWhere($,J){return V({...$,indexWhere:$.indexWhere?n4.cloneWithOperation($.indexWhere,"And",J):n4.create(J)})},cloneWithIndexOrWhere($,J){return V({...$,indexWhere:$.indexWhere?n4.cloneWithOperation($.indexWhere,"Or",J):n4.create(J)})},cloneWithUpdateWhere($,J){return V({...$,updateWhere:$.updateWhere?n4.cloneWithOperation($.updateWhere,"And",J):n4.create(J)})},cloneWithUpdateOrWhere($,J){return V({...$,updateWhere:$.updateWhere?n4.cloneWithOperation($.updateWhere,"Or",J):n4.create(J)})},cloneWithoutIndexWhere($){return V({...$,indexWhere:void 0})},cloneWithoutUpdateWhere($){return V({...$,updateWhere:void 0})}})});class Y5{#$;constructor($){this.#$=V($)}column($){let J=p0.create($);return new Y5({...this.#$,onConflictNode:L$.cloneWith(this.#$.onConflictNode,{columns:this.#$.onConflictNode.columns?V([...this.#$.onConflictNode.columns,J]):V([J])})})}columns($){let J=$.map(p0.create);return new Y5({...this.#$,onConflictNode:L$.cloneWith(this.#$.onConflictNode,{columns:this.#$.onConflictNode.columns?V([...this.#$.onConflictNode.columns,...J]):V(J)})})}constraint($){return new Y5({...this.#$,onConflictNode:L$.cloneWith(this.#$.onConflictNode,{constraint:F0.create($)})})}expression($){return new Y5({...this.#$,onConflictNode:L$.cloneWith(this.#$.onConflictNode,{indexExpression:$.toOperationNode()})})}where(...$){return new Y5({...this.#$,onConflictNode:L$.cloneWithIndexWhere(this.#$.onConflictNode,Q1($))})}whereRef($,J,W){return new Y5({...this.#$,onConflictNode:L$.cloneWithIndexWhere(this.#$.onConflictNode,T4($,J,W))})}clearWhere(){return new Y5({...this.#$,onConflictNode:L$.cloneWithoutIndexWhere(this.#$.onConflictNode)})}doNothing(){return new Wh({...this.#$,onConflictNode:L$.cloneWith(this.#$.onConflictNode,{doNothing:!0})})}doUpdateSet($){return new EZ({...this.#$,onConflictNode:L$.cloneWith(this.#$.onConflictNode,{updates:FZ($)})})}$call($){return $(this)}}class Wh{#$;constructor($){this.#$=V($)}toOperationNode(){return this.#$.onConflictNode}}class EZ{#$;constructor($){this.#$=V($)}where(...$){return new EZ({...this.#$,onConflictNode:L$.cloneWithUpdateWhere(this.#$.onConflictNode,Q1($))})}whereRef($,J,W){return new EZ({...this.#$,onConflictNode:L$.cloneWithUpdateWhere(this.#$.onConflictNode,T4($,J,W))})}clearWhere(){return new EZ({...this.#$,onConflictNode:L$.cloneWithoutUpdateWhere(this.#$.onConflictNode)})}$call($){return $(this)}toOperationNode(){return this.#$.onConflictNode}}var $L=C(()=>{G$();V1();Jw();M6();$w();g()});var Xh;var JL=C(()=>{g();Xh=V({is($){return $.kind==="TopNode"},create($,J){return V({kind:"TopNode",expression:$,modifiers:J})}})});function A8($,J){if(!G8($)&&!s9($))throw Error(`Invalid top expression: ${$}`);if(!A$(J)&&!q10(J))throw Error(`Invalid top modifiers: ${J}`);return Xh.create($,J)}function q10($){return $==="percent"||$==="with ties"||$==="percent with ties"}var pX=C(()=>{JL();g()});var f7;var WL=C(()=>{g();f7=V({is($){return $.kind==="OrActionNode"},create($){return V({kind:"OrActionNode",action:$})}})});class O1{#$;constructor($){this.#$=V($)}values($){let[J,W]=ez($);return new O1({...this.#$,queryNode:o1.cloneWith(this.#$.queryNode,{columns:J,values:W})})}columns($){return new O1({...this.#$,queryNode:o1.cloneWith(this.#$.queryNode,{columns:V($.map(p0.create))})})}expression($){return new O1({...this.#$,queryNode:o1.cloneWith(this.#$.queryNode,{values:p$($)})})}defaultValues(){return new O1({...this.#$,queryNode:o1.cloneWith(this.#$.queryNode,{defaultValues:!0})})}modifyEnd($){return new O1({...this.#$,queryNode:J0.cloneWithEndModifier(this.#$.queryNode,$.toOperationNode())})}ignore(){return new O1({...this.#$,queryNode:o1.cloneWith(this.#$.queryNode,{orAction:f7.create("ignore")})})}orIgnore(){return new O1({...this.#$,queryNode:o1.cloneWith(this.#$.queryNode,{orAction:f7.create("ignore")})})}orAbort(){return new O1({...this.#$,queryNode:o1.cloneWith(this.#$.queryNode,{orAction:f7.create("abort")})})}orFail(){return new O1({...this.#$,queryNode:o1.cloneWith(this.#$.queryNode,{orAction:f7.create("fail")})})}orReplace(){return new O1({...this.#$,queryNode:o1.cloneWith(this.#$.queryNode,{orAction:f7.create("replace")})})}orRollback(){return new O1({...this.#$,queryNode:o1.cloneWith(this.#$.queryNode,{orAction:f7.create("rollback")})})}top($,J){return new O1({...this.#$,queryNode:J0.cloneWithTop(this.#$.queryNode,A8($,J))})}onConflict($){return new O1({...this.#$,queryNode:o1.cloneWith(this.#$.queryNode,{onConflict:$(new Y5({onConflictNode:L$.create()})).toOperationNode()})})}onDuplicateKeyUpdate($){return new O1({...this.#$,queryNode:o1.cloneWith(this.#$.queryNode,{onDuplicateKey:Jh.create(FZ($))})})}returning($){return new O1({...this.#$,queryNode:J0.cloneWithReturning(this.#$.queryNode,N4($))})}returningAll(){return new O1({...this.#$,queryNode:J0.cloneWithReturning(this.#$.queryNode,q4())})}output($){return new O1({...this.#$,queryNode:J0.cloneWithOutput(this.#$.queryNode,N4($))})}outputAll($){return new O1({...this.#$,queryNode:J0.cloneWithOutput(this.#$.queryNode,q4($))})}clearReturning(){return new O1({...this.#$,queryNode:J0.cloneWithoutReturning(this.#$.queryNode)})}$call($){return $(this)}$if($,J){if($)return J(this);return new O1({...this.#$})}$castTo(){return new O1(this.#$)}$narrowType(){return new O1(this.#$)}$assertType(){return new O1(this.#$)}withPlugin($){return new O1({...this.#$,executor:this.#$.executor.withPlugin($)})}toOperationNode(){return this.#$.executor.transformQuery(this.#$.queryNode,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){let $=this.compile(),J=await this.#$.executor.executeQuery($),{adapter:W}=this.#$.executor,X=$.query;if(X.returning&&W.supportsReturning||X.output&&W.supportsOutput)return J.rows;return[new eI(J.insertId,J.numAffectedRows??BigInt(0))]}async executeTakeFirst(){let[$]=await this.execute();return $}async executeTakeFirstOrThrow($=Q8){let J=await this.executeTakeFirst();if(J===void 0)throw X5($)?new $(this.toOperationNode()):$(this.toOperationNode());return J}async*stream($=100){let J=this.compile(),W=this.#$.executor.stream(J,$);for await(let X of W)yield*X.rows}async explain($,J){return await new O1({...this.#$,queryNode:J0.cloneWithExplain(this.#$.queryNode,$,J)}).execute()}}var XL=C(()=>{ZJ();tI();x7();c6();$w();g();sI();g7();E8();G$();$L();Jw();pX();WL()});class YL{numDeletedRows;constructor($){this.numDeletedRows=$}}var dX;var MZ=C(()=>{g();dX=V({is($){return $.kind==="LimitNode"},create($){return V({kind:"LimitNode",limit:$})}})});class x1{#$;constructor($){this.#$=V($)}where(...$){return new x1({...this.#$,queryNode:J0.cloneWithWhere(this.#$.queryNode,Q1($))})}whereRef($,J,W){return new x1({...this.#$,queryNode:J0.cloneWithWhere(this.#$.queryNode,T4($,J,W))})}clearWhere(){return new x1({...this.#$,queryNode:J0.cloneWithoutWhere(this.#$.queryNode)})}top($,J){return new x1({...this.#$,queryNode:J0.cloneWithTop(this.#$.queryNode,A8($,J))})}using($){return new x1({...this.#$,queryNode:YJ.cloneWithUsing(this.#$.queryNode,I8($))})}innerJoin(...$){return this.#J("InnerJoin",$)}leftJoin(...$){return this.#J("LeftJoin",$)}rightJoin(...$){return this.#J("RightJoin",$)}fullJoin(...$){return this.#J("FullJoin",$)}#J($,J){return new x1({...this.#$,queryNode:J0.cloneWithJoin(this.#$.queryNode,GJ($,J))})}returning($){return new x1({...this.#$,queryNode:J0.cloneWithReturning(this.#$.queryNode,N4($))})}returningAll($){return new x1({...this.#$,queryNode:J0.cloneWithReturning(this.#$.queryNode,q4($))})}output($){return new x1({...this.#$,queryNode:J0.cloneWithOutput(this.#$.queryNode,N4($))})}outputAll($){return new x1({...this.#$,queryNode:J0.cloneWithOutput(this.#$.queryNode,q4($))})}clearReturning(){return new x1({...this.#$,queryNode:J0.cloneWithoutReturning(this.#$.queryNode)})}clearLimit(){return new x1({...this.#$,queryNode:YJ.cloneWithoutLimit(this.#$.queryNode)})}orderBy(...$){return new x1({...this.#$,queryNode:J0.cloneWithOrderByItems(this.#$.queryNode,F6($))})}clearOrderBy(){return new x1({...this.#$,queryNode:J0.cloneWithoutOrderBy(this.#$.queryNode)})}limit($){return new x1({...this.#$,queryNode:YJ.cloneWithLimit(this.#$.queryNode,dX.create(K1($)))})}modifyEnd($){return new x1({...this.#$,queryNode:J0.cloneWithEndModifier(this.#$.queryNode,$.toOperationNode())})}$call($){return $(this)}$if($,J){if($)return J(this);return new x1({...this.#$})}$castTo(){return new x1(this.#$)}$narrowType(){return new x1(this.#$)}$assertType(){return new x1(this.#$)}withPlugin($){return new x1({...this.#$,executor:this.#$.executor.withPlugin($)})}toOperationNode(){return this.#$.executor.transformQuery(this.#$.queryNode,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){let $=this.compile(),J=await this.#$.executor.executeQuery($),{adapter:W}=this.#$.executor,X=$.query;if(X.returning&&W.supportsReturning||X.output&&W.supportsOutput)return J.rows;return[new YL(J.numAffectedRows??BigInt(0))]}async executeTakeFirst(){let[$]=await this.execute();return $}async executeTakeFirstOrThrow($=Q8){let J=await this.executeTakeFirst();if(J===void 0)throw X5($)?new $(this.toOperationNode()):$(this.toOperationNode());return J}async*stream($=100){let J=this.compile(),W=this.#$.executor.stream(J,$);for await(let X of W)yield*X.rows}async explain($,J){return await new x1({...this.#$,queryNode:J0.cloneWithExplain(this.#$.queryNode,$,J)}).execute()}}var UL=C(()=>{VZ();i4();ZJ();c6();g();g7();DZ();MZ();q7();M6();J5();pX()});class ZL{numUpdatedRows;numChangedRows;constructor($,J){this.numUpdatedRows=$,this.numChangedRows=J}}class N1{#$;constructor($){this.#$=V($)}where(...$){return new N1({...this.#$,queryNode:J0.cloneWithWhere(this.#$.queryNode,Q1($))})}whereRef($,J,W){return new N1({...this.#$,queryNode:J0.cloneWithWhere(this.#$.queryNode,T4($,J,W))})}clearWhere(){return new N1({...this.#$,queryNode:J0.cloneWithoutWhere(this.#$.queryNode)})}top($,J){return new N1({...this.#$,queryNode:J0.cloneWithTop(this.#$.queryNode,A8($,J))})}from($){return new N1({...this.#$,queryNode:W5.cloneWithFromItems(this.#$.queryNode,I8($))})}innerJoin(...$){return this.#J("InnerJoin",$)}leftJoin(...$){return this.#J("LeftJoin",$)}rightJoin(...$){return this.#J("RightJoin",$)}fullJoin(...$){return this.#J("FullJoin",$)}#J($,J){return new N1({...this.#$,queryNode:J0.cloneWithJoin(this.#$.queryNode,GJ($,J))})}orderBy(...$){return new N1({...this.#$,queryNode:J0.cloneWithOrderByItems(this.#$.queryNode,F6($))})}clearOrderBy(){return new N1({...this.#$,queryNode:J0.cloneWithoutOrderBy(this.#$.queryNode)})}limit($){return new N1({...this.#$,queryNode:W5.cloneWithLimit(this.#$.queryNode,dX.create(K1($)))})}set(...$){return new N1({...this.#$,queryNode:W5.cloneWithUpdates(this.#$.queryNode,$h(...$))})}returning($){return new N1({...this.#$,queryNode:J0.cloneWithReturning(this.#$.queryNode,N4($))})}returningAll($){return new N1({...this.#$,queryNode:J0.cloneWithReturning(this.#$.queryNode,q4($))})}output($){return new N1({...this.#$,queryNode:J0.cloneWithOutput(this.#$.queryNode,N4($))})}outputAll($){return new N1({...this.#$,queryNode:J0.cloneWithOutput(this.#$.queryNode,q4($))})}modifyEnd($){return new N1({...this.#$,queryNode:J0.cloneWithEndModifier(this.#$.queryNode,$.toOperationNode())})}clearReturning(){return new N1({...this.#$,queryNode:J0.cloneWithoutReturning(this.#$.queryNode)})}$call($){return $(this)}$if($,J){if($)return J(this);return new N1({...this.#$})}$castTo(){return new N1(this.#$)}$narrowType(){return new N1(this.#$)}$assertType(){return new N1(this.#$)}withPlugin($){return new N1({...this.#$,executor:this.#$.executor.withPlugin($)})}toOperationNode(){return this.#$.executor.transformQuery(this.#$.queryNode,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){let $=this.compile(),J=await this.#$.executor.executeQuery($),{adapter:W}=this.#$.executor,X=$.query;if(X.returning&&W.supportsReturning||X.output&&W.supportsOutput)return J.rows;return[new ZL(J.numAffectedRows??BigInt(0),J.numChangedRows)]}async executeTakeFirst(){let[$]=await this.execute();return $}async executeTakeFirstOrThrow($=Q8){let J=await this.executeTakeFirst();if(J===void 0)throw X5($)?new $(this.toOperationNode()):$(this.toOperationNode());return J}async*stream($=100){let J=this.compile(),W=this.#$.executor.stream(J,$);for await(let X of W)yield*X.rows}async explain($,J){return await new N1({...this.#$,queryNode:J0.cloneWithExplain(this.#$.queryNode,$,J)}).execute()}}var Ww=C(()=>{VZ();i4();ZJ();c6();mX();$w();g();g7();M6();J5();MZ();pX();q7()});var HL;var GL=C(()=>{g();G$();kX();HL=V({is($){return $.kind==="CommonTableExpressionNameNode"},create($,J){return V({kind:"CommonTableExpressionNameNode",table:K6.create($),columns:J?V(J.map(p0.create)):void 0})}})});var lX;var Xw=C(()=>{g();lX=V({is($){return $.kind==="CommonTableExpressionNode"},create($,J){return V({kind:"CommonTableExpressionNode",name:$,expression:J})},cloneWith($,J){return V({...$,...J})}})});class QZ{#$;constructor($){this.#$=V($)}materialized(){return new QZ({...this.#$,node:lX.cloneWith(this.#$.node,{materialized:!0})})}notMaterialized(){return new QZ({...this.#$,node:lX.cloneWith(this.#$.node,{materialized:!1})})}toOperationNode(){return this.#$.node}}var Yh=C(()=>{Xw();g()});function zL($,J){let W=J(Hh()).toOperationNode();if(Y1($))return $(h10(W)).toOperationNode();return lX.create(Uh($),W)}function h10($){return(J)=>{return new QZ({node:lX.create(Uh(J),$)})}}function Uh($){if($.includes("(")){let J=$.split(/[\(\)]/),W=J[0],X=J[1].split(",").map((Y)=>Y.trim());return HL.create(W,X)}else return HL.create($)}var Zh=C(()=>{GL();Yw();g();Yh();Xw()});var AZ;var wL=C(()=>{g();AZ=V({is($){return $.kind==="WithNode"},create($,J){return V({kind:"WithNode",expressions:V([$]),...J})},cloneWithExpression($,J){return V({...$,expressions:V([...$.expressions,J])})}})});function Uw($){let J="";for(let W=0;W<$;++W)J+=x10();return J}function x10(){return Gh[~~(Math.random()*Gh.length)]}var Gh;var DL=C(()=>{Gh=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"]});function P0(){return new zh}class zh{#$;get queryId(){if(this.#$===void 0)this.#$=Uw(8);return this.#$}}var d6=C(()=>{DL()});function e($){return $}class L8{nodeStack=[];#$=V({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),RenameConstraintNode:this.transformRenameConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),RefreshMaterializedViewNode:this.transformRefreshMaterializedView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),MergeQueryNode:this.transformMergeQuery.bind(this),MatchedNode:this.transformMatched.bind(this),AddIndexNode:this.transformAddIndex.bind(this),CastNode:this.transformCast.bind(this),FetchNode:this.transformFetch.bind(this),TopNode:this.transformTop.bind(this),OutputNode:this.transformOutput.bind(this),OrActionNode:this.transformOrAction.bind(this),CollateNode:this.transformCollate.bind(this)});transformNode($,J){if(!$)return $;this.nodeStack.push($);let W=this.transformNodeImpl($,J);return this.nodeStack.pop(),V(W)}transformNodeImpl($,J){return this.#$[$.kind]($,J)}transformNodeList($,J){if(!$)return $;return V($.map((W)=>this.transformNode(W,J)))}transformSelectQuery($,J){return e({kind:"SelectQueryNode",from:this.transformNode($.from,J),selections:this.transformNodeList($.selections,J),distinctOn:this.transformNodeList($.distinctOn,J),joins:this.transformNodeList($.joins,J),groupBy:this.transformNode($.groupBy,J),orderBy:this.transformNode($.orderBy,J),where:this.transformNode($.where,J),frontModifiers:this.transformNodeList($.frontModifiers,J),endModifiers:this.transformNodeList($.endModifiers,J),limit:this.transformNode($.limit,J),offset:this.transformNode($.offset,J),with:this.transformNode($.with,J),having:this.transformNode($.having,J),explain:this.transformNode($.explain,J),setOperations:this.transformNodeList($.setOperations,J),fetch:this.transformNode($.fetch,J),top:this.transformNode($.top,J)})}transformSelection($,J){return e({kind:"SelectionNode",selection:this.transformNode($.selection,J)})}transformColumn($,J){return e({kind:"ColumnNode",column:this.transformNode($.column,J)})}transformAlias($,J){return e({kind:"AliasNode",node:this.transformNode($.node,J),alias:this.transformNode($.alias,J)})}transformTable($,J){return e({kind:"TableNode",table:this.transformNode($.table,J)})}transformFrom($,J){return e({kind:"FromNode",froms:this.transformNodeList($.froms,J)})}transformReference($,J){return e({kind:"ReferenceNode",column:this.transformNode($.column,J),table:this.transformNode($.table,J)})}transformAnd($,J){return e({kind:"AndNode",left:this.transformNode($.left,J),right:this.transformNode($.right,J)})}transformOr($,J){return e({kind:"OrNode",left:this.transformNode($.left,J),right:this.transformNode($.right,J)})}transformValueList($,J){return e({kind:"ValueListNode",values:this.transformNodeList($.values,J)})}transformParens($,J){return e({kind:"ParensNode",node:this.transformNode($.node,J)})}transformJoin($,J){return e({kind:"JoinNode",joinType:$.joinType,table:this.transformNode($.table,J),on:this.transformNode($.on,J)})}transformRaw($,J){return e({kind:"RawNode",sqlFragments:V([...$.sqlFragments]),parameters:this.transformNodeList($.parameters,J)})}transformWhere($,J){return e({kind:"WhereNode",where:this.transformNode($.where,J)})}transformInsertQuery($,J){return e({kind:"InsertQueryNode",into:this.transformNode($.into,J),columns:this.transformNodeList($.columns,J),values:this.transformNode($.values,J),returning:this.transformNode($.returning,J),onConflict:this.transformNode($.onConflict,J),onDuplicateKey:this.transformNode($.onDuplicateKey,J),endModifiers:this.transformNodeList($.endModifiers,J),with:this.transformNode($.with,J),ignore:$.ignore,orAction:this.transformNode($.orAction,J),replace:$.replace,explain:this.transformNode($.explain,J),defaultValues:$.defaultValues,top:this.transformNode($.top,J),output:this.transformNode($.output,J)})}transformValues($,J){return e({kind:"ValuesNode",values:this.transformNodeList($.values,J)})}transformDeleteQuery($,J){return e({kind:"DeleteQueryNode",from:this.transformNode($.from,J),using:this.transformNode($.using,J),joins:this.transformNodeList($.joins,J),where:this.transformNode($.where,J),returning:this.transformNode($.returning,J),endModifiers:this.transformNodeList($.endModifiers,J),with:this.transformNode($.with,J),orderBy:this.transformNode($.orderBy,J),limit:this.transformNode($.limit,J),explain:this.transformNode($.explain,J),top:this.transformNode($.top,J),output:this.transformNode($.output,J)})}transformReturning($,J){return e({kind:"ReturningNode",selections:this.transformNodeList($.selections,J)})}transformCreateTable($,J){return e({kind:"CreateTableNode",table:this.transformNode($.table,J),columns:this.transformNodeList($.columns,J),constraints:this.transformNodeList($.constraints,J),temporary:$.temporary,ifNotExists:$.ifNotExists,onCommit:$.onCommit,frontModifiers:this.transformNodeList($.frontModifiers,J),endModifiers:this.transformNodeList($.endModifiers,J),selectQuery:this.transformNode($.selectQuery,J)})}transformColumnDefinition($,J){return e({kind:"ColumnDefinitionNode",column:this.transformNode($.column,J),dataType:this.transformNode($.dataType,J),references:this.transformNode($.references,J),primaryKey:$.primaryKey,autoIncrement:$.autoIncrement,unique:$.unique,notNull:$.notNull,unsigned:$.unsigned,defaultTo:this.transformNode($.defaultTo,J),check:this.transformNode($.check,J),generated:this.transformNode($.generated,J),frontModifiers:this.transformNodeList($.frontModifiers,J),endModifiers:this.transformNodeList($.endModifiers,J),nullsNotDistinct:$.nullsNotDistinct,identity:$.identity,ifNotExists:$.ifNotExists})}transformAddColumn($,J){return e({kind:"AddColumnNode",column:this.transformNode($.column,J)})}transformDropTable($,J){return e({kind:"DropTableNode",table:this.transformNode($.table,J),ifExists:$.ifExists,cascade:$.cascade})}transformOrderBy($,J){return e({kind:"OrderByNode",items:this.transformNodeList($.items,J)})}transformOrderByItem($,J){return e({kind:"OrderByItemNode",orderBy:this.transformNode($.orderBy,J),direction:this.transformNode($.direction,J),collation:this.transformNode($.collation,J),nulls:$.nulls})}transformGroupBy($,J){return e({kind:"GroupByNode",items:this.transformNodeList($.items,J)})}transformGroupByItem($,J){return e({kind:"GroupByItemNode",groupBy:this.transformNode($.groupBy,J)})}transformUpdateQuery($,J){return e({kind:"UpdateQueryNode",table:this.transformNode($.table,J),from:this.transformNode($.from,J),joins:this.transformNodeList($.joins,J),where:this.transformNode($.where,J),updates:this.transformNodeList($.updates,J),returning:this.transformNode($.returning,J),endModifiers:this.transformNodeList($.endModifiers,J),with:this.transformNode($.with,J),explain:this.transformNode($.explain,J),limit:this.transformNode($.limit,J),top:this.transformNode($.top,J),output:this.transformNode($.output,J),orderBy:this.transformNode($.orderBy,J)})}transformColumnUpdate($,J){return e({kind:"ColumnUpdateNode",column:this.transformNode($.column,J),value:this.transformNode($.value,J)})}transformLimit($,J){return e({kind:"LimitNode",limit:this.transformNode($.limit,J)})}transformOffset($,J){return e({kind:"OffsetNode",offset:this.transformNode($.offset,J)})}transformOnConflict($,J){return e({kind:"OnConflictNode",columns:this.transformNodeList($.columns,J),constraint:this.transformNode($.constraint,J),indexExpression:this.transformNode($.indexExpression,J),indexWhere:this.transformNode($.indexWhere,J),updates:this.transformNodeList($.updates,J),updateWhere:this.transformNode($.updateWhere,J),doNothing:$.doNothing})}transformOnDuplicateKey($,J){return e({kind:"OnDuplicateKeyNode",updates:this.transformNodeList($.updates,J)})}transformCreateIndex($,J){return e({kind:"CreateIndexNode",name:this.transformNode($.name,J),table:this.transformNode($.table,J),columns:this.transformNodeList($.columns,J),unique:$.unique,using:this.transformNode($.using,J),ifNotExists:$.ifNotExists,where:this.transformNode($.where,J),nullsNotDistinct:$.nullsNotDistinct})}transformList($,J){return e({kind:"ListNode",items:this.transformNodeList($.items,J)})}transformDropIndex($,J){return e({kind:"DropIndexNode",name:this.transformNode($.name,J),table:this.transformNode($.table,J),ifExists:$.ifExists,cascade:$.cascade})}transformPrimaryKeyConstraint($,J){return e({kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList($.columns,J),name:this.transformNode($.name,J),deferrable:$.deferrable,initiallyDeferred:$.initiallyDeferred})}transformUniqueConstraint($,J){return e({kind:"UniqueConstraintNode",columns:this.transformNodeList($.columns,J),name:this.transformNode($.name,J),nullsNotDistinct:$.nullsNotDistinct,deferrable:$.deferrable,initiallyDeferred:$.initiallyDeferred})}transformForeignKeyConstraint($,J){return e({kind:"ForeignKeyConstraintNode",columns:this.transformNodeList($.columns,J),references:this.transformNode($.references,J),name:this.transformNode($.name,J),onDelete:$.onDelete,onUpdate:$.onUpdate,deferrable:$.deferrable,initiallyDeferred:$.initiallyDeferred})}transformSetOperation($,J){return e({kind:"SetOperationNode",operator:$.operator,expression:this.transformNode($.expression,J),all:$.all})}transformReferences($,J){return e({kind:"ReferencesNode",table:this.transformNode($.table,J),columns:this.transformNodeList($.columns,J),onDelete:$.onDelete,onUpdate:$.onUpdate})}transformCheckConstraint($,J){return e({kind:"CheckConstraintNode",expression:this.transformNode($.expression,J),name:this.transformNode($.name,J)})}transformWith($,J){return e({kind:"WithNode",expressions:this.transformNodeList($.expressions,J),recursive:$.recursive})}transformCommonTableExpression($,J){return e({kind:"CommonTableExpressionNode",name:this.transformNode($.name,J),materialized:$.materialized,expression:this.transformNode($.expression,J)})}transformCommonTableExpressionName($,J){return e({kind:"CommonTableExpressionNameNode",table:this.transformNode($.table,J),columns:this.transformNodeList($.columns,J)})}transformHaving($,J){return e({kind:"HavingNode",having:this.transformNode($.having,J)})}transformCreateSchema($,J){return e({kind:"CreateSchemaNode",schema:this.transformNode($.schema,J),ifNotExists:$.ifNotExists})}transformDropSchema($,J){return e({kind:"DropSchemaNode",schema:this.transformNode($.schema,J),ifExists:$.ifExists,cascade:$.cascade})}transformAlterTable($,J){return e({kind:"AlterTableNode",table:this.transformNode($.table,J),renameTo:this.transformNode($.renameTo,J),setSchema:this.transformNode($.setSchema,J),columnAlterations:this.transformNodeList($.columnAlterations,J),addConstraint:this.transformNode($.addConstraint,J),dropConstraint:this.transformNode($.dropConstraint,J),renameConstraint:this.transformNode($.renameConstraint,J),addIndex:this.transformNode($.addIndex,J),dropIndex:this.transformNode($.dropIndex,J)})}transformDropColumn($,J){return e({kind:"DropColumnNode",column:this.transformNode($.column,J)})}transformRenameColumn($,J){return e({kind:"RenameColumnNode",column:this.transformNode($.column,J),renameTo:this.transformNode($.renameTo,J)})}transformAlterColumn($,J){return e({kind:"AlterColumnNode",column:this.transformNode($.column,J),dataType:this.transformNode($.dataType,J),dataTypeExpression:this.transformNode($.dataTypeExpression,J),setDefault:this.transformNode($.setDefault,J),dropDefault:$.dropDefault,setNotNull:$.setNotNull,dropNotNull:$.dropNotNull})}transformModifyColumn($,J){return e({kind:"ModifyColumnNode",column:this.transformNode($.column,J)})}transformAddConstraint($,J){return e({kind:"AddConstraintNode",constraint:this.transformNode($.constraint,J)})}transformDropConstraint($,J){return e({kind:"DropConstraintNode",constraintName:this.transformNode($.constraintName,J),ifExists:$.ifExists,modifier:$.modifier})}transformRenameConstraint($,J){return e({kind:"RenameConstraintNode",oldName:this.transformNode($.oldName,J),newName:this.transformNode($.newName,J)})}transformCreateView($,J){return e({kind:"CreateViewNode",name:this.transformNode($.name,J),temporary:$.temporary,orReplace:$.orReplace,ifNotExists:$.ifNotExists,materialized:$.materialized,columns:this.transformNodeList($.columns,J),as:this.transformNode($.as,J)})}transformRefreshMaterializedView($,J){return e({kind:"RefreshMaterializedViewNode",name:this.transformNode($.name,J),concurrently:$.concurrently,withNoData:$.withNoData})}transformDropView($,J){return e({kind:"DropViewNode",name:this.transformNode($.name,J),ifExists:$.ifExists,materialized:$.materialized,cascade:$.cascade})}transformGenerated($,J){return e({kind:"GeneratedNode",byDefault:$.byDefault,always:$.always,identity:$.identity,stored:$.stored,expression:this.transformNode($.expression,J)})}transformDefaultValue($,J){return e({kind:"DefaultValueNode",defaultValue:this.transformNode($.defaultValue,J)})}transformOn($,J){return e({kind:"OnNode",on:this.transformNode($.on,J)})}transformSelectModifier($,J){return e({kind:"SelectModifierNode",modifier:$.modifier,rawModifier:this.transformNode($.rawModifier,J),of:this.transformNodeList($.of,J)})}transformCreateType($,J){return e({kind:"CreateTypeNode",name:this.transformNode($.name,J),enum:this.transformNode($.enum,J)})}transformDropType($,J){return e({kind:"DropTypeNode",name:this.transformNode($.name,J),ifExists:$.ifExists})}transformExplain($,J){return e({kind:"ExplainNode",format:$.format,options:this.transformNode($.options,J)})}transformSchemableIdentifier($,J){return e({kind:"SchemableIdentifierNode",schema:this.transformNode($.schema,J),identifier:this.transformNode($.identifier,J)})}transformAggregateFunction($,J){return e({kind:"AggregateFunctionNode",func:$.func,aggregated:this.transformNodeList($.aggregated,J),distinct:$.distinct,orderBy:this.transformNode($.orderBy,J),withinGroup:this.transformNode($.withinGroup,J),filter:this.transformNode($.filter,J),over:this.transformNode($.over,J)})}transformOver($,J){return e({kind:"OverNode",orderBy:this.transformNode($.orderBy,J),partitionBy:this.transformNode($.partitionBy,J)})}transformPartitionBy($,J){return e({kind:"PartitionByNode",items:this.transformNodeList($.items,J)})}transformPartitionByItem($,J){return e({kind:"PartitionByItemNode",partitionBy:this.transformNode($.partitionBy,J)})}transformBinaryOperation($,J){return e({kind:"BinaryOperationNode",leftOperand:this.transformNode($.leftOperand,J),operator:this.transformNode($.operator,J),rightOperand:this.transformNode($.rightOperand,J)})}transformUnaryOperation($,J){return e({kind:"UnaryOperationNode",operator:this.transformNode($.operator,J),operand:this.transformNode($.operand,J)})}transformUsing($,J){return e({kind:"UsingNode",tables:this.transformNodeList($.tables,J)})}transformFunction($,J){return e({kind:"FunctionNode",func:$.func,arguments:this.transformNodeList($.arguments,J)})}transformCase($,J){return e({kind:"CaseNode",value:this.transformNode($.value,J),when:this.transformNodeList($.when,J),else:this.transformNode($.else,J),isStatement:$.isStatement})}transformWhen($,J){return e({kind:"WhenNode",condition:this.transformNode($.condition,J),result:this.transformNode($.result,J)})}transformJSONReference($,J){return e({kind:"JSONReferenceNode",reference:this.transformNode($.reference,J),traversal:this.transformNode($.traversal,J)})}transformJSONPath($,J){return e({kind:"JSONPathNode",inOperator:this.transformNode($.inOperator,J),pathLegs:this.transformNodeList($.pathLegs,J)})}transformJSONPathLeg($,J){return e({kind:"JSONPathLegNode",type:$.type,value:$.value})}transformJSONOperatorChain($,J){return e({kind:"JSONOperatorChainNode",operator:this.transformNode($.operator,J),values:this.transformNodeList($.values,J)})}transformTuple($,J){return e({kind:"TupleNode",values:this.transformNodeList($.values,J)})}transformMergeQuery($,J){return e({kind:"MergeQueryNode",into:this.transformNode($.into,J),using:this.transformNode($.using,J),whens:this.transformNodeList($.whens,J),with:this.transformNode($.with,J),top:this.transformNode($.top,J),endModifiers:this.transformNodeList($.endModifiers,J),output:this.transformNode($.output,J),returning:this.transformNode($.returning,J)})}transformMatched($,J){return e({kind:"MatchedNode",not:$.not,bySource:$.bySource})}transformAddIndex($,J){return e({kind:"AddIndexNode",name:this.transformNode($.name,J),columns:this.transformNodeList($.columns,J),unique:$.unique,using:this.transformNode($.using,J),ifNotExists:$.ifNotExists})}transformCast($,J){return e({kind:"CastNode",expression:this.transformNode($.expression,J),dataType:this.transformNode($.dataType,J)})}transformFetch($,J){return e({kind:"FetchNode",rowCount:this.transformNode($.rowCount,J),modifier:$.modifier})}transformTop($,J){return e({kind:"TopNode",expression:$.expression,modifiers:$.modifiers})}transformOutput($,J){return e({kind:"OutputNode",selections:this.transformNodeList($.selections,J)})}transformDataType($,J){return $}transformSelectAll($,J){return $}transformIdentifier($,J){return $}transformValue($,J){return $}transformPrimitiveValueList($,J){return $}transformOperator($,J){return $}transformDefaultInsertValue($,J){return $}transformOrAction($,J){return $}transformCollate($,J){return $}}var m7=C(()=>{g()});var b10,g10,KL;var wh=C(()=>{w8();V1();vX();oz();m7();u5();kX();g();b10=V({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,RefreshMaterializedViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0,MergeQueryNode:!0}),g10={json_agg:!0,to_json:!0};KL=class KL extends L8{#$;#J=new Set;#W=new Set;constructor($){super();this.#$=$}transformNodeImpl($,J){if(!this.#Y($))return super.transformNodeImpl($,J);let W=this.#H($);for(let U of W)this.#W.add(U);let X=this.#Z($);for(let U of X)this.#J.add(U);let Y=super.transformNodeImpl($,J);for(let U of X)this.#J.delete(U);for(let U of W)this.#W.delete(U);return Y}transformSchemableIdentifier($,J){let W=super.transformSchemableIdentifier($,J);if(W.schema||!this.#J.has($.identifier.name))return W;return{...W,schema:F0.create(this.#$)}}transformReferences($,J){let W=super.transformReferences($,J);if(W.table.table.schema)return W;return{...W,table:K6.createWithSchema(this.#$,W.table.table.identifier.name)}}transformAggregateFunction($,J){return{...super.transformAggregateFunction({...$,aggregated:[]},J),aggregated:this.#X($,J,"aggregated")}}transformFunction($,J){return{...super.transformFunction({...$,arguments:[]},J),arguments:this.#X($,J,"arguments")}}#X($,J,W){return g10[$.func]?$[W].map((X)=>!K6.is(X)||X.table.schema?this.transformNode(X,J):{...X,table:this.transformIdentifier(X.table.identifier,J)}):this.transformNodeList($[W],J)}#Y($){return $.kind in b10}#Z($){let J=new Set;if("name"in $&&$.name&&Z$.is($.name))this.#z($.name,J);if("from"in $&&$.from)for(let W of $.from.froms)this.#w(W,J);if("into"in $&&$.into)this.#w($.into,J);if("table"in $&&$.table)this.#w($.table,J);if("joins"in $&&$.joins)for(let W of $.joins)this.#w(W.table,J);if("using"in $&&$.using)if(K8.is($.using))this.#w($.using.table,J);else this.#w($.using,J);return J}#H($){let J=new Set;if("with"in $&&$.with)this.#G($.with,J);return J}#w($,J){if(K6.is($))this.#z($.table,J);else if(C4.is($)&&K6.is($.node))this.#z($.node.table,J);else if(az.is($))for(let W of $.items)this.#w(W,J)}#z($,J){let W=$.identifier.name;if(!this.#J.has(W)&&!this.#W.has(W))J.add(W)}#G($,J){for(let W of $.expressions){let X=W.name.table.table.identifier.name;if(!this.#W.has(X))J.add(X)}}}});class Q6{#$;constructor($){this.#$=new KL($)}transformQuery($){return this.#$.transformNode($.node,$.queryId)}async transformResult($){return $.result}}var y7=C(()=>{wh()});var Dh;var OL=C(()=>{g();Dh=V({is($){return $.kind==="MatchedNode"},create($,J=!1){return V({kind:"MatchedNode",not:$,bySource:J})}})});function FL($,J,W){return u6.create(fX([Dh.create(!$.isMatched,$.bySource),...J&&J.length>0?[J.length===3&&W?T4(J[0],J[1],J[2]):Q1(J)]:[]],"and",!1))}function rX($){if(X1($))return n0.create([$],[]);if(_1($))return $.toOperationNode();return $}var Kh=C(()=>{OL();c$();y6();b7();g();M6()});class zJ{#$;#J;#W;constructor(){this.#$=new Promise(($,J)=>{this.#W=J,this.#J=$})}get promise(){return this.#$}resolve=($)=>{if(this.#J)this.#J($)};reject=($)=>{if(this.#W)this.#W($)}}async function Zw($){let J=new zJ,W=new zJ;return $.provideConnection(async(X)=>{return J.resolve(X),await W.promise}).catch((X)=>J.reject(X)),V({connection:await J.promise,release:W.resolve})}var EL=C(()=>{g()});class IZ{#$;constructor($=f10){this.#$=$}get plugins(){return this.#$}transformQuery($,J){for(let W of this.#$){let X=W.transformQuery({node:$,queryId:J});if(X.kind===$.kind)$=X;else throw Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${$.kind}`,`but it returned a ${X.kind}`].join(" "))}return $}async executeQuery($){return await this.provideConnection(async(J)=>{let W=await J.executeQuery($);if("numUpdatedOrDeletedRows"in W)F8("kysely:warning: outdated driver/plugin detected! `QueryResult.numUpdatedOrDeletedRows` has been replaced with `QueryResult.numAffectedRows`.");return await this.#J(W,$.queryId)})}async*stream($,J){let{connection:W,release:X}=await Zw(this);try{for await(let Y of W.streamQuery($,J))yield await this.#J(Y,$.queryId)}finally{X()}}async#J($,J){for(let W of this.#$)$=await W.transformResult({result:$,queryId:J});return $}}var f10;var ML=C(()=>{g();EL();qX();f10=V([])});var nX,wJ;var iX=C(()=>{ML();nX=class nX extends IZ{get adapter(){throw Error("this query cannot be compiled to SQL")}compileQuery(){throw Error("this query cannot be compiled to SQL")}provideConnection(){throw Error("this query cannot be executed")}withConnectionProvider(){throw Error("this query cannot have a connection provider")}withPlugin($){return new nX([...this.plugins,$])}withPlugins($){return new nX([...this.plugins,...$])}withPluginAtFront($){return new nX([$,...this.plugins])}withoutPlugins(){return new nX([])}};wJ=new nX});class VL{numChangedRows;constructor($){this.numChangedRows=$}}class i5{#$;constructor($){this.#$=V($)}modifyEnd($){return new i5({...this.#$,queryNode:J0.cloneWithEndModifier(this.#$.queryNode,$.toOperationNode())})}top($,J){return new i5({...this.#$,queryNode:J0.cloneWithTop(this.#$.queryNode,A8($,J))})}using(...$){return new d$({...this.#$,queryNode:V6.cloneWithUsing(this.#$.queryNode,GJ("Using",$))})}returning($){return new i5({...this.#$,queryNode:J0.cloneWithReturning(this.#$.queryNode,N4($))})}returningAll($){return new i5({...this.#$,queryNode:J0.cloneWithReturning(this.#$.queryNode,q4($))})}output($){return new i5({...this.#$,queryNode:J0.cloneWithOutput(this.#$.queryNode,N4($))})}outputAll($){return new i5({...this.#$,queryNode:J0.cloneWithOutput(this.#$.queryNode,q4($))})}}class d${#$;constructor($){this.#$=V($)}modifyEnd($){return new d$({...this.#$,queryNode:J0.cloneWithEndModifier(this.#$.queryNode,$.toOperationNode())})}top($,J){return new d$({...this.#$,queryNode:J0.cloneWithTop(this.#$.queryNode,A8($,J))})}whenMatched(){return this.#J([])}whenMatchedAnd(...$){return this.#J($)}whenMatchedAndRef($,J,W){return this.#J([$,J,W],!0)}#J($,J){return new QL({...this.#$,queryNode:V6.cloneWithWhen(this.#$.queryNode,FL({isMatched:!0},$,J))})}whenNotMatched(){return this.#W([])}whenNotMatchedAnd(...$){return this.#W($)}whenNotMatchedAndRef($,J,W){return this.#W([$,J,W],!0)}whenNotMatchedBySource(){return this.#W([],!1,!0)}whenNotMatchedBySourceAnd(...$){return this.#W($,!1,!0)}whenNotMatchedBySourceAndRef($,J,W){return this.#W([$,J,W],!0,!0)}returning($){return new d$({...this.#$,queryNode:J0.cloneWithReturning(this.#$.queryNode,N4($))})}returningAll($){return new d$({...this.#$,queryNode:J0.cloneWithReturning(this.#$.queryNode,q4($))})}output($){return new d$({...this.#$,queryNode:J0.cloneWithOutput(this.#$.queryNode,N4($))})}outputAll($){return new d$({...this.#$,queryNode:J0.cloneWithOutput(this.#$.queryNode,q4($))})}#W($,J=!1,W=!1){let X={...this.#$,queryNode:V6.cloneWithWhen(this.#$.queryNode,FL({isMatched:!1,bySource:W},$,J))};return new(W?QL:Oh)(X)}$call($){return $(this)}$if($,J){if($)return J(this);return new d$({...this.#$})}toOperationNode(){return this.#$.executor.transformQuery(this.#$.queryNode,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){let $=this.compile(),J=await this.#$.executor.executeQuery($),{adapter:W}=this.#$.executor,X=$.query;if(X.returning&&W.supportsReturning||X.output&&W.supportsOutput)return J.rows;return[new VL(J.numAffectedRows)]}async executeTakeFirst(){let[$]=await this.execute();return $}async executeTakeFirstOrThrow($=Q8){let J=await this.executeTakeFirst();if(J===void 0)throw X5($)?new $(this.toOperationNode()):$(this.toOperationNode());return J}}class QL{#$;constructor($){this.#$=V($)}thenDelete(){return new d$({...this.#$,queryNode:V6.cloneWithThen(this.#$.queryNode,rX("delete"))})}thenDoNothing(){return new d$({...this.#$,queryNode:V6.cloneWithThen(this.#$.queryNode,rX("do nothing"))})}thenUpdate($){return new d$({...this.#$,queryNode:V6.cloneWithThen(this.#$.queryNode,rX($(new N1({queryId:this.#$.queryId,executor:wJ,queryNode:W5.createWithoutTable()}))))})}thenUpdateSet(...$){return this.thenUpdate((J)=>J.set(...$))}}class Oh{#$;constructor($){this.#$=V($)}thenDoNothing(){return new d$({...this.#$,queryNode:V6.cloneWithThen(this.#$.queryNode,rX("do nothing"))})}thenInsertValues($){let[J,W]=ez($);return new d$({...this.#$,queryNode:V6.cloneWithThen(this.#$.queryNode,rX(o1.cloneWith(o1.createWithoutInto(),{columns:J,values:W})))})}}var AL=C(()=>{x7();OZ();c6();mX();tI();VZ();Kh();ZJ();pX();iX();g();g7();Ww()});class U5{#$;constructor($){this.#$=V($)}selectFrom($){return tX({queryId:P0(),executor:this.#$.executor,queryNode:s0.createFrom(I8($),this.#$.withNode)})}selectNoFrom($){return tX({queryId:P0(),executor:this.#$.executor,queryNode:s0.cloneWithSelections(s0.create(this.#$.withNode),N4($))})}insertInto($){return new O1({queryId:P0(),executor:this.#$.executor,queryNode:o1.create(i0($),this.#$.withNode)})}replaceInto($){return new O1({queryId:P0(),executor:this.#$.executor,queryNode:o1.create(i0($),this.#$.withNode,!0)})}deleteFrom($){return new x1({queryId:P0(),executor:this.#$.executor,queryNode:YJ.create(I8($),this.#$.withNode)})}updateTable($){return new N1({queryId:P0(),executor:this.#$.executor,queryNode:W5.create(I8($),this.#$.withNode)})}mergeInto($){return new i5({queryId:P0(),executor:this.#$.executor,queryNode:V6.create(IL($),this.#$.withNode)})}with($,J){let W=zL($,J);return new U5({...this.#$,withNode:this.#$.withNode?AZ.cloneWithExpression(this.#$.withNode,W):AZ.create(W)})}withRecursive($,J){let W=zL($,J);return new U5({...this.#$,withNode:this.#$.withNode?AZ.cloneWithExpression(this.#$.withNode,W):AZ.create(W,{recursive:!0})})}withPlugin($){return new U5({...this.#$,executor:this.#$.executor.withPlugin($)})}withoutPlugins(){return new U5({...this.#$,executor:this.#$.executor.withoutPlugins()})}withSchema($){return new U5({...this.#$,executor:this.#$.executor.withPluginAtFront(new Q6($))})}}var Hw=C(()=>{LZ();XL();UL();Ww();DZ();x7();UJ();mX();i4();Zh();wL();d6();y7();g();ZJ();AL();OZ()});function Hh(){return new U5({executor:wJ})}function Fh($,J){return new yX({joinNode:K8.create($,c7(J))})}function Eh(){return new cX({overNode:zZ.create()})}var Yw=C(()=>{vX();tz();UJ();dI();tq();LZ();Hw();iX();d6();i4()});function GJ($,J){if(J.length===3)return y10($,J[0],J[1],J[2]);else if(J.length===2)return m10($,J[0],J[1]);else if(J.length===1)return c10($,J[0]);else throw Error("not implemented")}function m10($,J,W){return W(Fh($,J)).toOperationNode()}function y10($,J,W,X){return K8.createWithOn($,c7(J),T4(W,"=",X))}function c10($,J){return K8.create($,c7(J))}var VZ=C(()=>{vX();M6();Yw();i4()});var Mh;var LL=C(()=>{g();Mh=V({is($){return $.kind==="OffsetNode"},create($){return V({kind:"OffsetNode",offset:$})}})});var Vh;var PL=C(()=>{g();Vh=V({is($){return $.kind==="GroupByItemNode"},create($){return V({kind:"GroupByItemNode",groupBy:$})}})});function Qh($){return $=Y1($)?$(p6()):$,r5($).map(Vh.create)}var Ah=C(()=>{PL();HJ();g();l4()});var Gw;var zw=C(()=>{g();Gw=V({is($){return $.kind==="SetOperationNode"},create($,J,W){return V({kind:"SetOperationNode",operator:$,expression:J,all:W})}})});function u7($,J,W){if(Y1(J))J=J(ww());if(!v4(J))J=[J];return J.map((X)=>Gw.create($,p$(X),W))}var Ih=C(()=>{HJ();zw();g();E8()});class U1{#$;constructor($){this.#$=$}get expressionType(){return}as($){return new Ow(this,$)}or(...$){return new Dw(D8.create(this.#$,Q1($)))}and(...$){return new Kw(u$.create(this.#$,Q1($)))}$castTo(){return new U1(this.#$)}$notNull(){return new U1(this.#$)}toOperationNode(){return this.#$}}class Ow{#$;#J;constructor($,J){this.#$=$,this.#J=J}get expression(){return this.#$}get alias(){return this.#J}toOperationNode(){return C4.create(this.#$.toOperationNode(),_1(this.#J)?this.#J.toOperationNode():F0.create(this.#J))}}class Dw{#$;constructor($){this.#$=$}get expressionType(){return}as($){return new Ow(this,$)}or(...$){return new Dw(D8.create(this.#$,Q1($)))}$castTo(){return new Dw(this.#$)}toOperationNode(){return E6.create(this.#$)}}class Kw{#$;constructor($){this.#$=$}get expressionType(){return}as($){return new Ow(this,$)}and(...$){return new Kw(u$.create(this.#$,Q1($)))}$castTo(){return new Kw(this.#$)}toOperationNode(){return E6.create(this.#$)}}var aX=C(()=>{w8();$J();V1();c$();T7();gX();M6()});var Lh;var _L=C(()=>{V8();Lh={is($){return $.kind==="FetchNode"},create($,J){return{kind:"FetchNode",rowCount:Z4.create($),modifier:J}}}});function Ph($,J){if(!G8($)&&!s9($))throw Error(`Invalid fetch row count: ${$}`);if(!u10(J))throw Error(`Invalid fetch modifier: ${J}`);return Lh.create($,J)}function u10($){return $==="only"||$==="with ties"}var _h=C(()=>{_L();g()});class q0{#$;constructor($){this.#$=V($)}get expressionType(){return}get isSelectQueryBuilder(){return!0}where(...$){return new q0({...this.#$,queryNode:J0.cloneWithWhere(this.#$.queryNode,Q1($))})}whereRef($,J,W){return new q0({...this.#$,queryNode:J0.cloneWithWhere(this.#$.queryNode,T4($,J,W))})}having(...$){return new q0({...this.#$,queryNode:s0.cloneWithHaving(this.#$.queryNode,Q1($))})}havingRef($,J,W){return new q0({...this.#$,queryNode:s0.cloneWithHaving(this.#$.queryNode,T4($,J,W))})}select($){return new q0({...this.#$,queryNode:s0.cloneWithSelections(this.#$.queryNode,N4($))})}distinctOn($){return new q0({...this.#$,queryNode:s0.cloneWithDistinctOn(this.#$.queryNode,r5($))})}modifyFront($){return new q0({...this.#$,queryNode:s0.cloneWithFrontModifier(this.#$.queryNode,$5.createWithExpression($.toOperationNode()))})}modifyEnd($){return new q0({...this.#$,queryNode:J0.cloneWithEndModifier(this.#$.queryNode,$5.createWithExpression($.toOperationNode()))})}distinct(){return new q0({...this.#$,queryNode:s0.cloneWithFrontModifier(this.#$.queryNode,$5.create("Distinct"))})}forUpdate($){return new q0({...this.#$,queryNode:J0.cloneWithEndModifier(this.#$.queryNode,$5.create("ForUpdate",$?sU($).map(i0):void 0))})}forShare($){return new q0({...this.#$,queryNode:J0.cloneWithEndModifier(this.#$.queryNode,$5.create("ForShare",$?sU($).map(i0):void 0))})}forKeyShare($){return new q0({...this.#$,queryNode:J0.cloneWithEndModifier(this.#$.queryNode,$5.create("ForKeyShare",$?sU($).map(i0):void 0))})}forNoKeyUpdate($){return new q0({...this.#$,queryNode:J0.cloneWithEndModifier(this.#$.queryNode,$5.create("ForNoKeyUpdate",$?sU($).map(i0):void 0))})}skipLocked(){return new q0({...this.#$,queryNode:J0.cloneWithEndModifier(this.#$.queryNode,$5.create("SkipLocked"))})}noWait(){return new q0({...this.#$,queryNode:J0.cloneWithEndModifier(this.#$.queryNode,$5.create("NoWait"))})}selectAll($){return new q0({...this.#$,queryNode:s0.cloneWithSelections(this.#$.queryNode,q4($))})}innerJoin(...$){return this.#J("InnerJoin",$)}leftJoin(...$){return this.#J("LeftJoin",$)}rightJoin(...$){return this.#J("RightJoin",$)}fullJoin(...$){return this.#J("FullJoin",$)}crossJoin(...$){return this.#J("CrossJoin",$)}innerJoinLateral(...$){return this.#J("LateralInnerJoin",$)}leftJoinLateral(...$){return this.#J("LateralLeftJoin",$)}crossJoinLateral(...$){return this.#J("LateralCrossJoin",$)}crossApply(...$){return this.#J("CrossApply",$)}outerApply(...$){return this.#J("OuterApply",$)}#J($,J){return new q0({...this.#$,queryNode:J0.cloneWithJoin(this.#$.queryNode,GJ($,J))})}orderBy(...$){return new q0({...this.#$,queryNode:J0.cloneWithOrderByItems(this.#$.queryNode,F6($))})}groupBy($){return new q0({...this.#$,queryNode:s0.cloneWithGroupByItems(this.#$.queryNode,Qh($))})}limit($){return new q0({...this.#$,queryNode:s0.cloneWithLimit(this.#$.queryNode,dX.create(K1($)))})}offset($){return new q0({...this.#$,queryNode:s0.cloneWithOffset(this.#$.queryNode,Mh.create(K1($)))})}fetch($,J="only"){return new q0({...this.#$,queryNode:s0.cloneWithFetch(this.#$.queryNode,Ph($,J))})}top($,J){return new q0({...this.#$,queryNode:J0.cloneWithTop(this.#$.queryNode,A8($,J))})}union($){return new q0({...this.#$,queryNode:s0.cloneWithSetOperations(this.#$.queryNode,u7("union",$,!1))})}unionAll($){return new q0({...this.#$,queryNode:s0.cloneWithSetOperations(this.#$.queryNode,u7("union",$,!0))})}intersect($){return new q0({...this.#$,queryNode:s0.cloneWithSetOperations(this.#$.queryNode,u7("intersect",$,!1))})}intersectAll($){return new q0({...this.#$,queryNode:s0.cloneWithSetOperations(this.#$.queryNode,u7("intersect",$,!0))})}except($){return new q0({...this.#$,queryNode:s0.cloneWithSetOperations(this.#$.queryNode,u7("except",$,!1))})}exceptAll($){return new q0({...this.#$,queryNode:s0.cloneWithSetOperations(this.#$.queryNode,u7("except",$,!0))})}as($){return new Nh(this,$)}clearSelect(){return new q0({...this.#$,queryNode:s0.cloneWithoutSelections(this.#$.queryNode)})}clearWhere(){return new q0({...this.#$,queryNode:J0.cloneWithoutWhere(this.#$.queryNode)})}clearLimit(){return new q0({...this.#$,queryNode:s0.cloneWithoutLimit(this.#$.queryNode)})}clearOffset(){return new q0({...this.#$,queryNode:s0.cloneWithoutOffset(this.#$.queryNode)})}clearOrderBy(){return new q0({...this.#$,queryNode:J0.cloneWithoutOrderBy(this.#$.queryNode)})}clearGroupBy(){return new q0({...this.#$,queryNode:s0.cloneWithoutGroupBy(this.#$.queryNode)})}$call($){return $(this)}$if($,J){if($)return J(this);return new q0({...this.#$})}$castTo(){return new q0(this.#$)}$narrowType(){return new q0(this.#$)}$assertType(){return new q0(this.#$)}$asTuple(){return new U1(this.toOperationNode())}$asScalar(){return new U1(this.toOperationNode())}withPlugin($){return new q0({...this.#$,executor:this.#$.executor.withPlugin($)})}toOperationNode(){return this.#$.executor.transformQuery(this.#$.queryNode,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){let $=this.compile();return(await this.#$.executor.executeQuery($)).rows}async executeTakeFirst(){let[$]=await this.execute();return $}async executeTakeFirstOrThrow($=Q8){let J=await this.executeTakeFirst();if(J===void 0)throw X5($)?new $(this.toOperationNode()):$(this.toOperationNode());return J}async*stream($=100){let J=this.compile(),W=this.#$.executor.stream(J,$);for await(let X of W)yield*X.rows}async explain($,J){return await new q0({...this.#$,queryNode:J0.cloneWithExplain(this.#$.queryNode,$,J)}).execute()}}function tX($){return new q0($)}class Nh{#$;#J;constructor($,J){this.#$=$,this.#J=J}get expression(){return this.#$}get alias(){return this.#J}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return C4.create(this.#$.toOperationNode(),F0.create(this.#J))}}var LZ=C(()=>{w8();QI();VZ();i4();ZJ();l4();UJ();c6();q7();MZ();LL();g();Ah();g7();V1();Ih();M6();aX();J5();_h();pX()});var Z5;var Fw=C(()=>{g();KZ();GZ();Z5=V({is($){return $.kind==="AggregateFunctionNode"},create($,J=[]){return V({kind:"AggregateFunctionNode",func:$,aggregated:J})},cloneWithDistinct($){return V({...$,distinct:!0})},cloneWithOrderBy($,J,W=!1){let X=W?"withinGroup":"orderBy";return V({...$,[X]:$[X]?n5.cloneWithItems($[X],J):n5.create(J)})},cloneWithFilter($,J){return V({...$,filter:$.filter?n4.cloneWithOperation($.filter,"And",J):n4.create(J)})},cloneWithOrFilter($,J){return V({...$,filter:$.filter?n4.cloneWithOperation($.filter,"Or",J):n4.create(J)})},cloneWithOver($,J){return V({...$,over:J})}})});var NL;var BL=C(()=>{g();NL=V({is($){return $.kind==="FunctionNode"},create($,J){return V({kind:"FunctionNode",func:$,arguments:J})}})});class l${#$;constructor($){this.#$=V($)}get expressionType(){return}as($){return new Bh(this,$)}distinct(){return new l$({...this.#$,aggregateFunctionNode:Z5.cloneWithDistinct(this.#$.aggregateFunctionNode)})}orderBy(...$){return new l$({...this.#$,aggregateFunctionNode:J0.cloneWithOrderByItems(this.#$.aggregateFunctionNode,F6($))})}clearOrderBy(){return new l$({...this.#$,aggregateFunctionNode:J0.cloneWithoutOrderBy(this.#$.aggregateFunctionNode)})}withinGroupOrderBy(...$){return new l$({...this.#$,aggregateFunctionNode:Z5.cloneWithOrderBy(this.#$.aggregateFunctionNode,F6($),!0)})}filterWhere(...$){return new l$({...this.#$,aggregateFunctionNode:Z5.cloneWithFilter(this.#$.aggregateFunctionNode,Q1($))})}filterWhereRef($,J,W){return new l$({...this.#$,aggregateFunctionNode:Z5.cloneWithFilter(this.#$.aggregateFunctionNode,T4($,J,W))})}over($){let J=Eh();return new l$({...this.#$,aggregateFunctionNode:Z5.cloneWithOver(this.#$.aggregateFunctionNode,($?$(J):J).toOperationNode())})}$call($){return $(this)}$castTo(){return new l$(this.#$)}$notNull(){return new l$(this.#$)}toOperationNode(){return this.#$.aggregateFunctionNode}}class Bh{#$;#J;constructor($,J){this.#$=$,this.#J=J}get expression(){return this.#$}get alias(){return this.#J}toOperationNode(){return C4.create(this.#$.toOperationNode(),F0.create(this.#J))}}var RL=C(()=>{g();Fw();w8();V1();Yw();M6();q7();c6()});function Ew(){let $=(W,X)=>{return new U1(NL.create(W,r5(X??[])))},J=(W,X)=>{return new l$({aggregateFunctionNode:Z5.create(W,X?r5(X):void 0)})};return Object.assign($,{agg:J,avg(W){return J("avg",[W])},coalesce(...W){return $("coalesce",W)},count(W){return J("count",[W])},countAll(W){return new l$({aggregateFunctionNode:Z5.create("count",q4(W))})},max(W){return J("max",[W])},min(W){return J("min",[W])},sum(W){return J("sum",[W])},any(W){return $("any",[W])},jsonAgg(W){return new l$({aggregateFunctionNode:Z5.create("json_agg",[X1(W)?i0(W):W.toOperationNode()])})},toJson(W){return new U1(NL.create("to_json",[X1(W)?i0(W):W.toOperationNode()]))}})}var Mw=C(()=>{aX();Fw();BL();l4();ZJ();RL();g();i4()});var Rh;var SL=C(()=>{g();Rh=V({is($){return $.kind==="UnaryOperationNode"},create($,J){return V({kind:"UnaryOperationNode",operator:$,operand:J})}})});function Sh($,J){return Rh.create(H$.create($),r4(J))}var jh=C(()=>{d5();SL();l4()});var A6;var PZ=C(()=>{g();b7();A6=V({is($){return $.kind==="CaseNode"},create($){return V({kind:"CaseNode",value:$})},cloneWithWhen($,J){return V({...$,when:V($.when?[...$.when,J]:[J])})},cloneWithThen($,J){return V({...$,when:$.when?V([...$.when.slice(0,-1),u6.cloneWithResult($.when[$.when.length-1],J)]):void 0})},cloneWith($,J){return V({...$,...J})}})});class _Z{#$;constructor($){this.#$=V($)}when(...$){return new jL({...this.#$,node:A6.cloneWithWhen(this.#$.node,u6.create(Q1($)))})}}class jL{#$;constructor($){this.#$=V($)}then($){return new kh({...this.#$,node:A6.cloneWithThen(this.#$.node,nz($)?HZ($):K1($))})}}class kh{#$;constructor($){this.#$=V($)}when(...$){return new jL({...this.#$,node:A6.cloneWithWhen(this.#$.node,u6.create(Q1($)))})}else($){return new vh({...this.#$,node:A6.cloneWith(this.#$.node,{else:nz($)?HZ($):K1($)})})}end(){return new U1(A6.cloneWith(this.#$.node,{isStatement:!1}))}endCase(){return new U1(A6.cloneWith(this.#$.node,{isStatement:!0}))}}class vh{#$;constructor($){this.#$=V($)}end(){return new U1(A6.cloneWith(this.#$.node,{isStatement:!1}))}endCase(){return new U1(A6.cloneWith(this.#$.node,{isStatement:!0}))}}var Vw=C(()=>{aX();g();PZ();b7();M6();J5()});var kL;var vL=C(()=>{g();kL=V({is($){return $.kind==="JSONPathLegNode"},create($,J){return V({kind:"JSONPathLegNode",type:$,value:J})}})});class BZ{#$;constructor($){this.#$=$}at($){return this.#J("ArrayLocation",$)}key($){return this.#J("Member",$)}#J($,J){if(hX.is(this.#$))return new NZ(hX.cloneWithTraversal(this.#$,WJ.is(this.#$.traversal)?WJ.cloneWithLeg(this.#$.traversal,kL.create($,J)):lz.cloneWithValue(this.#$.traversal,Z4.createImmediate(J))));return new NZ(WJ.cloneWithLeg(this.#$,kL.create($,J)))}}class Ch{#$;#J;constructor($,J){this.#$=$,this.#J=J}get expression(){return this.#$}get alias(){return this.#J}toOperationNode(){return C4.create(this.#$.toOperationNode(),_1(this.#J)?this.#J.toOperationNode():F0.create(this.#J))}}var NZ;var CL=C(()=>{w8();V1();rz();vL();UZ();dz();c$();V8();NZ=class NZ extends BZ{#$;constructor($){super($);this.#$=$}get expressionType(){return}as($){return new Ch(this,$)}$castTo(){return new NZ(this.#$)}$notNull(){return new NZ(this.#$)}toOperationNode(){return this.#$}}});var TL;var qL=C(()=>{g();TL=V({is($){return $.kind==="TupleNode"},create($){return V({kind:"TupleNode",values:V($)})}})});function Th($){if(p10.includes($))return!0;if(d10.some((J)=>J.test($)))return!0;return!1}var p10,d10,hL;var Qw=C(()=>{g();p10=["varchar","char","text","integer","int2","int4","int8","smallint","bigint","boolean","real","double precision","float4","float8","decimal","numeric","binary","bytea","date","datetime","time","timetz","timestamp","timestamptz","serial","bigserial","uuid","json","jsonb","blob","varbinary","int4range","int4multirange","int8range","int8multirange","numrange","nummultirange","tsrange","tsmultirange","tstzrange","tstzmultirange","daterange","datemultirange"],d10=[/^varchar\(\d+\)$/,/^char\(\d+\)$/,/^decimal\(\d+, \d+\)$/,/^numeric\(\d+, \d+\)$/,/^binary\(\d+\)$/,/^datetime\(\d+\)$/,/^time\(\d+\)$/,/^timetz\(\d+\)$/,/^timestamp\(\d+\)$/,/^timestamptz\(\d+\)$/,/^varbinary\(\d+\)$/],hL=V({is($){return $.kind==="DataTypeNode"},create($){return V({kind:"DataTypeNode",dataType:$})}})});function P8($){if(_1($))return $.toOperationNode();if(Th($))return hL.create($);throw Error(`invalid column data type ${JSON.stringify($)}`)}var RZ=C(()=>{Qw();c$()});var xL;var Aw=C(()=>{g();xL=V({is($){return $.kind==="CastNode"},create($,J){return V({kind:"CastNode",expression:$,dataType:J})}})});function ww($=wJ){function J(Y,U,Z){return new U1(iz(Y,U,Z))}function W(Y,U){return new U1(Sh(Y,U))}let X=Object.assign(J,{fn:void 0,eb:void 0,selectFrom(Y){return tX({queryId:P0(),executor:$,queryNode:s0.createFrom(I8(Y))})},case(Y){return new _Z({node:A6.create(A$(Y)?void 0:r4(Y))})},ref(Y,U){if(A$(U))return new U1(O6(Y));return new BZ(yq(Y,U))},jsonPath(){return new BZ(WJ.create())},table(Y){return new U1(i0(Y))},val(Y){return new U1(K1(Y))},refTuple(...Y){return new U1(TL.create(Y.map(r4)))},tuple(...Y){return new U1(TL.create(Y.map(K1)))},lit(Y){return new U1(HZ(Y))},unary:W,not(Y){return W("not",Y)},exists(Y){return W("exists",Y)},neg(Y){return W("-",Y)},between(Y,U,Z){return new U1(p5.create(r4(Y),H$.create("between"),u$.create(K1(U),K1(Z))))},betweenSymmetric(Y,U,Z){return new U1(p5.create(r4(Y),H$.create("between symmetric"),u$.create(K1(U),K1(Z))))},and(Y){if(v4(Y))return new U1(fX(Y,"and"));return new U1(vI(Y,"and"))},or(Y){if(v4(Y))return new U1(fX(Y,"or"));return new U1(vI(Y,"or"))},parens(...Y){let U=Q1(Y);if(E6.is(U))return new U1(U);else return new U1(E6.create(U))},cast(Y,U){return new U1(xL.create(r4(Y),P8(U)))},withSchema(Y){return ww($.withPluginAtFront(new Q6(Y)))}});return X.fn=Ew(),X.eb=X,X}function p6($){return ww()}var HJ=C(()=>{LZ();UJ();i4();y7();d6();Mw();l4();M6();gX();aX();d5();jh();J5();iX();Vw();PZ();g();CL();WZ();$J();qL();UZ();RZ();Aw()});function p$($){if(_1($))return $.toOperationNode();else if(Y1($))return $(p6()).toOperationNode();throw Error(`invalid expression: ${JSON.stringify($)}`)}function sz($){if(_1($))return $.toOperationNode();else if(Y1($))return $(p6()).toOperationNode();throw Error(`invalid aliased expression: ${JSON.stringify($)}`)}function l5($){return fz($)||hq($)||Y1($)}var E8=C(()=>{mz();c$();HJ();g()});class bL{#$;get table(){return this.#$}constructor($){this.#$=$}as($){return new qh(this.#$,$)}}class qh{#$;#J;get table(){return this.#$}get alias(){return this.#J}constructor($,J){this.#$=$,this.#J=J}toOperationNode(){return C4.create(i0(this.#$),F0.create(this.#J))}}function hh($){return M1($)&&_1($)&&X1($.table)&&X1($.alias)}var Iw=C(()=>{w8();V1();c$();i4();g()});function I8($){if(v4($))return $.map((J)=>c7(J));else return[c7($)]}function c7($){if(X1($))return IL($);else if(hh($))return $.toOperationNode();else return sz($)}function IL($){if($.includes(" as ")){let[W,X]=$.split(" as ").map(xh);return C4.create(i0(W),F0.create(X))}else return i0($)}function i0($){if($.includes(".")){let[W,X]=$.split(".").map(xh);return K6.createWithSchema(W,X)}else return K6.create($)}function xh($){return $.trim()}var i4=C(()=>{g();w8();kX();E8();V1();Iw()});var gL;var fL=C(()=>{g();gL=V({is($){return $.kind==="AddColumnNode"},create($){return V({kind:"AddColumnNode",column:$})}})});var B1;var SZ=C(()=>{g();G$();B1=V({is($){return $.kind==="ColumnDefinitionNode"},create($,J){return V({kind:"ColumnDefinitionNode",column:p0.create($),dataType:J})},cloneWithFrontModifier($,J){return V({...$,frontModifiers:$.frontModifiers?V([...$.frontModifiers,J]):[J]})},cloneWithEndModifier($,J){return V({...$,endModifiers:$.endModifiers?V([...$.endModifiers,J]):[J]})},cloneWith($,J){return V({...$,...J})}})});var mL;var yL=C(()=>{g();G$();mL=V({is($){return $.kind==="DropColumnNode"},create($){return V({kind:"DropColumnNode",column:p0.create($)})}})});var cL;var uL=C(()=>{g();G$();cL=V({is($){return $.kind==="RenameColumnNode"},create($,J){return V({kind:"RenameColumnNode",column:p0.create($),renameTo:p0.create(J)})}})});var oX;var jZ=C(()=>{g();V1();oX=V({is($){return $.kind==="CheckConstraintNode"},create($,J){return V({kind:"CheckConstraintNode",expression:$,name:J?F0.create(J):void 0})}})});var bh,sX;var kZ=C(()=>{g();bh=["no action","restrict","cascade","set null","set default"],sX=V({is($){return $.kind==="ReferencesNode"},create($,J){return V({kind:"ReferencesNode",table:$,columns:V([...J])})},cloneWithOnDelete($,J){return V({...$,onDelete:J})},cloneWithOnUpdate($,J){return V({...$,onUpdate:J})}})});function Lw($){return _1($)?$.toOperationNode():Z4.createImmediate($)}var pL=C(()=>{c$();V8()});var vZ;var dL=C(()=>{g();vZ=V({is($){return $.kind==="GeneratedNode"},create($){return V({kind:"GeneratedNode",...$})},createWithExpression($){return V({kind:"GeneratedNode",always:!0,expression:$})},cloneWith($,J){return V({...$,...J})}})});var gh;var lL=C(()=>{g();gh=V({is($){return $.kind==="DefaultValueNode"},create($){return V({kind:"DefaultValueNode",defaultValue:$})}})});function eX($){if(bh.includes($))return $;throw Error(`invalid OnModifyForeignAction ${$}`)}var rL=C(()=>{kZ()});class R1{#$;constructor($){this.#$=$}autoIncrement(){return new R1(B1.cloneWith(this.#$,{autoIncrement:!0}))}identity(){return new R1(B1.cloneWith(this.#$,{identity:!0}))}primaryKey(){return new R1(B1.cloneWith(this.#$,{primaryKey:!0}))}references($){let J=O6($);if(!J.table||CX.is(J.column))throw Error(`invalid call references('${$}'). The reference must have format table.column or schema.table.column`);return new R1(B1.cloneWith(this.#$,{references:sX.create(J.table,[J.column])}))}onDelete($){if(!this.#$.references)throw Error("on delete constraint can only be added for foreign keys");return new R1(B1.cloneWith(this.#$,{references:sX.cloneWithOnDelete(this.#$.references,eX($))}))}onUpdate($){if(!this.#$.references)throw Error("on update constraint can only be added for foreign keys");return new R1(B1.cloneWith(this.#$,{references:sX.cloneWithOnUpdate(this.#$.references,eX($))}))}unique(){return new R1(B1.cloneWith(this.#$,{unique:!0}))}notNull(){return new R1(B1.cloneWith(this.#$,{notNull:!0}))}unsigned(){return new R1(B1.cloneWith(this.#$,{unsigned:!0}))}defaultTo($){return new R1(B1.cloneWith(this.#$,{defaultTo:gh.create(Lw($))}))}check($){return new R1(B1.cloneWith(this.#$,{check:oX.create($.toOperationNode())}))}generatedAlwaysAs($){return new R1(B1.cloneWith(this.#$,{generated:vZ.createWithExpression($.toOperationNode())}))}generatedAlwaysAsIdentity(){return new R1(B1.cloneWith(this.#$,{generated:vZ.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new R1(B1.cloneWith(this.#$,{generated:vZ.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#$.generated)throw Error("stored() can only be called after generatedAlwaysAs");return new R1(B1.cloneWith(this.#$,{generated:vZ.cloneWith(this.#$.generated,{stored:!0})}))}modifyFront($){return new R1(B1.cloneWithFrontModifier(this.#$,$.toOperationNode()))}nullsNotDistinct(){return new R1(B1.cloneWith(this.#$,{nullsNotDistinct:!0}))}ifNotExists(){return new R1(B1.cloneWith(this.#$,{ifNotExists:!0}))}modifyEnd($){return new R1(B1.cloneWithEndModifier(this.#$,$.toOperationNode()))}$call($){return $(this)}toOperationNode(){return this.#$}}var Pw=C(()=>{jZ();kZ();XZ();l4();SZ();pL();dL();lL();rL()});var nL;var iL=C(()=>{g();nL=V({is($){return $.kind==="ModifyColumnNode"},create($){return V({kind:"ModifyColumnNode",column:$})}})});var _8;var CZ=C(()=>{g();V1();kZ();_8=V({is($){return $.kind==="ForeignKeyConstraintNode"},create($,J,W,X){return V({kind:"ForeignKeyConstraintNode",columns:$,references:sX.create(J,W),name:X?F0.create(X):void 0})},cloneWith($,J){return V({...$,...J})}})});class N8{#$;constructor($){this.#$=$}onDelete($){return new N8(_8.cloneWith(this.#$,{onDelete:eX($)}))}onUpdate($){return new N8(_8.cloneWith(this.#$,{onUpdate:eX($)}))}deferrable(){return new N8(_8.cloneWith(this.#$,{deferrable:!0}))}notDeferrable(){return new N8(_8.cloneWith(this.#$,{deferrable:!1}))}initiallyDeferred(){return new N8(_8.cloneWith(this.#$,{initiallyDeferred:!0}))}initiallyImmediate(){return new N8(_8.cloneWith(this.#$,{initiallyDeferred:!1}))}$call($){return $(this)}toOperationNode(){return this.#$}}var _w=C(()=>{CZ();rL()});var $Y;var Nw=C(()=>{g();$Y=V({is($){return $.kind==="AddConstraintNode"},create($){return V({kind:"AddConstraintNode",constraint:$})}})});var H5;var TZ=C(()=>{g();G$();V1();H5=V({is($){return $.kind==="UniqueConstraintNode"},create($,J,W){return V({kind:"UniqueConstraintNode",columns:V($.map(p0.create)),name:J?F0.create(J):void 0,nullsNotDistinct:W})},cloneWith($,J){return V({...$,...J})}})});var JY;var Bw=C(()=>{g();V1();JY=V({is($){return $.kind==="DropConstraintNode"},create($){return V({kind:"DropConstraintNode",constraintName:F0.create($)})},cloneWith($,J){return V({...$,...J})}})});var WY;var tL=C(()=>{g();G$();WY=V({is($){return $.kind==="AlterColumnNode"},create($,J,W){return V({kind:"AlterColumnNode",column:p0.create($),[J]:W})}})});class Rw{#$;constructor($){this.#$=$}setDataType($){return new XY(WY.create(this.#$,"dataType",P8($)))}setDefault($){return new XY(WY.create(this.#$,"setDefault",Lw($)))}dropDefault(){return new XY(WY.create(this.#$,"dropDefault",!0))}setNotNull(){return new XY(WY.create(this.#$,"setNotNull",!0))}dropNotNull(){return new XY(WY.create(this.#$,"dropNotNull",!0))}$call($){return $(this)}}class XY{#$;constructor($){this.#$=$}toOperationNode(){return this.#$}}var aL=C(()=>{tL();RZ();pL()});class DJ{#$;constructor($){this.#$=V($)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var fh=C(()=>{g()});class t5{#$;constructor($){this.#$=V($)}onDelete($){return new t5({...this.#$,constraintBuilder:this.#$.constraintBuilder.onDelete($)})}onUpdate($){return new t5({...this.#$,constraintBuilder:this.#$.constraintBuilder.onUpdate($)})}deferrable(){return new t5({...this.#$,constraintBuilder:this.#$.constraintBuilder.deferrable()})}notDeferrable(){return new t5({...this.#$,constraintBuilder:this.#$.constraintBuilder.notDeferrable()})}initiallyDeferred(){return new t5({...this.#$,constraintBuilder:this.#$.constraintBuilder.initiallyDeferred()})}initiallyImmediate(){return new t5({...this.#$,constraintBuilder:this.#$.constraintBuilder.initiallyImmediate()})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(r0.cloneWithTableProps(this.#$.node,{addConstraint:$Y.create(this.#$.constraintBuilder.toOperationNode())}),this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var mh=C(()=>{Nw();C7();g()});class p7{#$;constructor($){this.#$=V($)}ifExists(){return new p7({...this.#$,node:r0.cloneWithTableProps(this.#$.node,{dropConstraint:JY.cloneWith(this.#$.node.dropConstraint,{ifExists:!0})})})}cascade(){return new p7({...this.#$,node:r0.cloneWithTableProps(this.#$.node,{dropConstraint:JY.cloneWith(this.#$.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new p7({...this.#$,node:r0.cloneWithTableProps(this.#$.node,{dropConstraint:JY.cloneWith(this.#$.node.dropConstraint,{modifier:"restrict"})})})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var yh=C(()=>{C7();Bw();g()});var a5;var qZ=C(()=>{g();G$();V1();a5=V({is($){return $.kind==="PrimaryKeyConstraintNode"},create($,J){return V({kind:"PrimaryKeyConstraintNode",columns:V($.map(p0.create)),name:J?F0.create(J):void 0})},cloneWith($,J){return V({...$,...J})}})});var KJ;var Sw=C(()=>{g();V1();KJ=V({is($){return $.kind==="AddIndexNode"},create($){return V({kind:"AddIndexNode",name:F0.create($)})},cloneWith($,J){return V({...$,...J})},cloneWithColumns($,J){return V({...$,columns:[...$.columns||[],...J]})}})});class OJ{#$;constructor($){this.#$=V($)}unique(){return new OJ({...this.#$,node:r0.cloneWithTableProps(this.#$.node,{addIndex:KJ.cloneWith(this.#$.node.addIndex,{unique:!0})})})}column($){return new OJ({...this.#$,node:r0.cloneWithTableProps(this.#$.node,{addIndex:KJ.cloneWithColumns(this.#$.node.addIndex,[xX($)])})})}columns($){return new OJ({...this.#$,node:r0.cloneWithTableProps(this.#$.node,{addIndex:KJ.cloneWithColumns(this.#$.node.addIndex,$.map(xX))})})}expression($){return new OJ({...this.#$,node:r0.cloneWithTableProps(this.#$.node,{addIndex:KJ.cloneWithColumns(this.#$.node.addIndex,[$.toOperationNode()])})})}using($){return new OJ({...this.#$,node:r0.cloneWithTableProps(this.#$.node,{addIndex:KJ.cloneWith(this.#$.node.addIndex,{using:n0.createWithSql($)})})})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var ch=C(()=>{Sw();C7();y6();l4();g()});class G5{#$;constructor($){this.#$=$}nullsNotDistinct(){return new G5(H5.cloneWith(this.#$,{nullsNotDistinct:!0}))}deferrable(){return new G5(H5.cloneWith(this.#$,{deferrable:!0}))}notDeferrable(){return new G5(H5.cloneWith(this.#$,{deferrable:!1}))}initiallyDeferred(){return new G5(H5.cloneWith(this.#$,{initiallyDeferred:!0}))}initiallyImmediate(){return new G5(H5.cloneWith(this.#$,{initiallyDeferred:!1}))}$call($){return $(this)}toOperationNode(){return this.#$}}var oL=C(()=>{TZ()});class o5{#$;constructor($){this.#$=$}deferrable(){return new o5(a5.cloneWith(this.#$,{deferrable:!0}))}notDeferrable(){return new o5(a5.cloneWith(this.#$,{deferrable:!1}))}initiallyDeferred(){return new o5(a5.cloneWith(this.#$,{initiallyDeferred:!0}))}initiallyImmediate(){return new o5(a5.cloneWith(this.#$,{initiallyDeferred:!1}))}$call($){return $(this)}toOperationNode(){return this.#$}}var sL=C(()=>{qZ()});class hZ{#$;constructor($){this.#$=$}$call($){return $(this)}toOperationNode(){return this.#$}}var uh;var eL=C(()=>{g();V1();uh=V({is($){return $.kind==="RenameConstraintNode"},create($,J){return V({kind:"RenameConstraintNode",oldName:F0.create($),newName:F0.create(J)})}})});class $P{#$;constructor($){this.#$=V($)}renameTo($){return new DJ({...this.#$,node:r0.cloneWithTableProps(this.#$.node,{renameTo:i0($)})})}setSchema($){return new DJ({...this.#$,node:r0.cloneWithTableProps(this.#$.node,{setSchema:F0.create($)})})}alterColumn($,J){let W=J(new Rw($));return new B8({...this.#$,node:r0.cloneWithColumnAlteration(this.#$.node,W.toOperationNode())})}dropColumn($){return new B8({...this.#$,node:r0.cloneWithColumnAlteration(this.#$.node,mL.create($))})}renameColumn($,J){return new B8({...this.#$,node:r0.cloneWithColumnAlteration(this.#$.node,cL.create($,J))})}addColumn($,J,W=I$){let X=W(new R1(B1.create($,P8(J))));return new B8({...this.#$,node:r0.cloneWithColumnAlteration(this.#$.node,gL.create(X.toOperationNode()))})}modifyColumn($,J,W=I$){let X=W(new R1(B1.create($,P8(J))));return new B8({...this.#$,node:r0.cloneWithColumnAlteration(this.#$.node,nL.create(X.toOperationNode()))})}addUniqueConstraint($,J,W=I$){let X=W(new G5(H5.create(J,$)));return new DJ({...this.#$,node:r0.cloneWithTableProps(this.#$.node,{addConstraint:$Y.create(X.toOperationNode())})})}addCheckConstraint($,J,W=I$){let X=W(new hZ(oX.create(J.toOperationNode(),$)));return new DJ({...this.#$,node:r0.cloneWithTableProps(this.#$.node,{addConstraint:$Y.create(X.toOperationNode())})})}addForeignKeyConstraint($,J,W,X,Y=I$){let U=Y(new N8(_8.create(J.map(p0.create),i0(W),X.map(p0.create),$)));return new t5({...this.#$,constraintBuilder:U})}addPrimaryKeyConstraint($,J,W=I$){let X=W(new o5(a5.create(J,$)));return new DJ({...this.#$,node:r0.cloneWithTableProps(this.#$.node,{addConstraint:$Y.create(X.toOperationNode())})})}dropConstraint($){return new p7({...this.#$,node:r0.cloneWithTableProps(this.#$.node,{dropConstraint:JY.create($)})})}renameConstraint($,J){return new p7({...this.#$,node:r0.cloneWithTableProps(this.#$.node,{renameConstraint:uh.create($,J)})})}addIndex($){return new OJ({...this.#$,node:r0.cloneWithTableProps(this.#$.node,{addIndex:KJ.create($)})})}dropIndex($){return new DJ({...this.#$,node:r0.cloneWithTableProps(this.#$.node,{dropIndex:e9.create($)})})}$call($){return $(this)}}class B8{#$;constructor($){this.#$=V($)}alterColumn($,J){let W=J(new Rw($));return new B8({...this.#$,node:r0.cloneWithColumnAlteration(this.#$.node,W.toOperationNode())})}dropColumn($){return new B8({...this.#$,node:r0.cloneWithColumnAlteration(this.#$.node,mL.create($))})}renameColumn($,J){return new B8({...this.#$,node:r0.cloneWithColumnAlteration(this.#$.node,cL.create($,J))})}addColumn($,J,W=I$){let X=W(new R1(B1.create($,P8(J))));return new B8({...this.#$,node:r0.cloneWithColumnAlteration(this.#$.node,gL.create(X.toOperationNode()))})}modifyColumn($,J,W=I$){let X=W(new R1(B1.create($,P8(J))));return new B8({...this.#$,node:r0.cloneWithColumnAlteration(this.#$.node,nL.create(X.toOperationNode()))})}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var JP=C(()=>{fL();C7();SZ();yL();V1();uL();g();Pw();iL();RZ();_w();Nw();TZ();jZ();CZ();G$();i4();Bw();aL();fh();mh();yh();qZ();eU();Sw();ch();oL();sL();eL()});var xZ;var WP=C(()=>{m7();XJ();V8();xZ=class xZ extends L8{transformPrimitiveValueList($){return M8.create($.values.map(Z4.createImmediate))}transformValue($){return Z4.createImmediate($.value)}}});class l6{#$;constructor($){this.#$=V($)}ifNotExists(){return new l6({...this.#$,node:z8.cloneWith(this.#$.node,{ifNotExists:!0})})}unique(){return new l6({...this.#$,node:z8.cloneWith(this.#$.node,{unique:!0})})}nullsNotDistinct(){return new l6({...this.#$,node:z8.cloneWith(this.#$.node,{nullsNotDistinct:!0})})}on($){return new l6({...this.#$,node:z8.cloneWith(this.#$.node,{table:i0($)})})}column($){return new l6({...this.#$,node:z8.cloneWithColumns(this.#$.node,[xX($)])})}columns($){return new l6({...this.#$,node:z8.cloneWithColumns(this.#$.node,$.map(xX))})}expression($){return new l6({...this.#$,node:z8.cloneWithColumns(this.#$.node,[$.toOperationNode()])})}using($){return new l6({...this.#$,node:z8.cloneWith(this.#$.node,{using:n0.createWithSql($)})})}where(...$){let J=new xZ;return new l6({...this.#$,node:J0.cloneWithWhere(this.#$.node,J.transformNode(Q1($),this.#$.queryId))})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var XP=C(()=>{qz();y6();l4();i4();g();M6();c6();WP()});class jw{#$;constructor($){this.#$=V($)}ifNotExists(){return new jw({...this.#$,node:hz.cloneWith(this.#$.node,{ifNotExists:!0})})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var YP=C(()=>{xz();g()});function ph($){if(qq.includes($))return $;throw Error(`invalid OnCommitAction ${$}`)}var dh=C(()=>{jX()});class r${#$;constructor($){this.#$=V($)}temporary(){return new r$({...this.#$,node:U$.cloneWith(this.#$.node,{temporary:!0})})}onCommit($){return new r$({...this.#$,node:U$.cloneWith(this.#$.node,{onCommit:ph($)})})}ifNotExists(){return new r$({...this.#$,node:U$.cloneWith(this.#$.node,{ifNotExists:!0})})}addColumn($,J,W=I$){let X=W(new R1(B1.create($,P8(J))));return new r$({...this.#$,node:U$.cloneWithColumn(this.#$.node,X.toOperationNode())})}addPrimaryKeyConstraint($,J,W=I$){let X=W(new o5(a5.create(J,$)));return new r$({...this.#$,node:U$.cloneWithConstraint(this.#$.node,X.toOperationNode())})}addUniqueConstraint($,J,W=I$){let X=W(new G5(H5.create(J,$)));return new r$({...this.#$,node:U$.cloneWithConstraint(this.#$.node,X.toOperationNode())})}addCheckConstraint($,J,W=I$){let X=W(new hZ(oX.create(J.toOperationNode(),$)));return new r$({...this.#$,node:U$.cloneWithConstraint(this.#$.node,X.toOperationNode())})}addForeignKeyConstraint($,J,W,X,Y=I$){let U=Y(new N8(_8.create(J.map(p0.create),i0(W),X.map(p0.create),$)));return new r$({...this.#$,node:U$.cloneWithConstraint(this.#$.node,U.toOperationNode())})}modifyFront($){return new r$({...this.#$,node:U$.cloneWithFrontModifier(this.#$.node,$.toOperationNode())})}modifyEnd($){return new r$({...this.#$,node:U$.cloneWithEndModifier(this.#$.node,$.toOperationNode())})}as($){return new r$({...this.#$,node:U$.cloneWith(this.#$.node,{selectQuery:p$($)})})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var UP=C(()=>{SZ();jX();Pw();g();CZ();G$();_w();RZ();qZ();TZ();jZ();i4();dh();oL();E8();sL()});class YY{#$;constructor($){this.#$=V($)}on($){return new YY({...this.#$,node:e9.cloneWith(this.#$.node,{table:i0($)})})}ifExists(){return new YY({...this.#$,node:e9.cloneWith(this.#$.node,{ifExists:!0})})}cascade(){return new YY({...this.#$,node:e9.cloneWith(this.#$.node,{cascade:!0})})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var ZP=C(()=>{eU();i4();g()});class bZ{#$;constructor($){this.#$=V($)}ifExists(){return new bZ({...this.#$,node:$Z.cloneWith(this.#$.node,{ifExists:!0})})}cascade(){return new bZ({...this.#$,node:$Z.cloneWith(this.#$.node,{cascade:!0})})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var HP=C(()=>{bz();g()});class gZ{#$;constructor($){this.#$=V($)}ifExists(){return new gZ({...this.#$,node:JZ.cloneWith(this.#$.node,{ifExists:!0})})}cascade(){return new gZ({...this.#$,node:JZ.cloneWith(this.#$.node,{cascade:!0})})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var GP=C(()=>{gz();g()});var R8;var fZ=C(()=>{g();u5();R8=V({is($){return $.kind==="CreateViewNode"},create($){return V({kind:"CreateViewNode",name:Z$.create($)})},cloneWith($,J){return V({...$,...J})}})});class zP{#$=new xZ;transformQuery($){return this.#$.transformNode($.node,$.queryId)}transformResult($){return Promise.resolve($.result)}}var lh=C(()=>{WP()});class s5{#$;constructor($){this.#$=V($)}temporary(){return new s5({...this.#$,node:R8.cloneWith(this.#$.node,{temporary:!0})})}materialized(){return new s5({...this.#$,node:R8.cloneWith(this.#$.node,{materialized:!0})})}ifNotExists(){return new s5({...this.#$,node:R8.cloneWith(this.#$.node,{ifNotExists:!0})})}orReplace(){return new s5({...this.#$,node:R8.cloneWith(this.#$.node,{orReplace:!0})})}columns($){return new s5({...this.#$,node:R8.cloneWith(this.#$.node,{columns:$.map(SI)})})}as($){let J=$.withPlugin(new zP).toOperationNode();return new s5({...this.#$,node:R8.cloneWith(this.#$.node,{as:J})})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var wP=C(()=>{g();fZ();l4();lh()});var UY;var kw=C(()=>{g();u5();UY=V({is($){return $.kind==="DropViewNode"},create($){return V({kind:"DropViewNode",name:Z$.create($)})},cloneWith($,J){return V({...$,...J})}})});class ZY{#$;constructor($){this.#$=V($)}materialized(){return new ZY({...this.#$,node:UY.cloneWith(this.#$.node,{materialized:!0})})}ifExists(){return new ZY({...this.#$,node:UY.cloneWith(this.#$.node,{ifExists:!0})})}cascade(){return new ZY({...this.#$,node:UY.cloneWith(this.#$.node,{cascade:!0})})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var DP=C(()=>{g();kw()});var vw;var Cw=C(()=>{g();XJ();V8();vw=V({is($){return $.kind==="CreateTypeNode"},create($){return V({kind:"CreateTypeNode",name:$})},cloneWithEnum($,J){return V({...$,enum:M8.create(J.map(Z4.createImmediate))})}})});class Tw{#$;constructor($){this.#$=V($)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}asEnum($){return new Tw({...this.#$,node:vw.cloneWithEnum(this.#$.node,$)})}$call($){return $(this)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var KP=C(()=>{g();Cw()});var qw;var hw=C(()=>{g();qw=V({is($){return $.kind==="DropTypeNode"},create($){return V({kind:"DropTypeNode",name:$})},cloneWith($,J){return V({...$,...J})}})});class xw{#$;constructor($){this.#$=V($)}ifExists(){return new xw({...this.#$,node:qw.cloneWith(this.#$.node,{ifExists:!0})})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var OP=C(()=>{hw();g()});function FP($){if($.includes(".")){let W=$.split(".").map(l10);if(W.length===2)return Z$.createWithSchema(W[0],W[1]);else throw Error(`invalid schemable identifier ${$}`)}else return Z$.create($)}function l10($){return $.trim()}var rh=C(()=>{u5()});var HY;var bw=C(()=>{g();u5();HY=V({is($){return $.kind==="RefreshMaterializedViewNode"},create($){return V({kind:"RefreshMaterializedViewNode",name:Z$.create($)})},cloneWith($,J){return V({...$,...J})}})});class GY{#$;constructor($){this.#$=V($)}concurrently(){return new GY({...this.#$,node:HY.cloneWith(this.#$.node,{concurrently:!0,withNoData:!1})})}withData(){return new GY({...this.#$,node:HY.cloneWith(this.#$.node,{withNoData:!1})})}withNoData(){return new GY({...this.#$,node:HY.cloneWith(this.#$.node,{withNoData:!0,concurrently:!1})})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var EP=C(()=>{g();bw()});class zY{#$;constructor($){this.#$=$}createTable($){return new r$({queryId:P0(),executor:this.#$,node:U$.create(i0($))})}dropTable($){return new gZ({queryId:P0(),executor:this.#$,node:JZ.create(i0($))})}createIndex($){return new l6({queryId:P0(),executor:this.#$,node:z8.create($)})}dropIndex($){return new YY({queryId:P0(),executor:this.#$,node:e9.create($)})}createSchema($){return new jw({queryId:P0(),executor:this.#$,node:hz.create($)})}dropSchema($){return new bZ({queryId:P0(),executor:this.#$,node:$Z.create($)})}alterTable($){return new $P({queryId:P0(),executor:this.#$,node:r0.create(i0($))})}createView($){return new s5({queryId:P0(),executor:this.#$,node:R8.create($)})}refreshMaterializedView($){return new GY({queryId:P0(),executor:this.#$,node:HY.create($)})}dropView($){return new ZY({queryId:P0(),executor:this.#$,node:UY.create($)})}createType($){return new Tw({queryId:P0(),executor:this.#$,node:vw.create(FP($))})}dropType($){return new xw({queryId:P0(),executor:this.#$,node:qw.create(FP($))})}withPlugin($){return new zY(this.#$.withPlugin($))}withoutPlugins(){return new zY(this.#$.withoutPlugins())}withSchema($){return new zY(this.#$.withPluginAtFront(new Q6($)))}}var MP=C(()=>{C7();qz();xz();jX();eU();bz();gz();i4();JP();XP();YP();UP();ZP();HP();GP();d6();y7();wP();fZ();DP();kw();KP();OP();Cw();hw();rh();EP();bw()});class VP{ref($){return new LI($)}table($){return new bL($)}}var QP=C(()=>{YZ();Iw()});class AP{#$;constructor($){this.#$=$}async provideConnection($){let J=await this.#$.acquireConnection();try{return await $(J)}finally{await this.#$.releaseConnection(J)}}}var FJ;var IP=C(()=>{ML();FJ=class FJ extends IZ{#$;#J;#W;constructor($,J,W,X=[]){super(X);this.#$=$,this.#J=J,this.#W=W}get adapter(){return this.#J}compileQuery($,J){return this.#$.compileQuery($,J)}provideConnection($){return this.#W.provideConnection($)}withPlugins($){return new FJ(this.#$,this.#J,this.#W,[...this.plugins,...$])}withPlugin($){return new FJ(this.#$,this.#J,this.#W,[...this.plugins,$])}withPluginAtFront($){return new FJ(this.#$,this.#J,this.#W,[$,...this.plugins])}withConnectionProvider($){return new FJ(this.#$,this.#J,$,[...this.plugins])}withoutPlugins(){return new FJ(this.#$,this.#J,this.#W,[])}}});function gw(){if(typeof performance<"u"&&Y1(performance.now))return performance.now();else return Date.now()}var nh=C(()=>{g()});class LP{#$;#J;#W;#X;#Y;#Z=new WeakSet;constructor($,J){this.#X=!1,this.#$=$,this.#J=J}async init(){if(this.#Y)throw Error("driver has already been destroyed");if(!this.#W)this.#W=this.#$.init().then(()=>{this.#X=!0}).catch(($)=>{return this.#W=void 0,Promise.reject($)});await this.#W}async acquireConnection(){if(this.#Y)throw Error("driver has already been destroyed");if(!this.#X)await this.init();let $=await this.#$.acquireConnection();if(!this.#Z.has($)){if(this.#H())this.#w($);this.#Z.add($)}return $}async releaseConnection($){await this.#$.releaseConnection($)}beginTransaction($,J){return this.#$.beginTransaction($,J)}commitTransaction($){return this.#$.commitTransaction($)}rollbackTransaction($){return this.#$.rollbackTransaction($)}savepoint($,J,W){if(this.#$.savepoint)return this.#$.savepoint($,J,W);throw Error("The `savepoint` method is not supported by this driver")}rollbackToSavepoint($,J,W){if(this.#$.rollbackToSavepoint)return this.#$.rollbackToSavepoint($,J,W);throw Error("The `rollbackToSavepoint` method is not supported by this driver")}releaseSavepoint($,J,W){if(this.#$.releaseSavepoint)return this.#$.releaseSavepoint($,J,W);throw Error("The `releaseSavepoint` method is not supported by this driver")}async destroy(){if(!this.#W)return;if(await this.#W,!this.#Y)this.#Y=this.#$.destroy().catch(($)=>{return this.#Y=void 0,Promise.reject($)});await this.#Y}#H(){return this.#J.isLevelEnabled("query")||this.#J.isLevelEnabled("error")}#w($){let{executeQuery:J,streamQuery:W}=$,X=this;$.executeQuery=async(Y)=>{let U,Z=gw();try{return await J.call($,Y)}catch(H){throw U=H,await X.#z(H,Y,Z),H}finally{if(!U)await X.#G(Y,Z)}},$.streamQuery=async function*(Y,U){let Z,H=gw();try{for await(let G of W.call($,Y,U))yield G}catch(G){throw Z=G,await X.#z(G,Y,H),G}finally{if(!Z)await X.#G(Y,H,!0)}}}async#z($,J,W){await this.#J.error(()=>({level:"error",error:$,query:J,queryDurationMillis:this.#U(W)}))}async#G($,J,W=!1){await this.#J.query(()=>({level:"query",isStream:W,query:$,queryDurationMillis:this.#U(J)}))}#U($){return gw()-$}}var ih=C(()=>{nh()});class mZ{#$;#J;constructor($){this.#$=$}async provideConnection($){while(this.#J)await this.#J.catch(r10);return this.#J=this.#W($).finally(()=>{this.#J=void 0}),this.#J}async#W($){return await $(this.#$)}}var r10=()=>{};function PP($){if($.accessMode&&!n10.includes($.accessMode))throw Error(`invalid transaction access mode ${$.accessMode}`);if($.isolationLevel&&!i10.includes($.isolationLevel))throw Error(`invalid transaction isolation level ${$.isolationLevel}`)}var n10,i10;var _P=C(()=>{n10=["read only","read write"],i10=["read uncommitted","read committed","repeatable read","serializable","snapshot"]});class NP{#$;#J;constructor($){if(Y1($))this.#J=$,this.#$=V({query:!0,error:!0});else this.#J=t10,this.#$=V({query:$.includes("query"),error:$.includes("error")})}isLevelEnabled($){return this.#$[$]}async query($){if(this.#$.query)await this.#J($())}async error($){if(this.#$.error)await this.#J($())}}function t10($){if($.level==="query"){let J=`kysely:query:${$.isStream?"stream:":""}`;console.log(`${J} ${$.query.sql}`),console.log(`${J} duration: ${$.queryDurationMillis.toFixed(1)}ms`)}else if($.level==="error")if($.error instanceof Error)console.error(`kysely:error: ${$.error.stack??$.error.message}`);else console.error(`kysely:error: ${JSON.stringify({error:$.error,query:$.query.sql,queryDurationMillis:$.queryDurationMillis})}`)}var ox0;var BP=C(()=>{g();ox0=V(["query","error"])});function th($){return M1($)&&Y1($.compile)}var RP=C(()=>{g()});function a10($){return M1($)&&M1($.config)&&M1($.driver)&&M1($.executor)&&M1($.dialect)}class ah{#$;constructor($){this.#$=V($)}async execute($){return this.#$.executor.provideConnection(async(J)=>{let W=this.#$.executor.withConnectionProvider(new mZ(J)),X=new z5({...this.#$,executor:W});return await $(X)})}}class fw{#$;constructor($){this.#$=V($)}setAccessMode($){return new fw({...this.#$,accessMode:$})}setIsolationLevel($){return new fw({...this.#$,isolationLevel:$})}async execute($){let{isolationLevel:J,accessMode:W,...X}=this.#$,Y={isolationLevel:J,accessMode:W};return PP(Y),this.#$.executor.provideConnection(async(U)=>{let Z=this.#$.executor.withConnectionProvider(new mZ(U)),H=new l7({...X,executor:Z}),G=!1;try{await this.#$.driver.beginTransaction(U,Y),G=!0;let z=await $(H);return await this.#$.driver.commitTransaction(U),z}catch(z){if(G)await this.#$.driver.rollbackTransaction(U);throw z}})}}class mw{#$;constructor($){this.#$=V($)}setAccessMode($){return new mw({...this.#$,accessMode:$})}setIsolationLevel($){return new mw({...this.#$,isolationLevel:$})}async execute(){let{isolationLevel:$,accessMode:J,...W}=this.#$,X={isolationLevel:$,accessMode:J};PP(X);let Y=await Zw(this.#$.executor);return await this.#$.driver.beginTransaction(Y.connection,X),new e5({...W,connection:Y,executor:this.#$.executor.withConnectionProvider(new mZ(Y.connection))})}}class wY{#$;constructor($){this.#$=$}async execute(){return await this.#$()}}function d7($){if($.isCommitted)throw Error("Transaction is already committed");if($.isRolledBack)throw Error("Transaction is already rolled back")}class EJ{#$;#J;constructor($,J){if($ instanceof EJ)this.#$=$.#$;else this.#$=$;this.#J=J}get adapter(){return this.#$.adapter}get plugins(){return this.#$.plugins}transformQuery($,J){return this.#$.transformQuery($,J)}compileQuery($,J){return this.#$.compileQuery($,J)}provideConnection($){return this.#$.provideConnection($)}executeQuery($){return d7(this.#J),this.#$.executeQuery($)}stream($,J){return d7(this.#J),this.#$.stream($,J)}withConnectionProvider($){return new EJ(this.#$.withConnectionProvider($),this.#J)}withPlugin($){return new EJ(this.#$.withPlugin($),this.#J)}withPlugins($){return new EJ(this.#$.withPlugins($),this.#J)}withPluginAtFront($){return new EJ(this.#$.withPluginAtFront($),this.#J)}withoutPlugins(){return new EJ(this.#$.withoutPlugins(),this.#J)}}var z5,l7,e5;var oh=C(()=>{MP();QP();Hw();IP();g();ih();_P();Mw();BP();d6();RP();Vw();PZ();E8();y7();EL();qX();Symbol.asyncDispose??=Symbol("Symbol.asyncDispose");z5=class z5 extends U5{#$;constructor($){let J,W;if(a10($))J={executor:$.executor},W={...$};else{let X=$.dialect,Y=X.createDriver(),U=X.createQueryCompiler(),Z=X.createAdapter(),H=new NP($.log??[]),G=new LP(Y,H),z=new AP(G),w=new FJ(U,Z,z,$.plugins??[]);J={executor:w},W={config:$,executor:w,dialect:X,driver:G}}super(J);this.#$=V(W)}get schema(){return new zY(this.#$.executor)}get dynamic(){return new VP}get introspection(){return this.#$.dialect.createIntrospector(this.withoutPlugins())}case($){return new _Z({node:A6.create(A$($)?void 0:p$($))})}get fn(){return Ew()}transaction(){return new fw({...this.#$})}startTransaction(){return new mw({...this.#$})}connection(){return new ah({...this.#$})}withPlugin($){return new z5({...this.#$,executor:this.#$.executor.withPlugin($)})}withoutPlugins(){return new z5({...this.#$,executor:this.#$.executor.withoutPlugins()})}withSchema($){return new z5({...this.#$,executor:this.#$.executor.withPluginAtFront(new Q6($))})}withTables(){return new z5({...this.#$})}async destroy(){await this.#$.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#$.executor}executeQuery($,J){if(J!==void 0)F8("Passing `queryId` in `db.executeQuery` is deprecated and will result in a compile-time error in the future.");let W=th($)?$.compile():$;return this.getExecutor().executeQuery(W)}async[Symbol.asyncDispose](){await this.destroy()}};l7=class l7 extends z5{#$;constructor($){super($);this.#$=$}get isTransaction(){return!0}transaction(){throw Error("calling the transaction method for a Transaction is not supported")}connection(){throw Error("calling the connection method for a Transaction is not supported")}async destroy(){throw Error("calling the destroy method for a Transaction is not supported")}withPlugin($){return new l7({...this.#$,executor:this.#$.executor.withPlugin($)})}withoutPlugins(){return new l7({...this.#$,executor:this.#$.executor.withoutPlugins()})}withSchema($){return new l7({...this.#$,executor:this.#$.executor.withPluginAtFront(new Q6($))})}withTables(){return new l7({...this.#$})}};e5=class e5 extends l7{#$;#J;#W;constructor($){let J={isCommitted:!1,isRolledBack:!1};$={...$,executor:new EJ($.executor,J)};let{connection:W,...X}=$;super(X);this.#$=V($),this.#W=J;let Y=P0();this.#J=(U)=>$.executor.compileQuery(U,Y)}get isCommitted(){return this.#W.isCommitted}get isRolledBack(){return this.#W.isRolledBack}commit(){return d7(this.#W),new wY(async()=>{await this.#$.driver.commitTransaction(this.#$.connection.connection),this.#W.isCommitted=!0,this.#$.connection.release()})}rollback(){return d7(this.#W),new wY(async()=>{await this.#$.driver.rollbackTransaction(this.#$.connection.connection),this.#W.isRolledBack=!0,this.#$.connection.release()})}savepoint($){return d7(this.#W),new wY(async()=>{return await this.#$.driver.savepoint?.(this.#$.connection.connection,$,this.#J),new e5({...this.#$})})}rollbackToSavepoint($){return d7(this.#W),new wY(async()=>{return await this.#$.driver.rollbackToSavepoint?.(this.#$.connection.connection,$,this.#J),new e5({...this.#$})})}releaseSavepoint($){return d7(this.#W),new wY(async()=>{return await this.#$.driver.releaseSavepoint?.(this.#$.connection.connection,$,this.#J),new e5({...this.#$})})}withPlugin($){return new e5({...this.#$,executor:this.#$.executor.withPlugin($)})}withoutPlugins(){return new e5({...this.#$,executor:this.#$.executor.withoutPlugins()})}withSchema($){return new e5({...this.#$,executor:this.#$.executor.withPluginAtFront(new Q6($))})}withTables(){return new e5({...this.#$})}}});var sh=()=>{};var eh=()=>{};var $x=()=>{};var Jx=()=>{};var Wx=()=>{};class yZ{#$;constructor($){this.#$=V($)}get expressionType(){return}get isRawBuilder(){return!0}as($){return new Xx(this,$)}$castTo(){return new yZ({...this.#$})}$notNull(){return new yZ(this.#$)}withPlugin($){return new yZ({...this.#$,plugins:this.#$.plugins!==void 0?V([...this.#$.plugins,$]):V([$])})}toOperationNode(){return this.#W(this.#J())}compile($){return this.#X(this.#J($))}async execute($){let J=this.#J($);return J.executeQuery(this.#X(J))}#J($){let J=$!==void 0?$.getExecutor():wJ;return this.#$.plugins!==void 0?J.withPlugins(this.#$.plugins):J}#W($){return $.transformQuery(this.#$.rawNode,this.#$.queryId)}#X($){return $.compileQuery(this.#W($),this.#$.queryId)}}function $9($){return new yZ($)}class Xx{#$;#J;constructor($,J){this.#$=$,this.#J=J}get expression(){return this.#$}get alias(){return this.#J}get rawBuilder(){return this.#$}toOperationNode(){return C4.create(this.#$.toOperationNode(),_1(this.#J)?this.#J.toOperationNode():F0.create(this.#J))}}var SP=C(()=>{w8();g();iX();V1();c$()});function Yx($){if(_1($))return $.toOperationNode();return K1($)}var e0;var MJ=C(()=>{V1();c$();y6();V8();l4();i4();J5();d6();SP();e0=Object.assign(($,...J)=>{return $9({queryId:P0(),rawNode:n0.create($,J?.map(Yx)??[])})},{ref($){return $9({queryId:P0(),rawNode:n0.createWithChild(O6($))})},val($){return $9({queryId:P0(),rawNode:n0.createWithChild(K1($))})},value($){return this.val($)},table($){return $9({queryId:P0(),rawNode:n0.createWithChild(i0($))})},id(...$){let J=Array($.length+1).fill(".");return J[0]="",J[J.length-1]="",$9({queryId:P0(),rawNode:n0.create(J,$.map(F0.create))})},lit($){return $9({queryId:P0(),rawNode:n0.createWithChild(Z4.createImmediate($))})},literal($){return this.lit($)},raw($){return $9({queryId:P0(),rawNode:n0.createWithSql($)})},join($,J=e0`, `){let W=Array(Math.max(2*$.length-1,0)),X=J.toOperationNode();for(let Y=0;Y<$.length;++Y)if(W[2*Y]=Yx($[Y]),Y!==$.length-1)W[2*Y+1]=X;return $9({queryId:P0(),rawNode:n0.createWithChildren(W)})}})});var Ux=()=>{};var Zx=()=>{};class jP{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#$=V({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),RenameConstraintNode:this.visitRenameConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),RefreshMaterializedViewNode:this.visitRefreshMaterializedView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this),MergeQueryNode:this.visitMergeQuery.bind(this),MatchedNode:this.visitMatched.bind(this),AddIndexNode:this.visitAddIndex.bind(this),CastNode:this.visitCast.bind(this),FetchNode:this.visitFetch.bind(this),TopNode:this.visitTop.bind(this),OutputNode:this.visitOutput.bind(this),OrActionNode:this.visitOrAction.bind(this),CollateNode:this.visitCollate.bind(this)});visitNode=($)=>{this.nodeStack.push($),this.#$[$.kind]($),this.nodeStack.pop()}}var kP=C(()=>{g()});var o10,I6,s10,Hx,e10;var r7=C(()=>{jX();x7();kP();d5();gX();y6();g();fZ();zw();b7();qX();o10=/'/g;I6=class I6 extends jP{#$="";#J=[];get numParameters(){return this.#J.length}compileQuery($,J){return this.#$="",this.#J=[],this.nodeStack.splice(0,this.nodeStack.length),this.visitNode($),V({query:$,queryId:J,sql:this.getSql(),parameters:[...this.#J]})}getSql(){return this.#$}visitSelectQuery($){let J=this.parentNode!==void 0&&!E6.is(this.parentNode)&&!o1.is(this.parentNode)&&!U$.is(this.parentNode)&&!R8.is(this.parentNode)&&!Gw.is(this.parentNode);if(this.parentNode===void 0&&$.explain)this.visitNode($.explain),this.append(" ");if(J)this.append("(");if($.with)this.visitNode($.with),this.append(" ");if(this.append("select"),$.distinctOn)this.append(" "),this.compileDistinctOn($.distinctOn);if($.frontModifiers?.length)this.append(" "),this.compileList($.frontModifiers," ");if($.top)this.append(" "),this.visitNode($.top);if($.selections)this.append(" "),this.compileList($.selections);if($.from)this.append(" "),this.visitNode($.from);if($.joins)this.append(" "),this.compileList($.joins," ");if($.where)this.append(" "),this.visitNode($.where);if($.groupBy)this.append(" "),this.visitNode($.groupBy);if($.having)this.append(" "),this.visitNode($.having);if($.setOperations)this.append(" "),this.compileList($.setOperations," ");if($.orderBy)this.append(" "),this.visitNode($.orderBy);if($.limit)this.append(" "),this.visitNode($.limit);if($.offset)this.append(" "),this.visitNode($.offset);if($.fetch)this.append(" "),this.visitNode($.fetch);if($.endModifiers?.length)this.append(" "),this.compileList(this.sortSelectModifiers([...$.endModifiers])," ");if(J)this.append(")")}visitFrom($){this.append("from "),this.compileList($.froms)}visitSelection($){this.visitNode($.selection)}visitColumn($){this.visitNode($.column)}compileDistinctOn($){this.append("distinct on ("),this.compileList($),this.append(")")}compileList($,J=", "){let W=$.length-1;for(let X=0;X<=W;X++)if(this.visitNode($[X]),X<W)this.append(J)}visitWhere($){this.append("where "),this.visitNode($.where)}visitHaving($){this.append("having "),this.visitNode($.having)}visitInsertQuery($){let J=this.parentNode!==void 0&&!E6.is(this.parentNode)&&!n0.is(this.parentNode)&&!u6.is(this.parentNode);if(this.parentNode===void 0&&$.explain)this.visitNode($.explain),this.append(" ");if(J)this.append("(");if($.with)this.visitNode($.with),this.append(" ");if(this.append($.replace?"replace":"insert"),$.ignore)F8("`InsertQueryNode.ignore` is deprecated. Use `InsertQueryNode.orAction` instead."),this.append(" ignore");if($.orAction)this.append(" "),this.visitNode($.orAction);if($.top)this.append(" "),this.visitNode($.top);if($.into)this.append(" into "),this.visitNode($.into);if($.columns)this.append(" ("),this.compileList($.columns),this.append(")");if($.output)this.append(" "),this.visitNode($.output);if($.values)this.append(" "),this.visitNode($.values);if($.defaultValues)this.append(" "),this.append("default values");if($.onConflict)this.append(" "),this.visitNode($.onConflict);if($.onDuplicateKey)this.append(" "),this.visitNode($.onDuplicateKey);if($.returning)this.append(" "),this.visitNode($.returning);if(J)this.append(")");if($.endModifiers?.length)this.append(" "),this.compileList($.endModifiers," ")}visitValues($){this.append("values "),this.compileList($.values)}visitDeleteQuery($){let J=this.parentNode!==void 0&&!E6.is(this.parentNode)&&!n0.is(this.parentNode);if(this.parentNode===void 0&&$.explain)this.visitNode($.explain),this.append(" ");if(J)this.append("(");if($.with)this.visitNode($.with),this.append(" ");if(this.append("delete "),$.top)this.visitNode($.top),this.append(" ");if(this.visitNode($.from),$.output)this.append(" "),this.visitNode($.output);if($.using)this.append(" "),this.visitNode($.using);if($.joins)this.append(" "),this.compileList($.joins," ");if($.where)this.append(" "),this.visitNode($.where);if($.orderBy)this.append(" "),this.visitNode($.orderBy);if($.limit)this.append(" "),this.visitNode($.limit);if($.returning)this.append(" "),this.visitNode($.returning);if(J)this.append(")");if($.endModifiers?.length)this.append(" "),this.compileList($.endModifiers," ")}visitReturning($){this.append("returning "),this.compileList($.selections)}visitAlias($){this.visitNode($.node),this.append(" as "),this.visitNode($.alias)}visitReference($){if($.table)this.visitNode($.table),this.append(".");this.visitNode($.column)}visitSelectAll($){this.append("*")}visitIdentifier($){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier($),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier($){if(!X1($.name))throw Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier($.name))}visitAnd($){this.visitNode($.left),this.append(" and "),this.visitNode($.right)}visitOr($){this.visitNode($.left),this.append(" or "),this.visitNode($.right)}visitValue($){if($.immediate)this.appendImmediateValue($.value);else this.appendValue($.value)}visitValueList($){this.append("("),this.compileList($.values),this.append(")")}visitTuple($){this.append("("),this.compileList($.values),this.append(")")}visitPrimitiveValueList($){this.append("(");let{values:J}=$;for(let W=0;W<J.length;++W)if(this.appendValue(J[W]),W!==J.length-1)this.append(", ");this.append(")")}visitParens($){this.append("("),this.visitNode($.node),this.append(")")}visitJoin($){if(this.append(e10[$.joinType]),this.append(" "),this.visitNode($.table),$.on)this.append(" "),this.visitNode($.on)}visitOn($){this.append("on "),this.visitNode($.on)}visitRaw($){let{sqlFragments:J,parameters:W}=$;for(let X=0;X<J.length;++X)if(this.append(J[X]),W.length>X)this.visitNode(W[X])}visitOperator($){this.append($.operator)}visitTable($){this.visitNode($.table)}visitSchemableIdentifier($){if($.schema)this.visitNode($.schema),this.append(".");this.visitNode($.identifier)}visitCreateTable($){if(this.append("create "),$.frontModifiers&&$.frontModifiers.length>0)this.compileList($.frontModifiers," "),this.append(" ");if($.temporary)this.append("temporary ");if(this.append("table "),$.ifNotExists)this.append("if not exists ");if(this.visitNode($.table),$.selectQuery)this.append(" as "),this.visitNode($.selectQuery);else{if(this.append(" ("),this.compileList([...$.columns,...$.constraints??[]]),this.append(")"),$.onCommit)this.append(" on commit "),this.append($.onCommit);if($.endModifiers&&$.endModifiers.length>0)this.append(" "),this.compileList($.endModifiers," ")}}visitColumnDefinition($){if($.ifNotExists)this.append("if not exists ");if(this.visitNode($.column),this.append(" "),this.visitNode($.dataType),$.unsigned)this.append(" unsigned");if($.frontModifiers&&$.frontModifiers.length>0)this.append(" "),this.compileList($.frontModifiers," ");if($.generated)this.append(" "),this.visitNode($.generated);if($.identity)this.append(" identity");if($.defaultTo)this.append(" "),this.visitNode($.defaultTo);if($.notNull)this.append(" not null");if($.unique)this.append(" unique");if($.nullsNotDistinct)this.append(" nulls not distinct");if($.primaryKey)this.append(" primary key");if($.autoIncrement)this.append(" "),this.append(this.getAutoIncrement());if($.references)this.append(" "),this.visitNode($.references);if($.check)this.append(" "),this.visitNode($.check);if($.endModifiers&&$.endModifiers.length>0)this.append(" "),this.compileList($.endModifiers," ")}getAutoIncrement(){return"auto_increment"}visitReferences($){if(this.append("references "),this.visitNode($.table),this.append(" ("),this.compileList($.columns),this.append(")"),$.onDelete)this.append(" on delete "),this.append($.onDelete);if($.onUpdate)this.append(" on update "),this.append($.onUpdate)}visitDropTable($){if(this.append("drop table "),$.ifExists)this.append("if exists ");if(this.visitNode($.table),$.cascade)this.append(" cascade")}visitDataType($){this.append($.dataType)}visitOrderBy($){this.append("order by "),this.compileList($.items)}visitOrderByItem($){if(this.visitNode($.orderBy),$.collation)this.append(" "),this.visitNode($.collation);if($.direction)this.append(" "),this.visitNode($.direction);if($.nulls)this.append(" nulls "),this.append($.nulls)}visitGroupBy($){this.append("group by "),this.compileList($.items)}visitGroupByItem($){this.visitNode($.groupBy)}visitUpdateQuery($){let J=this.parentNode!==void 0&&!E6.is(this.parentNode)&&!n0.is(this.parentNode)&&!u6.is(this.parentNode);if(this.parentNode===void 0&&$.explain)this.visitNode($.explain),this.append(" ");if(J)this.append("(");if($.with)this.visitNode($.with),this.append(" ");if(this.append("update "),$.top)this.visitNode($.top),this.append(" ");if($.table)this.visitNode($.table),this.append(" ");if(this.append("set "),$.updates)this.compileList($.updates);if($.output)this.append(" "),this.visitNode($.output);if($.from)this.append(" "),this.visitNode($.from);if($.joins){if(!$.from)throw Error("Joins in an update query are only supported as a part of a PostgreSQL 'update set from join' query. If you want to create a MySQL 'update join set' query, see https://kysely.dev/docs/examples/update/my-sql-joins");this.append(" "),this.compileList($.joins," ")}if($.where)this.append(" "),this.visitNode($.where);if($.orderBy)this.append(" "),this.visitNode($.orderBy);if($.limit)this.append(" "),this.visitNode($.limit);if($.returning)this.append(" "),this.visitNode($.returning);if(J)this.append(")");if($.endModifiers?.length)this.append(" "),this.compileList($.endModifiers," ")}visitColumnUpdate($){this.visitNode($.column),this.append(" = "),this.visitNode($.value)}visitLimit($){this.append("limit "),this.visitNode($.limit)}visitOffset($){this.append("offset "),this.visitNode($.offset)}visitOnConflict($){if(this.append("on conflict"),$.columns)this.append(" ("),this.compileList($.columns),this.append(")");else if($.constraint)this.append(" on constraint "),this.visitNode($.constraint);else if($.indexExpression)this.append(" ("),this.visitNode($.indexExpression),this.append(")");if($.indexWhere)this.append(" "),this.visitNode($.indexWhere);if($.doNothing===!0)this.append(" do nothing");else if($.updates){if(this.append(" do update set "),this.compileList($.updates),$.updateWhere)this.append(" "),this.visitNode($.updateWhere)}}visitOnDuplicateKey($){this.append("on duplicate key update "),this.compileList($.updates)}visitCreateIndex($){if(this.append("create "),$.unique)this.append("unique ");if(this.append("index "),$.ifNotExists)this.append("if not exists ");if(this.visitNode($.name),$.table)this.append(" on "),this.visitNode($.table);if($.using)this.append(" using "),this.visitNode($.using);if($.columns)this.append(" ("),this.compileList($.columns),this.append(")");if($.nullsNotDistinct)this.append(" nulls not distinct");if($.where)this.append(" "),this.visitNode($.where)}visitDropIndex($){if(this.append("drop index "),$.ifExists)this.append("if exists ");if(this.visitNode($.name),$.table)this.append(" on "),this.visitNode($.table);if($.cascade)this.append(" cascade")}visitCreateSchema($){if(this.append("create schema "),$.ifNotExists)this.append("if not exists ");this.visitNode($.schema)}visitDropSchema($){if(this.append("drop schema "),$.ifExists)this.append("if exists ");if(this.visitNode($.schema),$.cascade)this.append(" cascade")}visitPrimaryKeyConstraint($){if($.name)this.append("constraint "),this.visitNode($.name),this.append(" ");this.append("primary key ("),this.compileList($.columns),this.append(")"),this.buildDeferrable($)}buildDeferrable($){if($.deferrable!==void 0)if($.deferrable)this.append(" deferrable");else this.append(" not deferrable");if($.initiallyDeferred!==void 0)if($.initiallyDeferred)this.append(" initially deferred");else this.append(" initially immediate")}visitUniqueConstraint($){if($.name)this.append("constraint "),this.visitNode($.name),this.append(" ");if(this.append("unique"),$.nullsNotDistinct)this.append(" nulls not distinct");this.append(" ("),this.compileList($.columns),this.append(")"),this.buildDeferrable($)}visitCheckConstraint($){if($.name)this.append("constraint "),this.visitNode($.name),this.append(" ");this.append("check ("),this.visitNode($.expression),this.append(")")}visitForeignKeyConstraint($){if($.name)this.append("constraint "),this.visitNode($.name),this.append(" ");if(this.append("foreign key ("),this.compileList($.columns),this.append(") "),this.visitNode($.references),$.onDelete)this.append(" on delete "),this.append($.onDelete);if($.onUpdate)this.append(" on update "),this.append($.onUpdate);this.buildDeferrable($)}visitList($){this.compileList($.items)}visitWith($){if(this.append("with "),$.recursive)this.append("recursive ");this.compileList($.expressions)}visitCommonTableExpression($){if(this.visitNode($.name),this.append(" as "),c5($.materialized)){if(!$.materialized)this.append("not ");this.append("materialized ")}this.visitNode($.expression)}visitCommonTableExpressionName($){if(this.visitNode($.table),$.columns)this.append("("),this.compileList($.columns),this.append(")")}visitAlterTable($){if(this.append("alter table "),this.visitNode($.table),this.append(" "),$.renameTo)this.append("rename to "),this.visitNode($.renameTo);if($.setSchema)this.append("set schema "),this.visitNode($.setSchema);if($.addConstraint)this.visitNode($.addConstraint);if($.dropConstraint)this.visitNode($.dropConstraint);if($.renameConstraint)this.visitNode($.renameConstraint);if($.columnAlterations)this.compileColumnAlterations($.columnAlterations);if($.addIndex)this.visitNode($.addIndex);if($.dropIndex)this.visitNode($.dropIndex)}visitAddColumn($){this.append("add column "),this.visitNode($.column)}visitRenameColumn($){this.append("rename column "),this.visitNode($.column),this.append(" to "),this.visitNode($.renameTo)}visitDropColumn($){this.append("drop column "),this.visitNode($.column)}visitAlterColumn($){if(this.append("alter column "),this.visitNode($.column),this.append(" "),$.dataType){if(this.announcesNewColumnDataType())this.append("type ");if(this.visitNode($.dataType),$.dataTypeExpression)this.append("using "),this.visitNode($.dataTypeExpression)}if($.setDefault)this.append("set default "),this.visitNode($.setDefault);if($.dropDefault)this.append("drop default");if($.setNotNull)this.append("set not null");if($.dropNotNull)this.append("drop not null")}visitModifyColumn($){this.append("modify column "),this.visitNode($.column)}visitAddConstraint($){this.append("add "),this.visitNode($.constraint)}visitDropConstraint($){if(this.append("drop constraint "),$.ifExists)this.append("if exists ");if(this.visitNode($.constraintName),$.modifier==="cascade")this.append(" cascade");else if($.modifier==="restrict")this.append(" restrict")}visitRenameConstraint($){this.append("rename constraint "),this.visitNode($.oldName),this.append(" to "),this.visitNode($.newName)}visitSetOperation($){if(this.append($.operator),this.append(" "),$.all)this.append("all ");this.visitNode($.expression)}visitCreateView($){if(this.append("create "),$.orReplace)this.append("or replace ");if($.materialized)this.append("materialized ");if($.temporary)this.append("temporary ");if(this.append("view "),$.ifNotExists)this.append("if not exists ");if(this.visitNode($.name),this.append(" "),$.columns)this.append("("),this.compileList($.columns),this.append(") ");if($.as)this.append("as "),this.visitNode($.as)}visitRefreshMaterializedView($){if(this.append("refresh materialized view "),$.concurrently)this.append("concurrently ");if(this.visitNode($.name),$.withNoData)this.append(" with no data");else this.append(" with data")}visitDropView($){if(this.append("drop "),$.materialized)this.append("materialized ");if(this.append("view "),$.ifExists)this.append("if exists ");if(this.visitNode($.name),$.cascade)this.append(" cascade")}visitGenerated($){if(this.append("generated "),$.always)this.append("always ");if($.byDefault)this.append("by default ");if(this.append("as "),$.identity)this.append("identity");if($.expression)this.append("("),this.visitNode($.expression),this.append(")");if($.stored)this.append(" stored")}visitDefaultValue($){this.append("default "),this.visitNode($.defaultValue)}visitSelectModifier($){if($.rawModifier)this.visitNode($.rawModifier);else this.append(s10[$.modifier]);if($.of)this.append(" of "),this.compileList($.of,", ")}visitCreateType($){if(this.append("create type "),this.visitNode($.name),$.enum)this.append(" as enum "),this.visitNode($.enum)}visitDropType($){if(this.append("drop type "),$.ifExists)this.append("if exists ");this.visitNode($.name)}visitExplain($){if(this.append("explain"),$.options||$.format){if(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),$.options){if(this.visitNode($.options),$.format)this.append(this.getExplainOptionsDelimiter())}if($.format)this.append("format"),this.append(this.getExplainOptionAssignment()),this.append($.format);this.append(this.getRightExplainOptionsWrapper())}}visitDefaultInsertValue($){this.append("default")}visitAggregateFunction($){if(this.append($.func),this.append("("),$.distinct)this.append("distinct ");if(this.compileList($.aggregated),$.orderBy)this.append(" "),this.visitNode($.orderBy);if(this.append(")"),$.withinGroup)this.append(" within group ("),this.visitNode($.withinGroup),this.append(")");if($.filter)this.append(" filter("),this.visitNode($.filter),this.append(")");if($.over)this.append(" "),this.visitNode($.over)}visitOver($){if(this.append("over("),$.partitionBy){if(this.visitNode($.partitionBy),$.orderBy)this.append(" ")}if($.orderBy)this.visitNode($.orderBy);this.append(")")}visitPartitionBy($){this.append("partition by "),this.compileList($.items)}visitPartitionByItem($){this.visitNode($.partitionBy)}visitBinaryOperation($){this.visitNode($.leftOperand),this.append(" "),this.visitNode($.operator),this.append(" "),this.visitNode($.rightOperand)}visitUnaryOperation($){if(this.visitNode($.operator),!this.isMinusOperator($.operator))this.append(" ");this.visitNode($.operand)}isMinusOperator($){return H$.is($)&&$.operator==="-"}visitUsing($){this.append("using "),this.compileList($.tables)}visitFunction($){this.append($.func),this.append("("),this.compileList($.arguments),this.append(")")}visitCase($){if(this.append("case"),$.value)this.append(" "),this.visitNode($.value);if($.when)this.append(" "),this.compileList($.when," ");if($.else)this.append(" else "),this.visitNode($.else);if(this.append(" end"),$.isStatement)this.append(" case")}visitWhen($){if(this.append("when "),this.visitNode($.condition),$.result)this.append(" then "),this.visitNode($.result)}visitJSONReference($){this.visitNode($.reference),this.visitNode($.traversal)}visitJSONPath($){if($.inOperator)this.visitNode($.inOperator);this.append("'$");for(let J of $.pathLegs)this.visitNode(J);this.append("'")}visitJSONPathLeg($){let J=$.type==="ArrayLocation";if(this.append(J?"[":"."),this.append(String($.value)),J)this.append("]")}visitJSONOperatorChain($){for(let J=0,W=$.values.length;J<W;J++){if(J===W-1)this.visitNode($.operator);else this.append("->");this.visitNode($.values[J])}}visitMergeQuery($){if($.with)this.visitNode($.with),this.append(" ");if(this.append("merge "),$.top)this.visitNode($.top),this.append(" ");if(this.append("into "),this.visitNode($.into),$.using)this.append(" "),this.visitNode($.using);if($.whens)this.append(" "),this.compileList($.whens," ");if($.returning)this.append(" "),this.visitNode($.returning);if($.output)this.append(" "),this.visitNode($.output);if($.endModifiers?.length)this.append(" "),this.compileList($.endModifiers," ")}visitMatched($){if($.not)this.append("not ");if(this.append("matched"),$.bySource)this.append(" by source")}visitAddIndex($){if(this.append("add "),$.unique)this.append("unique ");if(this.append("index "),this.visitNode($.name),$.columns)this.append(" ("),this.compileList($.columns),this.append(")");if($.using)this.append(" using "),this.visitNode($.using)}visitCast($){this.append("cast("),this.visitNode($.expression),this.append(" as "),this.visitNode($.dataType),this.append(")")}visitFetch($){this.append("fetch next "),this.visitNode($.rowCount),this.append(` rows ${$.modifier}`)}visitOutput($){this.append("output "),this.compileList($.selections)}visitTop($){if(this.append(`top(${$.expression})`),$.modifiers)this.append(` ${$.modifiers}`)}visitOrAction($){this.append($.action)}visitCollate($){this.append("collate "),this.visitNode($.collation)}append($){this.#$+=$}appendValue($){this.addParameter($),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier($){let J=this.getLeftIdentifierWrapper(),W=this.getRightIdentifierWrapper(),X="";for(let Y of $)if(X+=Y,Y===J)X+=J;else if(Y===W)X+=W;return X}sanitizeStringLiteral($){return $.replace(o10,"''")}addParameter($){this.#J.push($)}appendImmediateValue($){if(X1($))this.appendStringLiteral($);else if(G8($)||c5($)||s9($))this.append($.toString());else if(o9($))this.append("null");else if(SX($))this.appendImmediateValue($.toISOString());else throw Error(`invalid immediate value ${$}`)}appendStringLiteral($){this.append("'"),this.append(this.sanitizeStringLiteral($)),this.append("'")}sortSelectModifiers($){return $.sort((J,W)=>J.modifier&&W.modifier?Hx[J.modifier]-Hx[W.modifier]:1),V($)}compileColumnAlterations($){this.compileList($)}announcesNewColumnDataType(){return!0}};s10=V({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),Hx=V({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),e10=V({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",CrossJoin:"cross join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral",LateralCrossJoin:"cross join lateral",OuterApply:"outer apply",CrossApply:"cross apply",Using:"using"})});var u1;var DY=C(()=>{y6();g();d6();u1=V({raw($,J=[]){return V({sql:$,query:n0.createWithSql($),parameters:V(J),queryId:P0()})}})});var Gx=()=>{};var zx=()=>{};var wx=()=>{};var Dx=()=>{};class J9{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}get supportsOutput(){return!1}}var Kx=()=>{};function r6($,J){return n0.createWithChildren([n0.createWithSql(`${$} `),F0.create(J)])}var yw=C(()=>{V1();y6()});class vP{#$;#J=new Fx;#W;#X;constructor($){this.#$=V({...$})}async init(){if(this.#W=Y1(this.#$.database)?await this.#$.database():this.#$.database,this.#X=new Ox(this.#W),this.#$.onCreateConnection)await this.#$.onCreateConnection(this.#X)}async acquireConnection(){return await this.#J.lock(),this.#X}async beginTransaction($){await $.executeQuery(u1.raw("begin"))}async commitTransaction($){await $.executeQuery(u1.raw("commit"))}async rollbackTransaction($){await $.executeQuery(u1.raw("rollback"))}async savepoint($,J,W){await $.executeQuery(W(r6("savepoint",J),P0()))}async rollbackToSavepoint($,J,W){await $.executeQuery(W(r6("rollback to",J),P0()))}async releaseSavepoint($,J,W){await $.executeQuery(W(r6("release",J),P0()))}async releaseConnection(){this.#J.unlock()}async destroy(){this.#W?.close()}}class Ox{#$;constructor($){this.#$=$}executeQuery($){let{sql:J,parameters:W}=$,X=this.#$.prepare(J);if(X.reader)return Promise.resolve({rows:X.all(W)});let{changes:Y,lastInsertRowid:U}=X.run(W);return Promise.resolve({numAffectedRows:Y!==void 0&&Y!==null?BigInt(Y):void 0,insertId:U!==void 0&&U!==null?BigInt(U):void 0,rows:[]})}async*streamQuery($,J){let{sql:W,parameters:X,query:Y}=$,U=this.#$.prepare(W);if(s0.is(Y)){let Z=U.iterate(X);for(let H of Z)yield{rows:[H]}}else throw Error("Sqlite driver only supports streaming of select queries")}}class Fx{#$;#J;async lock(){while(this.#$)await this.#$;this.#$=new Promise(($)=>{this.#J=$})}unlock(){let $=this.#J;this.#$=void 0,this.#J=void 0,$?.()}}var CP=C(()=>{UJ();yw();DY();g();d6()});var $40,TP;var qP=C(()=>{r7();$40=/"/g;TP=class TP extends I6{visitOrAction($){this.append("or "),this.append($.action)}getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier($){return $.replace($40,'""')}visitDefaultInsertValue($){this.append("null")}}});class hP{transformQuery($){return $.node}async transformResult($){return $.result}}class W40{#$;constructor($){this.#$=V($)}async getMigrations(){let $=await this.#D(this.#X)?await this.#$.db.withPlugin(this.#H).selectFrom(this.#X).select(["name","timestamp"]).$narrowType().execute():[];return(await this.#A()).map(({name:W,...X})=>{let Y=$.find((U)=>U.name===W);return{name:W,migration:X,executedAt:Y?new Date(Y.timestamp):void 0}})}async migrateToLatest(){return this.#J(()=>({direction:"Up",step:1/0}))}async migrateTo($){return this.#J(({migrations:J,executedMigrations:W,pendingMigrations:X})=>{if(M1($)&&$.__noMigrations__===!0)return{direction:"Down",step:1/0};if(!J.find((Z)=>Z.name===$))throw Error(`migration "${$}" doesn't exist`);let Y=W.indexOf($),U=X.findIndex((Z)=>Z.name===$);if(Y!==-1)return{direction:"Down",step:W.length-Y-1};else if(U!==-1)return{direction:"Up",step:U+1};else throw Error(`migration "${$}" isn't executed or pending`)})}async migrateUp(){return this.#J(()=>({direction:"Up",step:1}))}async migrateDown(){return this.#J(()=>({direction:"Down",step:1}))}async#J($){try{return await this.#w(),await this.#E($)}catch(J){if(J instanceof cw)return J.resultSet;return{error:J}}}get#W(){return this.#$.migrationTableSchema}get#X(){return this.#$.migrationTableName??P$}get#Y(){return this.#$.migrationLockTableName??n$}get#Z(){return this.#$.allowUnorderedMigrations??J40}get#H(){if(this.#W)return new Q6(this.#W);return new hP}async#w(){await this.#z(),await this.#G(),await this.#U(),await this.#Q()}async#z(){if(!this.#W)return;if(!await this.#O())try{await this.#R(this.#$.db.schema.createSchema(this.#W))}catch($){if(!await this.#O())throw $}}async#G(){if(!await this.#D(this.#X))try{if(this.#W)await this.#R(this.#$.db.schema.createSchema(this.#W));await this.#R(this.#$.db.schema.withPlugin(this.#H).createTable(this.#X).addColumn("name","varchar(255)",($)=>$.notNull().primaryKey()).addColumn("timestamp","varchar(255)",($)=>$.notNull()))}catch($){if(!await this.#D(this.#X))throw $}}async#U(){if(!await this.#D(this.#Y))try{await this.#R(this.#$.db.schema.withPlugin(this.#H).createTable(this.#Y).addColumn("id","varchar(255)",($)=>$.notNull().primaryKey()).addColumn("is_locked","integer",($)=>$.notNull().defaultTo(0)))}catch($){if(!await this.#D(this.#Y))throw $}}async#Q(){if(!await this.#F())try{await this.#$.db.withPlugin(this.#H).insertInto(this.#Y).values({id:xP,is_locked:0}).execute()}catch($){if(!await this.#F())throw $}}async#O(){return(await this.#$.db.introspection.getSchemas()).some((J)=>J.name===this.#W)}async#D($){let J=this.#W;return(await this.#$.db.introspection.getTables({withInternalKyselyTables:!0})).some((X)=>X.name===$&&(!J||X.schema===J))}async#F(){return!!await this.#$.db.withPlugin(this.#H).selectFrom(this.#Y).where("id","=",xP).select("id").executeTakeFirst()}async#E($){let J=this.#$.db.getExecutor().adapter,W=V({lockTable:this.#$.migrationLockTableName??n$,lockRowId:xP,lockTableSchema:this.#$.migrationTableSchema}),X=async(Y)=>{try{await J.acquireMigrationLock(Y,W);let U=await this.#M(Y);if(U.migrations.length===0)return{results:[]};let{direction:Z,step:H}=$(U);if(H<=0)return{results:[]};if(Z==="Down")return await this.#V(Y,U,H);else if(Z==="Up")return await this.#B(Y,U,H);return{results:[]}}finally{await J.releaseMigrationLock(Y,W)}};if(J.supportsTransactionalDdl&&!this.#$.disableTransactions)return this.#$.db.transaction().execute(X);else return this.#$.db.connection().execute(X)}async#M($){let J=await this.#A(),W=await this.#I($);if(this.#P(J,W),!this.#Z)this.#N(J,W);let X=this.#L(J,W);return V({migrations:J,executedMigrations:W,lastMigration:Tq(W),pendingMigrations:X})}#L($,J){return $.filter((W)=>{return!J.includes(W.name)})}async#A(){let $=await this.#$.provider.getMigrations();return Object.keys($).sort().map((J)=>({...$[J],name:J}))}async#I($){let J=await $.withPlugin(this.#H).selectFrom(this.#X).select(["name","timestamp"]).$narrowType().execute(),W=this.#$.nameComparator||((X,Y)=>X.localeCompare(Y));return J.sort((X,Y)=>{if(X.timestamp===Y.timestamp)return W(X.name,Y.name);return new Date(X.timestamp).getTime()-new Date(Y.timestamp).getTime()}).map((X)=>X.name)}#P($,J){for(let W of J)if(!$.some((X)=>X.name===W))throw Error(`corrupted migrations: previously executed migration ${W} is missing`)}#N($,J){for(let W=0;W<J.length;++W)if($[W].name!==J[W])throw Error(`corrupted migrations: expected previously executed migration ${J[W]} to be at index ${W} but ${$[W].name} was found in its place. New migrations must always have a name that comes alphabetically after the last executed migration.`)}async#V($,J,W){let X=J.executedMigrations.slice().reverse().slice(0,W).map((U)=>{return J.migrations.find((Z)=>Z.name===U)}),Y=X.map((U)=>{return{migrationName:U.name,direction:"Down",status:"NotExecuted"}});for(let U=0;U<Y.length;++U){let Z=X[U];try{if(Z.down)await Z.down($),await $.withPlugin(this.#H).deleteFrom(this.#X).where("name","=",Z.name).execute(),Y[U]={migrationName:Z.name,direction:"Down",status:"Success"}}catch(H){throw Y[U]={migrationName:Z.name,direction:"Down",status:"Error"},new cw({error:H,results:Y})}}return{results:Y}}async#B($,J,W){let Y=J.pendingMigrations.slice(0,W).map((U)=>{return{migrationName:U.name,direction:"Up",status:"NotExecuted"}});for(let U=0;U<Y.length;U++){let Z=J.pendingMigrations[U];try{await Z.up($),await $.withPlugin(this.#H).insertInto(this.#X).values({name:Z.name,timestamp:new Date().toISOString()}).execute(),Y[U]={migrationName:Z.name,direction:"Up",status:"Success"}}catch(H){throw Y[U]={migrationName:Z.name,direction:"Up",status:"Error"},new cw({error:H,results:Y})}}return{results:Y}}async#R($){if(this.#$.db.getExecutor().adapter.supportsCreateIfNotExists)$=$.ifNotExists();await $.execute()}}var P$="kysely_migration",n$="kysely_migration_lock",J40=!1,xP="migration_lock",Qg0,cw;var n7=C(()=>{y7();g();Qg0=V({__noMigrations__:!0});cw=class cw extends Error{#$;constructor($){super();this.#$=$}get resultSet(){return this.#$}}});class bP{#$;constructor($){this.#$=$}async getSchemas(){return[]}async getTables($={withInternalKyselyTables:!1}){return await this.#W($)}async getMetadata($){return{tables:await this.getTables($)}}#J($,J){let W=$.selectFrom("sqlite_master").where("type","in",["table","view"]).where("name","not like","sqlite_%").select(["name","sql","type"]).orderBy("name");if(!J.withInternalKyselyTables)W=W.where("name","!=",P$).where("name","!=",n$);return W}async#W($){let J=await this.#J(this.#$,$).execute(),W=await this.#$.with("table_list",(Y)=>this.#J(Y,$)).selectFrom(["table_list as tl",e0`pragma_table_info(tl.name)`.as("p")]).select(["tl.name as table","p.cid","p.name","p.type","p.notnull","p.dflt_value","p.pk"]).orderBy("tl.name").orderBy("p.cid").execute(),X={};for(let Y of W)X[Y.table]??=[],X[Y.table].push(Y);return J.map(({name:Y,sql:U,type:Z})=>{let H=U?.split(/[\(\),]/)?.find((z)=>z.toLowerCase().includes("autoincrement"))?.trimStart()?.split(/\s+/)?.[0]?.replace(/["`]/g,""),G=X[Y]??[];if(!H){let z=G.filter((w)=>w.pk>0);if(z.length===1&&z[0].type.toLowerCase()==="integer")H=z[0].name}return{name:Y,isView:Z==="view",columns:G.map((z)=>({name:z.name,dataType:z.type,isNullable:!z.notnull,isAutoIncrementing:z.name===H,hasDefaultValue:z.dflt_value!=null,comment:void 0}))}})}}var gP=C(()=>{n7();MJ()});var fP;var mP=C(()=>{fP=class fP extends J9{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock($,J){}async releaseMigrationLock($,J){}}});class uw{#$;constructor($){this.#$=V({...$})}createDriver(){return new vP(this.#$)}createQueryCompiler(){return new TP}createAdapter(){return new fP}createIntrospector($){return new bP($)}}var Ex=C(()=>{CP();qP();gP();mP();g()});var Mx=()=>{};var X40,yP;var cP=C(()=>{r7();X40=/"/g;yP=class yP extends I6{sanitizeIdentifier($){return $.replace(X40,'""')}}});class uP{#$;constructor($){this.#$=$}async getSchemas(){return(await this.#$.selectFrom("pg_catalog.pg_namespace").select("nspname").$castTo().execute()).map((J)=>({name:J.nspname}))}async getTables($={withInternalKyselyTables:!1}){let J=this.#$.selectFrom("pg_catalog.pg_attribute as a").innerJoin("pg_catalog.pg_class as c","a.attrelid","c.oid").innerJoin("pg_catalog.pg_namespace as ns","c.relnamespace","ns.oid").innerJoin("pg_catalog.pg_type as typ","a.atttypid","typ.oid").innerJoin("pg_catalog.pg_namespace as dtns","typ.typnamespace","dtns.oid").select(["a.attname as column","a.attnotnull as not_null","a.atthasdef as has_default","c.relname as table","c.relkind as table_type","ns.nspname as schema","typ.typname as type","dtns.nspname as type_schema",e0`col_description(a.attrelid, a.attnum)`.as("column_description"),e0`pg_get_serial_sequence(quote_ident(ns.nspname) || '.' || quote_ident(c.relname), a.attname)`.as("auto_incrementing")]).where("c.relkind","in",["r","v","p"]).where("ns.nspname","!~","^pg_").where("ns.nspname","!=","information_schema").where("ns.nspname","!=","crdb_internal").where(e0`has_schema_privilege(ns.nspname, 'USAGE')`).where("a.attnum",">=",0).where("a.attisdropped","!=",!0).orderBy("ns.nspname").orderBy("c.relname").orderBy("a.attnum").$castTo();if(!$.withInternalKyselyTables)J=J.where("c.relname","!=",P$).where("c.relname","!=",n$);let W=await J.execute();return this.#J(W)}async getMetadata($){return{tables:await this.getTables($)}}#J($){return $.reduce((J,W)=>{let X=J.find((Y)=>Y.name===W.table&&Y.schema===W.schema);if(!X)X=V({name:W.table,isView:W.table_type==="v",schema:W.schema,columns:[]}),J.push(X);return X.columns.push(V({name:W.column,dataType:W.type,dataTypeSchema:W.type_schema,isNullable:!W.not_null,isAutoIncrementing:W.auto_incrementing!==null,hasDefaultValue:W.has_default,comment:W.column_description??void 0})),J},[])}}var pP=C(()=>{n7();g();MJ()});var Y40,dP;var lP=C(()=>{MJ();Y40=BigInt("3853314791062309107");dP=class dP extends J9{get supportsTransactionalDdl(){return!0}get supportsReturning(){return!0}async acquireMigrationLock($,J){await e0`select pg_advisory_xact_lock(${e0.lit(Y40)})`.execute($)}async releaseMigrationLock($,J){}}});function KY($,J){if(U40($)&&J.stack){let W=J.stack.split(`
`).slice(1).join(`
`);return $.stack+=`
${W}`,$}return $}function U40($){return M1($)&&X1($.stack)}var pw=C(()=>{g()});class rP{#$;#J=new WeakMap;#W;constructor($){this.#$=V({...$})}async init(){this.#W=Y1(this.#$.pool)?await this.#$.pool():this.#$.pool}async acquireConnection(){let $=await this.#X(),J=this.#J.get($);if(!J){if(J=new Qx($),this.#J.set($,J),this.#$?.onCreateConnection)await this.#$.onCreateConnection(J)}if(this.#$?.onReserveConnection)await this.#$.onReserveConnection(J);return J}async#X(){return new Promise(($,J)=>{this.#W.getConnection(async(W,X)=>{if(W)J(W);else $(X)})})}async beginTransaction($,J){if(J.isolationLevel||J.accessMode){let W=[];if(J.isolationLevel)W.push(`isolation level ${J.isolationLevel}`);if(J.accessMode)W.push(J.accessMode);let X=`set transaction ${W.join(", ")}`;await $.executeQuery(u1.raw(X))}await $.executeQuery(u1.raw("begin"))}async commitTransaction($){await $.executeQuery(u1.raw("commit"))}async rollbackTransaction($){await $.executeQuery(u1.raw("rollback"))}async savepoint($,J,W){await $.executeQuery(W(r6("savepoint",J),P0()))}async rollbackToSavepoint($,J,W){await $.executeQuery(W(r6("rollback to",J),P0()))}async releaseSavepoint($,J,W){await $.executeQuery(W(r6("release savepoint",J),P0()))}async releaseConnection($){$[Vx]()}async destroy(){return new Promise(($,J)=>{this.#W.end((W)=>{if(W)J(W);else $()})})}}function Z40($){return M1($)&&"insertId"in $&&"affectedRows"in $}var Vx,Qx;var nP=C(()=>{yw();DY();g();d6();pw();Vx=Symbol();Qx=class Qx{#$;constructor($){this.#$=$}async executeQuery($){try{let J=await this.#J($);if(Z40(J)){let{insertId:W,affectedRows:X,changedRows:Y}=J;return{insertId:W!==void 0&&W!==null&&W.toString()!=="0"?BigInt(W):void 0,numAffectedRows:X!==void 0&&X!==null?BigInt(X):void 0,numChangedRows:Y!==void 0&&Y!==null?BigInt(Y):void 0,rows:[]}}else if(Array.isArray(J))return{rows:J};return{rows:[]}}catch(J){throw KY(J,Error())}}#J($){return new Promise((J,W)=>{this.#$.query($.sql,$.parameters,(X,Y)=>{if(X)W(X);else J(Y)})})}async*streamQuery($,J){let W=this.#$.query($.sql,$.parameters).stream({objectMode:!0});try{for await(let X of W)yield{rows:[X]}}catch(X){if(X&&typeof X==="object"&&"code"in X&&X.code==="ERR_STREAM_PREMATURE_CLOSE")return;throw X}}[Vx](){this.#$.release()}}});var H40,iP;var tP=C(()=>{r7();H40=/`/g;iP=class iP extends I6{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getExplainOptionAssignment(){return"="}getExplainOptionsDelimiter(){return" "}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return"`"}getRightIdentifierWrapper(){return"`"}sanitizeIdentifier($){return $.replace(H40,"``")}visitCreateIndex($){if(this.append("create "),$.unique)this.append("unique ");if(this.append("index "),$.ifNotExists)this.append("if not exists ");if(this.visitNode($.name),$.using)this.append(" using "),this.visitNode($.using);if($.table)this.append(" on "),this.visitNode($.table);if($.columns)this.append(" ("),this.compileList($.columns),this.append(")");if($.where)this.append(" "),this.visitNode($.where)}}});class aP{#$;constructor($){this.#$=$}async getSchemas(){return(await this.#$.selectFrom("information_schema.schemata").select("schema_name").$castTo().execute()).map((J)=>({name:J.SCHEMA_NAME}))}async getTables($={withInternalKyselyTables:!1}){let J=this.#$.selectFrom("information_schema.columns as columns").innerJoin("information_schema.tables as tables",(X)=>X.onRef("columns.TABLE_CATALOG","=","tables.TABLE_CATALOG").onRef("columns.TABLE_SCHEMA","=","tables.TABLE_SCHEMA").onRef("columns.TABLE_NAME","=","tables.TABLE_NAME")).select(["columns.COLUMN_NAME","columns.COLUMN_DEFAULT","columns.TABLE_NAME","columns.TABLE_SCHEMA","tables.TABLE_TYPE","columns.IS_NULLABLE","columns.DATA_TYPE","columns.EXTRA","columns.COLUMN_COMMENT"]).where("columns.TABLE_SCHEMA","=",e0`database()`).orderBy("columns.TABLE_NAME").orderBy("columns.ORDINAL_POSITION").$castTo();if(!$.withInternalKyselyTables)J=J.where("columns.TABLE_NAME","!=",P$).where("columns.TABLE_NAME","!=",n$);let W=await J.execute();return this.#J(W)}async getMetadata($){return{tables:await this.getTables($)}}#J($){return $.reduce((J,W)=>{let X=J.find((Y)=>Y.name===W.TABLE_NAME);if(!X)X=V({name:W.TABLE_NAME,isView:W.TABLE_TYPE==="VIEW",schema:W.TABLE_SCHEMA,columns:[]}),J.push(X);return X.columns.push(V({name:W.COLUMN_NAME,dataType:W.DATA_TYPE,isNullable:W.IS_NULLABLE==="YES",isAutoIncrementing:W.EXTRA.toLowerCase().includes("auto_increment"),hasDefaultValue:W.COLUMN_DEFAULT!==null,comment:W.COLUMN_COMMENT===""?void 0:W.COLUMN_COMMENT})),J},[])}}var oP=C(()=>{n7();g();MJ()});var Ax="ea586330-2c93-47c8-908d-981d9d270f9d",G40=3600,sP;var eP=C(()=>{MJ();sP=class sP extends J9{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}async acquireMigrationLock($,J){await e0`select get_lock(${e0.lit(Ax)}, ${e0.lit(G40)})`.execute($)}async releaseMigrationLock($,J){await e0`select release_lock(${e0.lit(Ax)})`.execute($)}}});class dw{#$;constructor($){this.#$=$}createDriver(){return new rP(this.#$)}createQueryCompiler(){return new iP}createAdapter(){return new sP}createIntrospector($){return new aP($)}}var Ix=C(()=>{nP();tP();oP();eP()});var Lx=()=>{};class $_{#$;#J=new WeakMap;#W;constructor($){this.#$=V({...$})}async init(){this.#W=Y1(this.#$.pool)?await this.#$.pool():this.#$.pool}async acquireConnection(){let $=await this.#W.connect(),J=this.#J.get($);if(!J){if(J=new _x($,{cursor:this.#$.cursor??null}),this.#J.set($,J),this.#$.onCreateConnection)await this.#$.onCreateConnection(J)}if(this.#$.onReserveConnection)await this.#$.onReserveConnection(J);return J}async beginTransaction($,J){if(J.isolationLevel||J.accessMode){let W="start transaction";if(J.isolationLevel)W+=` isolation level ${J.isolationLevel}`;if(J.accessMode)W+=` ${J.accessMode}`;await $.executeQuery(u1.raw(W))}else await $.executeQuery(u1.raw("begin"))}async commitTransaction($){await $.executeQuery(u1.raw("commit"))}async rollbackTransaction($){await $.executeQuery(u1.raw("rollback"))}async savepoint($,J,W){await $.executeQuery(W(r6("savepoint",J),P0()))}async rollbackToSavepoint($,J,W){await $.executeQuery(W(r6("rollback to",J),P0()))}async releaseSavepoint($,J,W){await $.executeQuery(W(r6("release",J),P0()))}async releaseConnection($){$[Px]()}async destroy(){if(this.#W){let $=this.#W;this.#W=void 0,await $.end()}}}var Px,_x;var J_=C(()=>{yw();DY();g();d6();pw();Px=Symbol();_x=class _x{#$;#J;constructor($,J){this.#$=$,this.#J=J}async executeQuery($){try{let{command:J,rowCount:W,rows:X}=await this.#$.query($.sql,[...$.parameters]);return{numAffectedRows:J==="INSERT"||J==="UPDATE"||J==="DELETE"||J==="MERGE"?BigInt(W):void 0,rows:X??[]}}catch(J){throw KY(J,Error())}}async*streamQuery($,J){if(!this.#J.cursor)throw Error("'cursor' is not present in your postgres dialect config. It's required to make streaming work in postgres.");if(!Number.isInteger(J)||J<=0)throw Error("chunkSize must be a positive integer");let W=this.#$.query(new this.#J.cursor($.sql,$.parameters.slice()));try{while(!0){let X=await W.read(J);if(X.length===0)break;yield{rows:X}}}finally{await W.close()}}[Px](){this.#$.release()}}});var Nx=()=>{};class lw{#$;constructor($){this.#$=$}createDriver(){return new $_(this.#$)}createQueryCompiler(){return new yP}createAdapter(){return new dP}createIntrospector($){return new uP($)}}var Bx=C(()=>{J_();pP();cP();lP()});var W_;var X_=C(()=>{n7();MJ();W_=class W_ extends J9{get supportsCreateIfNotExists(){return!1}get supportsTransactionalDdl(){return!0}get supportsOutput(){return!0}async acquireMigrationLock($){await e0`exec sp_getapplock @DbPrincipal = ${e0.lit("dbo")}, @Resource = ${e0.lit(P$)}, @LockMode = ${e0.lit("Exclusive")}`.execute($)}async releaseMigrationLock(){}}});var Rx=()=>{};class Y_{#$;#J;constructor($){this.#$=V({...$});let{tarn:J,tedious:W,validateConnections:X}=this.#$,{validateConnections:Y,...U}=J.options;this.#J=new J.Pool({...U,create:async()=>{let Z=await W.connectionFactory();return await new vx(Z,W).connect()},destroy:async(Z)=>{await Z[jx]()},validate:X===!1||Y===!1?void 0:(Z)=>Z[kx]()})}async init(){}async acquireConnection(){return await this.#J.acquire().promise}async beginTransaction($,J){await $.beginTransaction(J)}async commitTransaction($){await $.commitTransaction()}async rollbackTransaction($){await $.rollbackTransaction()}async savepoint($,J){await $.savepoint(J)}async rollbackToSavepoint($,J){await $.rollbackTransaction(J)}async releaseConnection($){if(this.#$.resetConnectionsOnRelease||this.#$.tedious.resetConnectionOnRelease)await $[Sx]();this.#J.release($)}async destroy(){await this.#J.destroy()}}class rw{#$;#J;#W;#X;#Y;#Z;constructor($){let{compiledQuery:J,onDone:W,streamChunkSize:X,tedious:Y}=$;if(this.#J=[],this.#W=X,this.#X={},this.#Y=Y,W)this.#X.onDone=(Z,H)=>{if(Z==="chunkReady")return;if(delete this.#X.onDone,Z==="error")return W.reject(H);W.resolve({rowCount:this.#Z,rows:this.#J})};this.#$=new this.#Y.Request(J.sql,(U,Z)=>{if(U)return Object.values(this.#X).forEach((H)=>H("error",U instanceof AggregateError?U.errors:U));this.#Z=Z}),this.#H(J.parameters),this.#w()}get request(){return this.#$}readChunk(){let $=this.readChunk.name;return new Promise((J,W)=>{this.#X[$]=(X,Y)=>{if(delete this.#X[$],X==="error")return W(Y);J(this.#J.splice(0,this.#W))},this.#$.resume()})}#H($){for(let J=0;J<$.length;J++){let W=$[J];this.#$.addParameter(String(J+1),this.#z(W),W)}}#w(){let $=this.#W?()=>{if(this.#W<=this.#J.length)this.#$.pause(),Object.values(this.#X).forEach((W)=>W("chunkReady"))}:()=>{},J=(W)=>{let X={};for(let Y of W)X[Y.metadata.colName]=Y.value;this.#J.push(X),$()};this.#$.on("row",J),this.#$.once("requestCompleted",()=>{Object.values(this.#X).forEach((W)=>W("completed")),this.#$.off("row",J)})}#z($){if(o9($)||A$($)||X1($))return this.#Y.TYPES.NVarChar;if(s9($)||G8($)&&$%1===0)if($<-2147483648||$>2147483647)return this.#Y.TYPES.BigInt;else return this.#Y.TYPES.Int;if(G8($))return this.#Y.TYPES.Float;if(c5($))return this.#Y.TYPES.Bit;if(SX($))return this.#Y.TYPES.DateTime;if(vz($))return this.#Y.TYPES.VarBinary;return this.#Y.TYPES.NVarChar}}var Sx,jx,kx,vx;var U_=C(()=>{g();DY();pw();DL();Sx=Symbol(),jx=Symbol(),kx=Symbol();vx=class vx{#$;#J;#W;constructor($,J){this.#$=$,this.#J=!1,this.#W=J}async beginTransaction($){let{isolationLevel:J}=$;await new Promise((W,X)=>this.#$.beginTransaction((Y)=>{if(Y)X(Y);else W(void 0)},J?Uw(8):void 0,J?this.#X(J):void 0))}async commitTransaction(){await new Promise(($,J)=>this.#$.commitTransaction((W)=>{if(W)J(W);else $(void 0)}))}async connect(){let{promise:$,reject:J,resolve:W}=new zJ;this.#$.connect((Y)=>{if(Y)return J(Y);W()}),this.#$.on("error",(Y)=>{if(Y instanceof Error&&"code"in Y&&Y.code==="ESOCKET")this.#J=!0;console.error(Y),J(Y)});function X(){J(Error("The connection ended without ever completing the connection"))}return this.#$.once("end",X),await $,this.#$.off("end",X),this}async executeQuery($){try{let J=new zJ,W=new rw({compiledQuery:$,tedious:this.#W,onDone:J});this.#$.execSql(W.request);let{rowCount:X,rows:Y}=await J.promise;return{numAffectedRows:X!==void 0?BigInt(X):void 0,rows:Y}}catch(J){throw KY(J,Error())}}async rollbackTransaction($){await new Promise((J,W)=>this.#$.rollbackTransaction((X)=>{if(X)W(X);else J(void 0)},$))}async savepoint($){await new Promise((J,W)=>this.#$.saveTransaction((X)=>{if(X)W(X);else J(void 0)},$))}async*streamQuery($,J){if(!Number.isInteger(J)||J<=0)throw Error("chunkSize must be a positive integer");let W=new rw({compiledQuery:$,streamChunkSize:J,tedious:this.#W});this.#$.execSql(W.request);try{while(!0){let X=await W.readChunk();if(X.length===0)break;if(yield{rows:X},X.length<J)break}}finally{await this.#Y(W)}}#X($){let{ISOLATION_LEVEL:J}=this.#W,X={"read committed":J.READ_COMMITTED,"read uncommitted":J.READ_UNCOMMITTED,"repeatable read":J.REPEATABLE_READ,serializable:J.SERIALIZABLE,snapshot:J.SNAPSHOT}[$];if(X===void 0)throw Error(`Unknown isolation level: ${$}`);return X}#Y($){return new Promise((J)=>{if($.request.once("requestCompleted",J),!this.#$.cancel())$.request.off("requestCompleted",J),J()})}[jx](){if("closed"in this.#$&&this.#$.closed)return Promise.resolve();return new Promise(($)=>{this.#$.once("end",$),this.#$.close()})}async[Sx](){await new Promise(($,J)=>{this.#$.reset((W)=>{if(W)return J(W);$()})})}async[kx](){if(this.#J||this.#Z())return!1;try{let $=new zJ,J=new rw({compiledQuery:u1.raw("select 1"),onDone:$,tedious:this.#W});return this.#$.execSql(J.request),await $.promise,!0}catch{return!1}}#Z(){return"closed"in this.#$&&Boolean(this.#$.closed)}}});class Z_{#$;constructor($){this.#$=$}async getSchemas(){return await this.#$.selectFrom("sys.schemas").select("name").execute()}async getTables($={withInternalKyselyTables:!1}){let J=await this.#$.selectFrom("sys.tables as tables").leftJoin("sys.schemas as table_schemas","table_schemas.schema_id","tables.schema_id").innerJoin("sys.columns as columns","columns.object_id","tables.object_id").innerJoin("sys.types as types","types.user_type_id","columns.user_type_id").leftJoin("sys.schemas as type_schemas","type_schemas.schema_id","types.schema_id").leftJoin("sys.extended_properties as comments",(X)=>X.onRef("comments.major_id","=","tables.object_id").onRef("comments.minor_id","=","columns.column_id").on("comments.name","=","MS_Description")).$if(!$.withInternalKyselyTables,(X)=>X.where("tables.name","!=",P$).where("tables.name","!=",n$)).select(["tables.name as table_name",(X)=>X.ref("tables.type").$castTo().as("table_type"),"table_schemas.name as table_schema_name","columns.default_object_id as column_default_object_id","columns.generated_always_type_desc as column_generated_always_type","columns.is_computed as column_is_computed","columns.is_identity as column_is_identity","columns.is_nullable as column_is_nullable","columns.is_rowguidcol as column_is_rowguidcol","columns.name as column_name","types.is_nullable as type_is_nullable","types.name as type_name","type_schemas.name as type_schema_name","comments.value as column_comment"]).unionAll(this.#$.selectFrom("sys.views as views").leftJoin("sys.schemas as view_schemas","view_schemas.schema_id","views.schema_id").innerJoin("sys.columns as columns","columns.object_id","views.object_id").innerJoin("sys.types as types","types.user_type_id","columns.user_type_id").leftJoin("sys.schemas as type_schemas","type_schemas.schema_id","types.schema_id").leftJoin("sys.extended_properties as comments",(X)=>X.onRef("comments.major_id","=","views.object_id").onRef("comments.minor_id","=","columns.column_id").on("comments.name","=","MS_Description")).select(["views.name as table_name","views.type as table_type","view_schemas.name as table_schema_name","columns.default_object_id as column_default_object_id","columns.generated_always_type_desc as column_generated_always_type","columns.is_computed as column_is_computed","columns.is_identity as column_is_identity","columns.is_nullable as column_is_nullable","columns.is_rowguidcol as column_is_rowguidcol","columns.name as column_name","types.is_nullable as type_is_nullable","types.name as type_name","type_schemas.name as type_schema_name","comments.value as column_comment"])).orderBy("table_schema_name").orderBy("table_name").orderBy("column_name").execute(),W={};for(let X of J){let Y=`${X.table_schema_name}.${X.table_name}`;(W[Y]=W[Y]||V({columns:[],isView:X.table_type==="V ",name:X.table_name,schema:X.table_schema_name??void 0})).columns.push(V({dataType:X.type_name,dataTypeSchema:X.type_schema_name??void 0,hasDefaultValue:X.column_default_object_id>0||X.column_generated_always_type!=="NOT_APPLICABLE"||X.column_is_identity||X.column_is_computed||X.column_is_rowguidcol,isAutoIncrementing:X.column_is_identity,isNullable:X.column_is_nullable&&X.type_is_nullable,name:X.column_name,comment:X.column_comment??void 0}))}return Object.values(W)}async getMetadata($){return{tables:await this.getTables($)}}}var H_=C(()=>{n7();g()});var z40,G_;var z_=C(()=>{r7();z40=/^[a-z0-9_]$/i;G_=class G_ extends I6{getCurrentParameterPlaceholder(){return`@${this.numParameters}`}visitOffset($){super.visitOffset($),this.append(" rows")}compileColumnAlterations($){let J={};for(let X of $){if(!J[X.kind])J[X.kind]=[];J[X.kind].push(X)}let W=!0;if(J.AddColumnNode)this.append("add "),this.compileList(J.AddColumnNode),W=!1;if(J.AlterColumnNode){if(!W)this.append(", ");this.compileList(J.AlterColumnNode)}if(J.DropColumnNode){if(!W)this.append(", ");this.append("drop column "),this.compileList(J.DropColumnNode)}if(J.ModifyColumnNode){if(!W)this.append(", ");this.compileList(J.ModifyColumnNode)}if(J.RenameColumnNode){if(!W)this.append(", ");this.compileList(J.RenameColumnNode)}}visitAddColumn($){this.visitNode($.column)}visitDropColumn($){this.visitNode($.column)}visitMergeQuery($){super.visitMergeQuery($),this.append(";")}visitCollate($){this.append("collate ");let{name:J}=$.collation;for(let W of J)if(!z40.test(W))throw Error(`Invalid collation: ${J}`);this.append(J)}announcesNewColumnDataType(){return!1}}});class w_{#$;constructor($){this.#$=$}createDriver(){return new Y_(this.#$)}createQueryCompiler(){return new G_}createAdapter(){return new W_}createIntrospector($){return new Z_($)}}var Cx=C(()=>{X_();U_();H_();z_()});var Tx=()=>{};class w40{#$;constructor($){this.#$=$}async getMigrations(){let $={},J=await this.#$.fs.readdir(this.#$.migrationFolder);for(let W of J)if(W.endsWith(".js")||W.endsWith(".ts")&&!W.endsWith(".d.ts")||W.endsWith(".mjs")||W.endsWith(".mts")&&!W.endsWith(".d.mts")){let X=await import(this.#$.path.join(this.#$.migrationFolder,W)),Y=W.substring(0,W.lastIndexOf("."));if(qx(X?.default))$[Y]=X.default;else if(qx(X))$[Y]=X}return $}}function qx($){return M1($)&&Y1($.up)}var hx=C(()=>{g()});var xx=()=>{};var D_;var bx=C(()=>{m7();D_=class D_ extends L8{#$;constructor($){super();this.#$=$}transformIdentifier($,J){return $=super.transformIdentifier($,J),{...$,name:this.#$($.name)}}}});function fx({upperCase:$=!1,underscoreBeforeDigits:J=!1,underscoreBetweenUppercaseLetters:W=!1}={}){return yx((X)=>{if(X.length===0)return X;let Y=X.toUpperCase(),U=X.toLowerCase(),Z=U[0];for(let H=1,G=X.length;H<G;++H){let z=X[H],w=X[H-1],D=Y[H],K=Y[H-1],O=U[H],F=U[H-1];if(J&&gx(z)&&!gx(w)&&!Z.endsWith("_")){Z+="_"+z;continue}if(z===D&&D!==O)if(W||!(w===K&&K!==F))Z+="_"+O;else Z+=O;else Z+=z}if($)return Z.toUpperCase();else return Z})}function mx({upperCase:$=!1}={}){return yx((J)=>{if(J.length===0)return J;if($&&D40(J))J=J.toLowerCase();let W=J[0];for(let X=1,Y=J.length;X<Y;++X){let U=J[X],Z=J[X-1];if(U!=="_")if(Z==="_")W+=U.toUpperCase();else W+=U}return W})}function D40($){for(let J=1,W=$.length;J<W;++J){let X=$[J];if(X!=="_"&&X!==X.toUpperCase())return!1}return!0}function gx($){return $>="0"&&$<="9"}function yx($){let J=new Map;return(W)=>{let X=J.get(W);if(!X)X=$(W),J.set(W,X);return X}}class K40{opt;#$;#J;#W;constructor($={}){this.opt=$,this.#$=mx($),this.#J=fx($),this.#W=new D_(this.snakeCase.bind(this))}transformQuery($){return this.#W.transformNode($.node,$.queryId)}async transformResult($){if($.result.rows&&Array.isArray($.result.rows))return{...$.result,rows:$.result.rows.map((J)=>this.mapRow(J))};return $.result}mapRow($){return Object.keys($).reduce((J,W)=>{let X=$[W];if(Array.isArray(X))X=X.map((Y)=>cx(Y,this.opt)?this.mapRow(Y):Y);else if(cx(X,this.opt))X=this.mapRow(X);return J[this.camelCase(W)]=X,J},{})}snakeCase($){return this.#J($)}camelCase($){return this.#$($)}}function cx($,J){return Cz($)&&!J?.maintainNestedObjectKeys}var ux=C(()=>{g();bx()});var K_;var px=C(()=>{m7();g();K_=class K_ extends L8{transformSelectQuery($,J){return this.#$(super.transformSelectQuery($,J))}transformUpdateQuery($,J){return this.#$(super.transformUpdateQuery($,J))}transformDeleteQuery($,J){return this.#$(super.transformDeleteQuery($,J))}#$($){if(!$.joins||$.joins.length===0)return $;return V({...$,joins:this.#J($.joins)})}#J($){let J=[];for(let W=0;W<$.length;++W){let X=!1;for(let Y=0;Y<J.length;++Y)if(Tz($[W],J[Y])){X=!0;break}if(!X)J.push($[W])}return V(J)}}});class O40{#$=new K_;transformQuery($){return this.#$.transformNode($.node,$.queryId)}transformResult($){return Promise.resolve($.result)}}var dx=C(()=>{px()});class F40{opt;#$;constructor($={}){this.opt=$,this.#$=$.objectStrategy||"in-place"}transformQuery($){return $.node}async transformResult($){return{...$.result,rows:lx($.result.rows,this.#$)}}}function lx($,J){let W=J==="create"?Array($.length):$;for(let X=0;X<$.length;++X)W[X]=O_($[X],J);return W}function O_($,J){if(X1($))return E40($);if(Array.isArray($))return lx($,J);if(Cz($))return V40($,J);return $}function E40($){if(M40($))try{return O_(JSON.parse($),"in-place")}catch(J){}return $}function M40($){return $.match(/^[\[\{]/)!=null}function V40($,J){let W=J==="create"?{}:$;for(let X in $)W[X]=O_($[X],J);return W}var rx=C(()=>{g()});var F_;var nx=C(()=>{m7();ZZ();d5();XJ();F_=class F_ extends L8{#$;constructor($){super();this.#$=$}transformBinaryOperation($){if(this.#J($))return this.#$($);return $}#J($){let{operator:J,rightOperand:W}=$;return(bX.is(W)||M8.is(W))&&W.values.length===0&&H$.is(J)&&(J.operator==="in"||J.operator==="not in")}}});class Q40{opt;#$;constructor($){this.opt=$,this.#$=new F_($.strategy)}transformQuery($){return this.#$.transformNode($.node,$.queryId)}async transformResult($){return $.result}}var ix=C(()=>{nx()});var tx=C(()=>{WZ();Aw();Qw();d5();XJ();V8();g()});var ax=()=>{};var ox=()=>{};var sx=()=>{};var ex=()=>{};var $b=()=>{};var Jb=()=>{};var Wb=()=>{};var cZ=C(()=>{HJ();qX();d6();oh();Hw();mz();aX();sh();eh();$x();Jx();Wx();LZ();XL();Ww();UL();g7();dI();Mw();$L();RL();Vw();CL();AL();NI();SP();MJ();Ux();IP();iX();Zx();r7();DY();MP();UP();KP();GP();OP();XP();ZP();YP();HP();Pw();_w();JP();wP();EP();DP();aL();QP();YZ();Iw();_P();Gx();zx();wx();Dx();Kx();Ex();Mx();CP();cP();pP();lP();Ix();Lx();nP();tP();oP();eP();J_();Nx();Bx();qP();gP();mP();X_();Rx();Cx();U_();H_();z_();r7();Tx();n7();hx();xx();ux();dx();y7();rx();ix();tx();fL();Nw();Sw();Fw();w8();tL();C7();$J();WZ();PZ();Aw();jZ();_I();SZ();G$();oI();GL();Xw();ax();qz();xz();jX();Cw();fZ();bw();Qw();iI();lL();DZ();yL();Bw();eU();bz();gz();hw();kw();cI();_L();CZ();wZ();BL();dL();PL();hI();bI();V1();x7();vX();rz();vL();UZ();dz();MZ();oz();OL();OZ();iL();LL();Jw();sI();AI();c$();m7();kP();ox();d5();WL();T7();pz();GZ();pI();tz();gX();lI();TI();qZ();ZZ();c6();y6();cz();kZ();uL();eL();yI();u5();XZ();QI();UJ();rI();zw();sx();kX();JL();qL();SL();TZ();mX();fI();XJ();V8();nI();b7();KZ();wL();ex();RP();$b();Jb();BP();Wb()});var nb={};x$(nb,{BunSqliteQueryCompiler:()=>k_,BunSqliteIntrospector:()=>j_,BunSqliteDriver:()=>S_,BunSqliteDialect:()=>rb,BunSqliteAdapter:()=>R_});class R_{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(){}async releaseMigrationLock(){}get supportsOutput(){return!0}}class S_{#$;#J=new lb;#W;#X;constructor($){this.#$={...$}}async init(){if(this.#W=this.#$.database,this.#X=new db(this.#W),this.#$.onCreateConnection)await this.#$.onCreateConnection(this.#X)}async acquireConnection(){return await this.#J.lock(),this.#X}async beginTransaction($){await $.executeQuery(u1.raw("begin"))}async commitTransaction($){await $.executeQuery(u1.raw("commit"))}async rollbackTransaction($){await $.executeQuery(u1.raw("rollback"))}async releaseConnection(){this.#J.unlock()}async destroy(){this.#W?.close()}}class db{#$;constructor($){this.#$=$}executeQuery($){let{sql:J,parameters:W}=$,X=this.#$.prepare(J);return Promise.resolve({rows:X.all(W)})}async*streamQuery(){throw Error("Streaming query is not supported by SQLite driver.")}}class lb{#$;#J;async lock(){while(this.#$)await this.#$;this.#$=new Promise(($)=>{this.#J=$})}unlock(){let $=this.#J;this.#$=void 0,this.#J=void 0,$?.()}}class j_{#$;constructor($){this.#$=$}async getSchemas(){return[]}async getTables($={withInternalKyselyTables:!1}){let J=this.#$.selectFrom("sqlite_schema").where("type","=","table").where("name","not like","sqlite_%").select("name").$castTo();if(!$.withInternalKyselyTables)J=J.where("name","!=",P$).where("name","!=",n$);let W=await J.execute();return Promise.all(W.map(({name:X})=>this.#J(X)))}async getMetadata($){return{tables:await this.getTables($)}}async#J($){let J=this.#$,X=(await J.selectFrom("sqlite_master").where("name","=",$).select("sql").$castTo().execute())[0]?.sql?.split(/[\(\),]/)?.find((U)=>U.toLowerCase().includes("autoincrement"))?.split(/\s+/)?.[0]?.replace(/["`]/g,""),Y=await J.selectFrom(e0`pragma_table_info(${$})`.as("table_info")).select(["name","type","notnull","dflt_value"]).execute();return{name:$,columns:Y.map((U)=>({name:U.name,dataType:U.type,isNullable:!U.notnull,isAutoIncrementing:U.name===X,hasDefaultValue:U.dflt_value!=null})),isView:!0}}}class rb{#$;constructor($){this.#$={...$}}createDriver(){return new S_(this.#$)}createQueryCompiler(){return new k_}createAdapter(){return new R_}createIntrospector($){return new j_($)}}var k_;var ib=C(()=>{cZ();k_=class k_ extends I6{getCurrentParameterPlaceholder(){return"?"}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}}});var sb={};x$(sb,{NodeSqliteQueryCompiler:()=>q_,NodeSqliteIntrospector:()=>T_,NodeSqliteDriver:()=>C_,NodeSqliteDialect:()=>ob,NodeSqliteAdapter:()=>v_});class v_{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(){}async releaseMigrationLock(){}get supportsOutput(){return!0}}class C_{#$;#J=new ab;#W;#X;constructor($){this.#$={...$}}async init(){if(this.#W=this.#$.database,this.#X=new tb(this.#W),this.#$.onCreateConnection)await this.#$.onCreateConnection(this.#X)}async acquireConnection(){return await this.#J.lock(),this.#X}async beginTransaction($){await $.executeQuery(u1.raw("begin"))}async commitTransaction($){await $.executeQuery(u1.raw("commit"))}async rollbackTransaction($){await $.executeQuery(u1.raw("rollback"))}async releaseConnection(){this.#J.unlock()}async destroy(){this.#W?.close()}}class tb{#$;constructor($){this.#$=$}executeQuery($){let{sql:J,parameters:W}=$,Y=this.#$.prepare(J).all(...W);return Promise.resolve({rows:Y})}async*streamQuery(){throw Error("Streaming query is not supported by SQLite driver.")}}class ab{#$;#J;async lock(){while(this.#$)await this.#$;this.#$=new Promise(($)=>{this.#J=$})}unlock(){let $=this.#J;this.#$=void 0,this.#J=void 0,$?.()}}class T_{#$;constructor($){this.#$=$}async getSchemas(){return[]}async getTables($={withInternalKyselyTables:!1}){let J=this.#$.selectFrom("sqlite_schema").where("type","=","table").where("name","not like","sqlite_%").select("name").$castTo();if(!$.withInternalKyselyTables)J=J.where("name","!=",P$).where("name","!=",n$);let W=await J.execute();return Promise.all(W.map(({name:X})=>this.#J(X)))}async getMetadata($){return{tables:await this.getTables($)}}async#J($){let J=this.#$,X=(await J.selectFrom("sqlite_master").where("name","=",$).select("sql").$castTo().execute())[0]?.sql?.split(/[\(\),]/)?.find((U)=>U.toLowerCase().includes("autoincrement"))?.split(/\s+/)?.[0]?.replace(/["`]/g,""),Y=await J.selectFrom(e0`pragma_table_info(${$})`.as("table_info")).select(["name","type","notnull","dflt_value"]).execute();return{name:$,columns:Y.map((U)=>({name:U.name,dataType:U.type,isNullable:!U.notnull,isAutoIncrementing:U.name===X,hasDefaultValue:U.dflt_value!=null})),isView:!0}}}class ob{#$;constructor($){this.#$={...$}}createDriver(){return new C_(this.#$)}createQueryCompiler(){return new q_}createAdapter(){return new v_}createIntrospector($){return new T_($)}}var q_;var eb=C(()=>{cZ();q_=class q_ extends I6{getCurrentParameterPlaceholder(){return"?"}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}}});var nB=A0((QY1,Ey)=>{function U90(){return Object.keys(globalThis).some(($)=>$.startsWith("__NEXT"))}Ey.exports=function(){if(globalThis.Deno)return!0;if(globalThis.Bun)return!0;if(U90())return!0;return!1}});var cy=A0((AY1,yy)=>{var{defineProperty:CK,getOwnPropertyDescriptor:Z90,getOwnPropertyNames:H90}=Object,G90=Object.prototype.hasOwnProperty,Q0=($,J)=>CK($,"name",{value:J,configurable:!0}),z90=($,J)=>{for(var W in J)CK($,W,{get:J[W],enumerable:!0})},w90=($,J,W,X)=>{if(J&&typeof J=="object"||typeof J=="function")for(let Y of H90(J))!G90.call($,Y)&&Y!==W&&CK($,Y,{get:()=>J[Y],enumerable:!(X=Z90(J,Y))||X.enumerable});return $},D90=($)=>w90(CK({},"__esModule",{value:!0}),$),My={};z90(My,{URLPattern:()=>my});yy.exports=D90(My);var $2=class{type=3;name="";prefix="";value="";suffix="";modifier=3;constructor($,J,W,X,Y,U){this.type=$,this.name=J,this.prefix=W,this.value=X,this.suffix=Y,this.modifier=U}hasCustomName(){return this.name!==""&&typeof this.name!="number"}};Q0($2,"Part");var K90=/[$_\p{ID_Start}]/u,O90=/[$_\u200C\u200D\p{ID_Continue}]/u,tB=".*";function Vy($,J){return(J?/^[\x00-\xFF]*$/:/^[\x00-\x7F]*$/).test($)}Q0(Vy,"isASCII");function sB($,J=!1){let W=[],X=0;for(;X<$.length;){let Y=$[X],U=Q0(function(Z){if(!J)throw TypeError(Z);W.push({type:"INVALID_CHAR",index:X,value:$[X++]})},"ErrorOrInvalid");if(Y==="*"){W.push({type:"ASTERISK",index:X,value:$[X++]});continue}if(Y==="+"||Y==="?"){W.push({type:"OTHER_MODIFIER",index:X,value:$[X++]});continue}if(Y==="\\"){W.push({type:"ESCAPED_CHAR",index:X++,value:$[X++]});continue}if(Y==="{"){W.push({type:"OPEN",index:X,value:$[X++]});continue}if(Y==="}"){W.push({type:"CLOSE",index:X,value:$[X++]});continue}if(Y===":"){let Z="",H=X+1;for(;H<$.length;){let G=$.substr(H,1);if(H===X+1&&K90.test(G)||H!==X+1&&O90.test(G)){Z+=$[H++];continue}break}if(!Z){U(`Missing parameter name at ${X}`);continue}W.push({type:"NAME",index:X,value:Z}),X=H;continue}if(Y==="("){let Z=1,H="",G=X+1,z=!1;if($[G]==="?"){U(`Pattern cannot start with "?" at ${G}`);continue}for(;G<$.length;){if(!Vy($[G],!1)){U(`Invalid character '${$[G]}' at ${G}.`),z=!0;break}if($[G]==="\\"){H+=$[G++]+$[G++];continue}if($[G]===")"){if(Z--,Z===0){G++;break}}else if($[G]==="("&&(Z++,$[G+1]!=="?")){U(`Capturing groups are not allowed at ${G}`),z=!0;break}H+=$[G++]}if(z)continue;if(Z){U(`Unbalanced pattern at ${X}`);continue}if(!H){U(`Missing pattern at ${X}`);continue}W.push({type:"REGEX",index:X,value:H}),X=G;continue}W.push({type:"CHAR",index:X,value:$[X++]})}return W.push({type:"END",index:X,value:""}),W}Q0(sB,"lexer");function eB($,J={}){let W=sB($);J.delimiter??="/#?",J.prefixes??="./";let X=`[^${S6(J.delimiter)}]+?`,Y=[],U=0,Z=0,H="",G=new Set,z=Q0((Q)=>{if(Z<W.length&&W[Z].type===Q)return W[Z++].value},"tryConsume"),w=Q0(()=>z("OTHER_MODIFIER")??z("ASTERISK"),"tryConsumeModifier"),D=Q0((Q)=>{let N=z(Q);if(N!==void 0)return N;let{type:_,index:L}=W[Z];throw TypeError(`Unexpected ${_} at ${L}, expected ${Q}`)},"mustConsume"),K=Q0(()=>{let Q="",N;for(;N=z("CHAR")??z("ESCAPED_CHAR");)Q+=N;return Q},"consumeText"),O=Q0((Q)=>Q,"DefaultEncodePart"),F=J.encodePart||O,M="",A=Q0((Q)=>{M+=Q},"appendToPendingFixedValue"),I=Q0(()=>{M.length&&(Y.push(new $2(3,"","",F(M),"",3)),M="")},"maybeAddPartFromPendingFixedValue"),P=Q0((Q,N,_,L,R)=>{let S=3;switch(R){case"?":S=1;break;case"*":S=0;break;case"+":S=2;break}if(!N&&!_&&S===3){A(Q);return}if(I(),!N&&!_){if(!Q)return;Y.push(new $2(3,"","",F(Q),"",S));return}let k;_?_==="*"?k=tB:k=_:k=X;let T=2;k===X?(T=1,k=""):k===tB&&(T=0,k="");let q;if(N?q=N:_&&(q=U++),G.has(q))throw TypeError(`Duplicate name '${q}'.`);G.add(q),Y.push(new $2(T,q,F(Q),k,F(L),S))},"addPart");for(;Z<W.length;){let Q=z("CHAR"),N=z("NAME"),_=z("REGEX");if(!N&&!_&&(_=z("ASTERISK")),N||_){let R=Q??"";J.prefixes.indexOf(R)===-1&&(A(R),R=""),I();let S=w();P(R,N,_,"",S);continue}let L=Q??z("ESCAPED_CHAR");if(L){A(L);continue}if(z("OPEN")){let R=K(),S=z("NAME"),k=z("REGEX");!S&&!k&&(k=z("ASTERISK"));let T=K();D("CLOSE");let q=w();P(R,S,k,T,q);continue}I(),D("END")}return Y}Q0(eB,"parse");function S6($){return $.replace(/([.+*?^${}()[\]|/\\])/g,"\\$1")}Q0(S6,"escapeString");function aB($){return $&&$.ignoreCase?"ui":"u"}Q0(aB,"flags");function Qy($,J,W){return $R(eB($,W),J,W)}Q0(Qy,"stringToRegexp");function IW($){switch($){case 0:return"*";case 1:return"?";case 2:return"+";case 3:return""}}Q0(IW,"modifierToString");function $R($,J,W={}){W.delimiter??="/#?",W.prefixes??="./",W.sensitive??=!1,W.strict??=!1,W.end??=!0,W.start??=!0,W.endsWith="";let X=W.start?"^":"";for(let H of $){if(H.type===3){H.modifier===3?X+=S6(H.value):X+=`(?:${S6(H.value)})${IW(H.modifier)}`;continue}J&&J.push(H.name);let G=`[^${S6(W.delimiter)}]+?`,z=H.value;if(H.type===1?z=G:H.type===0&&(z=tB),!H.prefix.length&&!H.suffix.length){H.modifier===3||H.modifier===1?X+=`(${z})${IW(H.modifier)}`:X+=`((?:${z})${IW(H.modifier)})`;continue}if(H.modifier===3||H.modifier===1){X+=`(?:${S6(H.prefix)}(${z})${S6(H.suffix)})`,X+=IW(H.modifier);continue}X+=`(?:${S6(H.prefix)}`,X+=`((?:${z})(?:`,X+=S6(H.suffix),X+=S6(H.prefix),X+=`(?:${z}))*)${S6(H.suffix)})`,H.modifier===0&&(X+="?")}let Y=`[${S6(W.endsWith)}]|$`,U=`[${S6(W.delimiter)}]`;if(W.end)return W.strict||(X+=`${U}?`),W.endsWith.length?X+=`(?=${Y})`:X+="$",new RegExp(X,aB(W));W.strict||(X+=`(?:${U}(?=${Y}))?`);let Z=!1;if($.length){let H=$[$.length-1];H.type===3&&H.modifier===3&&(Z=W.delimiter.indexOf(H)>-1)}return Z||(X+=`(?=${U}|${Y})`),new RegExp(X,aB(W))}Q0($R,"partsToRegexp");var yJ={delimiter:"",prefixes:"",sensitive:!0,strict:!0},F90={delimiter:".",prefixes:"",sensitive:!0,strict:!0},E90={delimiter:"/",prefixes:"/",sensitive:!0,strict:!0};function Ay($,J){return $.length?$[0]==="/"?!0:!J||$.length<2?!1:($[0]=="\\"||$[0]=="{")&&$[1]=="/":!1}Q0(Ay,"isAbsolutePathname");function JR($,J){return $.startsWith(J)?$.substring(J.length,$.length):$}Q0(JR,"maybeStripPrefix");function Iy($,J){return $.endsWith(J)?$.substr(0,$.length-J.length):$}Q0(Iy,"maybeStripSuffix");function WR($){return!$||$.length<2?!1:$[0]==="["||($[0]==="\\"||$[0]==="{")&&$[1]==="["}Q0(WR,"treatAsIPv6Hostname");var Ly=["ftp","file","http","https","ws","wss"];function XR($){if(!$)return!0;for(let J of Ly)if($.test(J))return!0;return!1}Q0(XR,"isSpecialScheme");function Py($,J){if($=JR($,"#"),J||$==="")return $;let W=new URL("https://example.com");return W.hash=$,W.hash?W.hash.substring(1,W.hash.length):""}Q0(Py,"canonicalizeHash");function _y($,J){if($=JR($,"?"),J||$==="")return $;let W=new URL("https://example.com");return W.search=$,W.search?W.search.substring(1,W.search.length):""}Q0(_y,"canonicalizeSearch");function Ny($,J){return J||$===""?$:WR($)?ZR($):UR($)}Q0(Ny,"canonicalizeHostname");function By($,J){if(J||$==="")return $;let W=new URL("https://example.com");return W.password=$,W.password}Q0(By,"canonicalizePassword");function Ry($,J){if(J||$==="")return $;let W=new URL("https://example.com");return W.username=$,W.username}Q0(Ry,"canonicalizeUsername");function Sy($,J,W){if(W||$==="")return $;if(J&&!Ly.includes(J))return new URL(`${J}:${$}`).pathname;let X=$[0]=="/";return $=new URL(X?$:"/-"+$,"https://example.com").pathname,X||($=$.substring(2,$.length)),$}Q0(Sy,"canonicalizePathname");function jy($,J,W){return YR(J)===$&&($=""),W||$===""?$:HR($)}Q0(jy,"canonicalizePort");function ky($,J){return $=Iy($,":"),J||$===""?$:TK($)}Q0(ky,"canonicalizeProtocol");function YR($){switch($){case"ws":case"http":return"80";case"wws":case"https":return"443";case"ftp":return"21";default:return""}}Q0(YR,"defaultPortForProtocol");function TK($){if($==="")return $;if(/^[-+.A-Za-z0-9]*$/.test($))return $.toLowerCase();throw TypeError(`Invalid protocol '${$}'.`)}Q0(TK,"protocolEncodeCallback");function vy($){if($==="")return $;let J=new URL("https://example.com");return J.username=$,J.username}Q0(vy,"usernameEncodeCallback");function Cy($){if($==="")return $;let J=new URL("https://example.com");return J.password=$,J.password}Q0(Cy,"passwordEncodeCallback");function UR($){if($==="")return $;if(/[\t\n\r #%/:<>?@[\]^\\|]/g.test($))throw TypeError(`Invalid hostname '${$}'`);let J=new URL("https://example.com");return J.hostname=$,J.hostname}Q0(UR,"hostnameEncodeCallback");function ZR($){if($==="")return $;if(/[^0-9a-fA-F[\]:]/g.test($))throw TypeError(`Invalid IPv6 hostname '${$}'`);return $.toLowerCase()}Q0(ZR,"ipv6HostnameEncodeCallback");function HR($){if($===""||/^[0-9]*$/.test($)&&parseInt($)<=65535)return $;throw TypeError(`Invalid port '${$}'.`)}Q0(HR,"portEncodeCallback");function Ty($){if($==="")return $;let J=new URL("https://example.com");return J.pathname=$[0]!=="/"?"/-"+$:$,$[0]!=="/"?J.pathname.substring(2,J.pathname.length):J.pathname}Q0(Ty,"standardURLPathnameEncodeCallback");function qy($){return $===""?$:new URL(`data:${$}`).pathname}Q0(qy,"pathURLPathnameEncodeCallback");function hy($){if($==="")return $;let J=new URL("https://example.com");return J.search=$,J.search.substring(1,J.search.length)}Q0(hy,"searchEncodeCallback");function xy($){if($==="")return $;let J=new URL("https://example.com");return J.hash=$,J.hash.substring(1,J.hash.length)}Q0(xy,"hashEncodeCallback");var by=class{#$;#J=[];#W={};#X=0;#Y=1;#Z=0;#H=0;#w=0;#z=0;#G=!1;constructor($){this.#$=$}get result(){return this.#W}parse(){for(this.#J=sB(this.#$,!0);this.#X<this.#J.length;this.#X+=this.#Y){if(this.#Y=1,this.#J[this.#X].type==="END"){if(this.#H===0){this.#O(),this.#B()?this.#U(9,1):this.#V()?this.#U(8,1):this.#U(7,0);continue}else if(this.#H===2){this.#D(5);continue}this.#U(10,0);break}if(this.#w>0)if(this.#j())this.#w-=1;else continue;if(this.#R()){this.#w+=1;continue}switch(this.#H){case 0:this.#M()&&this.#D(1);break;case 1:if(this.#M()){this.#T();let $=7,J=1;this.#L()?($=2,J=3):this.#G&&($=2),this.#U($,J)}break;case 2:this.#A()?this.#D(3):(this.#N()||this.#V()||this.#B())&&this.#D(5);break;case 3:this.#I()?this.#U(4,1):this.#A()&&this.#U(5,1);break;case 4:this.#A()&&this.#U(5,1);break;case 5:this.#q()?this.#z+=1:this.#_()&&(this.#z-=1),this.#P()&&!this.#z?this.#U(6,1):this.#N()?this.#U(7,0):this.#V()?this.#U(8,1):this.#B()&&this.#U(9,1);break;case 6:this.#N()?this.#U(7,0):this.#V()?this.#U(8,1):this.#B()&&this.#U(9,1);break;case 7:this.#V()?this.#U(8,1):this.#B()&&this.#U(9,1);break;case 8:this.#B()&&this.#U(9,1);break;case 9:break;case 10:break}}this.#W.hostname!==void 0&&this.#W.port===void 0&&(this.#W.port="")}#U($,J){switch(this.#H){case 0:break;case 1:this.#W.protocol=this.#S();break;case 2:break;case 3:this.#W.username=this.#S();break;case 4:this.#W.password=this.#S();break;case 5:this.#W.hostname=this.#S();break;case 6:this.#W.port=this.#S();break;case 7:this.#W.pathname=this.#S();break;case 8:this.#W.search=this.#S();break;case 9:this.#W.hash=this.#S();break;case 10:break}this.#H!==0&&$!==10&&([1,2,3,4].includes(this.#H)&&[6,7,8,9].includes($)&&(this.#W.hostname??=""),[1,2,3,4,5,6].includes(this.#H)&&[8,9].includes($)&&(this.#W.pathname??=this.#G?"/":""),[1,2,3,4,5,6,7].includes(this.#H)&&$===9&&(this.#W.search??="")),this.#Q($,J)}#Q($,J){this.#H=$,this.#Z=this.#X+J,this.#X+=J,this.#Y=0}#O(){this.#X=this.#Z,this.#Y=0}#D($){this.#O(),this.#H=$}#F($){return $<0&&($=this.#J.length-$),$<this.#J.length?this.#J[$]:this.#J[this.#J.length-1]}#E($,J){let W=this.#F($);return W.value===J&&(W.type==="CHAR"||W.type==="ESCAPED_CHAR"||W.type==="INVALID_CHAR")}#M(){return this.#E(this.#X,":")}#L(){return this.#E(this.#X+1,"/")&&this.#E(this.#X+2,"/")}#A(){return this.#E(this.#X,"@")}#I(){return this.#E(this.#X,":")}#P(){return this.#E(this.#X,":")}#N(){return this.#E(this.#X,"/")}#V(){if(this.#E(this.#X,"?"))return!0;if(this.#J[this.#X].value!=="?")return!1;let $=this.#F(this.#X-1);return $.type!=="NAME"&&$.type!=="REGEX"&&$.type!=="CLOSE"&&$.type!=="ASTERISK"}#B(){return this.#E(this.#X,"#")}#R(){return this.#J[this.#X].type=="OPEN"}#j(){return this.#J[this.#X].type=="CLOSE"}#q(){return this.#E(this.#X,"[")}#_(){return this.#E(this.#X,"]")}#S(){let $=this.#J[this.#X],J=this.#F(this.#Z).index;return this.#$.substring(J,$.index)}#T(){let $={};Object.assign($,yJ),$.encodePart=TK;let J=Qy(this.#S(),void 0,$);this.#G=XR(J)}};Q0(by,"Parser");var iB=["protocol","username","password","hostname","port","pathname","search","hash"],mJ="*";function oB($,J){if(typeof $!="string")throw TypeError("parameter 1 is not of type 'string'.");let W=new URL($,J);return{protocol:W.protocol.substring(0,W.protocol.length-1),username:W.username,password:W.password,hostname:W.hostname,port:W.port,pathname:W.pathname,search:W.search!==""?W.search.substring(1,W.search.length):void 0,hash:W.hash!==""?W.hash.substring(1,W.hash.length):void 0}}Q0(oB,"extractValues");function F5($,J){return J?eY($):$}Q0(F5,"processBaseURLString");function sY($,J,W){let X;if(typeof J.baseURL=="string")try{X=new URL(J.baseURL),J.protocol===void 0&&($.protocol=F5(X.protocol.substring(0,X.protocol.length-1),W)),!W&&J.protocol===void 0&&J.hostname===void 0&&J.port===void 0&&J.username===void 0&&($.username=F5(X.username,W)),!W&&J.protocol===void 0&&J.hostname===void 0&&J.port===void 0&&J.username===void 0&&J.password===void 0&&($.password=F5(X.password,W)),J.protocol===void 0&&J.hostname===void 0&&($.hostname=F5(X.hostname,W)),J.protocol===void 0&&J.hostname===void 0&&J.port===void 0&&($.port=F5(X.port,W)),J.protocol===void 0&&J.hostname===void 0&&J.port===void 0&&J.pathname===void 0&&($.pathname=F5(X.pathname,W)),J.protocol===void 0&&J.hostname===void 0&&J.port===void 0&&J.pathname===void 0&&J.search===void 0&&($.search=F5(X.search.substring(1,X.search.length),W)),J.protocol===void 0&&J.hostname===void 0&&J.port===void 0&&J.pathname===void 0&&J.search===void 0&&J.hash===void 0&&($.hash=F5(X.hash.substring(1,X.hash.length),W))}catch{throw TypeError(`invalid baseURL '${J.baseURL}'.`)}if(typeof J.protocol=="string"&&($.protocol=ky(J.protocol,W)),typeof J.username=="string"&&($.username=Ry(J.username,W)),typeof J.password=="string"&&($.password=By(J.password,W)),typeof J.hostname=="string"&&($.hostname=Ny(J.hostname,W)),typeof J.port=="string"&&($.port=jy(J.port,$.protocol,W)),typeof J.pathname=="string"){if($.pathname=J.pathname,X&&!Ay($.pathname,W)){let Y=X.pathname.lastIndexOf("/");Y>=0&&($.pathname=F5(X.pathname.substring(0,Y+1),W)+$.pathname)}$.pathname=Sy($.pathname,$.protocol,W)}return typeof J.search=="string"&&($.search=_y(J.search,W)),typeof J.hash=="string"&&($.hash=Py(J.hash,W)),$}Q0(sY,"applyInit");function eY($){return $.replace(/([+*?:{}()\\])/g,"\\$1")}Q0(eY,"escapePatternString");function gy($){return $.replace(/([.+*?^${}()[\]|/\\])/g,"\\$1")}Q0(gy,"escapeRegexpString");function fy($,J){J.delimiter??="/#?",J.prefixes??="./",J.sensitive??=!1,J.strict??=!1,J.end??=!0,J.start??=!0,J.endsWith="";let W=".*",X=`[^${gy(J.delimiter)}]+?`,Y=/[$_\u200C\u200D\p{ID_Continue}]/u,U="";for(let Z=0;Z<$.length;++Z){let H=$[Z];if(H.type===3){if(H.modifier===3){U+=eY(H.value);continue}U+=`{${eY(H.value)}}${IW(H.modifier)}`;continue}let G=H.hasCustomName(),z=!!H.suffix.length||!!H.prefix.length&&(H.prefix.length!==1||!J.prefixes.includes(H.prefix)),w=Z>0?$[Z-1]:null,D=Z<$.length-1?$[Z+1]:null;if(!z&&G&&H.type===1&&H.modifier===3&&D&&!D.prefix.length&&!D.suffix.length)if(D.type===3){let K=D.value.length>0?D.value[0]:"";z=Y.test(K)}else z=!D.hasCustomName();if(!z&&!H.prefix.length&&w&&w.type===3){let K=w.value[w.value.length-1];z=J.prefixes.includes(K)}z&&(U+="{"),U+=eY(H.prefix),G&&(U+=`:${H.name}`),H.type===2?U+=`(${H.value})`:H.type===1?G||(U+=`(${X})`):H.type===0&&(!G&&(!w||w.type===3||w.modifier!==3||z||H.prefix!=="")?U+="*":U+=`(${W})`),H.type===1&&G&&H.suffix.length&&Y.test(H.suffix[0])&&(U+="\\"),U+=eY(H.suffix),z&&(U+="}"),H.modifier!==3&&(U+=IW(H.modifier))}return U}Q0(fy,"partsToPattern");var my=class{#$;#J={};#W={};#X={};#Y={};#Z=!1;constructor($={},J,W){try{let X;if(typeof J=="string"?X=J:W=J,typeof $=="string"){let H=new by($);if(H.parse(),$=H.result,X===void 0&&typeof $.protocol!="string")throw TypeError("A base URL must be provided for a relative constructor string.");$.baseURL=X}else{if(!$||typeof $!="object")throw TypeError("parameter 1 is not of type 'string' and cannot convert to dictionary.");if(X)throw TypeError("parameter 1 is not of type 'string'.")}typeof W>"u"&&(W={ignoreCase:!1});let Y={ignoreCase:W.ignoreCase===!0},U={pathname:mJ,protocol:mJ,username:mJ,password:mJ,hostname:mJ,port:mJ,search:mJ,hash:mJ};this.#$=sY(U,$,!0),YR(this.#$.protocol)===this.#$.port&&(this.#$.port="");let Z;for(Z of iB){if(!(Z in this.#$))continue;let H={},G=this.#$[Z];switch(this.#W[Z]=[],Z){case"protocol":Object.assign(H,yJ),H.encodePart=TK;break;case"username":Object.assign(H,yJ),H.encodePart=vy;break;case"password":Object.assign(H,yJ),H.encodePart=Cy;break;case"hostname":Object.assign(H,F90),WR(G)?H.encodePart=ZR:H.encodePart=UR;break;case"port":Object.assign(H,yJ),H.encodePart=HR;break;case"pathname":XR(this.#J.protocol)?(Object.assign(H,E90,Y),H.encodePart=Ty):(Object.assign(H,yJ,Y),H.encodePart=qy);break;case"search":Object.assign(H,yJ,Y),H.encodePart=hy;break;case"hash":Object.assign(H,yJ,Y),H.encodePart=xy;break}try{this.#Y[Z]=eB(G,H),this.#J[Z]=$R(this.#Y[Z],this.#W[Z],H),this.#X[Z]=fy(this.#Y[Z],H),this.#Z=this.#Z||this.#Y[Z].some((z)=>z.type===2)}catch{throw TypeError(`invalid ${Z} pattern '${this.#$[Z]}'.`)}}}catch(X){throw TypeError(`Failed to construct 'URLPattern': ${X.message}`)}}get[Symbol.toStringTag](){return"URLPattern"}test($={},J){let W={pathname:"",protocol:"",username:"",password:"",hostname:"",port:"",search:"",hash:""};if(typeof $!="string"&&J)throw TypeError("parameter 1 is not of type 'string'.");if(typeof $>"u")return!1;try{typeof $=="object"?W=sY(W,$,!1):W=sY(W,oB($,J),!1)}catch{return!1}let X;for(X of iB)if(!this.#J[X].exec(W[X]))return!1;return!0}exec($={},J){let W={pathname:"",protocol:"",username:"",password:"",hostname:"",port:"",search:"",hash:""};if(typeof $!="string"&&J)throw TypeError("parameter 1 is not of type 'string'.");if(typeof $>"u")return;try{typeof $=="object"?W=sY(W,$,!1):W=sY(W,oB($,J),!1)}catch{return null}let X={};J?X.inputs=[$,J]:X.inputs=[$];let Y;for(Y of iB){let U=this.#J[Y].exec(W[Y]);if(!U)return null;let Z={};for(let[H,G]of this.#W[Y].entries())if(typeof G=="string"||typeof G=="number"){let z=U[H+1];Z[G]=z}X[Y]={input:W[Y]??"",groups:Z}}return X}static compareComponent($,J,W){let X=Q0((H,G)=>{for(let z of["type","modifier","prefix","value","suffix"]){if(H[z]<G[z])return-1;if(H[z]===G[z])continue;return 1}return 0},"comparePart"),Y=new $2(3,"","","","",3),U=new $2(0,"","","","",3),Z=Q0((H,G)=>{let z=0;for(;z<Math.min(H.length,G.length);++z){let w=X(H[z],G[z]);if(w)return w}return H.length===G.length?0:X(H[z]??Y,G[z]??Y)},"comparePartList");return!J.#X[$]&&!W.#X[$]?0:J.#X[$]&&!W.#X[$]?Z(J.#Y[$],[U]):!J.#X[$]&&W.#X[$]?Z([U],W.#Y[$]):Z(J.#Y[$],W.#Y[$])}get protocol(){return this.#X.protocol}get username(){return this.#X.username}get password(){return this.#X.password}get hostname(){return this.#X.hostname}get port(){return this.#X.port}get pathname(){return this.#X.pathname}get search(){return this.#X.search}get hash(){return this.#X.hash}get hasRegExpGroups(){return this.#Z}};Q0(my,"URLPattern")});var dy=A0((_Y1,py)=>{var{URLPattern:uy}=cy();py.exports={URLPattern:uy};if(!globalThis.URLPattern)globalThis.URLPattern=uy});var uJ=A0((ay)=>{Object.defineProperty(ay,"__esModule",{value:!0});ay.isPromise=qK;ay.isActualPromise=ry;ay.handleMaybePromise=cJ;ay.fakePromise=E5;ay.createDeferredPromise=M90;ay.iterateAsync=ny;ay.iterateAsyncVoid=ny;ay.fakeRejectPromise=LW;ay.mapMaybePromise=V90;ay.mapAsyncIterator=Q90;ay.promiseLikeFinally=iy;ay.unfakePromise=ty;var hK=Symbol.for("@whatwg-node/promise-helpers/FakePromise");function qK($){return $?.then!=null}function ry($){let J=$;return J&&J.then&&J.catch&&J.finally}function cJ($,J,W,X){let Y=E5().then($).then(J,W);if(X)Y=Y.finally(X);return ty(Y)}function E5($){if($&&ry($))return $;if(qK($))return{then:(J,W)=>E5($.then(J,W)),catch:(J)=>E5($.then((W)=>W,J)),finally:(J)=>E5(J?iy($,J):$),[Symbol.toStringTag]:"Promise"};return{then(J){if(J)try{return E5(J($))}catch(W){return LW(W)}return this},catch(){return this},finally(J){if(J)try{return E5(J()).then(()=>$,()=>$)}catch(W){return LW(W)}return this},[Symbol.toStringTag]:"Promise",__fakePromiseValue:$,[hK]:"resolved"}}function M90(){if(Promise.withResolvers)return Promise.withResolvers();let $,J;return{promise:new Promise(function(Y,U){$=Y,J=U}),get resolve(){return $},get reject(){return J}}}function ny($,J,W){if($?.length===0)return;let X=$[Symbol.iterator](),Y=0;function U(){let{done:Z,value:H}=X.next();if(Z)return;let G=!1;function z(){G=!0}return cJ(function(){return J(H,z,Y++)},function(D){if(D)W?.push(D);if(G)return;return U()})}return U()}function LW($){return{then(J,W){if(W)try{return E5(W($))}catch(X){return LW(X)}return this},catch(J){if(J)try{return E5(J($))}catch(W){return LW(W)}return this},finally(J){if(J)try{J()}catch(W){return LW(W)}return this},__fakeRejectError:$,[Symbol.toStringTag]:"Promise",[hK]:"rejected"}}function V90($,J,W){return cJ(()=>$,J,W)}function Q90($,J,W,X){if(Symbol.asyncIterator in $)$=$[Symbol.asyncIterator]();let Y,U,Z;if(X){let z;Z=(w)=>{return z||=cJ(X,()=>w,()=>w),z}}if(typeof $.return==="function")Y=$.return,U=(z)=>{let w=()=>{throw z};return Y.call($).then(w,w)};function H(z){if(z.done)return Z?Z(z):z;return cJ(()=>z.value,(w)=>cJ(()=>J(w),ly,U))}let G;if(W){let z,w=W;G=(D)=>{return z||=cJ(()=>D,(K)=>cJ(()=>w(K),ly,U)),z}}return{next(){return $.next().then(H,G)},return(){let z=Y?Y.call($).then(H,G):E5({value:void 0,done:!0});return Z?z.then(Z):z},throw(z){if(typeof $.throw==="function")return $.throw(z).then(H,G);if(U)return U(z);return LW(z)},[Symbol.asyncIterator](){return this}}}function ly($){return{value:$,done:!1}}function A90($){return $?.[hK]==="resolved"}function I90($){return $?.[hK]==="rejected"}function iy($,J){if("finally"in $)return $.finally(J);return $.then((W)=>{let X=J();return qK(X)?X.then(()=>W):W},(W)=>{let X=J();if(qK(X))return X.then(()=>{throw W});else throw W})}function ty($){if(A90($))return $.__fakePromiseValue;if(I90($))throw $.__fakeRejectError;return $}});var GR=A0((BY1,oy)=>{var{EventEmitter:q90}=I0("events"),{inherits:h90}=I0("util");function PW($){if(typeof $==="string")$=Buffer.from($);if(!Buffer.isBuffer($))throw TypeError("The needle has to be a String or a Buffer.");let J=$.length,W=J-1;if(J===0)throw Error("The needle cannot be an empty String/Buffer.");if(J>256)throw Error("The needle cannot have a length bigger than 256.");this.maxMatches=1/0,this.matches=0,this._occ=new Uint8Array(256).fill(J),this._lookbehind_size=0,this._needle=$,this._bufpos=0,this._lookbehind=Buffer.alloc(W);for(var X=0;X<W;++X)this._occ[$[X]]=W-X}h90(PW,q90);PW.prototype.reset=function(){this._lookbehind_size=0,this.matches=0,this._bufpos=0};PW.prototype.push=function($,J){if(!Buffer.isBuffer($))$=Buffer.from($,"binary");let W=$.length;this._bufpos=J||0;let X;while(X!==W&&this.matches<this.maxMatches)X=this._sbmh_feed($);return X};PW.prototype._sbmh_feed=function($){let J=$.length,W=this._needle,X=W.length,Y=X-1,U=W[Y],Z=-this._lookbehind_size,H;if(Z<0){while(Z<0&&Z<=J-X){if(H=$[Z+Y],H===U&&this._sbmh_memcmp($,Z,Y))return this._lookbehind_size=0,++this.matches,this.emit("info",!0),this._bufpos=Z+X;Z+=this._occ[H]}while(Z<0&&!this._sbmh_memcmp($,Z,J-Z))++Z;if(Z>=0)this.emit("info",!1,this._lookbehind,0,this._lookbehind_size),this._lookbehind_size=0;else{let G=this._lookbehind_size+Z;if(G>0)this.emit("info",!1,this._lookbehind,0,G);return this._lookbehind_size-=G,this._lookbehind.copy(this._lookbehind,0,G,this._lookbehind_size),$.copy(this._lookbehind,this._lookbehind_size),this._lookbehind_size+=J,this._bufpos=J,J}}if(Z=$.indexOf(W,Z+this._bufpos),Z!==-1){if(++this.matches,Z===0)this.emit("info",!0);else this.emit("info",!0,$,this._bufpos,Z);return this._bufpos=Z+X}if(Z=J-Y,Z<0)Z=0;while(Z!==J&&($[Z]!==W[0]||Buffer.compare($.subarray(Z+1,J),W.subarray(1,J-Z))!==0))++Z;if(Z!==J)$.copy(this._lookbehind,0,Z,J),this._lookbehind_size=J-Z;if(Z!==0)this.emit("info",!1,$,this._bufpos,Z);return this._bufpos=J,J};PW.prototype._sbmh_lookup_char=function($,J){return J<0?this._lookbehind[this._lookbehind_size+J]:$[J]};PW.prototype._sbmh_memcmp=function($,J,W){for(var X=0;X<W;++X)if(this._sbmh_lookup_char($,J+X)!==this._needle[X])return!1;return!0};oy.exports=PW});var $c=A0((RY1,ey)=>{var x90=I0("util").inherits,sy=I0("stream").Readable;function zR($){sy.call(this,$)}x90(zR,sy);zR.prototype._read=function($){};ey.exports=zR});var xK=A0((SY1,Jc)=>{Jc.exports=function(J,W,X){if(!J||J[W]===void 0||J[W]===null)return X;if(typeof J[W]!=="number"||isNaN(J[W]))throw TypeError("Limit "+W+" is not a valid number");return J[W]}});var Uc=A0((jY1,Yc)=>{var Xc=I0("events").EventEmitter,b90=I0("util").inherits,Wc=xK(),g90=GR(),f90=Buffer.from(`\r
\r
`),m90=/\r\n/g,y90=/^([^:]+):[ \t]?([\x00-\xFF]+)?$/;function J2($){Xc.call(this),$=$||{};let J=this;this.nread=0,this.maxed=!1,this.npairs=0,this.maxHeaderPairs=Wc($,"maxHeaderPairs",2000),this.maxHeaderSize=Wc($,"maxHeaderSize",81920),this.buffer="",this.header={},this.finished=!1,this.ss=new g90(f90),this.ss.on("info",function(W,X,Y,U){if(X&&!J.maxed){if(J.nread+U-Y>=J.maxHeaderSize)U=J.maxHeaderSize-J.nread+Y,J.nread=J.maxHeaderSize,J.maxed=!0;else J.nread+=U-Y;J.buffer+=X.toString("binary",Y,U)}if(W)J._finish()})}b90(J2,Xc);J2.prototype.push=function($){let J=this.ss.push($);if(this.finished)return J};J2.prototype.reset=function(){this.finished=!1,this.buffer="",this.header={},this.ss.reset()};J2.prototype._finish=function(){if(this.buffer)this._parseHeader();this.ss.matches=this.ss.maxMatches;let $=this.header;this.header={},this.buffer="",this.finished=!0,this.nread=this.npairs=0,this.maxed=!1,this.emit("header",$)};J2.prototype._parseHeader=function(){if(this.npairs===this.maxHeaderPairs)return;let $=this.buffer.split(m90),J=$.length,W,X;for(var Y=0;Y<J;++Y){if($[Y].length===0)continue;if($[Y][0]==="\t"||$[Y][0]===" "){if(X){this.header[X][this.header[X].length-1]+=$[Y];continue}}let U=$[Y].indexOf(":");if(U===-1||U===0)return;if(W=y90.exec($[Y]),X=W[1].toLowerCase(),this.header[X]=this.header[X]||[],this.header[X].push(W[2]||""),++this.npairs===this.maxHeaderPairs)break}};Yc.exports=J2});var DR=A0((kY1,Hc)=>{var wR=I0("stream").Writable,c90=I0("util").inherits,u90=GR(),Zc=$c(),p90=Uc(),d90=Buffer.from("-"),l90=Buffer.from(`\r
`),r90=function(){};function m8($){if(!(this instanceof m8))return new m8($);if(wR.call(this,$),!$||!$.headerFirst&&typeof $.boundary!=="string")throw TypeError("Boundary required");if(typeof $.boundary==="string")this.setBoundary($.boundary);else this._bparser=void 0;this._headerFirst=$.headerFirst,this._dashes=0,this._parts=0,this._finished=!1,this._realFinish=!1,this._isPreamble=!0,this._justMatched=!1,this._firstWrite=!0,this._inHeader=!0,this._part=void 0,this._cb=void 0,this._ignoreData=!1,this._partOpts={highWaterMark:$.partHwm},this._pause=!1;let J=this;this._hparser=new p90($),this._hparser.on("header",function(W){J._inHeader=!1,J._part.emit("header",W)})}c90(m8,wR);m8.prototype.emit=function($){if($==="finish"&&!this._realFinish){if(!this._finished){let J=this;process.nextTick(function(){if(J.emit("error",Error("Unexpected end of multipart data")),J._part&&!J._ignoreData){let W=J._isPreamble?"Preamble":"Part";J._part.emit("error",Error(W+" terminated early due to unexpected end of multipart data")),J._part.push(null),process.nextTick(function(){J._realFinish=!0,J.emit("finish"),J._realFinish=!1});return}J._realFinish=!0,J.emit("finish"),J._realFinish=!1})}}else wR.prototype.emit.apply(this,arguments)};m8.prototype._write=function($,J,W){if(!this._hparser&&!this._bparser)return W();if(this._headerFirst&&this._isPreamble){if(!this._part)if(this._part=new Zc(this._partOpts),this.listenerCount("preamble")!==0)this.emit("preamble",this._part);else this._ignore();let X=this._hparser.push($);if(!this._inHeader&&X!==void 0&&X<$.length)$=$.slice(X);else return W()}if(this._firstWrite)this._bparser.push(l90),this._firstWrite=!1;if(this._bparser.push($),this._pause)this._cb=W;else W()};m8.prototype.reset=function(){this._part=void 0,this._bparser=void 0,this._hparser=void 0};m8.prototype.setBoundary=function($){let J=this;this._bparser=new u90(`\r
--`+$),this._bparser.on("info",function(W,X,Y,U){J._oninfo(W,X,Y,U)})};m8.prototype._ignore=function(){if(this._part&&!this._ignoreData)this._ignoreData=!0,this._part.on("error",r90),this._part.resume()};m8.prototype._oninfo=function($,J,W,X){let Y,U=this,Z=0,H,G=!0;if(!this._part&&this._justMatched&&J){while(this._dashes<2&&W+Z<X)if(J[W+Z]===45)++Z,++this._dashes;else{if(this._dashes)Y=d90;this._dashes=0;break}if(this._dashes===2){if(W+Z<X&&this.listenerCount("trailer")!==0)this.emit("trailer",J.slice(W+Z,X));if(this.reset(),this._finished=!0,U._parts===0)U._realFinish=!0,U.emit("finish"),U._realFinish=!1}if(this._dashes)return}if(this._justMatched)this._justMatched=!1;if(!this._part){if(this._part=new Zc(this._partOpts),this._part._read=function(z){U._unpause()},this._isPreamble&&this.listenerCount("preamble")!==0)this.emit("preamble",this._part);else if(this._isPreamble!==!0&&this.listenerCount("part")!==0)this.emit("part",this._part);else this._ignore();if(!this._isPreamble)this._inHeader=!0}if(J&&W<X&&!this._ignoreData){if(this._isPreamble||!this._inHeader){if(Y)G=this._part.push(Y);if(G=this._part.push(J.slice(W,X)),!G)this._pause=!0}else if(!this._isPreamble&&this._inHeader){if(Y)this._hparser.push(Y);if(H=this._hparser.push(J.slice(W,X)),!this._inHeader&&H!==void 0&&H<X)this._oninfo(!1,J,W+H,X)}}if($){if(this._hparser.reset(),this._isPreamble)this._isPreamble=!1;else if(W!==X)++this._parts,this._part.on("end",function(){if(--U._parts===0)if(U._finished)U._realFinish=!0,U.emit("finish"),U._realFinish=!1;else U._unpause()});this._part.push(null),this._part=void 0,this._ignoreData=!1,this._justMatched=!0,this._dashes=0}};m8.prototype._unpause=function(){if(!this._pause)return;if(this._pause=!1,this._cb){let $=this._cb;this._cb=void 0,$()}};Hc.exports=m8});var bK=A0((KR,wc)=>{var Gc=new TextDecoder("utf-8"),zc=new Map([["utf-8",Gc],["utf8",Gc]]);function n90($){let J;while(!0)switch($){case"utf-8":case"utf8":return gH.utf8;case"latin1":case"ascii":case"us-ascii":case"iso-8859-1":case"iso8859-1":case"iso88591":case"iso_8859-1":case"windows-1252":case"iso_8859-1:1987":case"cp1252":case"x-cp1252":return gH.latin1;case"utf16le":case"utf-16le":case"ucs2":case"ucs-2":return gH.utf16le;case"base64":return gH.base64;default:if(J===void 0){J=!0,$=$.toLowerCase();continue}return gH.other.bind($)}}var gH={utf8:($,J)=>{if($.length===0)return"";if(typeof $==="string")$=Buffer.from($,J);return $.utf8Slice(0,$.length)},latin1:($,J)=>{if($.length===0)return"";if(typeof $==="string")return $;return $.latin1Slice(0,$.length)},utf16le:($,J)=>{if($.length===0)return"";if(typeof $==="string")$=Buffer.from($,J);return $.ucs2Slice(0,$.length)},base64:($,J)=>{if($.length===0)return"";if(typeof $==="string")$=Buffer.from($,J);return $.base64Slice(0,$.length)},other:($,J)=>{if($.length===0)return"";if(typeof $==="string")$=Buffer.from($,J);if(zc.has(KR.toString()))try{return zc.get(KR).decode($)}catch{}return typeof $==="string"?$:$.toString()}};function i90($,J,W){if($)return n90(W)($,J);return $}wc.exports=i90});var FR=A0((vY1,Ec)=>{var gK=bK(),Dc=/%[a-fA-F0-9][a-fA-F0-9]/g,t90={"%00":"\x00","%01":"\x01","%02":"\x02","%03":"\x03","%04":"\x04","%05":"\x05","%06":"\x06","%07":"\x07","%08":"\b","%09":"\t","%0a":`
`,"%0A":`
`,"%0b":"\v","%0B":"\v","%0c":"\f","%0C":"\f","%0d":"\r","%0D":"\r","%0e":"\x0E","%0E":"\x0E","%0f":"\x0F","%0F":"\x0F","%10":"\x10","%11":"\x11","%12":"\x12","%13":"\x13","%14":"\x14","%15":"\x15","%16":"\x16","%17":"\x17","%18":"\x18","%19":"\x19","%1a":"\x1A","%1A":"\x1A","%1b":"\x1B","%1B":"\x1B","%1c":"\x1C","%1C":"\x1C","%1d":"\x1D","%1D":"\x1D","%1e":"\x1E","%1E":"\x1E","%1f":"\x1F","%1F":"\x1F","%20":" ","%21":"!","%22":'"',"%23":"#","%24":"$","%25":"%","%26":"&","%27":"'","%28":"(","%29":")","%2a":"*","%2A":"*","%2b":"+","%2B":"+","%2c":",","%2C":",","%2d":"-","%2D":"-","%2e":".","%2E":".","%2f":"/","%2F":"/","%30":"0","%31":"1","%32":"2","%33":"3","%34":"4","%35":"5","%36":"6","%37":"7","%38":"8","%39":"9","%3a":":","%3A":":","%3b":";","%3B":";","%3c":"<","%3C":"<","%3d":"=","%3D":"=","%3e":">","%3E":">","%3f":"?","%3F":"?","%40":"@","%41":"A","%42":"B","%43":"C","%44":"D","%45":"E","%46":"F","%47":"G","%48":"H","%49":"I","%4a":"J","%4A":"J","%4b":"K","%4B":"K","%4c":"L","%4C":"L","%4d":"M","%4D":"M","%4e":"N","%4E":"N","%4f":"O","%4F":"O","%50":"P","%51":"Q","%52":"R","%53":"S","%54":"T","%55":"U","%56":"V","%57":"W","%58":"X","%59":"Y","%5a":"Z","%5A":"Z","%5b":"[","%5B":"[","%5c":"\\","%5C":"\\","%5d":"]","%5D":"]","%5e":"^","%5E":"^","%5f":"_","%5F":"_","%60":"`","%61":"a","%62":"b","%63":"c","%64":"d","%65":"e","%66":"f","%67":"g","%68":"h","%69":"i","%6a":"j","%6A":"j","%6b":"k","%6B":"k","%6c":"l","%6C":"l","%6d":"m","%6D":"m","%6e":"n","%6E":"n","%6f":"o","%6F":"o","%70":"p","%71":"q","%72":"r","%73":"s","%74":"t","%75":"u","%76":"v","%77":"w","%78":"x","%79":"y","%7a":"z","%7A":"z","%7b":"{","%7B":"{","%7c":"|","%7C":"|","%7d":"}","%7D":"}","%7e":"~","%7E":"~","%7f":"\x7F","%7F":"\x7F","%80":"\x80","%81":"\x81","%82":"\x82","%83":"\x83","%84":"\x84","%85":"\x85","%86":"\x86","%87":"\x87","%88":"\x88","%89":"\x89","%8a":"\x8A","%8A":"\x8A","%8b":"\x8B","%8B":"\x8B","%8c":"\x8C","%8C":"\x8C","%8d":"\x8D","%8D":"\x8D","%8e":"\x8E","%8E":"\x8E","%8f":"\x8F","%8F":"\x8F","%90":"\x90","%91":"\x91","%92":"\x92","%93":"\x93","%94":"\x94","%95":"\x95","%96":"\x96","%97":"\x97","%98":"\x98","%99":"\x99","%9a":"\x9A","%9A":"\x9A","%9b":"\x9B","%9B":"\x9B","%9c":"\x9C","%9C":"\x9C","%9d":"\x9D","%9D":"\x9D","%9e":"\x9E","%9E":"\x9E","%9f":"\x9F","%9F":"\x9F","%a0":"\xA0","%A0":"\xA0","%a1":"\xA1","%A1":"\xA1","%a2":"\xA2","%A2":"\xA2","%a3":"\xA3","%A3":"\xA3","%a4":"\xA4","%A4":"\xA4","%a5":"\xA5","%A5":"\xA5","%a6":"\xA6","%A6":"\xA6","%a7":"\xA7","%A7":"\xA7","%a8":"\xA8","%A8":"\xA8","%a9":"\xA9","%A9":"\xA9","%aa":"\xAA","%Aa":"\xAA","%aA":"\xAA","%AA":"\xAA","%ab":"\xAB","%Ab":"\xAB","%aB":"\xAB","%AB":"\xAB","%ac":"\xAC","%Ac":"\xAC","%aC":"\xAC","%AC":"\xAC","%ad":"\xAD","%Ad":"\xAD","%aD":"\xAD","%AD":"\xAD","%ae":"\xAE","%Ae":"\xAE","%aE":"\xAE","%AE":"\xAE","%af":"\xAF","%Af":"\xAF","%aF":"\xAF","%AF":"\xAF","%b0":"\xB0","%B0":"\xB0","%b1":"\xB1","%B1":"\xB1","%b2":"\xB2","%B2":"\xB2","%b3":"\xB3","%B3":"\xB3","%b4":"\xB4","%B4":"\xB4","%b5":"\xB5","%B5":"\xB5","%b6":"\xB6","%B6":"\xB6","%b7":"\xB7","%B7":"\xB7","%b8":"\xB8","%B8":"\xB8","%b9":"\xB9","%B9":"\xB9","%ba":"\xBA","%Ba":"\xBA","%bA":"\xBA","%BA":"\xBA","%bb":"\xBB","%Bb":"\xBB","%bB":"\xBB","%BB":"\xBB","%bc":"\xBC","%Bc":"\xBC","%bC":"\xBC","%BC":"\xBC","%bd":"\xBD","%Bd":"\xBD","%bD":"\xBD","%BD":"\xBD","%be":"\xBE","%Be":"\xBE","%bE":"\xBE","%BE":"\xBE","%bf":"\xBF","%Bf":"\xBF","%bF":"\xBF","%BF":"\xBF","%c0":"\xC0","%C0":"\xC0","%c1":"\xC1","%C1":"\xC1","%c2":"\xC2","%C2":"\xC2","%c3":"\xC3","%C3":"\xC3","%c4":"\xC4","%C4":"\xC4","%c5":"\xC5","%C5":"\xC5","%c6":"\xC6","%C6":"\xC6","%c7":"\xC7","%C7":"\xC7","%c8":"\xC8","%C8":"\xC8","%c9":"\xC9","%C9":"\xC9","%ca":"\xCA","%Ca":"\xCA","%cA":"\xCA","%CA":"\xCA","%cb":"\xCB","%Cb":"\xCB","%cB":"\xCB","%CB":"\xCB","%cc":"\xCC","%Cc":"\xCC","%cC":"\xCC","%CC":"\xCC","%cd":"\xCD","%Cd":"\xCD","%cD":"\xCD","%CD":"\xCD","%ce":"\xCE","%Ce":"\xCE","%cE":"\xCE","%CE":"\xCE","%cf":"\xCF","%Cf":"\xCF","%cF":"\xCF","%CF":"\xCF","%d0":"\xD0","%D0":"\xD0","%d1":"\xD1","%D1":"\xD1","%d2":"\xD2","%D2":"\xD2","%d3":"\xD3","%D3":"\xD3","%d4":"\xD4","%D4":"\xD4","%d5":"\xD5","%D5":"\xD5","%d6":"\xD6","%D6":"\xD6","%d7":"\xD7","%D7":"\xD7","%d8":"\xD8","%D8":"\xD8","%d9":"\xD9","%D9":"\xD9","%da":"\xDA","%Da":"\xDA","%dA":"\xDA","%DA":"\xDA","%db":"\xDB","%Db":"\xDB","%dB":"\xDB","%DB":"\xDB","%dc":"\xDC","%Dc":"\xDC","%dC":"\xDC","%DC":"\xDC","%dd":"\xDD","%Dd":"\xDD","%dD":"\xDD","%DD":"\xDD","%de":"\xDE","%De":"\xDE","%dE":"\xDE","%DE":"\xDE","%df":"\xDF","%Df":"\xDF","%dF":"\xDF","%DF":"\xDF","%e0":"\xE0","%E0":"\xE0","%e1":"\xE1","%E1":"\xE1","%e2":"\xE2","%E2":"\xE2","%e3":"\xE3","%E3":"\xE3","%e4":"\xE4","%E4":"\xE4","%e5":"\xE5","%E5":"\xE5","%e6":"\xE6","%E6":"\xE6","%e7":"\xE7","%E7":"\xE7","%e8":"\xE8","%E8":"\xE8","%e9":"\xE9","%E9":"\xE9","%ea":"\xEA","%Ea":"\xEA","%eA":"\xEA","%EA":"\xEA","%eb":"\xEB","%Eb":"\xEB","%eB":"\xEB","%EB":"\xEB","%ec":"\xEC","%Ec":"\xEC","%eC":"\xEC","%EC":"\xEC","%ed":"\xED","%Ed":"\xED","%eD":"\xED","%ED":"\xED","%ee":"\xEE","%Ee":"\xEE","%eE":"\xEE","%EE":"\xEE","%ef":"\xEF","%Ef":"\xEF","%eF":"\xEF","%EF":"\xEF","%f0":"\xF0","%F0":"\xF0","%f1":"\xF1","%F1":"\xF1","%f2":"\xF2","%F2":"\xF2","%f3":"\xF3","%F3":"\xF3","%f4":"\xF4","%F4":"\xF4","%f5":"\xF5","%F5":"\xF5","%f6":"\xF6","%F6":"\xF6","%f7":"\xF7","%F7":"\xF7","%f8":"\xF8","%F8":"\xF8","%f9":"\xF9","%F9":"\xF9","%fa":"\xFA","%Fa":"\xFA","%fA":"\xFA","%FA":"\xFA","%fb":"\xFB","%Fb":"\xFB","%fB":"\xFB","%FB":"\xFB","%fc":"\xFC","%Fc":"\xFC","%fC":"\xFC","%FC":"\xFC","%fd":"\xFD","%Fd":"\xFD","%fD":"\xFD","%FD":"\xFD","%fe":"\xFE","%Fe":"\xFE","%fE":"\xFE","%FE":"\xFE","%ff":"\xFF","%Ff":"\xFF","%fF":"\xFF","%FF":"\xFF"};function Kc($){return t90[$]}var fK=0,Oc=1,OR=2,Fc=3;function a90($){let J=[],W=fK,X="",Y=!1,U=!1,Z=0,H="",G=$.length;for(var z=0;z<G;++z){let w=$[z];if(w==="\\"&&Y)if(U)U=!1;else{U=!0;continue}else if(w==='"')if(!U){if(Y){Y=!1,W=fK;while(z+1<G&&$[z+1]!==";")++z}else Y=!0;continue}else U=!1;else{if(U&&Y)H+="\\";if(U=!1,(W===OR||W===Fc)&&w==="'"){if(W===OR)W=Fc,X=H.substring(1);else W=Oc;H="";continue}else if(W===fK&&(w==="*"||w==="=")&&J.length){W=w==="*"?OR:Oc,J[Z]=[H,void 0],H="";continue}else if(!Y&&w===";"){if(W=fK,X){if(H.length)H=gK(H.replace(Dc,Kc),"binary",X);X=""}else if(H.length)H=gK(H,"binary","utf8");if(J[Z]===void 0)J[Z]=H;else J[Z][1]=H;H="",++Z;continue}else if(!Y&&(w===" "||w==="\t"))continue}H+=w}if(X&&H.length)H=gK(H.replace(Dc,Kc),"binary",X);else if(H)H=gK(H,"binary","utf8");if(J[Z]===void 0){if(H)J[Z]=H}else J[Z][1]=H;return J}Ec.exports=a90});var Vc=A0((CY1,Mc)=>{Mc.exports=function(J){if(typeof J!=="string")return"";for(var W=J.length-1;W>=0;--W)switch(J.charCodeAt(W)){case 47:case 92:return J=J.slice(W+1),J===".."||J==="."?"":J}return J===".."||J==="."?"":J}});var Lc=A0((TY1,Ic)=>{var{Readable:Ac}=I0("stream"),{inherits:o90}=I0("util"),s90=DR(),Qc=FR(),e90=bK(),$J0=Vc(),_W=xK(),JJ0=/^boundary$/i,WJ0=/^form-data$/i,XJ0=/^charset$/i,YJ0=/^filename$/i,UJ0=/^name$/i;mK.detect=/^multipart\/form-data/i;function mK($,J){let W,X,Y=this,U,Z=J.limits,H=J.isPartAFile||((q,h,x)=>h==="application/octet-stream"||x!==void 0),G=J.parsedConType||[],z=J.defCharset||"utf8",w=J.preservePath,D={highWaterMark:J.fileHwm};for(W=0,X=G.length;W<X;++W)if(Array.isArray(G[W])&&JJ0.test(G[W][0])){U=G[W][1];break}function K(){if(L===0&&k&&!$._done)k=!1,Y.end()}if(typeof U!=="string")throw Error("Multipart: Boundary not found");let O=_W(Z,"fieldSize",1048576),F=_W(Z,"fileSize",1/0),M=_W(Z,"files",1/0),A=_W(Z,"fields",1/0),I=_W(Z,"parts",1/0),P=_W(Z,"headerPairs",2000),Q=_W(Z,"headerSize",81920),N=0,_=0,L=0,R,S,k=!1;this._needDrain=!1,this._pause=!1,this._cb=void 0,this._nparts=0,this._boy=$;let T={boundary:U,maxHeaderPairs:P,maxHeaderSize:Q,partHwm:D.highWaterMark,highWaterMark:J.highWaterMark};this.parser=new s90(T),this.parser.on("drain",function(){if(Y._needDrain=!1,Y._cb&&!Y._pause){let q=Y._cb;Y._cb=void 0,q()}}).on("part",function q(h){if(++Y._nparts>I)return Y.parser.removeListener("part",q),Y.parser.on("part",W2),$.hitPartsLimit=!0,$.emit("partsLimit"),W2(h);if(S){let x=S;x.emit("end"),x.removeAllListeners("end")}h.on("header",function(x){let b,r,d,X0,i,K0,D0=0;if(x["content-type"]){if(d=Qc(x["content-type"][0]),d[0]){b=d[0].toLowerCase();for(W=0,X=d.length;W<X;++W)if(XJ0.test(d[W][0])){X0=d[W][1].toLowerCase();break}}}if(b===void 0)b="text/plain";if(X0===void 0)X0=z;if(x["content-disposition"]){if(d=Qc(x["content-disposition"][0]),!WJ0.test(d[0]))return W2(h);for(W=0,X=d.length;W<X;++W)if(UJ0.test(d[W][0]))r=d[W][1];else if(YJ0.test(d[W][0])){if(K0=d[W][1],!w)K0=$J0(K0)}}else return W2(h);if(x["content-transfer-encoding"])i=x["content-transfer-encoding"][0].toLowerCase();else i="7bit";let U0,B0;if(H(r,b,K0)){if(N===M){if(!$.hitFilesLimit)$.hitFilesLimit=!0,$.emit("filesLimit");return W2(h)}if(++N,$.listenerCount("file")===0){Y.parser._ignore();return}++L;let g0=new ER(D);R=g0,g0.on("end",function(){if(--L,Y._pause=!1,K(),Y._cb&&!Y._needDrain){let $4=Y._cb;Y._cb=void 0,$4()}}),g0._read=function($4){if(!Y._pause)return;if(Y._pause=!1,Y._cb&&!Y._needDrain){let T1=Y._cb;Y._cb=void 0,T1()}},$.emit("file",r,g0,K0,i,b),U0=function($4){if((D0+=$4.length)>F){let T1=F-D0+$4.length;if(T1>0)g0.push($4.slice(0,T1));g0.truncated=!0,g0.bytesRead=F,h.removeAllListeners("data"),g0.emit("limit");return}else if(!g0.push($4))Y._pause=!0;g0.bytesRead=D0},B0=function(){R=void 0,g0.push(null)}}else{if(_===A){if(!$.hitFieldsLimit)$.hitFieldsLimit=!0,$.emit("fieldsLimit");return W2(h)}++_,++L;let g0="",$4=!1;S=h,U0=function(T1){if((D0+=T1.length)>O){let h$=O-(D0-T1.length);g0+=T1.toString("binary",0,h$),$4=!0,h.removeAllListeners("data")}else g0+=T1.toString("binary")},B0=function(){if(S=void 0,g0.length)g0=e90(g0,"binary",X0);$.emit("field",r,g0,!1,$4,i,b),--L,K()}}h._readableState.sync=!1,h.on("data",U0),h.on("end",B0)}).on("error",function(x){if(R)R.emit("error",x)})}).on("error",function(q){$.emit("error",q)}).on("finish",function(){k=!0,K()})}mK.prototype.write=function($,J){let W=this.parser.write($);if(W&&!this._pause)J();else this._needDrain=!W,this._cb=J};mK.prototype.end=function(){let $=this;if($.parser.writable)$.parser.end();else if(!$._boy._done)process.nextTick(function(){$._boy._done=!0,$._boy.emit("finish")})};function W2($){$.resume()}function ER($){Ac.call(this,$),this.bytesRead=0,this.truncated=!1}o90(ER,Ac);ER.prototype._read=function($){};Ic.exports=mK});var _c=A0((qY1,Pc)=>{var ZJ0=/\+/g,HJ0=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function MR(){this.buffer=void 0}MR.prototype.write=function($){$=$.replace(ZJ0," ");let J="",W=0,X=0,Y=$.length;for(;W<Y;++W)if(this.buffer!==void 0){if(!HJ0[$.charCodeAt(W)])J+="%"+this.buffer,this.buffer=void 0,--W;else if(this.buffer+=$[W],++X,this.buffer.length===2)J+=String.fromCharCode(parseInt(this.buffer,16)),this.buffer=void 0}else if($[W]==="%"){if(W>X)J+=$.substring(X,W),X=W;this.buffer="",++X}if(X<Y&&this.buffer===void 0)J+=$.substring(X);return J};MR.prototype.reset=function(){this.buffer=void 0};Pc.exports=MR});var Bc=A0((hY1,Nc)=>{var GJ0=_c(),X2=bK(),VR=xK(),zJ0=/^charset$/i;yK.detect=/^application\/x-www-form-urlencoded/i;function yK($,J){let{limits:W,parsedConType:X}=J;this.boy=$,this.fieldSizeLimit=VR(W,"fieldSize",1048576),this.fieldNameSizeLimit=VR(W,"fieldNameSize",100),this.fieldsLimit=VR(W,"fields",1/0);let Y;for(var U=0,Z=X.length;U<Z;++U)if(Array.isArray(X[U])&&zJ0.test(X[U][0])){Y=X[U][1].toLowerCase();break}if(Y===void 0)Y=J.defCharset||"utf8";this.decoder=new GJ0,this.charset=Y,this._fields=0,this._state="key",this._checkingBytes=!0,this._bytesKey=0,this._bytesVal=0,this._key="",this._val="",this._keyTrunc=!1,this._valTrunc=!1,this._hitLimit=!1}yK.prototype.write=function($,J){if(this._fields===this.fieldsLimit){if(!this.boy.hitFieldsLimit)this.boy.hitFieldsLimit=!0,this.boy.emit("fieldsLimit");return J()}let W,X,Y,U=0,Z=$.length;while(U<Z)if(this._state==="key"){W=X=void 0;for(Y=U;Y<Z;++Y){if(!this._checkingBytes)++U;if($[Y]===61){W=Y;break}else if($[Y]===38){X=Y;break}if(this._checkingBytes&&this._bytesKey===this.fieldNameSizeLimit){this._hitLimit=!0;break}else if(this._checkingBytes)++this._bytesKey}if(W!==void 0){if(W>U)this._key+=this.decoder.write($.toString("binary",U,W));this._state="val",this._hitLimit=!1,this._checkingBytes=!0,this._val="",this._bytesVal=0,this._valTrunc=!1,this.decoder.reset(),U=W+1}else if(X!==void 0){++this._fields;let H,G=this._keyTrunc;if(X>U)H=this._key+=this.decoder.write($.toString("binary",U,X));else H=this._key;if(this._hitLimit=!1,this._checkingBytes=!0,this._key="",this._bytesKey=0,this._keyTrunc=!1,this.decoder.reset(),H.length)this.boy.emit("field",X2(H,"binary",this.charset),"",G,!1);if(U=X+1,this._fields===this.fieldsLimit)return J()}else if(this._hitLimit){if(Y>U)this._key+=this.decoder.write($.toString("binary",U,Y));if(U=Y,(this._bytesKey=this._key.length)===this.fieldNameSizeLimit)this._checkingBytes=!1,this._keyTrunc=!0}else{if(U<Z)this._key+=this.decoder.write($.toString("binary",U));U=Z}}else{X=void 0;for(Y=U;Y<Z;++Y){if(!this._checkingBytes)++U;if($[Y]===38){X=Y;break}if(this._checkingBytes&&this._bytesVal===this.fieldSizeLimit){this._hitLimit=!0;break}else if(this._checkingBytes)++this._bytesVal}if(X!==void 0){if(++this._fields,X>U)this._val+=this.decoder.write($.toString("binary",U,X));if(this.boy.emit("field",X2(this._key,"binary",this.charset),X2(this._val,"binary",this.charset),this._keyTrunc,this._valTrunc),this._state="key",this._hitLimit=!1,this._checkingBytes=!0,this._key="",this._bytesKey=0,this._keyTrunc=!1,this.decoder.reset(),U=X+1,this._fields===this.fieldsLimit)return J()}else if(this._hitLimit){if(Y>U)this._val+=this.decoder.write($.toString("binary",U,Y));if(U=Y,this._val===""&&this.fieldSizeLimit===0||(this._bytesVal=this._val.length)===this.fieldSizeLimit)this._checkingBytes=!1,this._valTrunc=!0}else{if(U<Z)this._val+=this.decoder.write($.toString("binary",U));U=Z}}J()};yK.prototype.end=function(){if(this.boy._done)return;if(this._state==="key"&&this._key.length>0)this.boy.emit("field",X2(this._key,"binary",this.charset),"",this._keyTrunc,!1);else if(this._state==="val")this.boy.emit("field",X2(this._key,"binary",this.charset),X2(this._val,"binary",this.charset),this._keyTrunc,this._valTrunc);this.boy._done=!0,this.boy.emit("finish")};Nc.exports=yK});var jc=A0((xY1,fH)=>{var QR=I0("stream").Writable,{inherits:wJ0}=I0("util"),DJ0=DR(),Rc=Lc(),Sc=Bc(),KJ0=FR();function I9($){if(!(this instanceof I9))return new I9($);if(typeof $!=="object")throw TypeError("Busboy expected an options-Object.");if(typeof $.headers!=="object")throw TypeError("Busboy expected an options-Object with headers-attribute.");if(typeof $.headers["content-type"]!=="string")throw TypeError("Missing Content-Type-header.");let{headers:J,...W}=$;this.opts={autoDestroy:!1,...W},QR.call(this,this.opts),this._done=!1,this._parser=this.getParserByHeaders(J),this._finished=!1}wJ0(I9,QR);I9.prototype.emit=function($){if($==="finish"){if(!this._done){this._parser?.end();return}else if(this._finished)return;this._finished=!0}QR.prototype.emit.apply(this,arguments)};I9.prototype.getParserByHeaders=function($){let J=KJ0($["content-type"]),W={defCharset:this.opts.defCharset,fileHwm:this.opts.fileHwm,headers:$,highWaterMark:this.opts.highWaterMark,isPartAFile:this.opts.isPartAFile,limits:this.opts.limits,parsedConType:J,preservePath:this.opts.preservePath};if(Rc.detect.test(J[0]))return new Rc(this,W);if(Sc.detect.test(J[0]))return new Sc(this,W);throw Error("Unsupported Content-Type.")};I9.prototype._write=function($,J,W){this._parser.write($,W)};fH.exports=I9;fH.exports.default=I9;fH.exports.Busboy=I9;fH.exports.Dicer=DJ0});var y8=A0((AR)=>{Object.defineProperty(AR,"__esModule",{value:!0});AR.fakePromise=void 0;AR.getHeadersObj=FJ0;AR.defaultHeadersSerializer=EJ0;AR.isArrayBufferView=VJ0;AR.isNodeReadable=QJ0;AR.isIterable=AJ0;AR.shouldRedirect=IJ0;AR.pipeThrough=LJ0;AR.endStream=PJ0;AR.safeWrite=_J0;var OJ0=I0("events");function kc($){return $?.forEach!=null}function FJ0($){if($==null||!kc($))return $;if($.headersInit&&!$._map&&!kc($.headersInit))return $.headersInit;return Object.fromEntries($.entries())}function EJ0($,J){let W=[];return $.forEach((X,Y)=>{if(J&&Y==="content-length")J(X);W.push(`${Y}: ${X}`)}),W}var MJ0=uJ();Object.defineProperty(AR,"fakePromise",{enumerable:!0,get:function(){return MJ0.fakePromise}});function VJ0($){return $!=null&&$.buffer!=null&&$.byteLength!=null&&$.byteOffset!=null}function QJ0($){return $!=null&&$.pipe!=null}function AJ0($){return $?.[Symbol.iterator]!=null}function IJ0($){return $===301||$===302||$===303||$===307||$===308}function LJ0({src:$,dest:J,signal:W,onError:X}){if(X)J.once("error",X);if($.once("error",(Y)=>{J.destroy(Y)}),J.once("close",()=>{if(!$.destroyed)$.destroy()}),W){let Z=function(){U.deref()?.removeEventListener("abort",H),Y.deref()?.removeListener("end",Z),Y.deref()?.removeListener("error",Z),Y.deref()?.removeListener("close",Z)},H=function(){Y.deref()?.destroy(new vc),Z()},Y=new WeakRef($),U=new WeakRef(W);W.addEventListener("abort",H,{once:!0}),$.once("end",Z),$.once("error",Z),$.once("close",Z)}$.pipe(J,{end:!0})}function PJ0($){return $.end(null,null,null)}function _J0($,J){if(!J.write($))return(0,OJ0.once)(J,"drain")}class vc extends Error{constructor($="The operation was aborted",J=void 0){super($,J);this.name="AbortError"}}});var Y2=A0((hc)=>{Object.defineProperty(hc,"__esModule",{value:!0});hc.PonyfillReadableStream=void 0;var Cc=I0("buffer"),IR=I0("events"),LR=I0("stream"),hJ0=I0("stream/promises"),PR=uJ(),_R=y8();function Tc($,J){let W=[],X=!1,Y=!1;return{desiredSize:$,enqueue(U){let Z=typeof U==="string"?Cc.Buffer.from(U):U;if(!Y)W.push(Z);else J.push(Z)},close(){if(W.length>0)this._flush();J.push(null),X=!0},error(U){if(W.length>0)this._flush();J.destroy(U)},get _closed(){return X},_flush(){if(Y=!0,W.length>0){let U=W.length>1?Cc.Buffer.concat(W):W[0];J.push(U),W=[]}}}}function xJ0($){return $?.read!=null}function qc($){return $?.getReader!=null}class cK{readable;constructor($){if($ instanceof cK&&$.readable!=null)this.readable=$.readable;else if(xJ0($))this.readable=$;else if(qc($))this.readable=LR.Readable.fromWeb($);else{let J=!1,W=!1,X=(U)=>{if(!J){let Z=Tc(U,this.readable);return J=!0,(0,PR.handleMaybePromise)(()=>$?.start?.(Z),()=>{if(Z._flush(),Z._closed)return!1;return!0})}return!0},Y=(U)=>{return(0,PR.handleMaybePromise)(()=>X(U),(Z)=>{if(!Z)return;let H=Tc(U,this.readable);return(0,PR.handleMaybePromise)(()=>$?.pull?.(H),()=>{H._flush(),W=!1})})};this.readable=new LR.Readable({read(U){if(W)return;return W=!0,Y(U)},destroy(U,Z){if($?.cancel)try{let H=$.cancel(U);if(H?.then)return H.then(()=>{Z(null)},(G)=>{Z(G)})}catch(H){Z(H);return}Z(null)}})}}cancel($){return this.readable.destroy($),(0,IR.once)(this.readable,"close")}locked=!1;getReader($){let J=this.readable[Symbol.asyncIterator]();this.locked=!0;let W=this.readable;return{read(){return J.next()},releaseLock:()=>{if(J.return){let X=J.return();if(X.then){X.then(()=>{this.locked=!1});return}}this.locked=!1},cancel:(X)=>{if(J.return){let Y=J.return(X);if(Y.then)return Y.then(()=>{this.locked=!1})}return this.locked=!1,(0,_R.fakePromise)()},get closed(){return Promise.race([(0,IR.once)(W,"end"),(0,IR.once)(W,"error").then((X)=>Promise.reject(X))])}}}[Symbol.asyncIterator](){let $=this.readable[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return this},next:()=>$.next(),return:()=>{if(!this.readable.destroyed)this.readable.destroy();return $.return?.()||(0,_R.fakePromise)({done:!0,value:void 0})},throw:(J)=>{if(!this.readable.destroyed)this.readable.destroy(J);return $.throw?.(J)||(0,_R.fakePromise)({done:!0,value:void 0})}}}tee(){throw Error("Not implemented")}async pipeToWriter($){try{for await(let J of this)await $.write(J);await $.close()}catch(J){await $.abort(J)}}pipeTo($){if(gJ0($))return(0,hJ0.pipeline)(this.readable,$.writable,{end:!0});else{let J=$.getWriter();return this.pipeToWriter(J)}}pipeThrough({writable:$,readable:J}){if(this.pipeTo($).catch((W)=>{this.readable.destroy(W)}),bJ0(J))J.readable.once("error",(W)=>this.readable.destroy(W)),J.readable.once("finish",()=>this.readable.push(null)),J.readable.once("close",()=>this.readable.push(null));return J}static[Symbol.hasInstance]($){return qc($)}static from($){return new cK(LR.Readable.from($))}[Symbol.toStringTag]="ReadableStream"}hc.PonyfillReadableStream=cK;function bJ0($){return $?.readable!=null}function gJ0($){return $?.writable!=null}});var uK=A0((uc)=>{Object.defineProperty(uc,"__esModule",{value:!0});uc.PonyfillBlob=void 0;uc.hasBufferMethod=yH;uc.hasArrayBufferMethod=cH;uc.hasBytesMethod=uH;uc.hasTextMethod=bc;uc.hasSizeProperty=gc;uc.hasStreamMethod=fc;uc.hasBlobSignature=mc;uc.isArrayBuffer=yc;var q$=I0("buffer"),NR=Y2(),T$=y8();function mH($){if(typeof $==="string")return q$.Buffer.from($);else if(q$.Buffer.isBuffer($))return $;else if((0,T$.isArrayBufferView)($))return q$.Buffer.from($.buffer,$.byteOffset,$.byteLength);else return q$.Buffer.from($)}function yH($){return $!=null&&$.buffer!=null&&typeof $.buffer==="function"}function cH($){return $!=null&&$.arrayBuffer!=null&&typeof $.arrayBuffer==="function"}function uH($){return $!=null&&$.bytes!=null&&typeof $.bytes==="function"}function bc($){return $!=null&&$.text!=null&&typeof $.text==="function"}function gc($){return $!=null&&typeof $.size==="number"}function fc($){return $!=null&&$.stream!=null&&typeof $.stream==="function"}function mc($){return $!=null&&$[Symbol.toStringTag]==="Blob"}function yc($){return $!=null&&$.byteLength!=null&&$.slice!=null}class cc{blobParts;type;encoding;_size=null;constructor($=[],J){if(this.blobParts=$,this.type=J?.type||"application/octet-stream",this.encoding=J?.encoding||"utf8",this._size=J?.size||null,$.length===1&&mc($[0]))return $[0]}_buffer=null;buffer(){if(this._buffer)return(0,T$.fakePromise)(this._buffer);if(this.blobParts.length===1){let W=this.blobParts[0];if(yH(W))return W.buffer().then((X)=>{return this._buffer=X,this._buffer});if(uH(W))return W.bytes().then((X)=>{return this._buffer=q$.Buffer.from(X),this._buffer});if(cH(W))return W.arrayBuffer().then((X)=>{return this._buffer=q$.Buffer.from(X,void 0,W.size),this._buffer});return this._buffer=mH(W),(0,T$.fakePromise)(this._buffer)}let $=[],J=this.blobParts.map((W,X)=>{if(yH(W)){$.push(W.buffer().then((Y)=>{J[X]=Y}));return}else if(cH(W)){$.push(W.arrayBuffer().then((Y)=>{J[X]=q$.Buffer.from(Y,void 0,W.size)}));return}else if(uH(W)){$.push(W.bytes().then((Y)=>{J[X]=q$.Buffer.from(Y)}));return}else return mH(W)});if($.length>0)return Promise.all($).then(()=>q$.Buffer.concat(J,this._size||void 0));return(0,T$.fakePromise)(q$.Buffer.concat(J,this._size||void 0))}arrayBuffer(){if(this._buffer)return(0,T$.fakePromise)(this._buffer);if(this.blobParts.length===1){if(yc(this.blobParts[0]))return(0,T$.fakePromise)(this.blobParts[0]);if(cH(this.blobParts[0]))return this.blobParts[0].arrayBuffer()}return this.buffer()}bytes(){if(this._buffer)return(0,T$.fakePromise)(this._buffer);if(this.blobParts.length===1){if(q$.Buffer.isBuffer(this.blobParts[0]))return this._buffer=this.blobParts[0],(0,T$.fakePromise)(this._buffer);if(this.blobParts[0]instanceof Uint8Array)return this._buffer=q$.Buffer.from(this.blobParts[0]),(0,T$.fakePromise)(this._buffer);if(uH(this.blobParts[0]))return this.blobParts[0].bytes();if(yH(this.blobParts[0]))return this.blobParts[0].buffer()}return this.buffer()}_text=null;text(){if(this._text)return(0,T$.fakePromise)(this._text);if(this.blobParts.length===1){let $=this.blobParts[0];if(typeof $==="string")return this._text=$,(0,T$.fakePromise)(this._text);if(bc($))return $.text().then((W)=>{return this._text=W,this._text});let J=mH($);return this._text=J.toString(this.encoding),(0,T$.fakePromise)(this._text)}return this.buffer().then(($)=>{return this._text=$.toString(this.encoding),this._text})}_json=null;json(){if(this._json)return(0,T$.fakePromise)(this._json);return this.text().then(($)=>{return this._json=JSON.parse($),this._json})}_formData=null;formData(){if(this._formData)return(0,T$.fakePromise)(this._formData);throw Error("Not implemented")}get size(){if(this._size==null){this._size=0;for(let $ of this.blobParts)if(typeof $==="string")this._size+=q$.Buffer.byteLength($);else if(gc($))this._size+=$.size;else if((0,T$.isArrayBufferView)($))this._size+=$.byteLength}return this._size}stream(){if(this.blobParts.length===1){let J=this.blobParts[0];if(fc(J))return J.stream();let W=mH(J);return new NR.PonyfillReadableStream({start:(X)=>{X.enqueue(W),X.close()}})}if(this._buffer!=null)return new NR.PonyfillReadableStream({start:(J)=>{J.enqueue(this._buffer),J.close()}});let $;return new NR.PonyfillReadableStream({start:(J)=>{if(this.blobParts.length===0){J.close();return}$=this.blobParts[Symbol.iterator]()},pull:(J)=>{let{value:W,done:X}=$.next();if(X){J.close();return}if(W){if(yH(W))return W.buffer().then((U)=>{J.enqueue(U)});if(uH(W))return W.bytes().then((U)=>{let Z=q$.Buffer.from(U);J.enqueue(Z)});if(cH(W))return W.arrayBuffer().then((U)=>{let Z=q$.Buffer.from(U,void 0,W.size);J.enqueue(Z)});let Y=mH(W);J.enqueue(Y)}}})}slice(){throw Error("Not implemented")}}uc.PonyfillBlob=cc});var BR=A0((lc)=>{Object.defineProperty(lc,"__esModule",{value:!0});lc.PonyfillFile=void 0;var rJ0=uK();class dc extends rJ0.PonyfillBlob{name;lastModified;constructor($,J,W){super($,W);this.name=J,this.lastModified=W?.lastModified||Date.now()}webkitRelativePath=""}lc.PonyfillFile=dc});var SR=A0((yY1,lK)=>{var nc,ic,tc,ac,oc,sc,ec,$u,Ju,Wu,Xu,Yu,Uu,pK,RR,Zu,Hu,Gu,U2,zu,wu,Du,Ku,Ou,Fu,Eu,Mu,Vu,dK,Qu,Au,Iu;(function($){var J=typeof global==="object"?global:typeof self==="object"?self:typeof this==="object"?this:{};if(typeof define==="function"&&define.amd)define("tslib",["exports"],function(X){$(W(J,W(X)))});else if(typeof lK==="object"&&typeof yY1==="object")$(W(J,W(yY1)));else $(W(J));function W(X,Y){if(X!==J)if(typeof Object.create==="function")Object.defineProperty(X,"__esModule",{value:!0});else X.__esModule=!0;return function(U,Z){return X[U]=Y?Y(U,Z):Z}}})(function($){var J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,Z){U.__proto__=Z}||function(U,Z){for(var H in Z)if(Object.prototype.hasOwnProperty.call(Z,H))U[H]=Z[H]};nc=function(U,Z){if(typeof Z!=="function"&&Z!==null)throw TypeError("Class extends value "+String(Z)+" is not a constructor or null");J(U,Z);function H(){this.constructor=U}U.prototype=Z===null?Object.create(Z):(H.prototype=Z.prototype,new H)},ic=Object.assign||function(U){for(var Z,H=1,G=arguments.length;H<G;H++){Z=arguments[H];for(var z in Z)if(Object.prototype.hasOwnProperty.call(Z,z))U[z]=Z[z]}return U},tc=function(U,Z){var H={};for(var G in U)if(Object.prototype.hasOwnProperty.call(U,G)&&Z.indexOf(G)<0)H[G]=U[G];if(U!=null&&typeof Object.getOwnPropertySymbols==="function"){for(var z=0,G=Object.getOwnPropertySymbols(U);z<G.length;z++)if(Z.indexOf(G[z])<0&&Object.prototype.propertyIsEnumerable.call(U,G[z]))H[G[z]]=U[G[z]]}return H},ac=function(U,Z,H,G){var z=arguments.length,w=z<3?Z:G===null?G=Object.getOwnPropertyDescriptor(Z,H):G,D;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")w=Reflect.decorate(U,Z,H,G);else for(var K=U.length-1;K>=0;K--)if(D=U[K])w=(z<3?D(w):z>3?D(Z,H,w):D(Z,H))||w;return z>3&&w&&Object.defineProperty(Z,H,w),w},oc=function(U,Z){return function(H,G){Z(H,G,U)}},sc=function(U,Z,H,G,z,w){function D(L){if(L!==void 0&&typeof L!=="function")throw TypeError("Function expected");return L}var K=G.kind,O=K==="getter"?"get":K==="setter"?"set":"value",F=!Z&&U?G.static?U:U.prototype:null,M=Z||(F?Object.getOwnPropertyDescriptor(F,G.name):{}),A,I=!1;for(var P=H.length-1;P>=0;P--){var Q={};for(var N in G)Q[N]=N==="access"?{}:G[N];for(var N in G.access)Q.access[N]=G.access[N];Q.addInitializer=function(L){if(I)throw TypeError("Cannot add initializers after decoration has completed");w.push(D(L||null))};var _=(0,H[P])(K==="accessor"?{get:M.get,set:M.set}:M[O],Q);if(K==="accessor"){if(_===void 0)continue;if(_===null||typeof _!=="object")throw TypeError("Object expected");if(A=D(_.get))M.get=A;if(A=D(_.set))M.set=A;if(A=D(_.init))z.unshift(A)}else if(A=D(_))if(K==="field")z.unshift(A);else M[O]=A}if(F)Object.defineProperty(F,G.name,M);I=!0},ec=function(U,Z,H){var G=arguments.length>2;for(var z=0;z<Z.length;z++)H=G?Z[z].call(U,H):Z[z].call(U);return G?H:void 0},$u=function(U){return typeof U==="symbol"?U:"".concat(U)},Ju=function(U,Z,H){if(typeof Z==="symbol")Z=Z.description?"[".concat(Z.description,"]"):"";return Object.defineProperty(U,"name",{configurable:!0,value:H?"".concat(H," ",Z):Z})},Wu=function(U,Z){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(U,Z)},Xu=function(U,Z,H,G){function z(w){return w instanceof H?w:new H(function(D){D(w)})}return new(H||(H=Promise))(function(w,D){function K(M){try{F(G.next(M))}catch(A){D(A)}}function O(M){try{F(G.throw(M))}catch(A){D(A)}}function F(M){M.done?w(M.value):z(M.value).then(K,O)}F((G=G.apply(U,Z||[])).next())})},Yu=function(U,Z){var H={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},G,z,w,D=Object.create((typeof Iterator==="function"?Iterator:Object).prototype);return D.next=K(0),D.throw=K(1),D.return=K(2),typeof Symbol==="function"&&(D[Symbol.iterator]=function(){return this}),D;function K(F){return function(M){return O([F,M])}}function O(F){if(G)throw TypeError("Generator is already executing.");while(D&&(D=0,F[0]&&(H=0)),H)try{if(G=1,z&&(w=F[0]&2?z.return:F[0]?z.throw||((w=z.return)&&w.call(z),0):z.next)&&!(w=w.call(z,F[1])).done)return w;if(z=0,w)F=[F[0]&2,w.value];switch(F[0]){case 0:case 1:w=F;break;case 4:return H.label++,{value:F[1],done:!1};case 5:H.label++,z=F[1],F=[0];continue;case 7:F=H.ops.pop(),H.trys.pop();continue;default:if((w=H.trys,!(w=w.length>0&&w[w.length-1]))&&(F[0]===6||F[0]===2)){H=0;continue}if(F[0]===3&&(!w||F[1]>w[0]&&F[1]<w[3])){H.label=F[1];break}if(F[0]===6&&H.label<w[1]){H.label=w[1],w=F;break}if(w&&H.label<w[2]){H.label=w[2],H.ops.push(F);break}if(w[2])H.ops.pop();H.trys.pop();continue}F=Z.call(U,H)}catch(M){F=[6,M],z=0}finally{G=w=0}if(F[0]&5)throw F[1];return{value:F[0]?F[1]:void 0,done:!0}}},Uu=function(U,Z){for(var H in U)if(H!=="default"&&!Object.prototype.hasOwnProperty.call(Z,H))dK(Z,U,H)},dK=Object.create?function(U,Z,H,G){if(G===void 0)G=H;var z=Object.getOwnPropertyDescriptor(Z,H);if(!z||("get"in z?!Z.__esModule:z.writable||z.configurable))z={enumerable:!0,get:function(){return Z[H]}};Object.defineProperty(U,G,z)}:function(U,Z,H,G){if(G===void 0)G=H;U[G]=Z[H]},pK=function(U){var Z=typeof Symbol==="function"&&Symbol.iterator,H=Z&&U[Z],G=0;if(H)return H.call(U);if(U&&typeof U.length==="number")return{next:function(){if(U&&G>=U.length)U=void 0;return{value:U&&U[G++],done:!U}}};throw TypeError(Z?"Object is not iterable.":"Symbol.iterator is not defined.")},RR=function(U,Z){var H=typeof Symbol==="function"&&U[Symbol.iterator];if(!H)return U;var G=H.call(U),z,w=[],D;try{while((Z===void 0||Z-- >0)&&!(z=G.next()).done)w.push(z.value)}catch(K){D={error:K}}finally{try{if(z&&!z.done&&(H=G.return))H.call(G)}finally{if(D)throw D.error}}return w},Zu=function(){for(var U=[],Z=0;Z<arguments.length;Z++)U=U.concat(RR(arguments[Z]));return U},Hu=function(){for(var U=0,Z=0,H=arguments.length;Z<H;Z++)U+=arguments[Z].length;for(var G=Array(U),z=0,Z=0;Z<H;Z++)for(var w=arguments[Z],D=0,K=w.length;D<K;D++,z++)G[z]=w[D];return G},Gu=function(U,Z,H){if(H||arguments.length===2){for(var G=0,z=Z.length,w;G<z;G++)if(w||!(G in Z)){if(!w)w=Array.prototype.slice.call(Z,0,G);w[G]=Z[G]}}return U.concat(w||Array.prototype.slice.call(Z))},U2=function(U){return this instanceof U2?(this.v=U,this):new U2(U)},zu=function(U,Z,H){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var G=H.apply(U,Z||[]),z,w=[];return z=Object.create((typeof AsyncIterator==="function"?AsyncIterator:Object).prototype),K("next"),K("throw"),K("return",D),z[Symbol.asyncIterator]=function(){return this},z;function D(P){return function(Q){return Promise.resolve(Q).then(P,A)}}function K(P,Q){if(G[P]){if(z[P]=function(N){return new Promise(function(_,L){w.push([P,N,_,L])>1||O(P,N)})},Q)z[P]=Q(z[P])}}function O(P,Q){try{F(G[P](Q))}catch(N){I(w[0][3],N)}}function F(P){P.value instanceof U2?Promise.resolve(P.value.v).then(M,A):I(w[0][2],P)}function M(P){O("next",P)}function A(P){O("throw",P)}function I(P,Q){if(P(Q),w.shift(),w.length)O(w[0][0],w[0][1])}},wu=function(U){var Z,H;return Z={},G("next"),G("throw",function(z){throw z}),G("return"),Z[Symbol.iterator]=function(){return this},Z;function G(z,w){Z[z]=U[z]?function(D){return(H=!H)?{value:U2(U[z](D)),done:!1}:w?w(D):D}:w}},Du=function(U){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var Z=U[Symbol.asyncIterator],H;return Z?Z.call(U):(U=typeof pK==="function"?pK(U):U[Symbol.iterator](),H={},G("next"),G("throw"),G("return"),H[Symbol.asyncIterator]=function(){return this},H);function G(w){H[w]=U[w]&&function(D){return new Promise(function(K,O){D=U[w](D),z(K,O,D.done,D.value)})}}function z(w,D,K,O){Promise.resolve(O).then(function(F){w({value:F,done:K})},D)}},Ku=function(U,Z){if(Object.defineProperty)Object.defineProperty(U,"raw",{value:Z});else U.raw=Z;return U};var W=Object.create?function(U,Z){Object.defineProperty(U,"default",{enumerable:!0,value:Z})}:function(U,Z){U.default=Z},X=function(U){return X=Object.getOwnPropertyNames||function(Z){var H=[];for(var G in Z)if(Object.prototype.hasOwnProperty.call(Z,G))H[H.length]=G;return H},X(U)};Ou=function(U){if(U&&U.__esModule)return U;var Z={};if(U!=null){for(var H=X(U),G=0;G<H.length;G++)if(H[G]!=="default")dK(Z,U,H[G])}return W(Z,U),Z},Fu=function(U){return U&&U.__esModule?U:{default:U}},Eu=function(U,Z,H,G){if(H==="a"&&!G)throw TypeError("Private accessor was defined without a getter");if(typeof Z==="function"?U!==Z||!G:!Z.has(U))throw TypeError("Cannot read private member from an object whose class did not declare it");return H==="m"?G:H==="a"?G.call(U):G?G.value:Z.get(U)},Mu=function(U,Z,H,G,z){if(G==="m")throw TypeError("Private method is not writable");if(G==="a"&&!z)throw TypeError("Private accessor was defined without a setter");if(typeof Z==="function"?U!==Z||!z:!Z.has(U))throw TypeError("Cannot write private member to an object whose class did not declare it");return G==="a"?z.call(U,H):z?z.value=H:Z.set(U,H),H},Vu=function(U,Z){if(Z===null||typeof Z!=="object"&&typeof Z!=="function")throw TypeError("Cannot use 'in' operator on non-object");return typeof U==="function"?Z===U:U.has(Z)},Qu=function(U,Z,H){if(Z!==null&&Z!==void 0){if(typeof Z!=="object"&&typeof Z!=="function")throw TypeError("Object expected.");var G,z;if(H){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");G=Z[Symbol.asyncDispose]}if(G===void 0){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");if(G=Z[Symbol.dispose],H)z=G}if(typeof G!=="function")throw TypeError("Object not disposable.");if(z)G=function(){try{z.call(this)}catch(w){return Promise.reject(w)}};U.stack.push({value:Z,dispose:G,async:H})}else if(H)U.stack.push({async:!0});return Z};var Y=typeof SuppressedError==="function"?SuppressedError:function(U,Z,H){var G=Error(H);return G.name="SuppressedError",G.error=U,G.suppressed=Z,G};Au=function(U){function Z(w){U.error=U.hasError?new Y(w,U.error,"An error was suppressed during disposal."):w,U.hasError=!0}var H,G=0;function z(){while(H=U.stack.pop())try{if(!H.async&&G===1)return G=0,U.stack.push(H),Promise.resolve().then(z);if(H.dispose){var w=H.dispose.call(H.value);if(H.async)return G|=2,Promise.resolve(w).then(z,function(D){return Z(D),z()})}else G|=1}catch(D){Z(D)}if(G===1)return U.hasError?Promise.reject(U.error):Promise.resolve();if(U.hasError)throw U.error}return z()},Iu=function(U,Z){if(typeof U==="string"&&/^\.\.?\//.test(U))return U.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(H,G,z,w,D){return G?Z?".jsx":".js":z&&(!w||!D)?H:z+w+"."+D.toLowerCase()+"js"});return U},$("__extends",nc),$("__assign",ic),$("__rest",tc),$("__decorate",ac),$("__param",oc),$("__esDecorate",sc),$("__runInitializers",ec),$("__propKey",$u),$("__setFunctionName",Ju),$("__metadata",Wu),$("__awaiter",Xu),$("__generator",Yu),$("__exportStar",Uu),$("__createBinding",dK),$("__values",pK),$("__read",RR),$("__spread",Zu),$("__spreadArrays",Hu),$("__spreadArray",Gu),$("__await",U2),$("__asyncGenerator",zu),$("__asyncDelegator",wu),$("__asyncValues",Du),$("__makeTemplateObject",Ku),$("__importStar",Ou),$("__importDefault",Fu),$("__classPrivateFieldGet",Eu),$("__classPrivateFieldSet",Mu),$("__classPrivateFieldIn",Vu),$("__addDisposableResource",Qu),$("__disposeResources",Au),$("__rewriteRelativeImportExtension",Iu)})});var rK=A0((Pu)=>{Object.defineProperty(Pu,"__esModule",{value:!0});Pu.PonyfillSuppressedError=void 0;class Lu extends Error{error;suppressed;constructor($,J,W){super(W);this.error=$,this.suppressed=J,this.name="SuppressedError",Error.captureStackTrace(this,this.constructor)}}Pu.PonyfillSuppressedError=Lu});var pH=A0((Nu)=>{Object.defineProperty(Nu,"__esModule",{value:!0});Nu.DisposableSymbols=void 0;Nu.patchSymbols=nJ0;Nu.DisposableSymbols={get dispose(){return Symbol.dispose||Symbol.for("dispose")},get asyncDispose(){return Symbol.asyncDispose||Symbol.for("asyncDispose")}};function nJ0(){Symbol.dispose||=Symbol.for("dispose"),Symbol.asyncDispose||=Symbol.for("asyncDispose")}});var jR=A0((Su)=>{Object.defineProperty(Su,"__esModule",{value:!0});Su.isSyncDisposable=tJ0;Su.isAsyncDisposable=aJ0;var Ru=pH();function tJ0($){return $?.[Ru.DisposableSymbols.dispose]!=null}function aJ0($){return $?.[Ru.DisposableSymbols.asyncDispose]!=null}});var Cu=A0((ku)=>{Object.defineProperty(ku,"__esModule",{value:!0});ku.PonyfillAsyncDisposableStack=void 0;var eJ0=uJ(),$70=rK(),nK=pH(),ju=jR(),J70=globalThis.SuppressedError||$70.PonyfillSuppressedError;class kR{callbacks=[];get disposed(){return this.callbacks.length===0}use($){if((0,ju.isAsyncDisposable)($))this.callbacks.push(()=>$[nK.DisposableSymbols.asyncDispose]());else if((0,ju.isSyncDisposable)($))this.callbacks.push(()=>$[nK.DisposableSymbols.dispose]());return $}adopt($,J){if(J)this.callbacks.push(()=>J($));return $}defer($){if($)this.callbacks.push($)}move(){let $=new kR;return $.callbacks=this.callbacks,this.callbacks=[],$}disposeAsync(){return this[nK.DisposableSymbols.asyncDispose]()}_error;_iterateCallbacks(){let $=this.callbacks.pop();if($)return(0,eJ0.handleMaybePromise)($,()=>this._iterateCallbacks(),(J)=>{return this._error=this._error?new J70(J,this._error):J,this._iterateCallbacks()})}[nK.DisposableSymbols.asyncDispose](){let $=this._iterateCallbacks();if($?.then)return $.then(()=>{if(this._error){let J=this._error;throw this._error=void 0,J}});if(this._error){let J=this._error;throw this._error=void 0,J}return}[Symbol.toStringTag]="AsyncDisposableStack"}ku.PonyfillAsyncDisposableStack=kR});var hu=A0((Tu)=>{Object.defineProperty(Tu,"__esModule",{value:!0});Tu.PonyfillDisposableStack=void 0;var W70=rK(),vR=pH(),X70=jR(),Y70=globalThis.SuppressedError||W70.PonyfillSuppressedError;class CR{callbacks=[];get disposed(){return this.callbacks.length===0}use($){if((0,X70.isSyncDisposable)($))this.callbacks.push(()=>$[vR.DisposableSymbols.dispose]());return $}adopt($,J){if(J)this.callbacks.push(()=>J($));return $}defer($){if($)this.callbacks.push($)}move(){let $=new CR;return $.callbacks=this.callbacks,this.callbacks=[],$}dispose(){return this[vR.DisposableSymbols.dispose]()}_error;_iterateCallbacks(){let $=this.callbacks.pop();if($){try{$()}catch(J){this._error=this._error?new Y70(J,this._error):J}return this._iterateCallbacks()}}[vR.DisposableSymbols.dispose](){if(this._iterateCallbacks(),this._error){let $=this._error;throw this._error=void 0,$}}[Symbol.toStringTag]="DisposableStack"}Tu.PonyfillDisposableStack=CR});var bu=A0((TR)=>{Object.defineProperty(TR,"__esModule",{value:!0});TR.SuppressedError=TR.AsyncDisposableStack=TR.DisposableStack=void 0;var U70=SR(),Z70=Cu(),H70=hu(),G70=rK();TR.DisposableStack=globalThis.DisposableStack||H70.PonyfillDisposableStack;TR.AsyncDisposableStack=globalThis.AsyncDisposableStack||Z70.PonyfillAsyncDisposableStack;TR.SuppressedError=globalThis.SuppressedError||G70.PonyfillSuppressedError;U70.__exportStar(pH(),TR)});var iK=A0((mu)=>{Object.defineProperty(mu,"__esModule",{value:!0});mu.PonyfillIteratorObject=void 0;var gu=I0("util"),D70=bu(),K70=y8();class fu{iterableIterator;[Symbol.toStringTag]="IteratorObject";constructor($,J){this.iterableIterator=$,this[Symbol.toStringTag]=J}*map($){let J=0;for(let W of this.iterableIterator)yield $(W,J++);return}*filter($){let J=0;for(let W of this.iterableIterator)if($(W,J++))yield W;return}reduce($,J){let W=0,X=J;for(let Y of this.iterableIterator)X=$(X,Y,W++);return X}forEach($){let J=0;for(let W of this.iterableIterator)$(W,J++)}*take($){let J=0;for(let W of this.iterableIterator){if(J>=$)break;yield W,J++}return}*drop($){let J=0;for(let W of this.iterableIterator){if(J>=$)yield W;J++}return}*flatMap($){let J=0;for(let W of this.iterableIterator){let X=$(W,J++);if((0,K70.isIterable)(X))for(let Y of X)yield Y;else for(let Y of{[Symbol.iterator]:()=>X})yield Y}return}some($){let J=0;for(let W of this.iterableIterator)if($(W,J++))return!0;return!1}every($){let J=0;for(let W of this.iterableIterator)if(!$(W,J++))return!1;return!0}find($){let J=0;for(let W of this.iterableIterator)if($(W,J++))return W;return}toArray(){return Array.from(this.iterableIterator)}[D70.DisposableSymbols.dispose](){this.iterableIterator.return?.()}next(...[$]){return this.iterableIterator.next($)}[Symbol.iterator](){return this}[Symbol.for("nodejs.util.inspect.custom")](){let $={};return this.forEach((J,W)=>{let X=(0,gu.inspect)(J);$[W]=X.includes(",")?X.split(",").map((Y)=>Y.trim()):X}),`${this[Symbol.toStringTag]} ${(0,gu.inspect)($)}`}}mu.PonyfillIteratorObject=fu});var hR=A0((du)=>{Object.defineProperty(du,"__esModule",{value:!0});du.PonyfillFormData=void 0;du.getStreamFromFormData=F70;var NW=I0("buffer"),qR=iK(),O70=Y2();class pu{map=new Map;append($,J,W){let X=this.map.get($);if(!X)X=[],this.map.set($,X);let Y=uu(J)?cu($,J,W):J;X.push(Y)}delete($){this.map.delete($)}get($){let J=this.map.get($);return J?J[0]:null}getAll($){return this.map.get($)||[]}has($){return this.map.has($)}set($,J,W){let X=uu(J)?cu($,J,W):J;this.map.set($,[X])}[Symbol.iterator](){return this._entries()}*_entries(){for(let[$,J]of this.map)for(let W of J)yield[$,W]}entries(){return new qR.PonyfillIteratorObject(this._entries(),"FormDataIterator")}_keys(){return this.map.keys()}keys(){return new qR.PonyfillIteratorObject(this._keys(),"FormDataIterator")}*_values(){for(let $ of this.map.values())for(let J of $)yield J}values(){return new qR.PonyfillIteratorObject(this._values(),"FormDataIterator")}forEach($){for(let[J,W]of this)$(W,J,this)}}du.PonyfillFormData=pu;function F70($,J="---"){let W,X=!1,Y,U=!1;function Z(H){let{done:G,value:z}=W.next();if(G)return H.enqueue(NW.Buffer.from(`\r
--${J}--\r
`)),H.close();if(U)H.enqueue(NW.Buffer.from(`\r
--${J}\r
`));if(z){let[w,D]=z;if(typeof D==="string")H.enqueue(NW.Buffer.from(`Content-Disposition: form-data; name="${w}"\r
\r
`)),H.enqueue(NW.Buffer.from(D));else{let K="";if(D.name)K=`; filename="${D.name}"`;H.enqueue(NW.Buffer.from(`Content-Disposition: form-data; name="${w}"${K}\r
`)),H.enqueue(NW.Buffer.from(`Content-Type: ${D.type||"application/octet-stream"}\r
\r
`)),Y=D.stream()[Symbol.asyncIterator]()}U=!0}}return new O70.PonyfillReadableStream({start:()=>{W=$.entries()},pull:(H)=>{if(!X)return X=!0,H.enqueue(NW.Buffer.from(`--${J}\r
`));if(Y)return Y.next().then(({done:G,value:z})=>{if(G)Y=void 0;if(z)return H.enqueue(z);else return Z(H)});return Z(H)},cancel:(H)=>{W?.return?.(H),Y?.return?.(H)}})}function cu($,J,W){return Object.defineProperty(J,"name",{configurable:!0,enumerable:!0,value:W||J.name||$}),J}function uu($){return $?.arrayBuffer!=null}});var aK=A0((iu)=>{Object.defineProperty(iu,"__esModule",{value:!0});iu.PonyfillBody=void 0;var M5=I0("buffer"),P9=I0("stream"),M70=jc(),tK=uJ(),Z2=uK(),V70=BR(),ru=hR(),L9=Y2(),s4=y8(),S4;(function($){$.ReadableStream="ReadableStream",$.Blob="Blob",$.FormData="FormData",$.String="String",$.Readable="Readable",$.Buffer="Buffer",$.AsyncIterable="AsyncIterable"})(S4||(S4={}));class nu{bodyInit;options;bodyUsed=!1;contentType=null;contentLength=null;constructor($,J={}){this.bodyInit=$,this.options=J;let{bodyFactory:W,contentType:X,contentLength:Y,bodyType:U,buffer:Z}=Q70($);this._bodyFactory=W,this.contentType=X,this.contentLength=Y,this.bodyType=U,this._buffer=Z,this._signal=J.signal}bodyType;_bodyFactory=()=>null;_generatedBody=null;_buffer;_signal;generateBody(){if(this._generatedBody?.readable?.destroyed&&this._buffer)this._generatedBody.readable=P9.Readable.from(this._buffer);if(this._generatedBody)return this._generatedBody;let $=this._bodyFactory();return this._generatedBody=$,$}handleContentLengthHeader($=!1){let J=this.headers.get("content-type");if(!J){if(this.contentType)this.headers.set("content-type",this.contentType)}else this.contentType=J;let W=this.headers.get("content-length");if($&&this.bodyInit==null&&!W)this.contentLength=0,this.headers.set("content-length","0");if(!W){if(this.contentLength)this.headers.set("content-length",this.contentLength.toString())}else this.contentLength=parseInt(W,10)}get body(){let $=this.generateBody();if($!=null){let J=$,W=$.readable;return new Proxy($.readable,{get(X,Y){if(Y in J){let U=J[Y];if(typeof U==="function")return U.bind(J);return U}if(Y in W){let U=W[Y];if(typeof U==="function")return U.bind(W);return U}}})}return null}_chunks=null;_doCollectChunksFromReadableJob(){if(this.bodyType===S4.AsyncIterable){if(Array.fromAsync)return(0,tK.handleMaybePromise)(()=>Array.fromAsync(this.bodyInit),(U)=>{return this._chunks=U,this._chunks});let W=this.bodyInit[Symbol.asyncIterator](),X=[],Y=()=>(0,tK.handleMaybePromise)(()=>W.next(),({value:U,done:Z})=>{if(U)X.push(U);if(!Z)return Y();return this._chunks=X,this._chunks});return Y()}let $=this.generateBody();if(!$)return this._chunks=[],(0,s4.fakePromise)(this._chunks);if($.readable.destroyed)return(0,s4.fakePromise)(this._chunks=[]);let J=[];return new Promise((W,X)=>{$.readable.on("data",(Y)=>{J.push(Y)}),$.readable.once("error",X),$.readable.once("end",()=>{W(this._chunks=J)})})}_collectChunksFromReadable(){if(this._chunks)return(0,s4.fakePromise)(this._chunks);return this._chunks||=this._doCollectChunksFromReadableJob(),this._chunks}_blob=null;blob(){if(this._blob)return(0,s4.fakePromise)(this._blob);if(this.bodyType===S4.String)this._text=this.bodyInit,this._blob=new Z2.PonyfillBlob([this._text],{type:this.contentType||"text/plain;charset=UTF-8",size:this.contentLength});if(this.bodyType===S4.Blob)return this._blob=this.bodyInit,(0,s4.fakePromise)(this._blob);if(this._buffer)return this._blob=new Z2.PonyfillBlob([this._buffer],{type:this.contentType||"",size:this.contentLength}),(0,s4.fakePromise)(this._blob);return(0,s4.fakePromise)((0,tK.handleMaybePromise)(()=>this._collectChunksFromReadable(),($)=>{return this._blob=new Z2.PonyfillBlob($,{type:this.contentType||"",size:this.contentLength}),this._blob}))}_formData=null;formData($){if(this._formData)return(0,s4.fakePromise)(this._formData);if(this.bodyType===S4.FormData)return this._formData=this.bodyInit,(0,s4.fakePromise)(this._formData);if(this._formData=new ru.PonyfillFormData,this.generateBody()==null)return(0,s4.fakePromise)(this._formData);let W={...this.options.formDataLimits,...$?.formDataLimits};return new Promise((X,Y)=>{let U=this.body?.readable;if(!U)return Y(Error("No stream available"));let Z=null,H=new M70.Busboy({headers:{"content-length":typeof this.contentLength==="number"?this.contentLength.toString():this.contentLength||"","content-type":this.contentType||""},limits:W,defCharset:"utf-8"});if(this._signal)(0,P9.addAbortSignal)(this._signal,H);let G=!1,z=(w)=>{if(G)return;if(G=!0,U.unpipe(H),H.destroy(),Z)Z.destroy(),Z=null;if(w)Y(w);else X(this._formData)};U.on("error",z),H.on("field",(w,D,K,O)=>{if(K)return z(Error(`Field name size exceeded: ${W?.fieldNameSize} bytes`));if(O)return z(Error(`Field value size exceeded: ${W?.fieldSize} bytes`));this._formData.set(w,D)}),H.on("file",(w,D,K,O,F)=>{Z=D;let M=[];D.on("data",(A)=>{M.push(A)}),D.on("error",z),D.on("limit",()=>{z(Error(`File size limit exceeded: ${W?.fileSize} bytes`))}),D.on("close",()=>{if(D.truncated)z(Error(`File size limit exceeded: ${W?.fileSize} bytes`));Z=null;let A=new V70.PonyfillFile(M,K,{type:F});this._formData.set(w,A)})}),H.on("fieldsLimit",()=>{z(Error(`Fields limit exceeded: ${W?.fields}`))}),H.on("filesLimit",()=>{z(Error(`Files limit exceeded: ${W?.files}`))}),H.on("partsLimit",()=>{z(Error(`Parts limit exceeded: ${W?.parts}`))}),H.on("end",z),H.on("finish",z),H.on("close",z),H.on("error",z),U.pipe(H)})}buffer(){if(this._buffer)return(0,s4.fakePromise)(this._buffer);if(this._text)return this._buffer=M5.Buffer.from(this._text,"utf-8"),(0,s4.fakePromise)(this._buffer);if(this.bodyType===S4.String)return this.text().then(($)=>{return this._text=$,this._buffer=M5.Buffer.from($,"utf-8"),this._buffer});if(this.bodyType===S4.Blob){if((0,Z2.hasBufferMethod)(this.bodyInit))return this.bodyInit.buffer().then(($)=>{return this._buffer=$,this._buffer});if((0,Z2.hasBytesMethod)(this.bodyInit))return this.bodyInit.bytes().then(($)=>{return this._buffer=M5.Buffer.from($),this._buffer});if((0,Z2.hasArrayBufferMethod)(this.bodyInit))return this.bodyInit.arrayBuffer().then(($)=>{return this._buffer=M5.Buffer.from($,void 0,$.byteLength),this._buffer})}return(0,s4.fakePromise)((0,tK.handleMaybePromise)(()=>this._collectChunksFromReadable(),($)=>{if($.length===1)return this._buffer=$[0],this._buffer;return this._buffer=M5.Buffer.concat($),this._buffer}))}bytes(){return this.buffer()}arrayBuffer(){return this.buffer()}_json=null;json(){if(this._json)return(0,s4.fakePromise)(this._json);return this.text().then(($)=>{try{this._json=JSON.parse($)}catch(J){if(J instanceof SyntaxError)J.message+=`, "${$}" is not valid JSON`;throw J}return this._json})}_text=null;text(){if(this._text)return(0,s4.fakePromise)(this._text);if(this.bodyType===S4.String)return this._text=this.bodyInit,(0,s4.fakePromise)(this._text);return this.buffer().then(($)=>{return this._text=$.toString("utf-8"),this._text})}}iu.PonyfillBody=nu;function Q70($){if($==null)return{bodyFactory:()=>null,contentType:null,contentLength:null};if(typeof $==="string"){let J=M5.Buffer.byteLength($);return{bodyType:S4.String,contentType:"text/plain;charset=UTF-8",contentLength:J,bodyFactory(){let W=P9.Readable.from(M5.Buffer.from($,"utf-8"));return new L9.PonyfillReadableStream(W)}}}if(M5.Buffer.isBuffer($)){let J=$;return{bodyType:S4.Buffer,contentType:null,contentLength:$.length,buffer:$,bodyFactory(){let W=P9.Readable.from(J);return new L9.PonyfillReadableStream(W)}}}if((0,s4.isArrayBufferView)($)){let J=M5.Buffer.from($.buffer,$.byteOffset,$.byteLength);return{bodyType:S4.Buffer,contentLength:$.byteLength,contentType:null,buffer:J,bodyFactory(){let W=P9.Readable.from(J);return new L9.PonyfillReadableStream(W)}}}if($ instanceof L9.PonyfillReadableStream&&$.readable!=null){let J=$;return{bodyType:S4.ReadableStream,bodyFactory:()=>J,contentType:null,contentLength:null}}if(I70($)){let J=$;return{bodyType:S4.Blob,contentType:$.type,contentLength:$.size,bodyFactory(){return J.stream()}}}if($ instanceof ArrayBuffer){let J=$.byteLength,W=M5.Buffer.from($,void 0,$.byteLength);return{bodyType:S4.Buffer,contentType:null,contentLength:J,buffer:W,bodyFactory(){let X=P9.Readable.from(W);return new L9.PonyfillReadableStream(X)}}}if($ instanceof P9.Readable)return{bodyType:S4.Readable,contentType:null,contentLength:null,bodyFactory(){return new L9.PonyfillReadableStream($)}};if(L70($))return{bodyType:S4.String,contentType:"application/x-www-form-urlencoded;charset=UTF-8",contentLength:null,bodyFactory(){return new L9.PonyfillReadableStream(P9.Readable.from($.toString()))}};if(A70($)){let J=Math.random().toString(36).substr(2),W=`multipart/form-data; boundary=${J}`;return{bodyType:S4.FormData,contentType:W,contentLength:null,bodyFactory(){return(0,ru.getStreamFromFormData)($,J)}}}if(P70($))return{contentType:null,contentLength:null,bodyFactory(){return new L9.PonyfillReadableStream($)}};if($[Symbol.iterator]||$[Symbol.asyncIterator])return{contentType:null,contentLength:null,bodyType:S4.AsyncIterable,bodyFactory(){let J=P9.Readable.from($);return new L9.PonyfillReadableStream(J)}};throw Error("Unknown body type")}function A70($){return $?.forEach!=null}function I70($){return $?.stream!=null&&typeof $.stream==="function"}function L70($){return $?.sort!=null}function P70($){return $?.getReader!=null}});var oK=A0((ou)=>{Object.defineProperty(ou,"__esModule",{value:!0});ou.PonyfillHeaders=void 0;ou.isHeadersLike=pJ;var _70=I0("util"),xR=iK();function pJ($){return $?.get&&$?.forEach}class au{headersInit;_map;objectNormalizedKeysOfHeadersInit=[];objectOriginalKeysOfHeadersInit=[];_setCookies;constructor($){this.headersInit=$}_get($){let J=$.toLowerCase();if(J==="set-cookie"&&this._setCookies?.length)return this._setCookies.join(", ");if(this._map)return this._map.get(J)||null;if(this.headersInit==null)return null;if(Array.isArray(this.headersInit)){let W=this.headersInit.filter(([X])=>X.toLowerCase()===J);if(W.length===0)return null;if(W.length===1)return W[0][1];return W.map(([,X])=>X).join(", ")}else if(pJ(this.headersInit))return this.headersInit.get(J);else{let W=this.headersInit[$]||this.headersInit[J];if(W!=null)return W;if(!this.objectNormalizedKeysOfHeadersInit.length)Object.keys(this.headersInit).forEach((U)=>{this.objectOriginalKeysOfHeadersInit.push(U),this.objectNormalizedKeysOfHeadersInit.push(U.toLowerCase())});let X=this.objectNormalizedKeysOfHeadersInit.indexOf(J);if(X===-1)return null;let Y=this.objectOriginalKeysOfHeadersInit[X];return this.headersInit[Y]}}getMap(){if(!this._map)if(this._setCookies||=[],this.headersInit!=null)if(Array.isArray(this.headersInit)){this._map=new Map;for(let[$,J]of this.headersInit){let W=$.toLowerCase();if(W==="set-cookie"){if(Array.isArray(J))this._setCookies.push(...J);else if(J!=null)this._setCookies.push(J);continue}this._map.set(W,J)}}else if(pJ(this.headersInit))this._map=new Map,this.headersInit.forEach(($,J)=>{if(J==="set-cookie"){if(this._setCookies||=[],Array.isArray($))this._setCookies.push(...$);else if($!=null)this._setCookies.push($);return}this._map.set(J,$)});else{this._map=new Map;for(let $ in this.headersInit){let J=this.headersInit[$];if(J!=null){let W=$.toLowerCase();if(W==="set-cookie"){if(this._setCookies||=[],Array.isArray(J)){this._setCookies.push(...J);continue}this._setCookies.push(J);continue}this._map.set(W,J)}}}else this._map=new Map;return this._map}append($,J){let W=$.toLowerCase();if(W==="set-cookie"){this._setCookies||=[],this._setCookies.push(J);return}let X=this.getMap().get(W),Y=X?`${X}, ${J}`:J;this.getMap().set(W,Y)}get($){let J=this._get($);if(J==null)return null;return J.toString()}has($){if($.toLowerCase()==="set-cookie")return!!this._setCookies?.length;return!!this._get($)}set($,J){let W=$.toLowerCase();if(W==="set-cookie"){this._setCookies=[J];return}if(!this._map&&this.headersInit!=null)if(Array.isArray(this.headersInit)){let X=this.headersInit.find(([Y])=>Y.toLowerCase()===W);if(X)X[1]=J;else this.headersInit.push([W,J]);return}else if(pJ(this.headersInit)){this.headersInit.set(W,J);return}else{this.headersInit[W]=J;return}this.getMap().set(W,J)}delete($){let J=$.toLowerCase();if(J==="set-cookie"){this._setCookies=[];return}this.getMap().delete(J)}forEach($){if(this._setCookies?.forEach((J)=>{$(J,"set-cookie",this)}),!this._map){if(this.headersInit){if(Array.isArray(this.headersInit)){this.headersInit.forEach(([J,W])=>{$(W,J,this)});return}if(pJ(this.headersInit)){this.headersInit.forEach($);return}Object.entries(this.headersInit).forEach(([J,W])=>{if(W!=null)$(W,J,this)})}return}this.getMap().forEach((J,W)=>{$(J,W,this)})}*_keys(){if(this._setCookies?.length)yield"set-cookie";if(!this._map){if(this.headersInit){if(Array.isArray(this.headersInit)){yield*this.headersInit.map(([$])=>$)[Symbol.iterator]();return}if(pJ(this.headersInit)){yield*this.headersInit.keys();return}yield*Object.keys(this.headersInit)[Symbol.iterator]();return}}yield*this.getMap().keys()}keys(){return new xR.PonyfillIteratorObject(this._keys(),"HeadersIterator")}*_values(){if(this._setCookies?.length)yield*this._setCookies;if(!this._map){if(this.headersInit){if(Array.isArray(this.headersInit)){yield*this.headersInit.map(([,$])=>$)[Symbol.iterator]();return}if(pJ(this.headersInit)){yield*this.headersInit.values();return}yield*Object.values(this.headersInit)[Symbol.iterator]();return}}yield*this.getMap().values()}values(){return new xR.PonyfillIteratorObject(this._values(),"HeadersIterator")}*_entries(){if(this._setCookies?.length)yield*this._setCookies.map(($)=>["set-cookie",$]);if(!this._map){if(this.headersInit){if(Array.isArray(this.headersInit)){yield*this.headersInit;return}if(pJ(this.headersInit)){yield*this.headersInit.entries();return}yield*Object.entries(this.headersInit);return}}yield*this.getMap().entries()}entries(){return new xR.PonyfillIteratorObject(this._entries(),"HeadersIterator")}getSetCookie(){if(!this._setCookies)this.getMap();return this._setCookies}[Symbol.iterator](){return this.entries()}[Symbol.for("nodejs.util.inspect.custom")](){let $={};return this.forEach((J,W)=>{if(W==="set-cookie")$["set-cookie"]=this._setCookies||[];else $[W]=J?.includes(",")?J.split(",").map((X)=>X.trim()):J}),`Headers ${(0,_70.inspect)($)}`}}ou.PonyfillHeaders=au});var rH=A0((eu)=>{Object.defineProperty(eu,"__esModule",{value:!0});eu.PonyfillResponse=void 0;var B70=I0("http"),R70=aK(),bR=oK(),dH="application/json; charset=utf-8";class lH extends R70.PonyfillBody{headers;constructor($,J){super($||null,J);this.headers=J?.headers&&(0,bR.isHeadersLike)(J.headers)?J.headers:new bR.PonyfillHeaders(J?.headers),this.status=J?.status||200,this.statusText=J?.statusText||B70.STATUS_CODES[this.status]||"OK",this.url=J?.url||"",this.redirected=J?.redirected||!1,this.type=J?.type||"default",this.handleContentLengthHeader()}get ok(){return this.status>=200&&this.status<300}status;statusText;url;redirected;type;clone(){return this}static error(){return new lH(null,{status:500,statusText:"Internal Server Error"})}static redirect($,J=302){if(J<300||J>399)throw RangeError("Invalid status code");return new lH(null,{headers:{location:$},status:J})}static json($,J){let W=JSON.stringify($);if(!J)J={headers:{"content-type":dH,"content-length":Buffer.byteLength(W).toString()}};else if(!J.headers)J.headers={"content-type":dH,"content-length":Buffer.byteLength(W).toString()};else if((0,bR.isHeadersLike)(J.headers)){if(!J.headers.has("content-type"))J.headers.set("content-type",dH);if(!J.headers.has("content-length"))J.headers.set("content-length",Buffer.byteLength(W).toString())}else if(Array.isArray(J.headers)){let X=!1,Y=!1;for(let[U]of J.headers){if(Y&&X)break;if(!X&&U.toLowerCase()==="content-type")X=!0;else if(!Y&&U.toLowerCase()==="content-length")Y=!0}if(!X)J.headers.push(["content-type",dH]);if(!Y)J.headers.push(["content-length",Buffer.byteLength(W).toString()])}else if(typeof J.headers==="object"){if(J.headers?.["content-type"]==null)J.headers["content-type"]=dH;if(J.headers?.["content-length"]==null)J.headers["content-length"]=Buffer.byteLength(W).toString()}return new lH(W,J)}[Symbol.toStringTag]="Response"}eu.PonyfillResponse=lH});var Xp=A0((Wp)=>{Object.defineProperty(Wp,"__esModule",{value:!0});Wp.fetchCurl=v70;var Jp=I0("stream"),S70=I0("tls"),j70=uJ(),k70=rH(),gR=y8();function v70($){let{Curl:J,CurlFeature:W,CurlPause:X,CurlProgressFunc:Y}=globalThis.libcurl,U=new J;if(U.enable(W.NoDataParsing),U.setOpt("URL",$.url),process.env.NODE_TLS_REJECT_UNAUTHORIZED==="0")U.setOpt("SSL_VERIFYPEER",!1);if(process.env.NODE_EXTRA_CA_CERTS)U.setOpt("CAINFO",process.env.NODE_EXTRA_CA_CERTS);else U.setOpt("CAINFO_BLOB",S70.rootCertificates.join(`
`));U.enable(W.StreamResponse);let Z;if($._signal===null)Z=void 0;else if($._signal)Z=$._signal;if(U.setStreamProgressCallback(function(){return Z?.aborted?process.env.DEBUG?Y.Continue:1:0}),$.bodyType==="String")U.setOpt("POSTFIELDS",$.bodyInit);else{let O=$.body!=null?(0,gR.isNodeReadable)($.body)?$.body:Jp.Readable.from($.body):null;if(O)U.setOpt("UPLOAD",!0),U.setUploadStream(O)}if(process.env.DEBUG)U.setOpt("VERBOSE",!0);U.setOpt("TRANSFER_ENCODING",!1),U.setOpt("HTTP_TRANSFER_DECODING",!0),U.setOpt("FOLLOWLOCATION",$.redirect==="follow"),U.setOpt("MAXREDIRS",20),U.setOpt("ACCEPT_ENCODING",""),U.setOpt("CUSTOMREQUEST",$.method);let H=$.headersSerializer||gR.defaultHeadersSerializer,G,z=H($.headers,(O)=>{G=Number(O)});if(G!=null)U.setOpt("INFILESIZE",G);U.setOpt("HTTPHEADER",z),U.enable(W.NoHeaderParsing);let w=(0,j70.createDeferredPromise)(),D;function K(){if(U.isOpen)try{U.pause(X.Recv)}catch(O){w.reject(O)}}return Z?.addEventListener("abort",K,{once:!0}),U.once("end",function(){try{U.close()}catch(F){w.reject(F)}Z?.removeEventListener("abort",K)}),U.once("error",function(F){if(D&&!D.closed&&!D.destroyed)D.destroy(F);else{if(F.message==="Operation was aborted by an application callback")F.message="The operation was aborted.";w.reject(F)}try{U.close()}catch(M){w.reject(M)}}),U.once("stream",function(F,M,A){let I=F.pipe(new Jp.PassThrough,{end:!0}),Q=A.toString("utf8").split(/\r?\n|\r/g).filter((_)=>{if(_&&!_.startsWith("HTTP/")){if($.redirect==="error"&&_.toLowerCase().includes("location")&&(0,gR.shouldRedirect)(M)){if(!F.destroyed)F.resume();I.destroy(),w.reject(Error("redirect is not allowed"))}return!0}return!1}).map((_)=>_.split(/:\s(.+)/).slice(0,2)),N=new k70.PonyfillResponse(I,{status:M,headers:Q,url:U.getInfo(J.info.REDIRECT_URL)?.toString()||$.url,redirected:Number(U.getInfo(J.info.REDIRECT_COUNT))>0});w.resolve(N),D=I}),setImmediate(()=>{U.perform()}),w.promise}});var nH=A0((Zp)=>{Object.defineProperty(Zp,"__esModule",{value:!0});Zp.PonyfillURL=void 0;var T70=SR(),q70=T70.__importDefault(I0("buffer")),h70=I0("crypto"),Yp=globalThis.URL;class Up extends Yp{static blobRegistry=new Map;static createObjectURL($){let J=`blob:whatwgnode:${(0,h70.randomUUID)()}`;return this.blobRegistry.set(J,$),J}static revokeObjectURL($){if(!this.blobRegistry.has($))Yp.revokeObjectURL($);else this.blobRegistry.delete($)}static getBlobFromURL($){return this.blobRegistry.get($)||q70.default?.resolveObjectURL?.($)}}Zp.PonyfillURL=Up});var sK=A0((wp)=>{Object.defineProperty(wp,"__esModule",{value:!0});wp.PonyfillRequest=void 0;var x70=I0("http"),b70=I0("https"),g70=aK(),Gp=oK(),f70=nH();function m70($){return $[Symbol.toStringTag]==="Request"}function y70($){return $?.href!=null}class zp extends g70.PonyfillBody{constructor($,J){let W,X,Y=null,U;if(typeof $==="string")W=$;else if(y70($))X=$;else if(m70($)){if($._parsedUrl)X=$._parsedUrl;else if($._url)W=$._url;else W=$.url;Y=$.body,U=$}if(J!=null)Y=J.body||null,U=J;super(Y,U);if(this._url=W,this._parsedUrl=X,this.cache=U?.cache||"default",this.credentials=U?.credentials||"same-origin",this.headers=U?.headers&&(0,Gp.isHeadersLike)(U.headers)?U.headers:new Gp.PonyfillHeaders(U?.headers),this.integrity=U?.integrity||"",this.keepalive=U?.keepalive!=null?U?.keepalive:!1,this.method=U?.method?.toUpperCase()||"GET",this.mode=U?.mode||"cors",this.redirect=U?.redirect||"follow",this.referrer=U?.referrer||"about:client",this.referrerPolicy=U?.referrerPolicy||"no-referrer",this.headersSerializer=U?.headersSerializer,this.duplex=U?.duplex||"half",this.destination="document",this.priority="auto",this.method!=="GET"&&this.method!=="HEAD")this.handleContentLengthHeader(!0);if(U?.agent!=null){let Z=X?.protocol||W||this.url;if(U.agent===!1)this.agent=!1;else if(Z.startsWith("http:")&&U.agent instanceof x70.Agent)this.agent=U.agent;else if(Z.startsWith("https:")&&U.agent instanceof b70.Agent)this.agent=U.agent}}headersSerializer;cache;credentials;destination;headers;integrity;keepalive;method;mode;priority;redirect;referrer;referrerPolicy;_url;get signal(){return this._signal||=new AbortController().signal,this._signal}get url(){if(this._url==null)if(this._parsedUrl)this._url=this._parsedUrl.toString();else throw TypeError("Invalid URL");return this._url}_parsedUrl;get parsedUrl(){if(this._parsedUrl==null)if(this._url!=null)this._parsedUrl=new f70.PonyfillURL(this._url,"http://localhost");else throw TypeError("Invalid URL");return this._parsedUrl}duplex;agent;clone(){return this}[Symbol.toStringTag]="Request"}wp.PonyfillRequest=zp});var Mp=A0((Ep)=>{Object.defineProperty(Ep,"__esModule",{value:!0});Ep.fetchNodeHttp=Fp;var Op=I0("http"),c70=I0("https"),Kp=I0("stream"),eK=I0("zlib"),u70=uJ(),p70=sK(),d70=rH(),l70=nH(),BW=y8();function r70($){if($.startsWith("http:"))return Op.request;else if($.startsWith("https:"))return c70.request;throw Error(`Unsupported protocol: ${$.split(":")[0]||$}`)}function Fp($){return new Promise((J,W)=>{try{let X=r70($.parsedUrl?.protocol||$.url),U=($.headersSerializer||BW.getHeadersObj)($.headers);U["accept-encoding"]||="gzip, deflate, br",U["user-agent"]||="node";let Z;if($._signal==null)Z=void 0;else if($._signal)Z=$._signal;let H;if($.parsedUrl)H=X($.parsedUrl,{method:$.method,headers:U,signal:Z,agent:$.agent});else H=X($.url,{method:$.method,headers:U,signal:Z,agent:$.agent});if(H.once("error",W),H.once("response",(G)=>{let z;switch(G.headers["content-encoding"]){case"x-gzip":case"gzip":z=(0,eK.createGunzip)();break;case"x-deflate":case"deflate":z=(0,eK.createInflate)();break;case"x-deflate-raw":case"deflate-raw":z=(0,eK.createInflateRaw)();break;case"br":z=(0,eK.createBrotliDecompress)();break}if(G.headers.location&&(0,BW.shouldRedirect)(G.statusCode)){if($.redirect==="error"){let F=Error("Redirects are not allowed");W(F),G.resume();return}if($.redirect==="follow"){let F=new l70.PonyfillURL(G.headers.location,$.parsedUrl||$.url),M=Fp(new p70.PonyfillRequest(F,$));J(M.then((A)=>{return A.redirected=!0,A})),G.resume();return}}z||=new Kp.PassThrough,(0,BW.pipeThrough)({src:G,dest:z,signal:Z,onError:(F)=>{if(!G.destroyed)G.destroy(F);if(!z.destroyed)z.destroy(F);W(F)}});let D=G.statusCode||200,K=G.statusMessage||Op.STATUS_CODES[D];if(K==null)K="";let O=new d70.PonyfillResponse(z||G,{status:D,statusText:K,headers:G.headers,url:$.url,signal:Z});J(O)}),$._buffer!=null)(0,u70.handleMaybePromise)(()=>(0,BW.safeWrite)($._buffer,H),()=>(0,BW.endStream)(H),W);else{let G=$.body!=null?(0,BW.isNodeReadable)($.body)?$.body:Kp.Readable.from($.body):null;if(G)G.pipe(H);else(0,BW.endStream)(H)}}catch(X){W(X)}})}});var Lp=A0((Ip)=>{Object.defineProperty(Ip,"__esModule",{value:!0});Ip.fetchPonyfill=Ap;var i70=I0("buffer"),$O=I0("fs"),t70=I0("url"),a70=Xp(),o70=Mp(),s70=sK(),H2=rH(),e70=nH(),Vp=y8(),Qp=";base64";async function $W0($){let J=(0,t70.fileURLToPath)($);try{await $O.promises.access(J,$O.promises.constants.R_OK);let W=await $O.promises.stat(J,{bigint:!0}),X=(0,$O.createReadStream)(J);return new H2.PonyfillResponse(X,{status:200,statusText:"OK",headers:{"content-type":"application/octet-stream","last-modified":W.mtime.toUTCString()}})}catch(W){if(W.code==="ENOENT")return new H2.PonyfillResponse(null,{status:404,statusText:"Not Found"});else if(W.code==="EACCES")return new H2.PonyfillResponse(null,{status:403,statusText:"Forbidden"});throw W}}function JW0($){let[J="text/plain",...W]=$.substring(5).split(","),X=decodeURIComponent(W.join(","));if(J.endsWith(Qp)){let Y=i70.Buffer.from(X,"base64url"),U=J.slice(0,-Qp.length);return new H2.PonyfillResponse(Y,{status:200,statusText:"OK",headers:{"content-type":U}})}return new H2.PonyfillResponse(X,{status:200,statusText:"OK",headers:{"content-type":J}})}function WW0($){let J=e70.PonyfillURL.getBlobFromURL($);if(!J)throw TypeError("Invalid Blob URL");return new H2.PonyfillResponse(J,{status:200,headers:{"content-type":J.type,"content-length":J.size.toString()}})}function XW0($){return $!=null&&$.href!=null}function Ap($,J){if(typeof $==="string"||XW0($)){let X=new s70.PonyfillRequest($,J);return Ap(X)}let W=$;if(W.url.startsWith("data:")){let X=JW0(W.url);return(0,Vp.fakePromise)(X)}if(W.url.startsWith("file:"))return $W0(W.url);if(W.url.startsWith("blob:")){let X=WW0(W.url);return(0,Vp.fakePromise)(X)}if(globalThis.libcurl&&!W.agent)return(0,a70.fetchCurl)(W);return(0,o70.fetchNodeHttp)(W)}});var fR=A0((Np)=>{Object.defineProperty(Np,"__esModule",{value:!0});Np.PonyfillTextDecoder=Np.PonyfillTextEncoder=void 0;Np.PonyfillBtoa=ZW0;var iH=I0("buffer"),UW0=y8();class Pp{encoding;constructor($="utf-8"){this.encoding=$}encode($){return iH.Buffer.from($,this.encoding)}encodeInto($,J){let X=this.encode($).copy(J);return{read:X,written:X}}}Np.PonyfillTextEncoder=Pp;class _p{encoding;fatal=!1;ignoreBOM=!1;constructor($="utf-8",J){if(this.encoding=$,J)this.fatal=J.fatal||!1,this.ignoreBOM=J.ignoreBOM||!1}decode($){if(iH.Buffer.isBuffer($))return $.toString(this.encoding);if((0,UW0.isArrayBufferView)($))return iH.Buffer.from($.buffer,$.byteOffset,$.byteLength).toString(this.encoding);return iH.Buffer.from($).toString(this.encoding)}}Np.PonyfillTextDecoder=_p;function ZW0($){return iH.Buffer.from($,"binary").toString("base64")}});var jp=A0((Rp)=>{Object.defineProperty(Rp,"__esModule",{value:!0});Rp.PonyfillURLSearchParams=void 0;Rp.PonyfillURLSearchParams=globalThis.URLSearchParams});var yR=A0((Cp)=>{Object.defineProperty(Cp,"__esModule",{value:!0});Cp.PonyfillWritableStream=void 0;var JO=I0("events"),mR=I0("stream"),kp=uJ(),dJ=y8();class vp{writable;constructor($){if($ instanceof mR.Writable)this.writable=$;else if($){let J=new mR.Writable({write(Y,U,Z){try{let H=$.write?.(Y,X);if(H instanceof Promise)H.then(()=>{Z()},(G)=>{Z(G)});else Z()}catch(H){Z(H)}},final(Y){let U=$.close?.();if(U instanceof Promise)U.then(()=>{Y()},(Z)=>{Y(Z)});else Y()}});this.writable=J;let W=new AbortController,X={signal:W.signal,error(Y){J.destroy(Y)}};J.once("error",(Y)=>W.abort(Y)),J.once("close",()=>W.abort())}else this.writable=new mR.Writable}getWriter(){let $=this.writable;return{get closed(){return(0,JO.once)($,"close")},get desiredSize(){return $.writableLength},get ready(){return(0,JO.once)($,"drain")},releaseLock(){},write(J){let W=(0,dJ.fakePromise)();if(J==null)return W;return W.then(()=>(0,dJ.safeWrite)(J,$))},close(){if(!$.errored&&$.closed)return(0,dJ.fakePromise)();if($.errored)return(0,kp.fakeRejectPromise)($.errored);return(0,dJ.fakePromise)().then(()=>(0,dJ.endStream)($))},abort(J){return $.destroy(J),(0,JO.once)($,"close")}}}close(){if(!this.writable.errored&&this.writable.closed)return(0,dJ.fakePromise)();if(this.writable.errored)return(0,kp.fakeRejectPromise)(this.writable.errored);return(0,dJ.fakePromise)().then(()=>(0,dJ.endStream)(this.writable))}abort($){return this.writable.destroy($),(0,JO.once)(this.writable,"close")}locked=!1}Cp.PonyfillWritableStream=vp});var tH=A0((hp)=>{Object.defineProperty(hp,"__esModule",{value:!0});hp.PonyfillTransformStream=void 0;var cR=I0("stream"),zW0=Y2(),wW0=y8(),DW0=yR();class qp{transform;writable;readable;constructor($){if($ instanceof cR.Transform)this.transform=$;else if($){let J={enqueue(X){W.push(X)},error(X){W.destroy(X)},terminate(){(0,wW0.endStream)(W)},get desiredSize(){return W.writableLength}},W=new cR.Transform({read(){},write(X,Y,U){try{let Z=$.transform?.(X,J);if(Z instanceof Promise)Z.then(()=>{U()},(H)=>{U(H)});else U()}catch(Z){U(Z)}},final(X){try{let Y=$.flush?.(J);if(Y instanceof Promise)Y.then(()=>{X()},(U)=>{X(U)});else X()}catch(Y){X(Y)}}});this.transform=W}else this.transform=new cR.Transform;this.writable=new DW0.PonyfillWritableStream(this.transform),this.readable=new zW0.PonyfillReadableStream(this.transform)}}hp.PonyfillTransformStream=qp});var mp=A0((gp)=>{Object.defineProperty(gp,"__esModule",{value:!0});gp.PonyfillCompressionStream=void 0;var WO=I0("zlib"),KW0=tH();class bp extends KW0.PonyfillTransformStream{static supportedFormats=globalThis.process?.version?.startsWith("v2")?["gzip","deflate","br"]:["gzip","deflate","deflate-raw","br"];constructor($){switch($){case"x-gzip":case"gzip":super((0,WO.createGzip)());break;case"x-deflate":case"deflate":super((0,WO.createDeflate)());break;case"deflate-raw":super((0,WO.createDeflateRaw)());break;case"br":super((0,WO.createBrotliCompress)());break;default:throw Error(`Unsupported compression format: ${$}`)}}}gp.PonyfillCompressionStream=bp});var pp=A0((cp)=>{Object.defineProperty(cp,"__esModule",{value:!0});cp.PonyfillDecompressionStream=void 0;var XO=I0("zlib"),OW0=tH();class yp extends OW0.PonyfillTransformStream{static supportedFormats=globalThis.process?.version?.startsWith("v2")?["gzip","deflate","br"]:["gzip","deflate","deflate-raw","br"];constructor($){switch($){case"x-gzip":case"gzip":super((0,XO.createGunzip)());break;case"x-deflate":case"deflate":super((0,XO.createInflate)());break;case"deflate-raw":super((0,XO.createInflateRaw)());break;case"br":super((0,XO.createBrotliDecompress)());break;default:throw TypeError(`Unsupported compression format: '${$}'`)}}}cp.PonyfillDecompressionStream=yp});var ap=A0((ip)=>{Object.defineProperty(ip,"__esModule",{value:!0});ip.PonyfillTextEncoderStream=ip.PonyfillTextDecoderStream=void 0;var dp=fR(),lp=tH();class rp extends lp.PonyfillTransformStream{textDecoder;constructor($,J){super({transform:(W,X)=>X.enqueue(this.textDecoder.decode(W,{stream:!0}))});this.textDecoder=new dp.PonyfillTextDecoder($,J)}get encoding(){return this.textDecoder.encoding}get fatal(){return this.textDecoder.fatal}get ignoreBOM(){return this.textDecoder.ignoreBOM}}ip.PonyfillTextDecoderStream=rp;class np extends lp.PonyfillTransformStream{textEncoder;constructor($){super({transform:(J,W)=>W.enqueue(this.textEncoder.encode(J))});this.textEncoder=new dp.PonyfillTextEncoder($)}get encoding(){return this.textEncoder.encoding}encode($){return this.textEncoder.encode($)}}ip.PonyfillTextEncoderStream=np});var sp=A0((s1)=>{Object.defineProperty(s1,"__esModule",{value:!0});s1.TextEncoderStream=s1.TextDecoderStream=s1.IteratorObject=s1.DecompressionStream=s1.CompressionStream=s1.TransformStream=s1.WritableStream=s1.URLSearchParams=s1.URL=s1.btoa=s1.TextDecoder=s1.TextEncoder=s1.Blob=s1.FormData=s1.File=s1.ReadableStream=s1.Response=s1.Request=s1.Body=s1.Headers=s1.fetch=void 0;var EW0=Lp();Object.defineProperty(s1,"fetch",{enumerable:!0,get:function(){return EW0.fetchPonyfill}});var MW0=oK();Object.defineProperty(s1,"Headers",{enumerable:!0,get:function(){return MW0.PonyfillHeaders}});var VW0=aK();Object.defineProperty(s1,"Body",{enumerable:!0,get:function(){return VW0.PonyfillBody}});var QW0=sK();Object.defineProperty(s1,"Request",{enumerable:!0,get:function(){return QW0.PonyfillRequest}});var AW0=rH();Object.defineProperty(s1,"Response",{enumerable:!0,get:function(){return AW0.PonyfillResponse}});var IW0=Y2();Object.defineProperty(s1,"ReadableStream",{enumerable:!0,get:function(){return IW0.PonyfillReadableStream}});var LW0=BR();Object.defineProperty(s1,"File",{enumerable:!0,get:function(){return LW0.PonyfillFile}});var PW0=hR();Object.defineProperty(s1,"FormData",{enumerable:!0,get:function(){return PW0.PonyfillFormData}});var _W0=uK();Object.defineProperty(s1,"Blob",{enumerable:!0,get:function(){return _W0.PonyfillBlob}});var uR=fR();Object.defineProperty(s1,"TextEncoder",{enumerable:!0,get:function(){return uR.PonyfillTextEncoder}});Object.defineProperty(s1,"TextDecoder",{enumerable:!0,get:function(){return uR.PonyfillTextDecoder}});Object.defineProperty(s1,"btoa",{enumerable:!0,get:function(){return uR.PonyfillBtoa}});var NW0=nH();Object.defineProperty(s1,"URL",{enumerable:!0,get:function(){return NW0.PonyfillURL}});var BW0=jp();Object.defineProperty(s1,"URLSearchParams",{enumerable:!0,get:function(){return BW0.PonyfillURLSearchParams}});var RW0=yR();Object.defineProperty(s1,"WritableStream",{enumerable:!0,get:function(){return RW0.PonyfillWritableStream}});var SW0=tH();Object.defineProperty(s1,"TransformStream",{enumerable:!0,get:function(){return SW0.PonyfillTransformStream}});var jW0=mp();Object.defineProperty(s1,"CompressionStream",{enumerable:!0,get:function(){return jW0.PonyfillCompressionStream}});var kW0=pp();Object.defineProperty(s1,"DecompressionStream",{enumerable:!0,get:function(){return kW0.PonyfillDecompressionStream}});var vW0=iK();Object.defineProperty(s1,"IteratorObject",{enumerable:!0,get:function(){return vW0.PonyfillIteratorObject}});var op=ap();Object.defineProperty(s1,"TextDecoderStream",{enumerable:!0,get:function(){return op.PonyfillTextDecoderStream}});Object.defineProperty(s1,"TextEncoderStream",{enumerable:!0,get:function(){return op.PonyfillTextEncoderStream}})});var $d=A0((C21,ep)=>{var TW0=nB(),e1;ep.exports=function(J={}){let W={};if(W.URLPattern=globalThis.URLPattern,!W.URLPattern){let X=dy();W.URLPattern=X.URLPattern}if(J.skipPonyfill||TW0())return{fetch:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response,FormData:globalThis.FormData,ReadableStream:globalThis.ReadableStream,WritableStream:globalThis.WritableStream,TransformStream:globalThis.TransformStream,CompressionStream:globalThis.CompressionStream,DecompressionStream:globalThis.DecompressionStream,TextDecoderStream:globalThis.TextDecoderStream,TextEncoderStream:globalThis.TextEncoderStream,Blob:globalThis.Blob,File:globalThis.File,crypto:globalThis.crypto,btoa:globalThis.btoa,TextEncoder:globalThis.TextEncoder,TextDecoder:globalThis.TextDecoder,URLPattern:W.URLPattern,URL:globalThis.URL,URLSearchParams:globalThis.URLSearchParams};if(e1||=sp(),W.fetch=e1.fetch,W.Request=e1.Request,W.Response=e1.Response,W.Headers=e1.Headers,W.FormData=e1.FormData,W.ReadableStream=e1.ReadableStream,W.URL=e1.URL,W.URLSearchParams=e1.URLSearchParams,W.WritableStream=e1.WritableStream,W.TransformStream=e1.TransformStream,W.CompressionStream=e1.CompressionStream,W.DecompressionStream=e1.DecompressionStream,W.TextDecoderStream=e1.TextDecoderStream,W.TextEncoderStream=e1.TextEncoderStream,W.Blob=e1.Blob,W.File=e1.File,W.crypto=globalThis.crypto,W.btoa=e1.btoa,W.TextEncoder=e1.TextEncoder,W.TextDecoder=e1.TextDecoder,J.formDataLimits)W.Body=class extends e1.Body{constructor(Y,U){super(Y,{formDataLimits:J.formDataLimits,...U})}},W.Request=class extends e1.Request{constructor(Y,U){super(Y,{formDataLimits:J.formDataLimits,...U})}},W.Response=class extends e1.Response{constructor(Y,U){super(Y,{formDataLimits:J.formDataLimits,...U})}};if(!W.crypto){let X=I0("crypto");W.crypto=X.webcrypto}return W}});var gO={};x$(gO,{user:()=>U6});var B=Symbol.for("drizzle:entityKind");function j($,J){if(!$||typeof $!=="object")return!1;if($ instanceof J)return!0;if(!Object.prototype.hasOwnProperty.call(J,B))throw Error(`Class "${J.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let W=Object.getPrototypeOf($).constructor;if(W)while(W){if(B in W&&W[B]===J[B])return!0;W=Object.getPrototypeOf(W)}return!1}class G0{static[B]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;length;isLengthExact;config;table;onInit(){}constructor($,J){this.config=J,this.onInit(),this.table=$,this.name=J.name,this.keyAsName=J.keyAsName,this.notNull=J.notNull,this.default=J.default,this.defaultFn=J.defaultFn,this.onUpdateFn=J.onUpdateFn,this.hasDefault=J.hasDefault,this.primary=J.primaryKey,this.isUnique=J.isUnique,this.uniqueName=J.uniqueName,this.uniqueType=J.uniqueType,this.dataType=J.dataType,this.columnType=J.columnType,this.generated=J.generated,this.generatedIdentity=J.generatedIdentity,this.length=J.length,this.isLengthExact=J.isLengthExact}mapFromDriverValue($){return $}mapToDriverValue($){return $}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}class KO{static[B]="ColumnBuilder";config;constructor($,J,W){this.config={name:$,keyAsName:$==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:J,columnType:W,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default($){return this.config.default=$,this.config.hasDefault=!0,this}$defaultFn($){return this.config.defaultFn=$,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn($){return this.config.onUpdateFn=$,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName($){if(this.config.name!=="")return;this.config.name=$}}var f4=Symbol.for("drizzle:Name");class F2{static[B]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor($,J){if(this.reference=()=>{let{name:W,columns:X,foreignColumns:Y}=$();return{name:W,columns:X,foreignTable:Y[0].table,foreignColumns:Y}},J)this._onUpdate=J.onUpdate,this._onDelete=J.onDelete}onUpdate($){return this._onUpdate=$===void 0?"no action":$,this}onDelete($){return this._onDelete=$===void 0?"no action":$,this}build($){return new sR($,this)}}class sR{constructor($,J){this.table=$,this.reference=J.reference,this.onUpdate=J._onUpdate,this.onDelete=J._onDelete}static[B]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:$,columns:J,foreignColumns:W}=this.reference(),X=J.map((Z)=>Z.name),Y=W.map((Z)=>Z.name),U=[this.table[f4],...X,W[0].table[f4],...Y];return $??`${U.join("_")}_fk`}}function JG($,...J){return $(...J)}function OO($,J){return`${$[f4]}_${J.join("_")}_unique`}class FO{constructor($,J){this.name=J,this.columns=$}static[B]="PgUniqueConstraintBuilder";columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build($){return new eR($,this.columns,this.nullsNotDistinctConfig,this.name)}}class eR{constructor($,J,W,X){this.table=$,this.columns=J,this.name=X??OO(this.table,this.columns.map((Y)=>Y.name)),this.nullsNotDistinct=W}static[B]="PgUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return this.name}}function $S($,J,W){for(let X=J;X<$.length;X++){let Y=$[X];if(Y==="\\"){X++;continue}if(Y==='"')return[$.slice(J,X).replace(/\\/g,""),X+1];if(W)continue;if(Y===","||Y==="}")return[$.slice(J,X).replace(/\\/g,""),X]}return[$.slice(J).replace(/\\/g,""),$.length]}function JS($,J=0){let W=[],X=J,Y=!1;while(X<$.length){let U=$[X];if(U===","){if(Y||X===J)W.push("");Y=!0,X++;continue}if(Y=!1,U==="\\"){X+=2;continue}if(U==='"'){let[G,z]=$S($,X+1,!0);W.push(G),X=z;continue}if(U==="}")return[W,X+1];if(U==="{"){let[G,z]=JS($,X+1);W.push(G),X=z;continue}let[Z,H]=$S($,X,!1);W.push(Z),X=H}return[W,X]}function EO($){let[J]=JS($,1);return J}function MO($){return`{${$.map((J)=>{if(Array.isArray(J))return MO(J);if(typeof J==="string")return`"${J.replace(/\\/g,"\\\\").replace(/"/g,"\\\"")}"`;return`${J}`}).join(",")}}`}class Z0 extends KO{foreignKeyConfigs=[];static[B]="PgColumnBuilder";array($){return new XS(this.config.name,this,$)}references($,J={}){return this.foreignKeyConfigs.push({ref:$,actions:J}),this}unique($,J){return this.config.isUnique=!0,this.config.uniqueName=$,this.config.uniqueType=J?.nulls,this}generatedAlwaysAs($){return this.config.generated={as:$,type:"always",mode:"stored"},this}buildForeignKeys($,J){return this.foreignKeyConfigs.map(({ref:W,actions:X})=>{return JG((Y,U)=>{let Z=new F2(()=>{let H=Y();return{columns:[$],foreignColumns:[H]}});if(U.onUpdate)Z.onUpdate(U.onUpdate);if(U.onDelete)Z.onDelete(U.onDelete);return Z.build(J)},W,X)})}buildExtraConfigColumn($){return new WS($,this.config)}}class $0 extends G0{static[B]="PgColumn";table;constructor($,J){if(!J.uniqueName)J.uniqueName=OO($,[J.name]);super($,J);this.table=$}}class WS extends $0{static[B]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op($){return this.indexConfig.opClass=$,this}}class XS extends Z0{static[B]="PgArrayBuilder";constructor($,J,W){super($,"array basecolumn","PgArray");this.config.baseBuilder=J,this.config.length=W}build($){let J=this.config.baseBuilder.build($);return new E2($,this.config,J)}}class E2 extends $0{constructor($,J,W,X){super($,J);this.baseColumn=W,this.range=X}static[B]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.length==="number"?this.length:""}]`}mapFromDriverValue($){if(typeof $==="string")$=EO($);return $.map((J)=>this.baseColumn.mapFromDriverValue(J))}mapFromJsonValue($){if(typeof $==="string")$=EO($);let J=this.baseColumn;return"mapFromJsonValue"in J?$.map((W)=>J.mapFromJsonValue(W)):$.map((W)=>J.mapFromDriverValue(W))}mapToDriverValue($,J=!1){let W=$.map((X)=>X===null?null:j(this.baseColumn,E2)?this.baseColumn.mapToDriverValue(X,!0):this.baseColumn.mapToDriverValue(X));if(J)return W;return MO(W)}}class ml extends $0{static[B]="PgEnumObjectColumn";enum;enumValues=this.config.enum.enumValues;constructor($,J){super($,J);this.enum=J.enum}getSQLType(){return this.enum.enumName}}var YS=Symbol.for("drizzle:isPgEnum");function US($){return!!$&&typeof $==="function"&&YS in $&&$[YS]===!0}class yl extends $0{static[B]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor($,J){super($,J);this.enum=J.enum}getSQLType(){return this.enum.enumName}}class C0{static[B]="Subquery";constructor($,J,W,X=!1,Y=[]){this._={brand:"Subquery",sql:$,selectedFields:J,alias:W,isWith:X,usedTables:Y}}}class $6 extends C0{static[B]="WithSubquery"}var ZS="1.0.0-beta.1-ac4ce44";var VO,QO,t0={startActiveSpan($,J){if(!VO)return J();if(!QO)QO=VO.trace.getTracer("drizzle-orm",ZS);return JG((W,X)=>X.startActiveSpan($,(Y)=>{try{return J(Y)}catch(U){throw Y.setStatus({code:W.SpanStatusCode.ERROR,message:U instanceof Error?U.message:"Unknown error"}),U}finally{Y.end()}}),VO,QO)}};var R0=Symbol.for("drizzle:ViewBaseConfig");var v6=Symbol.for("drizzle:Schema"),f1=Symbol.for("drizzle:Columns"),HS=Symbol.for("drizzle:ExtraConfigColumns"),nJ=Symbol.for("drizzle:OriginalName"),AO=Symbol.for("drizzle:BaseName"),N9=Symbol.for("drizzle:IsAlias"),GS=Symbol.for("drizzle:ExtraConfigBuilder"),zS=Symbol.for("drizzle:IsDrizzleTable");class y{static[B]="Table";static Symbol={Name:f4,Schema:v6,OriginalName:nJ,Columns:f1,ExtraConfigColumns:HS,BaseName:AO,IsAlias:N9,ExtraConfigBuilder:GS};[f4];[nJ];[v6];[f1];[HS];[AO];[N9]=!1;[zS]=!0;[GS]=void 0;constructor($,J,W){this[f4]=this[nJ]=$,this[v6]=J,this[AO]=W}getSQL=void 0}function wS($){return typeof $==="object"&&$!==null&&zS in $}function m1($){return $[f4]}function C6($){return`${$[v6]??"public"}.${$[f4]}`}function Q5($){return $!==null&&$!==void 0&&typeof $.getSQL==="function"}function cl($){let J={sql:"",params:[]};for(let W of $)if(J.sql+=W.sql,J.params.push(...W.params),W.typings?.length){if(!J.typings)J.typings=[];J.typings.push(...W.typings)}return J}class A4{static[B]="StringChunk";value;constructor($){this.value=Array.isArray($)?$:[$]}getSQL(){return new u([this])}}class u{constructor($){this.queryChunks=$;for(let J of $)if(j(J,y)){let W=J[y.Symbol.Schema];this.usedTables.push(W===void 0?J[y.Symbol.Name]:W+"."+J[y.Symbol.Name])}}static[B]="SQL";decoder=KS;shouldInlineParams=!1;usedTables=[];append($){return this.queryChunks.push(...$.queryChunks),this}toQuery($){return t0.startActiveSpan("drizzle.buildSQL",(J)=>{let W=this.buildQueryFromSourceParams(this.queryChunks,$);return J?.setAttributes({"drizzle.query.text":W.sql,"drizzle.query.params":JSON.stringify(W.params)}),W})}buildQueryFromSourceParams($,J){let W=Object.assign({},J,{inlineParams:J.inlineParams||this.shouldInlineParams,paramStartIndex:J.paramStartIndex||{value:0}}),{casing:X,escapeName:Y,escapeParam:U,prepareTyping:Z,inlineParams:H,paramStartIndex:G}=W;return cl($.map((z)=>{if(j(z,A4))return{sql:z.value.join(""),params:[]};if(j(z,WG))return{sql:Y(z.value),params:[]};if(z===void 0)return{sql:"",params:[]};if(Array.isArray(z)){let w=[new A4("(")];for(let[D,K]of z.entries())if(w.push(K),D<z.length-1)w.push(new A4(", "));return w.push(new A4(")")),this.buildQueryFromSourceParams(w,W)}if(j(z,u))return this.buildQueryFromSourceParams(z.queryChunks,{...W,inlineParams:H||z.shouldInlineParams});if(j(z,y)){let w=z[y.Symbol.Schema],D=z[y.Symbol.Name];return{sql:w===void 0||z[N9]?Y(D):Y(w)+"."+Y(D),params:[]}}if(j(z,G0)){let w=X.getColumnCasing(z);if(J.invokeSource==="indexes")return{sql:Y(w),params:[]};let D=z.table[y.Symbol.Schema];return{sql:z.table[N9]||D===void 0?Y(z.table[y.Symbol.Name])+"."+Y(w):Y(D)+"."+Y(z.table[y.Symbol.Name])+"."+Y(w),params:[]}}if(j(z,j1)){let w=z[R0].schema,D=z[R0].name;return{sql:w===void 0||z[R0].isAlias?Y(D):Y(w)+"."+Y(D),params:[]}}if(j(z,J4)){if(j(z.value,c8))return{sql:U(G.value++,z),params:[z],typings:["none"]};let w=z.value===null?null:z.encoder.mapToDriverValue(z.value);if(j(w,u))return this.buildQueryFromSourceParams([w],W);if(H)return{sql:this.mapInlineParam(w,W),params:[]};let D=["none"];if(Z)D=[Z(z.encoder)];return{sql:U(G.value++,w),params:[w],typings:D}}if(j(z,c8))return{sql:U(G.value++,z),params:[z],typings:["none"]};if(j(z,u.Aliased)&&z.fieldAlias!==void 0)return{sql:Y(z.fieldAlias),params:[]};if(j(z,C0)){if(z._.isWith)return{sql:Y(z._.alias),params:[]};return this.buildQueryFromSourceParams([new A4("("),z._.sql,new A4(") "),new WG(z._.alias)],W)}if(US(z)){if(z.schema)return{sql:Y(z.schema)+"."+Y(z.enumName),params:[]};return{sql:Y(z.enumName),params:[]}}if(Q5(z)){if(z.shouldOmitSQLParens?.())return this.buildQueryFromSourceParams([z.getSQL()],W);return this.buildQueryFromSourceParams([new A4("("),z.getSQL(),new A4(")")],W)}if(H)return{sql:this.mapInlineParam(z,W),params:[]};return{sql:U(G.value++,z),params:[z],typings:["none"]}}))}mapInlineParam($,{escapeString:J}){if($===null)return"null";if(typeof $==="number"||typeof $==="boolean")return $.toString();if(typeof $==="string")return J($);if(typeof $==="object"){let W=$.toString();if(W==="[object Object]")return J(JSON.stringify($));return J(W)}throw Error("Unexpected param value: "+$)}getSQL(){return this}as($){if($===void 0)return this;return new u.Aliased(this,$)}mapWith($){return this.decoder=typeof $==="function"?{mapFromDriverValue:$}:$,this}inlineParams(){return this.shouldInlineParams=!0,this}if($){return $?this:void 0}}class WG{constructor($){this.value=$}static[B]="Name";brand;getSQL(){return new u([this])}}function DS($){return typeof $==="object"&&$!==null&&"mapToDriverValue"in $&&typeof $.mapToDriverValue==="function"}var KS={mapFromDriverValue:($)=>$},OS={mapToDriverValue:($)=>$},UY0={...KS,...OS};class J4{constructor($,J=OS){this.value=$,this.encoder=J}static[B]="Param";brand;getSQL(){return new u([this])}}function E($,...J){let W=[];if(J.length>0||$.length>0&&$[0]!=="")W.push(new A4($[0]));for(let[X,Y]of J.entries())W.push(Y,new A4($[X+1]));return new u(W)}(($)=>{function J(){return new u([])}$.empty=J;function W(G){return new u(G)}$.fromList=W;function X(G){return new u([new A4(G)])}$.raw=X;function Y(G,z){let w=[];for(let[D,K]of G.entries()){if(D>0&&z!==void 0)w.push(z);w.push(K)}return new u(w)}$.join=Y;function U(G){return new WG(G)}$.identifier=U;function Z(G){return new c8(G)}$.placeholder=Z;function H(G,z){return new J4(G,z)}$.param=H})(E||(E={}));(($)=>{class J{constructor(W,X){this.sql=W,this.fieldAlias=X}static[B]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new J(this.sql,this.fieldAlias)}}$.Aliased=J})(u||(u={}));class c8{constructor($){this.name=$}static[B]="Placeholder";getSQL(){return new u([this])}}function K$($,J){return $.map((W)=>{if(j(W,c8)){if(!(W.name in J))throw Error(`No value for placeholder "${W.name}" was provided`);return J[W.name]}if(j(W,J4)&&j(W.value,c8)){if(!(W.value.name in J))throw Error(`No value for placeholder "${W.value.name}" was provided`);return W.encoder.mapToDriverValue(J[W.value.name])}return W})}var ul=Symbol.for("drizzle:IsDrizzleView");class j1{static[B]="View";[R0];[ul]=!0;get[f4](){return this[R0].name}get[v6](){return this[R0].schema}get[N9](){return this[R0].isAlias}get[nJ](){return this[R0].originalName}get[f1](){return this[R0].selectedFields}constructor({name:$,schema:J,selectedFields:W,query:X}){this[R0]={name:$,originalName:$,schema:J,selectedFields:W,query:X,isExisting:!X,isAlias:!1}}getSQL(){return new u([this])}}G0.prototype.getSQL=function(){return new u([this])};y.prototype.getSQL=function(){return new u([this])};C0.prototype.getSQL=function(){return new u([this])};class jW{constructor($){this.table=$}static[B]="ColumnAliasProxyHandler";get($,J){if(J==="table")return this.table;return $[J]}}class M2{constructor($,J){this.alias=$,this.replaceOriginalName=J}static[B]="TableAliasProxyHandler";get($,J){if(J===y.Symbol.IsAlias)return!0;if(J===y.Symbol.Name)return this.alias;if(this.replaceOriginalName&&J===y.Symbol.OriginalName)return this.alias;if(J===R0)return{...$[R0],name:this.alias,isAlias:!0};if(J===y.Symbol.Columns){let X=$[y.Symbol.Columns];if(!X)return X;let Y={};return Object.keys(X).map((U)=>{Y[U]=new Proxy(X[U],new jW(new Proxy($,this)))}),Y}let W=$[J];if(j(W,G0))return new Proxy(W,new jW(new Proxy($,this)));return W}}function A1($,J){return new Proxy($,new M2(J,!1))}function y0($,J){return new Proxy($,new jW(new Proxy($.table,new M2(J,!1))))}function B9($,J){return new u.Aliased(J6($.sql,J),$.fieldAlias)}function J6($,J){return E.join($.queryChunks.map((W)=>{if(j(W,G0))return y0(W,J);if(j(W,u))return J6(W,J);if(j(W,u.Aliased))return B9(W,J);return W}))}class IO{constructor($,J){this.name=$,this.value=J}static[B]="PgCheckBuilder";brand;build($){return new FS($,this)}}class FS{constructor($,J){this.table=$,this.name=J.name,this.value=J.value}static[B]="PgCheck";name;value}function R9($,J,W){let X={},Y=$.reduce((U,{path:Z,field:H},G)=>{let z;if(j(H,G0))z=H;else if(j(H,u))z=H.decoder;else z=H.sql.decoder;let w=U;for(let[D,K]of Z.entries())if(D<Z.length-1){if(!(K in w))w[K]={};w=w[K]}else{let O=J[G],F=w[K]=O===null?null:z.mapFromDriverValue(O);if(W&&j(H,G0)&&Z.length===2){let M=Z[0];if(!(M in X))X[M]=F===null?m1(H.table):!1;else if(typeof X[M]==="string"&&X[M]!==m1(H.table))X[M]=!1}}return U},{});if(W&&Object.keys(X).length>0){for(let[U,Z]of Object.entries(X))if(typeof Z==="string"&&!W[Z])Y[U]=null}return Y}function k1($,J){return Object.entries($).reduce((W,[X,Y])=>{if(typeof X!=="string")return W;let U=J?[...J,X]:[X];if(j(Y,G0)||j(Y,u)||j(Y,u.Aliased))W.push({path:U,field:Y});else if(j(Y,y))W.push(...k1(Y[y.Symbol.Columns],U));else W.push(...k1(Y,U));return W},[])}function O$($,J){let W=Object.keys($),X=Object.keys(J);if(W.length!==X.length)return!1;for(let[Y,U]of W.entries())if(U!==X[Y])return!1;return!0}function T6($,J){let W=Object.entries(J).filter(([,X])=>X!==void 0).map(([X,Y])=>{if(j(Y,u)||j(Y,G0))return[X,Y];else return[X,new J4(Y,$[y.Symbol.Columns][X])]});if(W.length===0)throw Error("No values to set");return Object.fromEntries(W)}function kW($,J){for(let W of J)for(let X of Object.getOwnPropertyNames(W.prototype)){if(X==="constructor")continue;Object.defineProperty($.prototype,X,Object.getOwnPropertyDescriptor(W.prototype,X)||Object.create(null))}}function q6($){return $[y.Symbol.Columns]}function m4($){return j($,C0)?$._.alias:j($,j1)?$[R0].name:j($,u)?void 0:$[y.Symbol.IsAlias]?$[y.Symbol.Name]:$[y.Symbol.BaseName]}function c0($,J){return{name:typeof $==="string"&&$.length>0?$:"",config:typeof $==="object"?$:J}}function vW($){if(typeof $!=="object"||$===null)return!1;if($.constructor.name!=="Object")return!1;if("logger"in $){let J=typeof $.logger;if(J!=="boolean"&&(J!=="object"||typeof $.logger.logQuery!=="function")&&J!=="undefined")return!1;return!0}if("schema"in $){let J=typeof $.schema;if(J!=="object"&&J!=="undefined")return!1;return!0}if("relations"in $){let J=typeof $.relations;if(J!=="object"&&J!=="undefined")return!1;return!0}if("casing"in $){let J=typeof $.casing;if(J!=="string"&&J!=="undefined")return!1;return!0}if("mode"in $){if($.mode!=="default"||$.mode!=="planetscale"||$.mode!==void 0)return!1;return!0}if("connection"in $){let J=typeof $.connection;if(J!=="string"&&J!=="object"&&J!=="undefined")return!1;return!0}if("client"in $){let J=typeof $.client;if(J!=="object"&&J!=="function"&&J!=="undefined")return!1;return!0}if(Object.keys($).length===0)return!0;return!1}class S9 extends Z0{static[B]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity($){if($){let{name:J,...W}=$;this.config.generatedIdentity={type:"always",sequenceName:J,sequenceOptions:W}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity($){if($){let{name:J,...W}=$;this.config.generatedIdentity={type:"byDefault",sequenceName:J,sequenceOptions:W}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}class ES extends S9{static[B]="PgBigInt53Builder";constructor($){super($,"number int53","PgBigInt53")}build($){return new MS($,this.config)}}class MS extends $0{static[B]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue($){if(typeof $==="number")return $;return Number($)}}class VS extends S9{static[B]="PgBigInt64Builder";constructor($){super($,"bigint int64","PgBigInt64")}build($){return new QS($,this.config)}}class QS extends $0{static[B]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue($){return BigInt($)}}function AS($,J){let{name:W,config:X}=c0($,J);if(X.mode==="number")return new ES(W);return new VS(W)}class IS extends Z0{static[B]="PgBigSerial53Builder";constructor($){super($,"number int53","PgBigSerial53");this.config.hasDefault=!0,this.config.notNull=!0}build($){return new LS($,this.config)}}class LS extends $0{static[B]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue($){if(typeof $==="number")return $;return Number($)}}class PS extends Z0{static[B]="PgBigSerial64Builder";constructor($){super($,"bigint int64","PgBigSerial64");this.config.hasDefault=!0}build($){return new _S($,this.config)}}class _S extends $0{static[B]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue($){return BigInt($)}}function NS($,J){let{name:W,config:X}=c0($,J);if(X.mode==="number")return new IS(W);return new PS(W)}class BS extends Z0{static[B]="PgBooleanBuilder";constructor($){super($,"boolean","PgBoolean")}build($){return new RS($,this.config)}}class RS extends $0{static[B]="PgBoolean";getSQLType(){return"boolean"}}function XG($){return new BS($??"")}class SS extends Z0{static[B]="PgCharBuilder";constructor($,J){super($,J.enum?.length?"string enum":"string","PgChar");this.config.length=J.length??1,this.config.setLength=J.length!==void 0,this.config.enumValues=J.enum,this.config.isLengthExact=!0}build($){return new jS($,this.config)}}class jS extends $0{static[B]="PgChar";enumValues=this.config.enumValues;getSQLType(){return this.config.setLength?`char(${this.length})`:"char"}}function kS($,J={}){let{name:W,config:X}=c0($,J);return new SS(W,X)}class vS extends Z0{static[B]="PgCidrBuilder";constructor($){super($,"string cidr","PgCidr")}build($){return new CS($,this.config)}}class CS extends $0{static[B]="PgCidr";getSQLType(){return"cidr"}}function TS($){return new vS($??"")}class qS extends Z0{static[B]="PgCustomColumnBuilder";constructor($,J,W){super($,"custom","PgCustomColumn");this.config.fieldConfig=J,this.config.customTypeParams=W}build($){return new hS($,this.config)}}class hS extends $0{static[B]="PgCustomColumn";sqlName;mapTo;mapFrom;mapJson;forJsonSelect;constructor($,J){super($,J);this.sqlName=J.customTypeParams.dataType(J.fieldConfig),this.mapTo=J.customTypeParams.toDriver,this.mapFrom=J.customTypeParams.fromDriver,this.mapJson=J.customTypeParams.fromJson,this.forJsonSelect=J.customTypeParams.forJsonSelect}getSQLType(){return this.sqlName}mapFromDriverValue($){return typeof this.mapFrom==="function"?this.mapFrom($):$}mapFromJsonValue($){return typeof this.mapJson==="function"?this.mapJson($):this.mapFromDriverValue($)}jsonSelectIdentifier($,J,W){if(typeof this.forJsonSelect==="function")return this.forJsonSelect($,J,W);let X=this.getSQLType().toLowerCase(),Y=X.indexOf("(");switch(Y+1?X.slice(0,Y):X){case"bytea":case"geometry":case"timestamp":case"numeric":case"bigint":{let Z="[]".repeat(W??0);return J`${$}::text${J.raw(Z).if(W)}`}default:return $}}mapToDriverValue($){return typeof this.mapTo==="function"?this.mapTo($):$}}function xS($){return(J,W)=>{let{name:X,config:Y}=c0(J,W);return new qS(X,Y,$)}}class A5 extends Z0{static[B]="PgDateColumnBaseBuilder";defaultNow(){return this.default(E`now()`)}}class bS extends A5{static[B]="PgDateBuilder";constructor($){super($,"object date","PgDate")}build($){return new YG($,this.config)}}class YG extends $0{static[B]="PgDate";getSQLType(){return"date"}mapFromDriverValue($){return new Date($)}mapToDriverValue($){return $.toISOString()}}class gS extends A5{static[B]="PgDateStringBuilder";constructor($){super($,"string date","PgDateString")}build($){return new UG($,this.config)}}class UG extends $0{static[B]="PgDateString";getSQLType(){return"date"}}function fS($,J){let{name:W,config:X}=c0($,J);if(X?.mode==="date")return new bS(W);return new gS(W)}class mS extends Z0{static[B]="PgDoublePrecisionBuilder";constructor($){super($,"number double","PgDoublePrecision")}build($){return new yS($,this.config)}}class yS extends $0{static[B]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue($){if(typeof $==="string")return Number.parseFloat($);return $}}function cS($){return new mS($??"")}class uS extends Z0{static[B]="PgInetBuilder";constructor($){super($,"string inet","PgInet")}build($){return new pS($,this.config)}}class pS extends $0{static[B]="PgInet";getSQLType(){return"inet"}}function dS($){return new uS($??"")}class lS extends S9{static[B]="PgIntegerBuilder";constructor($){super($,"number int32","PgInteger")}build($){return new rS($,this.config)}}class rS extends $0{static[B]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue($){if(typeof $==="string")return Number.parseInt($);return $}}function nS($){return new lS($??"")}class iS extends Z0{static[B]="PgIntervalBuilder";constructor($,J){super($,"string interval","PgInterval");this.config.intervalConfig=J}build($){return new tS($,this.config)}}class tS extends $0{static[B]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){let $=this.fields?` ${this.fields}`:"",J=this.precision?`(${this.precision})`:"";return`interval${$}${J}`}}function aS($,J={}){let{name:W,config:X}=c0($,J);return new iS(W,X)}class oS extends Z0{static[B]="PgJsonBuilder";constructor($){super($,"object json","PgJson")}build($){return new ZG($,this.config)}}class ZG extends $0{static[B]="PgJson";constructor($,J){super($,J)}getSQLType(){return"json"}mapToDriverValue($){return JSON.stringify($)}mapFromDriverValue($){if(typeof $==="string")try{return JSON.parse($)}catch{return $}return $}}function sS($){return new oS($??"")}class eS extends Z0{static[B]="PgJsonbBuilder";constructor($){super($,"object json","PgJsonb")}build($){return new HG($,this.config)}}class HG extends $0{static[B]="PgJsonb";constructor($,J){super($,J)}getSQLType(){return"jsonb"}mapToDriverValue($){return JSON.stringify($)}mapFromDriverValue($){if(typeof $==="string")try{return JSON.parse($)}catch{return $}return $}}function $j($){return new eS($??"")}class Jj extends Z0{static[B]="PgLineBuilder";constructor($){super($,"array line","PgLine")}build($){return new Wj($,this.config)}}class Wj extends $0{static[B]="PgLine";getSQLType(){return"line"}mapFromDriverValue($){let[J,W,X]=$.slice(1,-1).split(",");return[Number.parseFloat(J),Number.parseFloat(W),Number.parseFloat(X)]}mapToDriverValue($){return`{${$[0]},${$[1]},${$[2]}}`}}class Xj extends Z0{static[B]="PgLineABCBuilder";constructor($){super($,"object line","PgLineABC")}build($){return new Yj($,this.config)}}class Yj extends $0{static[B]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue($){let[J,W,X]=$.slice(1,-1).split(",");return{a:Number.parseFloat(J),b:Number.parseFloat(W),c:Number.parseFloat(X)}}mapToDriverValue($){return`{${$.a},${$.b},${$.c}}`}}function Uj($,J){let{name:W,config:X}=c0($,J);if(!X?.mode||X.mode==="tuple")return new Jj(W);return new Xj(W)}class Zj extends Z0{static[B]="PgMacaddrBuilder";constructor($){super($,"string macaddr","PgMacaddr")}build($){return new Hj($,this.config)}}class Hj extends $0{static[B]="PgMacaddr";getSQLType(){return"macaddr"}}function Gj($){return new Zj($??"")}class zj extends Z0{static[B]="PgMacaddr8Builder";constructor($){super($,"string macaddr8","PgMacaddr8")}build($){return new wj($,this.config)}}class wj extends $0{static[B]="PgMacaddr8";getSQLType(){return"macaddr8"}}function Dj($){return new zj($??"")}class Kj extends Z0{static[B]="PgNumericBuilder";constructor($,J,W){super($,"string numeric","PgNumeric");this.config.precision=J,this.config.scale=W}build($){return new GG($,this.config)}}class GG extends $0{static[B]="PgNumeric";precision;scale;constructor($,J){super($,J);this.precision=J.precision,this.scale=J.scale}mapFromDriverValue($){if(typeof $==="string")return $;return String($)}getSQLType(){if(this.precision!==void 0&&this.scale!==void 0)return`numeric(${this.precision}, ${this.scale})`;else if(this.precision===void 0)return"numeric";else return`numeric(${this.precision})`}}class Oj extends Z0{static[B]="PgNumericNumberBuilder";constructor($,J,W){super($,"number","PgNumericNumber");this.config.precision=J,this.config.scale=W}build($){return new Fj($,this.config)}}class Fj extends $0{static[B]="PgNumericNumber";precision;scale;constructor($,J){super($,J);this.precision=J.precision,this.scale=J.scale}mapFromDriverValue($){if(typeof $==="number")return $;return Number($)}mapToDriverValue=String;getSQLType(){if(this.precision!==void 0&&this.scale!==void 0)return`numeric(${this.precision}, ${this.scale})`;else if(this.precision===void 0)return"numeric";else return`numeric(${this.precision})`}}class Ej extends Z0{static[B]="PgNumericBigIntBuilder";constructor($,J,W){super($,"bigint int64","PgNumericBigInt");this.config.precision=J,this.config.scale=W}build($){return new Mj($,this.config)}}class Mj extends $0{static[B]="PgNumericBigInt";precision;scale;constructor($,J){super($,J);this.precision=J.precision,this.scale=J.scale}mapFromDriverValue=BigInt;mapToDriverValue=String;getSQLType(){if(this.precision!==void 0&&this.scale!==void 0)return`numeric(${this.precision}, ${this.scale})`;else if(this.precision===void 0)return"numeric";else return`numeric(${this.precision})`}}function Vj($,J){let{name:W,config:X}=c0($,J),Y=X?.mode;return Y==="number"?new Oj(W,X?.precision,X?.scale):Y==="bigint"?new Ej(W,X?.precision,X?.scale):new Kj(W,X?.precision,X?.scale)}class Qj extends Z0{static[B]="PgPointTupleBuilder";constructor($){super($,"array point","PgPointTuple")}build($){return new Aj($,this.config)}}class Aj extends $0{static[B]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue($){if(typeof $==="string"){let[J,W]=$.slice(1,-1).split(",");return[Number.parseFloat(J),Number.parseFloat(W)]}return[$.x,$.y]}mapToDriverValue($){return`(${$[0]},${$[1]})`}}class Ij extends Z0{static[B]="PgPointObjectBuilder";constructor($){super($,"object point","PgPointObject")}build($){return new Lj($,this.config)}}class Lj extends $0{static[B]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue($){if(typeof $==="string"){let[J,W]=$.slice(1,-1).split(",");return{x:Number.parseFloat(J),y:Number.parseFloat(W)}}return $}mapToDriverValue($){return`(${$.x},${$.y})`}}function Pj($,J){let{name:W,config:X}=c0($,J);if(!X?.mode||X.mode==="tuple")return new Qj(W);return new Ij(W)}function pl($){let J=[];for(let W=0;W<$.length;W+=2)J.push(Number.parseInt($.slice(W,W+2),16));return new Uint8Array(J)}function _j($,J){let W=new ArrayBuffer(8),X=new DataView(W);for(let Y=0;Y<8;Y++)X.setUint8(Y,$[J+Y]);return X.getFloat64(0,!0)}function LO($){let J=pl($),W=0,X=J[W];W+=1;let Y=new DataView(J.buffer),U=Y.getUint32(W,X===1);W+=4;let Z;if(U&536870912)Z=Y.getUint32(W,X===1),W+=4;if((U&65535)===1){let H=_j(J,W);W+=8;let G=_j(J,W);return W+=8,[H,G]}throw Error("Unsupported geometry type")}class Nj extends Z0{static[B]="PgGeometryBuilder";constructor($){super($,"array geometry","PgGeometry")}build($){return new Bj($,this.config)}}class Bj extends $0{static[B]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue($){if(typeof $!=="string")return $;return LO($)}mapToDriverValue($){return`point(${$[0]} ${$[1]})`}}class Rj extends Z0{static[B]="PgGeometryObjectBuilder";constructor($){super($,"object geometry","PgGeometryObject")}build($){return new Sj($,this.config)}}class Sj extends $0{static[B]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue($){let J=LO($);return{x:J[0],y:J[1]}}mapToDriverValue($){return`point(${$.x} ${$.y})`}}function jj($,J){let{name:W,config:X}=c0($,J);if(!X?.mode||X.mode==="tuple")return new Nj(W);return new Rj(W)}class kj extends Z0{static[B]="PgRealBuilder";constructor($,J){super($,"number float","PgReal");this.config.length=J}build($){return new vj($,this.config)}}class vj extends $0{static[B]="PgReal";constructor($,J){super($,J)}getSQLType(){return"real"}mapFromDriverValue=($)=>{if(typeof $==="string")return Number.parseFloat($);return $}}function Cj($){return new kj($??"")}class Tj extends Z0{static[B]="PgSerialBuilder";constructor($){super($,"number int32","PgSerial");this.config.hasDefault=!0,this.config.notNull=!0}build($){return new qj($,this.config)}}class qj extends $0{static[B]="PgSerial";getSQLType(){return"serial"}}function hj($){return new Tj($??"")}class xj extends S9{static[B]="PgSmallIntBuilder";constructor($){super($,"number int16","PgSmallInt")}build($){return new bj($,this.config)}}class bj extends $0{static[B]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=($)=>{if(typeof $==="string")return Number($);return $}}function gj($){return new xj($??"")}class fj extends Z0{static[B]="PgSmallSerialBuilder";constructor($){super($,"number int16","PgSmallSerial");this.config.hasDefault=!0,this.config.notNull=!0}build($){return new mj($,this.config)}}class mj extends $0{static[B]="PgSmallSerial";getSQLType(){return"smallserial"}}function yj($){return new fj($??"")}class cj extends Z0{static[B]="PgTextBuilder";constructor($,J){super($,J.enum?.length?"string enum":"string","PgText");this.config.enumValues=J.enum}build($){return new uj($,this.config,this.config.enumValues)}}class uj extends $0{static[B]="PgText";enumValues;constructor($,J,W){super($,J);this.enumValues=W}getSQLType(){return"text"}}function I1($,J={}){let{name:W,config:X}=c0($,J);return new cj(W,X)}class pj extends A5{constructor($,J,W){super($,"string time","PgTime");this.withTimezone=J,this.precision=W,this.config.withTimezone=J,this.config.precision=W}static[B]="PgTimeBuilder";build($){return new zG($,this.config)}}class zG extends $0{static[B]="PgTime";withTimezone;precision;constructor($,J){super($,J);this.withTimezone=J.withTimezone,this.precision=J.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}function dj($,J={}){let{name:W,config:X}=c0($,J);return new pj(W,X.withTimezone??!1,X.precision)}class lj extends A5{static[B]="PgTimestampBuilder";constructor($,J,W){super($,"object date","PgTimestamp");this.config.withTimezone=J,this.config.precision=W}build($){return new wG($,this.config)}}class wG extends $0{static[B]="PgTimestamp";withTimezone;precision;constructor($,J){super($,J);this.withTimezone=J.withTimezone,this.precision=J.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=($)=>{return new Date(this.withTimezone?$:$+"+0000")};mapToDriverValue=($)=>{return $.toISOString()}}class rj extends A5{static[B]="PgTimestampStringBuilder";constructor($,J,W){super($,"string timestamp","PgTimestampString");this.config.withTimezone=J,this.config.precision=W}build($){return new DG($,this.config)}}class DG extends $0{static[B]="PgTimestampString";withTimezone;precision;constructor($,J){super($,J);this.withTimezone=J.withTimezone,this.precision=J.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}function j4($,J={}){let{name:W,config:X}=c0($,J);if(X?.mode==="string")return new rj(W,X.withTimezone??!1,X.precision);return new lj(W,X?.withTimezone??!1,X?.precision)}class nj extends Z0{static[B]="PgUUIDBuilder";constructor($){super($,"string uuid","PgUUID")}defaultRandom(){return this.default(E`gen_random_uuid()`)}build($){return new KG($,this.config)}}class KG extends $0{static[B]="PgUUID";getSQLType(){return"uuid"}}function ij($){return new nj($??"")}class tj extends Z0{static[B]="PgVarcharBuilder";constructor($,J){super($,J.enum?.length?"string enum":"string","PgVarchar");this.config.length=J.length,this.config.enumValues=J.enum}build($){return new aj($,this.config)}}class aj extends $0{static[B]="PgVarchar";enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}function oj($,J={}){let{name:W,config:X}=c0($,J);return new tj(W,X)}class sj extends Z0{static[B]="PgBinaryVectorBuilder";constructor($,J){super($,"string binary","PgBinaryVector");this.config.length=J.dimensions,this.config.isLengthExact=!0}build($){return new ej($,this.config)}}class ej extends $0{static[B]="PgBinaryVector";getSQLType(){return`bit(${this.length})`}}function $k($,J){let{name:W,config:X}=c0($,J);return new sj(W,X)}class Jk extends Z0{static[B]="PgHalfVectorBuilder";constructor($,J){super($,"array halfvector","PgHalfVector");this.config.length=J.dimensions,this.config.isLengthExact=!0}build($){return new Wk($,this.config)}}class Wk extends $0{static[B]="PgHalfVector";getSQLType(){return`halfvec(${this.length})`}mapToDriverValue($){return JSON.stringify($)}mapFromDriverValue($){return $.slice(1,-1).split(",").map((J)=>Number.parseFloat(J))}}function Xk($,J){let{name:W,config:X}=c0($,J);return new Jk(W,X)}class Yk extends Z0{static[B]="PgSparseVectorBuilder";constructor($,J){super($,"string sparsevec","PgSparseVector");this.config.dimensions=J.dimensions}build($){return new Uk($,this.config)}}class Uk extends $0{static[B]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}}function Zk($,J){let{name:W,config:X}=c0($,J);return new Yk(W,X)}class Hk extends Z0{static[B]="PgVectorBuilder";constructor($,J){super($,"array vector","PgVector");this.config.length=J.dimensions,this.config.isLengthExact=!0}build($){return new Gk($,this.config)}}class Gk extends $0{static[B]="PgVector";getSQLType(){return`vector(${this.length})`}mapToDriverValue($){return JSON.stringify($)}mapFromDriverValue($){return $.slice(1,-1).split(",").map((J)=>Number.parseFloat(J))}}function zk($,J){let{name:W,config:X}=c0($,J);return new Hk(W,X)}class j0{static[B]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch($){return this.then(void 0,$)}finally($){return this.then((J)=>{return $?.(),J},(J)=>{throw $?.(),J})}then($,J){return this.execute().then($,J)}}class O0{static[B]="SelectionProxyHandler";config;constructor($){this.config={...$}}get($,J){if(J==="_")return{...$._,selectedFields:new Proxy($._.selectedFields,this)};if(J===R0)return{...$[R0],selectedFields:new Proxy($[R0].selectedFields,this)};if(typeof J==="symbol")return $[J];let X=(j($,C0)?$._.selectedFields:j($,j1)?$[R0].selectedFields:$)[J];if(j(X,u.Aliased)){if(this.config.sqlAliasedBehavior==="sql"&&!X.isSelectionField)return X.sql;let Y=X.clone();return Y.isSelectionField=!0,Y}if(j(X,u)){if(this.config.sqlBehavior==="sql")return X;throw Error(`You tried to reference "${J}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}if(j(X,G0)){if(this.config.alias)return new Proxy(X,new jW(new Proxy(X.table,new M2(this.config.alias,this.config.replaceOriginalName??!1))));return X}if(typeof X!=="object"||X===null)return X;return new Proxy(X,new O0(this.config))}}function wk(){return{bigint:AS,bigserial:NS,boolean:XG,char:kS,cidr:TS,customType:xS,date:fS,doublePrecision:cS,inet:dS,integer:nS,interval:aS,json:sS,jsonb:$j,line:Uj,macaddr:Gj,macaddr8:Dj,numeric:Vj,point:Pj,geometry:jj,real:Cj,serial:hj,smallint:gj,smallserial:yj,text:I1,time:dj,timestamp:j4,uuid:ij,varchar:oj,bit:$k,halfvec:Xk,sparsevec:Zk,vector:zk}}var PO=Symbol.for("drizzle:PgInlineForeignKeys"),Dk=Symbol.for("drizzle:EnableRLS");class W4 extends y{static[B]="PgTable";static Symbol=Object.assign({},y.Symbol,{InlineForeignKeys:PO,EnableRLS:Dk});[PO]=[];[Dk]=!1;[y.Symbol.ExtraConfigBuilder]=void 0;[y.Symbol.ExtraConfigColumns]={}}function dl($,J,W,X,Y=$){let U=new W4($,X,Y),Z=typeof J==="function"?J(wk()):J,H=Object.fromEntries(Object.entries(Z).map(([w,D])=>{let K=D;K.setName(w);let O=K.build(U);return U[PO].push(...K.buildForeignKeys(O,U)),[w,O]})),G=Object.fromEntries(Object.entries(Z).map(([w,D])=>{let K=D;K.setName(w);let O=K.buildExtraConfigColumn(U);return[w,O]})),z=Object.assign(U,H);if(z[y.Symbol.Columns]=H,z[y.Symbol.ExtraConfigColumns]=G,W)z[W4.Symbol.ExtraConfigBuilder]=W;return Object.assign(z,{enableRLS:()=>{return z[W4.Symbol.EnableRLS]=!0,z}})}var j9=($,J,W)=>{return dl($,J,W,void 0)};class _O{static[B]="PgIndexBuilder";config;constructor($,J,W,X,Y="btree"){this.config={name:X,columns:$,unique:J,only:W,method:Y}}concurrently(){return this.config.concurrently=!0,this}with($){return this.config.with=$,this}where($){return this.config.where=$,this}build($){return new Kk(this.config,$)}}class Kk{static[B]="PgIndex";config;constructor($,J){this.config={...$,table:J}}}class NO{constructor($,J){if(this.name=$,J)this.as=J.as,this.for=J.for,this.to=J.to,this.using=J.using,this.withCheck=J.withCheck}static[B]="PgPolicy";as;for;to;using;withCheck;_linkedTable;link($){return this._linkedTable=$,this}}class V2{static[B]="PgPrimaryKeyBuilder";columns;name;constructor($,J){this.columns=$,this.name=J}build($){return new Ok($,this.columns,this.name)}}class Ok{constructor($,J,W){this.table=$,this.columns=J,this.name=W}static[B]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[W4.Symbol.Name]}_${this.columns.map(($)=>$.name).join("_")}_pk`}}function K4($,J){if(DS(J)&&!Q5($)&&!j($,J4)&&!j($,c8)&&!j($,G0)&&!j($,y)&&!j($,j1))return new J4($,J);return $}var y1=($,J)=>{return E`${$} = ${K4(J,$)}`},CW=($,J)=>{return E`${$} <> ${K4(J,$)}`};function F1(...$){let J=$.filter((W)=>W!==void 0);if(J.length===0)return;if(J.length===1)return new u(J);return new u([new A4("("),E.join(J,new A4(" and ")),new A4(")")])}function k9(...$){let J=$.filter((W)=>W!==void 0);if(J.length===0)return;if(J.length===1)return new u(J);return new u([new A4("("),E.join(J,new A4(" or ")),new A4(")")])}function TW($){return E`not ${$}`}var qW=($,J)=>{return E`${$} > ${K4(J,$)}`},hW=($,J)=>{return E`${$} >= ${K4(J,$)}`},xW=($,J)=>{return E`${$} < ${K4(J,$)}`},bW=($,J)=>{return E`${$} <= ${K4(J,$)}`};function I5($,J){if(Array.isArray(J)){if(J.length===0)return E`false`;return E`${$} in ${J.map((W)=>K4(W,$))}`}return E`${$} in ${K4(J,$)}`}function iJ($,J){if(Array.isArray(J)){if(J.length===0)return E`true`;return E`${$} not in ${J.map((W)=>K4(W,$))}`}return E`${$} not in ${K4(J,$)}`}function OG($){return E`${$} is null`}function FG($){return E`${$} is not null`}function Q2($){return E`exists ${$}`}function A2($){return E`not exists ${$}`}function EG($,J,W){return E`${$} between ${K4(J,$)} and ${K4(W,$)}`}function MG($,J,W){return E`${$} not between ${K4(J,$)} and ${K4(W,$)}`}function v9($,J){return E`${$} like ${J}`}function VG($,J){return E`${$} not like ${J}`}function QG($,J){return E`${$} ilike ${J}`}function AG($,J){return E`${$} not ilike ${J}`}function Fk($,J){if(Array.isArray(J)){if(J.length===0)throw Error("arrayContains requires at least one value");let W=E`${K4(J,$)}`;return E`${$} @> ${W}`}return E`${$} @> ${K4(J,$)}`}function Ek($,J){if(Array.isArray(J)){if(J.length===0)throw Error("arrayContained requires at least one value");let W=E`${K4(J,$)}`;return E`${$} <@ ${W}`}return E`${$} <@ ${K4(J,$)}`}function Mk($,J){if(Array.isArray(J)){if(J.length===0)throw Error("arrayOverlaps requires at least one value");let W=E`${K4(J,$)}`;return E`${$} && ${W}`}return E`${$} && ${K4(J,$)}`}function L5($){return E`${$} asc`}function P5($){return E`${$} desc`}class BO{constructor($,J,W){this.sourceTable=$,this.referencedTable=J,this.relationName=W,this.referencedTableName=J[y.Symbol.Name]}static[B]="Relation";referencedTableName;fieldName}class Vk{constructor($,J){this.table=$,this.config=J}static[B]="Relations"}class W6 extends BO{constructor($,J,W,X){super($,J,W?.relationName);this.config=W,this.isNullable=X}static[B]="One";withFieldName($){let J=new W6(this.sourceTable,this.referencedTable,this.config,this.isNullable);return J.fieldName=$,J}}class $8 extends BO{constructor($,J,W){super($,J,W?.relationName);this.config=W}static[B]="Many";withFieldName($){let J=new $8(this.sourceTable,this.referencedTable,this.config);return J.fieldName=$,J}}function tJ(){return{and:F1,between:EG,eq:y1,exists:Q2,gt:qW,gte:hW,ilike:QG,inArray:I5,isNull:OG,isNotNull:FG,like:v9,lt:xW,lte:bW,ne:CW,not:TW,notBetween:MG,notExists:A2,notLike:VG,notIlike:AG,notInArray:iJ,or:k9,sql:E}}function aJ(){return{sql:E,asc:L5,desc:P5}}function gW($,J){if(Object.keys($).length===1&&"default"in $&&!j($.default,y))$=$.default;let W={},X={},Y={};for(let[U,Z]of Object.entries($))if(j(Z,y)){let H=C6(Z),G=X[H];W[H]=U,Y[U]={tsName:U,dbName:Z[y.Symbol.Name],schema:Z[y.Symbol.Schema],columns:Z[y.Symbol.Columns],relations:G?.relations??{},primaryKey:G?.primaryKey??[]};for(let w of Object.values(Z[y.Symbol.Columns]))if(w.primary)Y[U].primaryKey.push(w);let z=Z[y.Symbol.ExtraConfigBuilder]?.(Z[y.Symbol.ExtraConfigColumns]);if(z){for(let w of Object.values(z))if(j(w,V2))Y[U].primaryKey.push(...w.columns)}}else if(j(Z,Vk)){let H=C6(Z.table),G=W[H],z=Z.config(J(Z.table)),w;for(let[D,K]of Object.entries(z))if(G){let O=Y[G];if(O.relations[D]=K,w)O.primaryKey.push(...w)}else{if(!(H in X))X[H]={relations:{},primaryKey:w};X[H].relations[D]=K}}return{tables:Y,tableNamesMap:W}}function ll($){return function(W,X){return new W6($,W,X,X?.fields.reduce((Y,U)=>Y&&U.notNull,!0)??!1)}}function rl($){return function(W,X){return new $8($,W,X)}}function oJ($,J,W){if(j(W,W6)&&W.config)return{fields:W.config.fields,references:W.config.references};let X=J[C6(W.referencedTable)];if(!X)throw Error(`Table "${W.referencedTable[y.Symbol.Name]}" not found in schema`);let Y=$[X];if(!Y)throw Error(`Table "${X}" not found in schema`);let U=W.sourceTable,Z=J[C6(U)];if(!Z)throw Error(`Table "${U[y.Symbol.Name]}" not found in schema`);let H=[];for(let G of Object.values(Y.relations))if(W.relationName&&W!==G&&G.relationName===W.relationName||!W.relationName&&G.referencedTable===W.sourceTable)H.push(G);if(H.length>1)throw W.relationName?Error(`There are multiple relations with name "${W.relationName}" in table "${X}"`):Error(`There are multiple relations between "${X}" and "${W.sourceTable[y.Symbol.Name]}". Please specify relation name`);if(H[0]&&j(H[0],W6)&&H[0].config)return{fields:H[0].config.references,references:H[0].config.fields};throw Error(`There is not enough information to infer relation "${Z}.${W.fieldName}"`)}function fW($){return{one:ll($),many:rl($)}}function C9($,J,W,X,Y=(U)=>U){let U={};for(let[Z,H]of X.entries())if(H.isJson){let G=J.relations[H.tsKey],z=W[Z],w=typeof z==="string"?JSON.parse(z):z;U[H.tsKey]=j(G,W6)?w&&C9($,$[H.relationTableTsKey],w,H.selection,Y):w.map((D)=>C9($,$[H.relationTableTsKey],D,H.selection,Y))}else{let G=Y(W[Z]),z=H.field,w;if(j(z,G0))w=z;else if(j(z,u))w=z.decoder;else w=z.sql.decoder;U[H.tsKey]=G===null?null:w.mapFromDriverValue(G)}return U}function nl($){return($.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map((W)=>W.toLowerCase()).join("_")}function il($){return($.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce((W,X,Y)=>{let U=Y===0?X.toLowerCase():`${X[0].toUpperCase()}${X.slice(1)}`;return W+U},"")}function tl($){return $}class sJ{static[B]="CasingCache";cache={};cachedTables={};convert;constructor($){this.convert=$==="snake_case"?nl:$==="camelCase"?il:tl}getColumnCasing($){if(!$.keyAsName)return $.name;let J=$.table[y.Symbol.Schema]??"public",W=$.table[y.Symbol.OriginalName],X=`${J}.${W}.${$.name}`;if(!this.cache[X])this.cacheTable($.table);return this.cache[X]}cacheTable($){let J=$[y.Symbol.Schema]??"public",W=$[y.Symbol.OriginalName],X=`${J}.${W}`;if(!this.cachedTables[X]){for(let Y of Object.values($[y.Symbol.Columns])){if(!j(Y,G0))continue;let U=`${X}.${Y.name}`;this.cache[U]=this.convert(Y.name)}this.cachedTables[X]=!0}}clearCache(){this.cache={},this.cachedTables={}}}class t1 extends Error{static[B]="DrizzleError";constructor({message:$,cause:J}){super($);this.name="DrizzleError",this.cause=J}}class a1 extends Error{constructor($,J,W){super(`Failed query: ${$}
params: ${J}`);if(this.query=$,this.params=J,this.cause=W,Error.captureStackTrace(this,a1),W)this.cause=W}static[B]="DrizzleQueryError"}class eJ extends t1{static[B]="TransactionRollbackError";constructor(){super({message:"Rollback"})}}function al($,J){for(let W of Object.values($))for(let[X,Y]of Object.entries(W.relations)){if(!j(Y,$7))continue;Y.sourceTable=W.table,Y.fieldName=X}for(let[W,X]of Object.entries($))for(let[Y,U]of Object.entries(X.relations)){if(!j(U,$7))continue;let Z,{targetTableName:H,alias:G,sourceColumns:z,targetColumns:w,throughTable:D,sourceTable:K,through:O,targetTable:F,where:M,sourceColumnTableNames:A,targetColumnTableNames:I}=U,P=`relations -> ${X.name}: { ${Y}: r.${j(U,N5)?"one":"many"}.${H}(...) }`;if(Y in X.table[f1])throw Error(`${P}: relation name collides with column "${Y}" of table "${X.name}"`);if(typeof G==="string"&&!G)throw Error(`${P}: "alias" cannot be an empty string - omit it if you don't need it`);if(z?.length===0)throw Error(`${P}: "from" cannot be empty`);if(w?.length===0)throw Error(`${P}: "to" cannot be empty`);if(z&&w){if(z.length!==w.length&&!D)throw Error(`${P}: "from" and "to" fields without "through" must have the same length`);for(let N of A)if(N!==W)throw Error(`${P}: all "from" columns must belong to table "${W}", found column of table "${N}"`);for(let N of I)if(N!==H)throw Error(`${P}: all "to" columns must belong to table "${F}", found column of table "${N}"`);if(O){if(O.source.length!==z.length||O.target.length!==w.length)throw Error(`${P}: ".through(column)" must be used either on all columns in "from" and "to" or not defined on any of them`);for(let N of O.source)if(J[N._.tableName]!==D)throw Error(`${P}: ".through(column)" must be used on the same table by all columns of the relation`);for(let N of O.target)if(J[N._.tableName]!==D)throw Error(`${P}: ".through(column)" must be used on the same table by all columns of the relation`)}continue}if(z||w)throw Error(`${P}: relation must have either both "from" and "to" defined, or none of them`);let Q=$[H];if(!Q)throw Error(`${P}: not enough data provided to build the relation - "from"/"to" are not defined, and no reverse relations of table "${H}" were found"`);if(G){let N=Object.values(Q.relations).filter((_)=>j(_,$7)&&_.alias===G&&_!==U);if(N.length>1)throw Error(`${P}: not enough data provided to build the relation - "from"/"to" are not defined, and multiple relations with alias "${G}" found in table "${H}": ${N.map((_)=>`"${_.fieldName}"`).join(", ")}`);if(Z=N[0],!Z)throw Error(`${P}: not enough data provided to build the relation - "from"/"to" are not defined, and there is no reverse relation of table "${H}" with alias "${G}"`)}else{let N=Object.values(Q.relations).filter((_)=>j(_,$7)&&_.targetTable===K&&!_.alias&&_!==U);if(N.length>1)throw Error(`${P}: not enough data provided to build the relation - "from"/"to" are not defined, and multiple relations between "${H}" and "${W}" were found.
Hint: you can specify "alias" on both sides of the relation with the same value`);if(Z=N[0],!Z)throw Error(`${P}: not enough data provided to build the relation - "from"/"to" are not defined, and no reverse relation of table "${H}" with target table "${W}" was found`)}if(!Z.sourceColumns||!Z.targetColumns)throw Error(`${P}: not enough data provided to build the relation - "from"/"to" are not defined, and reverse relation "${H}.${Z.fieldName}" does not have "from"/"to" defined`);U.sourceColumns=Z.targetColumns,U.targetColumns=Z.sourceColumns,U.through=Z.through?{source:Z.through.target,target:Z.through.source}:void 0,U.throughTable=Z.throughTable,U.isReversed=!M,U.where=M??Z.where}return $}function ol($,J){let W={};for(let[X,Y]of Object.entries($))W[X]={table:Y,name:X,relations:J[X]??{}};return al(W,$)}class $7{constructor($,J){this.targetTableName=J,this.targetTable=$}static[B]="RelationV2";fieldName;sourceColumns;targetColumns;alias;where;sourceTable;targetTable;through;throughTable;isReversed;sourceColumnTableNames=[];targetColumnTableNames=[]}class N5 extends $7{static[B]="OneV2";relationType="one";optional;constructor($,J,W,X){super(J,W);if(this.alias=X?.alias,this.where=X?.where,X?.from)this.sourceColumns=(Array.isArray(X.from)?X.from:[X.from]).map((Y)=>{return this.throughTable??=Y._.through?$[Y._.through._.tableName]:void 0,this.sourceColumnTableNames.push(Y._.tableName),Y._.column});if(X?.to)this.targetColumns=(Array.isArray(X.to)?X.to:[X.to]).map((Y)=>{return this.throughTable??=Y._.through?$[Y._.through._.tableName]:void 0,this.targetColumnTableNames.push(Y._.tableName),Y._.column});if(this.throughTable)this.through={source:(Array.isArray(X?.from)?X.from:(X?.from)?[X.from]:[]).map((Y)=>Y._.through),target:(Array.isArray(X?.to)?X.to:(X?.to)?[X.to]:[]).map((Y)=>Y._.through)};this.optional=X?.optional??!0}}class LG extends $7{constructor($,J,W,X){super(J,W);if(this.config=X,this.alias=X?.alias,this.where=X?.where,X?.from)this.sourceColumns=(Array.isArray(X.from)?X.from:[X.from]).map((Y)=>{return this.throughTable??=Y._.through?$[Y._.through._.tableName]:void 0,this.sourceColumnTableNames.push(Y._.tableName),Y._.column});if(X?.to)this.targetColumns=(Array.isArray(X.to)?X.to:[X.to]).map((Y)=>{return this.throughTable??=Y._.through?$[Y._.through._.tableName]:void 0,this.targetColumnTableNames.push(Y._.tableName),Y._.column});if(this.throughTable)this.through={source:(Array.isArray(X?.from)?X.from:(X?.from)?[X.from]:[]).map((Y)=>Y._.through),target:(Array.isArray(X?.to)?X.to:(X?.to)?[X.to]:[]).map((Y)=>Y._.through)}}static[B]="ManyV2";relationType="many"}class Qk{static[B]="AggregatedField";table;onTable($){return this.table=$,this}}class Ak extends Qk{static[B]="AggregatedFieldCount";query;getSQL(){if(!this.query){if(!this.table)throw Error("Table must be set before building aggregate field");this.query=E`select count(*) as ${E.identifier("r")} from ${X6(this.table)}`.mapWith(Number)}return this.query}}var mW={and:F1,between:EG,eq:y1,exists:Q2,gt:qW,gte:hW,ilike:QG,inArray:I5,arrayContains:Fk,arrayContained:Ek,arrayOverlaps:Mk,isNull:OG,isNotNull:FG,like:v9,lt:xW,lte:bW,ne:CW,not:TW,notBetween:MG,notExists:A2,notLike:VG,notIlike:AG,notInArray:iJ,or:k9,sql:E},sl={sql:E,asc:L5,desc:P5};function T9($,J,W=(Z)=>Z,X=!1,Y=!1,U){for(let Z of J){if(Z.selection){let w=`${U?`${U}.`:""}${Z.key}`;if($[Z.key]===null)continue;if(X){if($[Z.key]=JSON.parse($[Z.key]),$[Z.key]===null)continue}if(Y&&typeof $[Z.key]==="string")$[Z.key]=JSON.parse($[Z.key]);if(Z.isArray){for(let D of $[Z.key])T9(D,Z.selection,W,!1,Y,w);continue}T9($[Z.key],Z.selection,W,!1,Y,w);continue}let H=Z.field,G=W($[Z.key]);if(G===null)continue;let z;if(j(H,G0))z=H;else if(j(H,u))z=H.decoder;else if(j(H,u.Aliased))z=H.sql.decoder;else z=H.getSQL().decoder;$[Z.key]="mapFromJsonValue"in z?z.mapFromJsonValue(G):z.mapFromDriverValue(G)}return $}class Ik{static[B]="RelationsBuilderTable";_;constructor($,J){this._={name:J,table:$}}}class Lk{static[B]="RelationsBuilderColumn";_;constructor($,J,W){this._={tableName:J,column:$,key:W}}through($){return new Pk(this._.column,this._.tableName,this._.key,$)}}class Pk{static[B]="RelationsBuilderColumn";_;constructor($,J,W,X){this._={tableName:J,column:$,through:X,key:W}}}class _k{static[B]="RelationsHelperStatic";_;constructor($){this._={tables:$};let J={},W={};for(let[X,Y]of Object.entries($))J[X]=(U)=>{return new N5($,Y,X,U)},W[X]=(U)=>{return new LG($,Y,X,U)};this.one=J,this.many=W}one;many;aggs={count(){return new Ak}}}function el($){let J=new _k($),W=Object.entries($).reduce((X,[Y,U])=>{let Z=new Ik(U,Y),H=Object.entries(U[f1]).reduce((G,[z,w])=>{let D=new Lk(w,Y,z);return G[z]=D,G},{});return X[Y]=Object.assign(Z,H),X},{});return Object.assign(J,W)}function $r($){return Object.fromEntries(Object.entries($).filter(([J,W])=>j(W,y)||j(W,j1)))}function PG($,J){let W=$r($),X=J?J(el(W)):{};return ol(W,X)}function Nk($,J){let W=$[f1][J];return W?j(W,G0)?W:j(W,u.Aliased)?E`${$}.${E.identifier(W.fieldAlias)}`:E`${$}.${E.identifier(J)}`:E`${$}.${E.identifier(J)}`}function IG($,J){if(typeof J!=="object"||j(J,c8))return y1($,J);let W=Object.entries(J);if(!W.length)return;let X=[];for(let[Y,U]of W){if(U===void 0)continue;switch(Y){case"NOT":{let Z=IG($,U);if(!Z)continue;X.push(TW(Z));continue}case"OR":{if(!U.length)continue;X.push(k9(...U.map((Z)=>IG($,Z))));continue}case"AND":{if(!U.length)continue;X.push(F1(...U.map((Z)=>IG($,Z))));continue}case"isNotNull":case"isNull":{if(!U)continue;X.push(mW[Y]($));continue}case"in":{X.push(mW.inArray($,U));continue}case"notIn":{X.push(mW.notInArray($,U));continue}default:{X.push(mW[Y]($,U));continue}}}if(!X.length)return;return F1(...X)}function F$($,J,W={},X={},Y,U=0){let Z=Object.entries(J);if(!Z.length)return;let H=[];for(let[G,z]of Z){if(z===void 0)continue;switch(G){case"RAW":{let w=typeof z==="function"?z($,mW):z.getSQL();H.push(w);continue}case"OR":{if(!z?.length)continue;H.push(k9(...z.map((w)=>F$($,w,W,X,Y,U))));continue}case"AND":{if(!z?.length)continue;H.push(F1(...z.map((w)=>F$($,w,W,X,Y,U))));continue}case"NOT":{if(z===void 0)continue;let w=F$($,z,W,X,Y,U);if(!w)continue;H.push(TW(w));continue}default:{if($[f1][G]){let Q=Nk($,G),N=IG(Q,z);if(N)H.push(N);continue}let w=W[G];if(!w)throw new t1({message:`Unknown relational filter field: "${G}"`});let D=A1(w.targetTable,`f${U}`),K=w.throughTable?A1(w.throughTable,`ft${U}`):void 0,O=X[w.targetTableName],{filter:F,joinCondition:M}=J7(Y,w,$,D,K),A=typeof z==="boolean"?void 0:F$(D,z,O.relations,X,Y,U+1),I=F1(F,A),P=K?E`(select * from ${X6(D)} inner join ${X6(K)} on ${M}${E` where ${I}`.if(I)} limit 1)`:E`(select * from ${X6(D)}${E` where ${I}`.if(I)} limit 1)`;if(I)H.push((z?Q2:A2)(P))}}}return F1(...H)}function yW($,J){if(typeof J==="function"){let X=J($,sl);return j(X,u)?X:Array.isArray(X)?X.length?E.join(X.map((Y)=>j(Y,u)?Y:L5(Y)),E`, `):void 0:j(X,G0)?L5(X):void 0}let W=Object.entries(J).filter(([X,Y])=>Y);if(!W.length)return;return E.join(W.map(([X,Y])=>(Y==="asc"?L5:P5)(Nk($,X))),E`, `)}function cW($,J){let W=[],X=[];for(let[Y,U]of Object.entries(J)){if(!U)continue;let Z=typeof U==="function"?U($,{sql:mW.sql}):U,H=E`(${Z.getSQL()}) as ${E.identifier(Y)}`;H.decoder=Z.getSQL().decoder,W.push(H),X.push({key:Y,field:H})}return{sql:W.length?E.join(W,E`, `):void 0,selection:X}}function J7($,J,W,X,Y){if(J.through){let H=J.sourceColumns.map((z,w)=>{let D=J.through.source[w];return y1(E`${W}.${E.identifier($.getColumnCasing(z))}`,E`${Y}.${E.identifier(j(D._.column,G0)?$.getColumnCasing(D._.column):D._.key)}`)}),G=J.targetColumns.map((z,w)=>{let D=J.through.target[w];return y1(E`${Y}.${E.identifier(j(D._.column,G0)?$.getColumnCasing(D._.column):D._.key)}`,E`${X}.${E.identifier($.getColumnCasing(z))}`)});return{filter:F1(J.where?F$(J.isReversed?W:X,J.where):void 0,...H),joinCondition:F1(...G)}}let U=J.sourceColumns.map((H,G)=>{let z=J.targetColumns[G];return y1(E`${W}.${E.identifier($.getColumnCasing(H))}`,E`${X}.${E.identifier($.getColumnCasing(z))}`)});return{filter:F1(...U,J.where?F$(J.isReversed?W:X,J.where):void 0)}}function X6($){return E`${$[N9]?E`${E`${E.identifier($[v6]??"")}.`.if($[v6])}${E.identifier($[nJ])} as ${$}`:$}`}function Bk($){return E`count(${$||E.raw("*")})`.mapWith(Number)}class I2 extends j1{static[B]="PgViewBase"}class W7{static[B]="PgDialect";casing;constructor($){this.casing=new sJ($?.casing)}async migrate($,J,W){let X=typeof W==="string"?"__drizzle_migrations":W.migrationsTable??"__drizzle_migrations",Y=typeof W==="string"?"drizzle":W.migrationsSchema??"drizzle",U=E`
			CREATE TABLE IF NOT EXISTS ${E.identifier(Y)}.${E.identifier(X)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at bigint
			)
		`;await J.execute(E`CREATE SCHEMA IF NOT EXISTS ${E.identifier(Y)}`),await J.execute(U);let H=(await J.all(E`select id, hash, created_at from ${E.identifier(Y)}.${E.identifier(X)} order by created_at desc limit 1`))[0];await J.transaction(async(G)=>{for await(let z of $)if(!H||Number(H.created_at)<z.folderMillis){for(let w of z.sql)await G.execute(E.raw(w));await G.execute(E`insert into ${E.identifier(Y)}.${E.identifier(X)} ("hash", "created_at") values(${z.hash}, ${z.folderMillis})`)}})}escapeName($){return`"${$}"`}escapeParam($){return`$${$+1}`}escapeString($){return`'${$.replace(/'/g,"''")}'`}buildWithCTE($){if(!$?.length)return;let J=[E`with `];for(let[W,X]of $.entries())if(J.push(E`${E.identifier(X._.alias)} as (${X._.sql})`),W<$.length-1)J.push(E`, `);return J.push(E` `),E.join(J)}buildDeleteQuery({table:$,where:J,returning:W,withList:X}){let Y=this.buildWithCTE(X),U=W?E` returning ${this.buildSelection(W,{isSingleTable:!0})}`:void 0,Z=J?E` where ${J}`:void 0;return E`${Y}delete from ${$}${Z}${U}`}buildUpdateSet($,J){let W=$[y.Symbol.Columns],X=Object.keys(W).filter((U)=>J[U]!==void 0||W[U]?.onUpdateFn!==void 0),Y=X.length;return E.join(X.flatMap((U,Z)=>{let H=W[U],G=J[U]??E.param(H.onUpdateFn(),H),z=E`${E.identifier(this.casing.getColumnCasing(H))} = ${G}`;if(Z<Y-1)return[z,E.raw(", ")];return[z]}))}buildUpdateQuery({table:$,set:J,where:W,returning:X,withList:Y,from:U,joins:Z}){let H=this.buildWithCTE(Y),G=$[W4.Symbol.Name],z=$[W4.Symbol.Schema],w=$[W4.Symbol.OriginalName],D=G===w?void 0:G,K=E`${z?E`${E.identifier(z)}.`:void 0}${E.identifier(w)}${D&&E` ${E.identifier(D)}`}`,O=this.buildUpdateSet($,J),F=U&&E.join([E.raw(" from "),this.buildFromTable(U)]),M=this.buildJoins(Z),A=X?E` returning ${this.buildSelection(X,{isSingleTable:!U})}`:void 0,I=W?E` where ${W}`:void 0;return E`${H}update ${K} set ${O}${F}${M}${I}${A}`}buildSelection($,{isSingleTable:J=!1}={}){let W=$.length,X=$.flatMap(({field:Y},U)=>{let Z=[];if(j(Y,u.Aliased)&&Y.isSelectionField)Z.push(E.identifier(Y.fieldAlias));else if(j(Y,u.Aliased)||j(Y,u)){let H=j(Y,u.Aliased)?Y.sql:Y;if(J)Z.push(new u(H.queryChunks.map((G)=>{if(j(G,$0))return E.identifier(this.casing.getColumnCasing(G));return G})));else Z.push(H);if(j(Y,u.Aliased))Z.push(E` as ${E.identifier(Y.fieldAlias)}`)}else if(j(Y,G0))if(J)Z.push(E.identifier(this.casing.getColumnCasing(Y)));else Z.push(Y);if(U<W-1)Z.push(E`, `);return Z});return E.join(X)}buildJoins($){if(!$||$.length===0)return;let J=[];for(let[W,X]of $.entries()){if(W===0)J.push(E` `);let Y=X.table,U=X.lateral?E` lateral`:void 0,Z=X.on?E` on ${X.on}`:void 0;if(j(Y,W4)){let H=Y[W4.Symbol.Name],G=Y[W4.Symbol.Schema],z=Y[W4.Symbol.OriginalName],w=H===z?void 0:X.alias;J.push(E`${E.raw(X.joinType)} join${U} ${G?E`${E.identifier(G)}.`:void 0}${E.identifier(z)}${w&&E` ${E.identifier(w)}`}${Z}`)}else if(j(Y,j1)){let H=Y[R0].name,G=Y[R0].schema,z=Y[R0].originalName,w=H===z?void 0:X.alias;J.push(E`${E.raw(X.joinType)} join${U} ${G?E`${E.identifier(G)}.`:void 0}${E.identifier(z)}${w&&E` ${E.identifier(w)}`}${Z}`)}else J.push(E`${E.raw(X.joinType)} join${U} ${Y}${Z}`);if(W<$.length-1)J.push(E` `)}return E.join(J)}buildFromTable($){if(j($,y)&&$[y.Symbol.IsAlias]){let J=E`${E.identifier($[y.Symbol.OriginalName])}`;if($[y.Symbol.Schema])J=E`${E.identifier($[y.Symbol.Schema])}.${J}`;return E`${J} ${E.identifier($[y.Symbol.Name])}`}return $}buildSelectQuery({withList:$,fields:J,fieldsFlat:W,where:X,having:Y,table:U,joins:Z,orderBy:H,groupBy:G,limit:z,offset:w,lockingClause:D,distinct:K,setOperators:O}){let F=W??k1(J);for(let x of F)if(j(x.field,G0)&&m1(x.field.table)!==(j(U,C0)?U._.alias:j(U,I2)?U[R0].name:j(U,u)?void 0:m1(U))&&!((b)=>Z?.some(({alias:r})=>r===(b[y.Symbol.IsAlias]?m1(b):b[y.Symbol.BaseName])))(x.field.table)){let b=m1(x.field.table);throw Error(`Your "${x.path.join("->")}" field references a column "${b}"."${x.field.name}", but the table "${b}" is not part of the query! Did you forget to join it?`)}let M=!Z||Z.length===0,A=this.buildWithCTE($),I;if(K)I=K===!0?E` distinct`:E` distinct on (${E.join(K.on,E`, `)})`;let P=this.buildSelection(F,{isSingleTable:M}),Q=this.buildFromTable(U),N=this.buildJoins(Z),_=X?E` where ${X}`:void 0,L=Y?E` having ${Y}`:void 0,R;if(H&&H.length>0)R=E` order by ${E.join(H,E`, `)}`;let S;if(G&&G.length>0)S=E` group by ${E.join(G,E`, `)}`;let k=typeof z==="object"||typeof z==="number"&&z>=0?E` limit ${z}`:void 0,T=w?E` offset ${w}`:void 0,q=E.empty();if(D){let x=E` for ${E.raw(D.strength)}`;if(D.config.of)x.append(E` of ${E.join(Array.isArray(D.config.of)?D.config.of:[D.config.of],E`, `)}`);if(D.config.noWait)x.append(E` nowait`);else if(D.config.skipLocked)x.append(E` skip locked`);q.append(x)}let h=E`${A}select${I} ${P} from ${Q}${N}${_}${S}${L}${R}${k}${T}${q}`;if(O.length>0)return this.buildSetOperations(h,O);return h}buildSetOperations($,J){let[W,...X]=J;if(!W)throw Error("Cannot pass undefined values to any set operator");if(X.length===0)return this.buildSetOperationQuery({leftSelect:$,setOperator:W});return this.buildSetOperations(this.buildSetOperationQuery({leftSelect:$,setOperator:W}),X)}buildSetOperationQuery({leftSelect:$,setOperator:{type:J,isAll:W,rightSelect:X,limit:Y,orderBy:U,offset:Z}}){let H=E`(${$.getSQL()}) `,G=E`(${X.getSQL()})`,z;if(U&&U.length>0){let O=[];for(let F of U)if(j(F,$0))O.push(E.identifier(F.name));else if(j(F,u)){for(let M=0;M<F.queryChunks.length;M++){let A=F.queryChunks[M];if(j(A,$0))F.queryChunks[M]=E.identifier(A.name)}O.push(E`${F}`)}else O.push(E`${F}`);z=E` order by ${E.join(O,E`, `)} `}let w=typeof Y==="object"||typeof Y==="number"&&Y>=0?E` limit ${Y}`:void 0,D=E.raw(`${J} ${W?"all ":""}`),K=Z?E` offset ${Z}`:void 0;return E`${H}${D}${G}${z}${w}${K}`}buildInsertQuery({table:$,values:J,onConflict:W,returning:X,withList:Y,select:U,overridingSystemValue_:Z}){let H=[],G=$[y.Symbol.Columns],z=Object.entries(G).filter(([A,I])=>!I.shouldDisableInsert()),w=z.map(([,A])=>E.identifier(this.casing.getColumnCasing(A)));if(U){let A=J;if(j(A,u))H.push(A);else H.push(A.getSQL())}else{let A=J;H.push(E.raw("values "));for(let[I,P]of A.entries()){let Q=[];for(let[N,_]of z){let L=P[N];if(L===void 0||j(L,J4)&&L.value===void 0)if(_.defaultFn!==void 0){let R=_.defaultFn(),S=j(R,u)?R:E.param(R,_);Q.push(S)}else if(!_.default&&_.onUpdateFn!==void 0){let R=_.onUpdateFn(),S=j(R,u)?R:E.param(R,_);Q.push(S)}else Q.push(E`default`);else Q.push(L)}if(H.push(Q),I<A.length-1)H.push(E`, `)}}let D=this.buildWithCTE(Y),K=E.join(H),O=X?E` returning ${this.buildSelection(X,{isSingleTable:!0})}`:void 0,F=W?E` on conflict ${W}`:void 0,M=Z===!0?E`overriding system value `:void 0;return E`${D}insert into ${$} ${w} ${M}${K}${F}${O}`}buildRefreshMaterializedViewQuery({view:$,concurrently:J,withNoData:W}){let X=J?E` concurrently`:void 0,Y=W?E` with no data`:void 0;return E`refresh materialized view${X} ${$}${Y}`}prepareTyping($){if(j($,HG)||j($,ZG))return"json";else if(j($,GG))return"decimal";else if(j($,zG))return"time";else if(j($,wG)||j($,DG))return"timestamp";else if(j($,YG)||j($,UG))return"date";else if(j($,KG))return"uuid";else return"none"}sqlToQuery($,J){return $.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping,invokeSource:J})}_buildRelationalQuery({fullSchema:$,schema:J,tableNamesMap:W,table:X,tableConfig:Y,queryConfig:U,tableAlias:Z,nestedQueryRelation:H,joinOn:G}){let z=[],w,D,K=[],O,F=[];if(U===!0)z=Object.entries(Y.columns).map(([I,P])=>({dbKey:P.name,tsKey:I,field:y0(P,Z),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let A=Object.fromEntries(Object.entries(Y.columns).map(([L,R])=>[L,y0(R,Z)]));if(U.where){let L=typeof U.where==="function"?U.where(A,tJ()):U.where;O=L&&J6(L,Z)}let I=[],P=[];if(U.columns){let L=!1;for(let[R,S]of Object.entries(U.columns)){if(S===void 0)continue;if(R in Y.columns){if(!L&&S===!0)L=!0;P.push(R)}}if(P.length>0)P=L?P.filter((R)=>U.columns?.[R]===!0):Object.keys(Y.columns).filter((R)=>!P.includes(R))}else P=Object.keys(Y.columns);for(let L of P){let R=Y.columns[L];I.push({tsKey:L,value:R})}let Q=[];if(U.with)Q=Object.entries(U.with).filter((L)=>!!L[1]).map(([L,R])=>({tsKey:L,queryConfig:R,relation:Y.relations[L]}));let N;if(U.extras){N=typeof U.extras==="function"?U.extras(A,{sql:E}):U.extras;for(let[L,R]of Object.entries(N))I.push({tsKey:L,value:B9(R,Z)})}for(let{tsKey:L,value:R}of I)z.push({dbKey:j(R,u.Aliased)?R.fieldAlias:Y.columns[L].name,tsKey:L,field:j(R,G0)?y0(R,Z):R,relationTableTsKey:void 0,isJson:!1,selection:[]});let _=typeof U.orderBy==="function"?U.orderBy(A,aJ()):U.orderBy??[];if(!Array.isArray(_))_=[_];K=_.map((L)=>{if(j(L,G0))return y0(L,Z);return J6(L,Z)}),w=U.limit,D=U.offset;for(let{tsKey:L,queryConfig:R,relation:S}of Q){let k=oJ(J,W,S),T=C6(S.referencedTable),q=W[T],h=`${Z}_${L}`,x=F1(...k.fields.map((d,X0)=>y1(y0(k.references[X0],h),y0(d,Z)))),b=this._buildRelationalQuery({fullSchema:$,schema:J,tableNamesMap:W,table:$[q],tableConfig:J[q],queryConfig:j(S,W6)?R===!0?{limit:1}:{...R,limit:1}:R,tableAlias:h,joinOn:x,nestedQueryRelation:S}),r=E`${E.identifier(h)}.${E.identifier("data")}`.as(L);F.push({on:E`true`,table:new C0(b.sql,{},h),alias:h,joinType:"left",lateral:!0}),z.push({dbKey:L,tsKey:L,field:r,relationTableTsKey:q,isJson:!0,selection:b.selection})}}if(z.length===0)throw new t1({message:`No fields selected for table "${Y.tsName}" ("${Z}")`});let M;if(O=F1(G,O),H){let A=E`json_build_array(${E.join(z.map(({field:Q,tsKey:N,isJson:_})=>_?E`${E.identifier(`${Z}_${N}`)}.${E.identifier("data")}`:j(Q,u.Aliased)?Q.sql:Q),E`, `)})`;if(j(H,$8))A=E`coalesce(json_agg(${A}${K.length>0?E` order by ${E.join(K,E`, `)}`:void 0}), '[]'::json)`;let I=[{dbKey:"data",tsKey:"data",field:A.as("data"),isJson:!0,relationTableTsKey:Y.tsName,selection:z}];if(w!==void 0||D!==void 0||K.length>0)M=this.buildSelectQuery({table:A1(X,Z),fields:{},fieldsFlat:[{path:[],field:E.raw("*")}],where:O,limit:w,offset:D,orderBy:K,setOperators:[]}),O=void 0,w=void 0,D=void 0,K=[];else M=A1(X,Z);M=this.buildSelectQuery({table:j(M,W4)?M:new C0(M,{},Z),fields:{},fieldsFlat:I.map(({field:Q})=>({path:[],field:j(Q,G0)?y0(Q,Z):Q})),joins:F,where:O,limit:w,offset:D,orderBy:K,setOperators:[]})}else M=this.buildSelectQuery({table:A1(X,Z),fields:{},fieldsFlat:z.map(({field:A})=>({path:[],field:j(A,G0)?y0(A,Z):A})),joins:F,where:O,limit:w,offset:D,orderBy:K,setOperators:[]});return{tableTsKey:Y.tsName,sql:M,selection:z}}nestedSelectionerror(){throw new t1({message:"Views with nested selections are not supported by the relational query builder"})}buildRqbColumn($,J,W){if(j(J,G0)){let X=E`${$}.${E.identifier(this.casing.getColumnCasing(J))}`,Y=J.columnType,U=J,Z=0;while(j(U,E2))U=U.baseColumn,Y=U.columnType,++Z;switch(Y){case"PgNumeric":case"PgNumericNumber":case"PgNumericBigInt":case"PgBigInt64":case"PgBigSerial64":case"PgTimestampString":case"PgGeometry":case"PgGeometryObject":case"PgBytea":{let H="[]".repeat(Z);return E`${X}::text${E.raw(H).if(H)} as ${E.identifier(W)}`}case"PgCustomColumn":return E`${U.jsonSelectIdentifier(X,E,Z>0?Z:void 0)} as ${E.identifier(W)}`;default:return E`${X} as ${E.identifier(W)}`}}return E`${$}.${j(J,u.Aliased)?E.identifier(J.fieldAlias):Q5(J)?E.identifier(W):this.nestedSelectionerror()} as ${E.identifier(W)}`}unwrapAllColumns=($,J)=>{return E.join(Object.entries($[f1]).map(([W,X])=>{return J.push({key:W,field:X}),this.buildRqbColumn($,X,W)}),E`, `)};buildColumns=($,J,W)=>W?.columns?(()=>{let X=Object.entries(W.columns),Y=$[f1],U=[],Z;for(let[H,G]of X){if(G===void 0)continue;if(Z=Z||G,G){let z=Y[H];U.push(this.buildRqbColumn($,z,H)),J.push({key:H,field:z})}}if(Z===!1)for(let[H,G]of Object.entries(Y)){if(W.columns[H]===!1)continue;U.push(this.buildRqbColumn($,G,H)),J.push({key:H,field:G})}return U.length?E.join(U,E`, `):void 0})():this.unwrapAllColumns($,J);buildRelationalQuery({schema:$,table:J,tableConfig:W,queryConfig:X,relationWhere:Y,mode:U,errorPath:Z,depth:H,throughJoin:G}){let z=[],w=U==="first",D=X===!0?void 0:X,K=Z??"",O=H??0;if(!O)J=A1(J,`d${O}`);let F=w?1:D?.limit,M=D?.offset,A=D?.where&&Y?F1(F$(J,D.where,W.relations,$,this.casing),Y):D?.where?F$(J,D.where,W.relations,$,this.casing):Y,I=D?.orderBy?yW(J,D.orderBy):void 0,P=this.buildColumns(J,z,D),Q=D?.extras?cW(J,D.extras):void 0;if(Q)z.push(...Q.selection);let N=P?[P]:[],_=D?(()=>{let{with:S}=D;if(!S)return;let k=Object.entries(S).filter(([T,q])=>q);if(!k.length)return;return E.join(k.map(([T,q])=>{let h=W.relations[T],x=j(h,N5),b=A1(h.targetTable,`d${O+1}`),r=h.throughTable?A1(h.throughTable,`tr${O}`):void 0,{filter:d,joinCondition:X0}=J7(this.casing,h,J,b,r);N.push(E`${E.identifier(T)}.${E.identifier("r")} as ${E.identifier(T)}`);let i=r?E` inner join ${X6(r)} on ${X0}`:void 0,K0=this.buildRelationalQuery({table:b,mode:x?"first":"many",schema:$,queryConfig:q,tableConfig:$[h.targetTableName],relationWhere:d,errorPath:`${K.length?`${K}.`:""}${T}`,depth:O+1,throughJoin:i});return z.push({field:b,key:T,selection:K0.selection,isArray:!x,isOptional:(h.optional??!1)||q!==!0&&!!q.where}),E`left join lateral(select ${x?E`row_to_json(${E.identifier("t")}.*) ${E.identifier("r")}`:E`coalesce(json_agg(row_to_json(${E.identifier("t")}.*)), '[]') as ${E.identifier("r")}`} from (${K0.sql}) as ${E.identifier("t")}) as ${E.identifier(T)} on true`}),E` `)})():void 0;if(Q?.sql)N.push(Q.sql);if(!N.length)throw new t1({message:`No fields selected for table "${W.name}"${K?` ("${K}")`:""}`});let L=E.join(N.filter((S)=>S!==void 0),E`, `);return{sql:E`select ${L} from ${X6(J)}${G}${E` ${_}`.if(_)}${E` where ${A}`.if(A)}${E` order by ${I}`.if(I)}${E` limit ${F}`.if(F!==void 0)}${E` offset ${M}`.if(M!==void 0)}`,selection:z}}}class X7{static[B]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}}class E${static[B]="PgSelectBuilder";fields;session;dialect;withList=[];distinct;constructor($){if(this.fields=$.fields,this.session=$.session,this.dialect=$.dialect,$.withList)this.withList=$.withList;this.distinct=$.distinct}authToken;setToken($){return this.authToken=$,this}from($){let J=!!this.fields,W=$,X;if(this.fields)X=this.fields;else if(j(W,C0))X=Object.fromEntries(Object.keys(W._.selectedFields).map((Y)=>[Y,W[Y]]));else if(j(W,I2))X=W[R0].selectedFields;else if(j(W,u))X={};else X=q6(W);return new RO({table:W,fields:X,isPartialSelect:J,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct}).setToken(this.authToken)}}class Rk extends X7{static[B]="PgSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;cacheConfig=void 0;usedTables=new Set;constructor({table:$,fields:J,isPartialSelect:W,session:X,dialect:Y,withList:U,distinct:Z}){super();this.config={withList:U,table:$,fields:{...J},distinct:Z,setOperators:[]},this.isPartialSelect=W,this.session=X,this.dialect=Y,this._={selectedFields:J,config:this.config},this.tableName=m4($),this.joinsNotNullableMap=typeof this.tableName==="string"?{[this.tableName]:!0}:{};for(let H of J8($))this.usedTables.add(H)}getUsedTables(){return[...this.usedTables]}createJoin($,J){return(W,X)=>{let Y=this.tableName,U=m4(W);for(let Z of J8(W))this.usedTables.add(Z);if(typeof U==="string"&&this.config.joins?.some((Z)=>Z.alias===U))throw Error(`Alias "${U}" is already used in this query`);if(!this.isPartialSelect){if(Object.keys(this.joinsNotNullableMap).length===1&&typeof Y==="string")this.config.fields={[Y]:this.config.fields};if(typeof U==="string"&&!j(W,u)){let Z=j(W,C0)?W._.selectedFields:j(W,j1)?W[R0].selectedFields:W[y.Symbol.Columns];this.config.fields[U]=Z}}if(typeof X==="function")X=X(new Proxy(this.config.fields,new O0({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})));if(!this.config.joins)this.config.joins=[];if(this.config.joins.push({on:X,table:W,joinType:$,alias:U,lateral:J}),typeof U==="string")switch($){case"left":{this.joinsNotNullableMap[U]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([Z])=>[Z,!1])),this.joinsNotNullableMap[U]=!0;break}case"cross":case"inner":{this.joinsNotNullableMap[U]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([Z])=>[Z,!1])),this.joinsNotNullableMap[U]=!1;break}}return this}}leftJoin=this.createJoin("left",!1);leftJoinLateral=this.createJoin("left",!0);rightJoin=this.createJoin("right",!1);innerJoin=this.createJoin("inner",!1);innerJoinLateral=this.createJoin("inner",!0);fullJoin=this.createJoin("full",!1);crossJoin=this.createJoin("cross",!1);crossJoinLateral=this.createJoin("cross",!0);createSetOperator($,J){return(W)=>{let X=typeof W==="function"?W(Jr()):W;if(!O$(this.getSelectedFields(),X.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:$,isAll:J,rightSelect:X}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators($){return this.config.setOperators.push(...$),this}where($){if(typeof $==="function")$=$(new Proxy(this.config.fields,new O0({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})));return this.config.where=$,this}having($){if(typeof $==="function")$=$(new Proxy(this.config.fields,new O0({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})));return this.config.having=$,this}groupBy(...$){if(typeof $[0]==="function"){let J=$[0](new Proxy(this.config.fields,new O0({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(J)?J:[J]}else this.config.groupBy=$;return this}orderBy(...$){if(typeof $[0]==="function"){let J=$[0](new Proxy(this.config.fields,new O0({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),W=Array.isArray(J)?J:[J];if(this.config.setOperators.length>0)this.config.setOperators.at(-1).orderBy=W;else this.config.orderBy=W}else{let J=$;if(this.config.setOperators.length>0)this.config.setOperators.at(-1).orderBy=J;else this.config.orderBy=J}return this}limit($){if(this.config.setOperators.length>0)this.config.setOperators.at(-1).limit=$;else this.config.limit=$;return this}offset($){if(this.config.setOperators.length>0)this.config.setOperators.at(-1).offset=$;else this.config.offset=$;return this}for($,J={}){return this.config.lockingClause={strength:$,config:J},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:$,...J}=this.dialect.sqlToQuery(this.getSQL());return J}as($){let J=[];if(J.push(...J8(this.config.table)),this.config.joins)for(let W of this.config.joins)J.push(...J8(W.table));return new Proxy(new C0(this.getSQL(),this.config.fields,$,!1,[...new Set(J)]),new O0({alias:$,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new O0({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}$withCache($){return this.cacheConfig=$===void 0?{config:{},enable:!0,autoInvalidate:!0}:$===!1?{enable:!1}:{enable:!0,autoInvalidate:!0,...$},this}}class RO extends Rk{static[B]="PgSelect";_prepare($){let{session:J,config:W,dialect:X,joinsNotNullableMap:Y,authToken:U,cacheConfig:Z,usedTables:H}=this;if(!J)throw Error("Cannot execute a query on a query builder. Please use a database instance instead.");let{fields:G}=W;return t0.startActiveSpan("drizzle.prepareQuery",()=>{let z=k1(G),w=J.prepareQuery(X.sqlToQuery(this.getSQL()),z,$,!0,void 0,{type:"select",tables:[...H]},Z);return w.joinsNotNullableMap=Y,w.setToken(U)})}prepare($){return this._prepare($)}authToken;setToken($){return this.authToken=$,this}execute=($)=>{return t0.startActiveSpan("drizzle.operation",()=>{return this._prepare().execute($,this.authToken)})}}kW(RO,[j0]);function uW($,J){return(W,X,...Y)=>{let U=[X,...Y].map((Z)=>({type:$,isAll:J,rightSelect:Z}));for(let Z of U)if(!O$(W.getSelectedFields(),Z.rightSelect.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return W.addSetOperators(U)}}var Jr=()=>({union:Wr,unionAll:Xr,intersect:Yr,intersectAll:Ur,except:Zr,exceptAll:Hr}),Wr=uW("union",!1),Xr=uW("union",!0),Yr=uW("intersect",!1),Ur=uW("intersect",!0),Zr=uW("except",!1),Hr=uW("except",!0);class L2{static[B]="PgQueryBuilder";dialect;dialectConfig;constructor($){this.dialect=j($,W7)?$:void 0,this.dialectConfig=j($,W7)?void 0:$}$with=($,J)=>{let W=this;return{as:(Y)=>{if(typeof Y==="function")Y=Y(W);return new Proxy(new $6(Y.getSQL(),J??("getSelectedFields"in Y?Y.getSelectedFields()??{}:{}),$,!0),new O0({alias:$,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}}};with(...$){let J=this;function W(U){return new E$({fields:U??void 0,session:void 0,dialect:J.getDialect(),withList:$})}function X(U){return new E$({fields:U??void 0,session:void 0,dialect:J.getDialect(),distinct:!0})}function Y(U,Z){return new E$({fields:Z??void 0,session:void 0,dialect:J.getDialect(),distinct:{on:U}})}return{select:W,selectDistinct:X,selectDistinctOn:Y}}select($){return new E$({fields:$??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct($){return new E$({fields:$??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn($,J){return new E$({fields:J??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:$}})}getDialect(){if(!this.dialect)this.dialect=new W7(this.dialectConfig);return this.dialect}}function Sk($){let J=Object.values($[y.Symbol.Columns]),W=[],X=[],Y=[],U=Object.values($[W4.Symbol.InlineForeignKeys]),Z=[],H=$[y.Symbol.Name],G=$[y.Symbol.Schema],z=[],w=$[W4.Symbol.EnableRLS],D=$[W4.Symbol.ExtraConfigBuilder];if(D!==void 0){let K=D($[y.Symbol.ExtraConfigColumns]),O=Array.isArray(K)?K.flat(1):Object.values(K);for(let F of O)if(j(F,_O))W.push(F.build($));else if(j(F,IO))X.push(F.build($));else if(j(F,FO))Z.push(F.build($));else if(j(F,V2))Y.push(F.build($));else if(j(F,F2))U.push(F.build($));else if(j(F,NO))z.push(F)}return{columns:J,indexes:W,foreignKeys:U,checks:X,primaryKeys:Y,uniqueConstraints:Z,name:H,schema:G,policies:z,enableRLS:w}}function J8($){if(j($,W4))return[$[v6]?`${$[v6]}.${$[y.Symbol.BaseName]}`:$[y.Symbol.BaseName]];if(j($,C0))return $._.usedTables??[];if(j($,u))return $.usedTables??[];return[]}class _G extends j0{constructor($,J,W,X){super();this.session=J,this.dialect=W,this.config={table:$,withList:X}}static[B]="PgDelete";config;cacheConfig;where($){return this.config.where=$,this}returning($=this.config.table[y.Symbol.Columns]){return this.config.returningFields=$,this.config.returning=k1($),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:$,...J}=this.dialect.sqlToQuery(this.getSQL());return J}_prepare($){return t0.startActiveSpan("drizzle.prepareQuery",()=>{return this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,$,!0,void 0,{type:"delete",tables:J8(this.config.table)},this.cacheConfig)})}prepare($){return this._prepare($)}authToken;setToken($){return this.authToken=$,this}execute=($)=>{return t0.startActiveSpan("drizzle.operation",()=>{return this._prepare().execute($,this.authToken)})};getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new O0({alias:m1(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}class NG{constructor($,J,W,X,Y){this.table=$,this.session=J,this.dialect=W,this.withList=X,this.overridingSystemValue_=Y}static[B]="PgInsertBuilder";authToken;setToken($){return this.authToken=$,this}overridingSystemValue(){return this.overridingSystemValue_=!0,this}values($){if($=Array.isArray($)?$:[$],$.length===0)throw Error("values() must be called with at least one value");let J=$.map((W)=>{let X={},Y=this.table[y.Symbol.Columns];for(let U of Object.keys(W)){let Z=W[U];X[U]=j(Z,u)?Z:new J4(Z,Y[U])}return X});return new SO(this.table,J,this.session,this.dialect,this.withList,!1,this.overridingSystemValue_).setToken(this.authToken)}select($){let J=typeof $==="function"?$(new L2):$;if(!j(J,u)&&!O$(this.table[f1],J._.selectedFields))throw Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new SO(this.table,J,this.session,this.dialect,this.withList,!0)}}class SO extends j0{constructor($,J,W,X,Y,U,Z){super();this.session=W,this.dialect=X,this.config={table:$,values:J,withList:Y,select:U,overridingSystemValue_:Z}}static[B]="PgInsert";config;cacheConfig;returning($=this.config.table[y.Symbol.Columns]){return this.config.returningFields=$,this.config.returning=k1($),this}onConflictDoNothing($={}){if($.target===void 0)this.config.onConflict=E`do nothing`;else{let J="";J=Array.isArray($.target)?$.target.map((X)=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(X))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing($.target));let W=$.where?E` where ${$.where}`:void 0;this.config.onConflict=E`(${E.raw(J)})${W} do nothing`}return this}onConflictDoUpdate($){if($.where&&($.targetWhere||$.setWhere))throw Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');let J=$.where?E` where ${$.where}`:void 0,W=$.targetWhere?E` where ${$.targetWhere}`:void 0,X=$.setWhere?E` where ${$.setWhere}`:void 0,Y=this.dialect.buildUpdateSet(this.config.table,T6(this.config.table,$.set)),U="";return U=Array.isArray($.target)?$.target.map((Z)=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(Z))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing($.target)),this.config.onConflict=E`(${E.raw(U)})${W} do update set ${Y}${J}${X}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:$,...J}=this.dialect.sqlToQuery(this.getSQL());return J}_prepare($){return t0.startActiveSpan("drizzle.prepareQuery",()=>{return this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,$,!0,void 0,{type:"insert",tables:J8(this.config.table)},this.cacheConfig)})}prepare($){return this._prepare($)}authToken;setToken($){return this.authToken=$,this}execute=($)=>{return t0.startActiveSpan("drizzle.operation",()=>{return this._prepare().execute($,this.authToken)})};getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new O0({alias:m1(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}class jO extends j0{constructor($,J,W){super();this.session=J,this.dialect=W,this.config={view:$}}static[B]="PgRefreshMaterializedView";config;concurrently(){if(this.config.withNoData!==void 0)throw Error("Cannot use concurrently and withNoData together");return this.config.concurrently=!0,this}withNoData(){if(this.config.concurrently!==void 0)throw Error("Cannot use concurrently and withNoData together");return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){let{typings:$,...J}=this.dialect.sqlToQuery(this.getSQL());return J}_prepare($){return t0.startActiveSpan("drizzle.prepareQuery",()=>{return this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,$,!0)})}prepare($){return this._prepare($)}authToken;setToken($){return this.authToken=$,this}execute=($)=>{return t0.startActiveSpan("drizzle.operation",()=>{return this._prepare().execute($,this.authToken)})}}class BG{constructor($,J,W,X){this.table=$,this.session=J,this.dialect=W,this.withList=X}static[B]="PgUpdateBuilder";authToken;setToken($){return this.authToken=$,this}set($){return new jk(this.table,T6(this.table,$),this.session,this.dialect,this.withList).setToken(this.authToken)}}class jk extends j0{constructor($,J,W,X,Y){super();this.session=W,this.dialect=X,this.config={set:J,table:$,withList:Y,joins:[]},this.tableName=m4($),this.joinsNotNullableMap=typeof this.tableName==="string"?{[this.tableName]:!0}:{}}static[B]="PgUpdate";config;tableName;joinsNotNullableMap;cacheConfig;from($){let J=$,W=m4(J);if(typeof W==="string")this.joinsNotNullableMap[W]=!0;return this.config.from=J,this}getTableLikeFields($){if(j($,W4))return $[y.Symbol.Columns];else if(j($,C0))return $._.selectedFields;return $[R0].selectedFields}createJoin($){return(J,W)=>{let X=m4(J);if(typeof X==="string"&&this.config.joins.some((Y)=>Y.alias===X))throw Error(`Alias "${X}" is already used in this query`);if(typeof W==="function"){let Y=this.config.from&&!j(this.config.from,u)?this.getTableLikeFields(this.config.from):void 0;W=W(new Proxy(this.config.table[y.Symbol.Columns],new O0({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),Y&&new Proxy(Y,new O0({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}if(this.config.joins.push({on:W,table:J,joinType:$,alias:X}),typeof X==="string")switch($){case"left":{this.joinsNotNullableMap[X]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([Y])=>[Y,!1])),this.joinsNotNullableMap[X]=!0;break}case"inner":{this.joinsNotNullableMap[X]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([Y])=>[Y,!1])),this.joinsNotNullableMap[X]=!1;break}}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where($){return this.config.where=$,this}returning($){if(!$){if($=Object.assign({},this.config.table[y.Symbol.Columns]),this.config.from){let J=m4(this.config.from);if(typeof J==="string"&&this.config.from&&!j(this.config.from,u)){let W=this.getTableLikeFields(this.config.from);$[J]=W}for(let W of this.config.joins){let X=m4(W.table);if(typeof X==="string"&&!j(W.table,u)){let Y=this.getTableLikeFields(W.table);$[X]=Y}}}}return this.config.returningFields=$,this.config.returning=k1($),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:$,...J}=this.dialect.sqlToQuery(this.getSQL());return J}_prepare($){let J=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,$,!0,void 0,{type:"insert",tables:J8(this.config.table)},this.cacheConfig);return J.joinsNotNullableMap=this.joinsNotNullableMap,J}prepare($){return this._prepare($)}authToken;setToken($){return this.authToken=$,this}execute=($)=>{return this._prepare().execute($,this.authToken)};getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new O0({alias:m1(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}class vO{constructor($,J,W,X,Y,U,Z){this.fullSchema=$,this.schema=J,this.tableNamesMap=W,this.table=X,this.tableConfig=Y,this.dialect=U,this.session=Z}static[B]="PgRelationalQueryBuilder";findMany($){return new kO(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,$?$:{},"many")}findFirst($){return new kO(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,$?{...$,limit:1}:{limit:1},"first")}}class kO extends j0{constructor($,J,W,X,Y,U,Z,H,G){super();this.fullSchema=$,this.schema=J,this.tableNamesMap=W,this.table=X,this.tableConfig=Y,this.dialect=U,this.session=Z,this.config=H,this.mode=G}static[B]="PgRelationalQuery";_prepare($){return t0.startActiveSpan("drizzle.prepareQuery",()=>{let{query:J,builtQuery:W}=this._toSQL();return this.session.prepareQuery(W,void 0,$,!0,(X,Y)=>{let U=X.map((Z)=>C9(this.schema,this.tableConfig,Z,J.selection,Y));if(this.mode==="first")return U[0];return U})})}prepare($){return this._prepare($)}_getQuery(){return this.dialect._buildRelationalQuery({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}getSQL(){return this._getQuery().sql}_toSQL(){let $=this._getQuery(),J=this.dialect.sqlToQuery($.sql);return{query:$,builtQuery:J}}toSQL(){return this._toSQL().builtQuery}authToken;setToken($){return this.authToken=$,this}execute(){return t0.startActiveSpan("drizzle.operation",()=>{return this._prepare().execute(void 0,this.authToken)})}}class P2 extends u{constructor($){super(P2.buildEmbeddedCount($.source,$.filters).queryChunks);this.params=$,this.mapWith(Number),this.session=$.session,this.sql=P2.buildCount($.source,$.filters)}sql;token;static[B]="PgCountBuilder";[Symbol.toStringTag]="PgCountBuilder";session;static buildEmbeddedCount($,J){return E`(select count(*) from ${$}${E.raw(" where ").if(J)}${J})`}static buildCount($,J){return E`select count(*) as count from ${$}${E.raw(" where ").if(J)}${J};`}setToken($){return this.token=$,this}then($,J){return Promise.resolve(this.session.count(this.sql,this.token)).then($,J)}catch($){return this.then(void 0,$)}finally($){return this.then((J)=>{return $?.(),J},(J)=>{throw $?.(),J})}}class TO{constructor($,J,W,X,Y){this.schema=$,this.table=J,this.tableConfig=W,this.dialect=X,this.session=Y}static[B]="PgRelationalQueryBuilderV2";findMany($){return new CO(this.schema,this.table,this.tableConfig,this.dialect,this.session,$??!0,"many")}findFirst($){return new CO(this.schema,this.table,this.tableConfig,this.dialect,this.session,$??!0,"first")}}class CO extends j0{constructor($,J,W,X,Y,U,Z){super();this.schema=$,this.table=J,this.tableConfig=W,this.dialect=X,this.session=Y,this.config=U,this.mode=Z}static[B]="PgRelationalQueryV2";_prepare($){return t0.startActiveSpan("drizzle.prepareQuery",()=>{let{query:J,builtQuery:W}=this._toSQL();return this.session.prepareRelationalQuery(W,void 0,$,(X,Y)=>{let U=X.map((Z)=>T9(Z,J.selection,Y));if(this.mode==="first")return U[0];return U})})}prepare($){return this._prepare($)}_getQuery(){return this.dialect.buildRelationalQuery({schema:this.schema,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,mode:this.mode})}getSQL(){return this._getQuery().sql}_toSQL(){let $=this._getQuery(),J=this.dialect.sqlToQuery($.sql);return{query:$,builtQuery:J}}toSQL(){return this._toSQL().builtQuery}authToken;setToken($){return this.authToken=$,this}execute(){return t0.startActiveSpan("drizzle.operation",()=>{return this._prepare().execute(void 0,this.authToken)})}}class qO extends j0{constructor($,J,W,X){super();this.execute=$,this.sql=J,this.query=W,this.mapBatchResult=X}static[B]="PgRaw";getSQL(){return this.sql}getQuery(){return this.query}mapResult($,J){return J?this.mapBatchResult($):$}_prepare(){return this}isResponseInArrayMode(){return!1}}class _2{constructor($,J,W,X){if(this.dialect=$,this.session=J,this._=X?{schema:X.schema,fullSchema:X.fullSchema,tableNamesMap:X.tableNamesMap,relations:W,session:J}:{schema:void 0,fullSchema:{},tableNamesMap:{},relations:W,session:J},this._query={},this._.schema)for(let[Y,U]of Object.entries(this._.schema))this._query[Y]=new vO(X.fullSchema,this._.schema,this._.tableNamesMap,X.fullSchema[Y],U,$,J);this.query={};for(let[Y,U]of Object.entries(W))this.query[Y]=new TO(W,W[U.name].table,U,$,J);this.$cache={invalidate:async(Y)=>{}}}static[B]="PgDatabase";_query;query;$with=($,J)=>{let W=this;return{as:(Y)=>{if(typeof Y==="function")Y=Y(new L2(W.dialect));return new Proxy(new $6(Y.getSQL(),J??("getSelectedFields"in Y?Y.getSelectedFields()??{}:{}),$,!0),new O0({alias:$,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}}};$count($,J){return new P2({source:$,filters:J,session:this.session})}$cache;with(...$){let J=this;function W(G){return new E$({fields:G??void 0,session:J.session,dialect:J.dialect,withList:$})}function X(G){return new E$({fields:G??void 0,session:J.session,dialect:J.dialect,withList:$,distinct:!0})}function Y(G,z){return new E$({fields:z??void 0,session:J.session,dialect:J.dialect,withList:$,distinct:{on:G}})}function U(G){return new BG(G,J.session,J.dialect,$)}function Z(G){return new NG(G,J.session,J.dialect,$)}function H(G){return new _G(G,J.session,J.dialect,$)}return{select:W,selectDistinct:X,selectDistinctOn:Y,update:U,insert:Z,delete:H}}select($){return new E$({fields:$??void 0,session:this.session,dialect:this.dialect})}selectDistinct($){return new E$({fields:$??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn($,J){return new E$({fields:J??void 0,session:this.session,dialect:this.dialect,distinct:{on:$}})}update($){return new BG($,this.session,this.dialect)}insert($){return new NG($,this.session,this.dialect)}delete($){return new _G($,this.session,this.dialect)}refreshMaterializedView($){return new jO($,this.session,this.dialect)}authToken;execute($){let J=typeof $==="string"?E.raw($):$.getSQL(),W=this.dialect.sqlToQuery(J),X=this.session.prepareQuery(W,void 0,void 0,!1);return new qO(()=>X.execute(void 0,this.authToken),J,W,(Y)=>X.mapResult(Y,!0))}transaction($,J){return this.session.transaction($,J)}}class kk{static[B]="Cache"}class Y6 extends kk{strategy(){return"all"}static[B]="NoopCache";async get($){return}async put($,J,W,X){}async onMutate($){}}async function B5($,J){let W=`${$}-${JSON.stringify(J)}`,Y=new TextEncoder().encode(W),U=await crypto.subtle.digest("SHA-256",Y);return[...new Uint8Array(U)].map((G)=>G.toString(16).padStart(2,"0")).join("")}class hO{constructor($,J,W,X){if(this.query=$,this.cache=J,this.queryMetadata=W,this.cacheConfig=X,J&&J.strategy()==="all"&&X===void 0)this.cacheConfig={enable:!0,autoInvalidate:!0};if(!this.cacheConfig?.enable)this.cacheConfig=void 0}authToken;getQuery(){return this.query}mapResult($,J){return $}setToken($){return this.authToken=$,this}static[B]="PgPreparedQuery";joinsNotNullableMap;async queryWithCache($,J,W){if(this.cache===void 0||j(this.cache,Y6)||this.queryMetadata===void 0)try{return await W()}catch(X){throw new a1($,J,X)}if(this.cacheConfig&&!this.cacheConfig.enable)try{return await W()}catch(X){throw new a1($,J,X)}if((this.queryMetadata.type==="insert"||this.queryMetadata.type==="update"||this.queryMetadata.type==="delete")&&this.queryMetadata.tables.length>0)try{let[X]=await Promise.all([W(),this.cache.onMutate({tables:this.queryMetadata.tables})]);return X}catch(X){throw new a1($,J,X)}if(!this.cacheConfig)try{return await W()}catch(X){throw new a1($,J,X)}if(this.queryMetadata.type==="select"){let X=await this.cache.get(this.cacheConfig.tag??await B5($,J),this.queryMetadata.tables,this.cacheConfig.tag!==void 0,this.cacheConfig.autoInvalidate);if(X===void 0){let Y;try{Y=await W()}catch(U){throw new a1($,J,U)}return await this.cache.put(this.cacheConfig.tag??await B5($,J),Y,this.cacheConfig.autoInvalidate?this.queryMetadata.tables:[],this.cacheConfig.tag!==void 0,this.cacheConfig.config),Y}return X}try{return await W()}catch(X){throw new a1($,J,X)}}}class xO{constructor($){this.dialect=$}static[B]="PgSession";execute($,J){return t0.startActiveSpan("drizzle.operation",()=>{return t0.startActiveSpan("drizzle.prepareQuery",()=>{return this.prepareQuery(this.dialect.sqlToQuery($),void 0,void 0,!1)}).setToken(J).execute(void 0,J)})}all($){return this.prepareQuery(this.dialect.sqlToQuery($),void 0,void 0,!1).all()}async count($,J){let W=await this.execute($,J);return Number(W[0].count)}}class bO extends _2{constructor($,J,W,X,Y=0){super($,J,W,X);this.relations=W,this.schema=X,this.nestedIndex=Y}static[B]="PgTransaction";rollback(){throw new eJ}getTransactionConfigSQL($){let J=[];if($.isolationLevel)J.push(`isolation level ${$.isolationLevel}`);if($.accessMode)J.push($.accessMode);if(typeof $.deferrable==="boolean")J.push($.deferrable?"deferrable":"not deferrable");return E.raw(J.join(" "))}setTransaction($){return this.session.execute(E`set transaction ${this.getTransactionConfigSQL($)}`)}}var U6=j9("user",{id:I1("id").primaryKey(),name:I1("name").notNull(),email:I1("email").notNull().unique(),emailVerified:XG("emailVerified").notNull(),image:I1("image"),createdAt:j4("createdAt").notNull(),updatedAt:j4("updatedAt").notNull()});var aO0=DO(ck(),1);var{SQL:rr}=globalThis.Bun;var{SQL:sO}=globalThis.Bun;class uk{static[B]="ConsoleLogWriter";write($){console.log($)}}class U7{static[B]="DefaultLogger";writer;constructor($){this.writer=$?.writer??new uk}logQuery($,J){let W=J.map((Y)=>{try{return JSON.stringify(Y)}catch{return String(Y)}}),X=W.length?` -- params: [${W.join(", ")}]`:"";this.writer.write(`Query: ${$}${X}`)}}class Z7{static[B]="NoopLogger";logQuery(){}}class cO{constructor($,J,W,X,Y,U,Z,H){this.fullSchema=$,this.schema=J,this.tableNamesMap=W,this.table=X,this.tableConfig=Y,this.dialect=U,this.session=Z,this.mode=H}static[B]="MySqlRelationalQueryBuilder";findMany($){return new yO(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,$?$:{},"many",this.mode)}findFirst($){return new yO(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,$?{...$,limit:1}:{limit:1},"first",this.mode)}}class yO extends j0{constructor($,J,W,X,Y,U,Z,H,G,z){super();this.fullSchema=$,this.schema=J,this.tableNamesMap=W,this.table=X,this.tableConfig=Y,this.dialect=U,this.session=Z,this.config=H,this.queryMode=G,this.mode=z}static[B]="MySqlRelationalQuery";prepare(){let{query:$,builtQuery:J}=this._toSQL();return this.session.prepareQuery(J,void 0,(W)=>{let X=W.map((Y)=>C9(this.schema,this.tableConfig,Y,$.selection));if(this.queryMode==="first")return X[0];return X})}_getQuery(){return this.mode==="planetscale"?this.dialect._buildRelationalQueryWithoutLateralSubqueries({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}):this.dialect._buildRelationalQuery({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}_toSQL(){let $=this._getQuery();return{builtQuery:this.dialect.sqlToQuery($.sql),query:$}}getSQL(){return this._getQuery().sql}toSQL(){return this._toSQL().builtQuery}execute(){return this.prepare().execute()}}class B2 extends u{constructor($){super(B2.buildEmbeddedCount($.source,$.filters).queryChunks);this.params=$,this.mapWith(Number),this.session=$.session,this.sql=B2.buildCount($.source,$.filters)}sql;static[B]="MySqlCountBuilder";[Symbol.toStringTag]="MySqlCountBuilder";session;static buildEmbeddedCount($,J){return E`(select count(*) from ${$}${E.raw(" where ").if(J)}${J})`}static buildCount($,J){return E`select count(*) as count from ${$}${E.raw(" where ").if(J)}${J}`}then($,J){return Promise.resolve(this.session.count(this.sql)).then($,J)}catch($){return this.then(void 0,$)}finally($){return this.then((J)=>{return $?.(),J},(J)=>{throw $?.(),J})}}function pk($,J){return`${$[f4]}_${J.join("_")}_unique`}class H7 extends G0{static[B]="MySqlColumn";table;constructor($,J){if(!J.uniqueName)J.uniqueName=pk($,[J.name]);super($,J);this.table=$}}class qr extends H7{static[B]="MySqlColumnWithAutoIncrement";autoIncrement=this.config.autoIncrement}var dk=Symbol.for("drizzle:MySqlInlineForeignKeys");class Z6 extends y{static[B]="MySqlTable";static Symbol=Object.assign({},y.Symbol,{InlineForeignKeys:dk});[y.Symbol.Columns];[dk]=[];[y.Symbol.ExtraConfigBuilder]=void 0}function W8($){if(j($,Z6))return[`${$[y.Symbol.BaseName]}`];if(j($,C0))return $._.usedTables??[];if(j($,u))return $.usedTables??[];return[]}function G7($){return $.map((J)=>{return typeof J==="object"?J.config.name:J})}function z7($){return Array.isArray($)?$:[$]}class SG extends j0{constructor($,J,W,X){super();this.table=$,this.session=J,this.dialect=W,this.config={table:$,withList:X}}static[B]="MySqlDelete";config;where($){return this.config.where=$,this}orderBy(...$){if(typeof $[0]==="function"){let J=$[0](new Proxy(this.config.table[y.Symbol.Columns],new O0({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),W=Array.isArray(J)?J:[J];this.config.orderBy=W}else{let J=$;this.config.orderBy=J}return this}limit($){return this.config.limit=$,this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:$,...J}=this.dialect.sqlToQuery(this.getSQL());return J}prepare(){return this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,void 0,void 0,void 0,{type:"delete",tables:W8(this.config.table)})}execute=($)=>{return this.prepare().execute($)};createIterator=()=>{let $=this;return async function*(J){yield*$.prepare().iterator(J)}};iterator=this.createIterator();$dynamic(){return this}}class R2 extends j1{static[B]="MySqlViewBase"}class w7{static[B]="MySqlDialect";casing;constructor($){this.casing=new sJ($?.casing)}async migrate($,J,W){let X=W.migrationsTable??"__drizzle_migrations",Y=E`
			create table if not exists ${E.identifier(X)} (
				id serial primary key,
				hash text not null,
				created_at bigint
			)
		`;await J.execute(Y);let Z=(await J.all(E`select id, hash, created_at from ${E.identifier(X)} order by created_at desc limit 1`))[0];await J.transaction(async(H)=>{for(let G of $)if(!Z||Number(Z.created_at)<G.folderMillis){for(let z of G.sql)await H.execute(E.raw(z));await H.execute(E`insert into ${E.identifier(X)} (\`hash\`, \`created_at\`) values(${G.hash}, ${G.folderMillis})`)}})}escapeName($){return`\`${$}\``}escapeParam($){return"?"}escapeString($){return`'${$.replace(/'/g,"''")}'`}buildWithCTE($){if(!$?.length)return;let J=[E`with `];for(let[W,X]of $.entries())if(J.push(E`${E.identifier(X._.alias)} as (${X._.sql})`),W<$.length-1)J.push(E`, `);return J.push(E` `),E.join(J)}buildDeleteQuery({table:$,where:J,returning:W,withList:X,limit:Y,orderBy:U}){let Z=this.buildWithCTE(X),H=W?E` returning ${this.buildSelection(W,{isSingleTable:!0})}`:void 0,G=J?E` where ${J}`:void 0,z=this.buildOrderBy(U),w=this.buildLimit(Y);return E`${Z}delete from ${$}${G}${z}${w}${H}`}buildUpdateSet($,J){let W=$[y.Symbol.Columns],X=Object.keys(W).filter((U)=>J[U]!==void 0||W[U]?.onUpdateFn!==void 0),Y=X.length;return E.join(X.flatMap((U,Z)=>{let H=W[U],G=J[U]??E.param(H.onUpdateFn(),H),z=E`${E.identifier(this.casing.getColumnCasing(H))} = ${G}`;if(Z<Y-1)return[z,E.raw(", ")];return[z]}))}buildUpdateQuery({table:$,set:J,where:W,returning:X,withList:Y,limit:U,orderBy:Z}){let H=this.buildWithCTE(Y),G=this.buildUpdateSet($,J),z=X?E` returning ${this.buildSelection(X,{isSingleTable:!0})}`:void 0,w=W?E` where ${W}`:void 0,D=this.buildOrderBy(Z),K=this.buildLimit(U);return E`${H}update ${$} set ${G}${w}${D}${K}${z}`}buildSelection($,{isSingleTable:J=!1}={}){let W=$.length,X=$.flatMap(({field:Y},U)=>{let Z=[];if(j(Y,u.Aliased)&&Y.isSelectionField)Z.push(E.identifier(Y.fieldAlias));else if(j(Y,u.Aliased)||j(Y,u)){let H=j(Y,u.Aliased)?Y.sql:Y;if(J)Z.push(new u(H.queryChunks.map((G)=>{if(j(G,H7))return E.identifier(this.casing.getColumnCasing(G));return G})));else Z.push(H);if(j(Y,u.Aliased))Z.push(E` as ${E.identifier(Y.fieldAlias)}`)}else if(j(Y,G0))if(J)Z.push(E.identifier(this.casing.getColumnCasing(Y)));else Z.push(Y);if(U<W-1)Z.push(E`, `);return Z});return E.join(X)}buildLimit($){return typeof $==="object"||typeof $==="number"&&$>=0?E` limit ${$}`:void 0}buildOrderBy($){return $&&$.length>0?E` order by ${E.join($,E`, `)}`:void 0}buildIndex({indexes:$,indexFor:J}){return $&&$.length>0?E` ${E.raw(J)} INDEX (${E.raw($.join(", "))})`:void 0}buildSelectQuery({withList:$,fields:J,fieldsFlat:W,where:X,having:Y,table:U,joins:Z,orderBy:H,groupBy:G,limit:z,offset:w,lockingClause:D,distinct:K,setOperators:O,useIndex:F,forceIndex:M,ignoreIndex:A}){let I=W??k1(J);for(let D0 of I)if(j(D0.field,G0)&&m1(D0.field.table)!==(j(U,C0)?U._.alias:j(U,R2)?U[R0].name:j(U,u)?void 0:m1(U))&&!((U0)=>Z?.some(({alias:B0})=>B0===(U0[y.Symbol.IsAlias]?m1(U0):U0[y.Symbol.BaseName])))(D0.field.table)){let U0=m1(D0.field.table);throw Error(`Your "${D0.path.join("->")}" field references a column "${U0}"."${D0.field.name}", but the table "${U0}" is not part of the query! Did you forget to join it?`)}let P=!Z||Z.length===0,Q=this.buildWithCTE($),N=K?E` distinct`:void 0,_=this.buildSelection(I,{isSingleTable:P}),L=(()=>{if(j(U,y)&&U[y.Symbol.IsAlias])return E`${E`${E.identifier(U[y.Symbol.Schema]??"")}.`.if(U[y.Symbol.Schema])}${E.identifier(U[y.Symbol.OriginalName])} ${E.identifier(U[y.Symbol.Name])}`;return U})(),R=[];if(Z)for(let[D0,U0]of Z.entries()){if(D0===0)R.push(E` `);let B0=U0.table,g0=U0.lateral?E` lateral`:void 0,$4=U0.on?E` on ${U0.on}`:void 0;if(j(B0,Z6)){let T1=B0[Z6.Symbol.Name],h$=B0[Z6.Symbol.Schema],j6=B0[Z6.Symbol.OriginalName],k6=T1===j6?void 0:U0.alias,Tl=this.buildIndex({indexes:U0.useIndex,indexFor:"USE"}),ql=this.buildIndex({indexes:U0.forceIndex,indexFor:"FORCE"}),hl=this.buildIndex({indexes:U0.ignoreIndex,indexFor:"IGNORE"});R.push(E`${E.raw(U0.joinType)} join${g0} ${h$?E`${E.identifier(h$)}.`:void 0}${E.identifier(j6)}${Tl}${ql}${hl}${k6&&E` ${E.identifier(k6)}`}${$4}`)}else if(j(B0,j1)){let T1=B0[R0].name,h$=B0[R0].schema,j6=B0[R0].originalName,k6=T1===j6?void 0:U0.alias;R.push(E`${E.raw(U0.joinType)} join${g0} ${h$?E`${E.identifier(h$)}.`:void 0}${E.identifier(j6)}${k6&&E` ${E.identifier(k6)}`}${$4}`)}else R.push(E`${E.raw(U0.joinType)} join${g0} ${B0}${$4}`);if(D0<Z.length-1)R.push(E` `)}let S=E.join(R),k=X?E` where ${X}`:void 0,T=Y?E` having ${Y}`:void 0,q=this.buildOrderBy(H),h=G&&G.length>0?E` group by ${E.join(G,E`, `)}`:void 0,x=this.buildLimit(z),b=w?E` offset ${w}`:void 0,r=this.buildIndex({indexes:F,indexFor:"USE"}),d=this.buildIndex({indexes:M,indexFor:"FORCE"}),X0=this.buildIndex({indexes:A,indexFor:"IGNORE"}),i;if(D){let{config:D0,strength:U0}=D;if(i=E` for ${E.raw(U0)}`,D0.noWait)i.append(E` nowait`);else if(D0.skipLocked)i.append(E` skip locked`)}let K0=E`${Q}select${N} ${_} from ${L}${r}${d}${X0}${S}${k}${h}${T}${q}${x}${b}${i}`;if(O.length>0)return this.buildSetOperations(K0,O);return K0}buildSetOperations($,J){let[W,...X]=J;if(!W)throw Error("Cannot pass undefined values to any set operator");if(X.length===0)return this.buildSetOperationQuery({leftSelect:$,setOperator:W});return this.buildSetOperations(this.buildSetOperationQuery({leftSelect:$,setOperator:W}),X)}buildSetOperationQuery({leftSelect:$,setOperator:{type:J,isAll:W,rightSelect:X,limit:Y,orderBy:U,offset:Z}}){let H=E`(${$.getSQL()}) `,G=E`(${X.getSQL()})`,z;if(U&&U.length>0){let O=[];for(let F of U)if(j(F,H7))O.push(E.identifier(this.casing.getColumnCasing(F)));else if(j(F,u)){for(let M=0;M<F.queryChunks.length;M++){let A=F.queryChunks[M];if(j(A,H7))F.queryChunks[M]=E.identifier(this.casing.getColumnCasing(A))}O.push(E`${F}`)}else O.push(E`${F}`);z=E` order by ${E.join(O,E`, `)} `}let w=typeof Y==="object"||typeof Y==="number"&&Y>=0?E` limit ${Y}`:void 0,D=E.raw(`${J} ${W?"all ":""}`),K=Z?E` offset ${Z}`:void 0;return E`${H}${D}${G}${z}${w}${K}`}buildInsertQuery({table:$,values:J,ignore:W,onConflict:X,select:Y}){let U=[],Z=$[y.Symbol.Columns],H=Object.entries(Z).filter(([O,F])=>!F.shouldDisableInsert()),G=H.map(([,O])=>E.identifier(this.casing.getColumnCasing(O))),z=[];if(Y){let O=J;if(j(O,u))U.push(O);else U.push(O.getSQL())}else{let O=J;U.push(E.raw("values "));for(let[F,M]of O.entries()){let A={},I=[];for(let[P,Q]of H){let N=M[P];if(N===void 0||j(N,J4)&&N.value===void 0)if(Q.defaultFn!==void 0){let _=Q.defaultFn();A[P]=_;let L=j(_,u)?_:E.param(_,Q);I.push(L)}else if(!Q.default&&Q.onUpdateFn!==void 0){let _=Q.onUpdateFn(),L=j(_,u)?_:E.param(_,Q);I.push(L)}else I.push(E`default`);else{if(Q.defaultFn&&j(N,J4))A[P]=N.value;I.push(N)}}if(z.push(A),U.push(I),F<O.length-1)U.push(E`, `)}}let w=E.join(U),D=W?E` ignore`:void 0,K=X?E` on duplicate key ${X}`:void 0;return{sql:E`insert${D} into ${$} ${G} ${w}${K}`,generatedIds:z}}sqlToQuery($,J){return $.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,invokeSource:J})}_buildRelationalQuery({fullSchema:$,schema:J,tableNamesMap:W,table:X,tableConfig:Y,queryConfig:U,tableAlias:Z,nestedQueryRelation:H,joinOn:G}){let z=[],w,D,K,O,F=[];if(U===!0)z=Object.entries(Y.columns).map(([I,P])=>({dbKey:P.name,tsKey:I,field:y0(P,Z),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let A=Object.fromEntries(Object.entries(Y.columns).map(([L,R])=>[L,y0(R,Z)]));if(U.where){let L=typeof U.where==="function"?U.where(A,tJ()):U.where;O=L&&J6(L,Z)}let I=[],P=[];if(U.columns){let L=!1;for(let[R,S]of Object.entries(U.columns)){if(S===void 0)continue;if(R in Y.columns){if(!L&&S===!0)L=!0;P.push(R)}}if(P.length>0)P=L?P.filter((R)=>U.columns?.[R]===!0):Object.keys(Y.columns).filter((R)=>!P.includes(R))}else P=Object.keys(Y.columns);for(let L of P){let R=Y.columns[L];I.push({tsKey:L,value:R})}let Q=[];if(U.with)Q=Object.entries(U.with).filter((L)=>!!L[1]).map(([L,R])=>({tsKey:L,queryConfig:R,relation:Y.relations[L]}));let N;if(U.extras){N=typeof U.extras==="function"?U.extras(A,{sql:E}):U.extras;for(let[L,R]of Object.entries(N))I.push({tsKey:L,value:B9(R,Z)})}for(let{tsKey:L,value:R}of I)z.push({dbKey:j(R,u.Aliased)?R.fieldAlias:Y.columns[L].name,tsKey:L,field:j(R,G0)?y0(R,Z):R,relationTableTsKey:void 0,isJson:!1,selection:[]});let _=typeof U.orderBy==="function"?U.orderBy(A,aJ()):U.orderBy??[];if(!Array.isArray(_))_=[_];K=_.map((L)=>{if(j(L,G0))return y0(L,Z);return J6(L,Z)}),w=U.limit,D=U.offset;for(let{tsKey:L,queryConfig:R,relation:S}of Q){let k=oJ(J,W,S),T=C6(S.referencedTable),q=W[T],h=`${Z}_${L}`,x=F1(...k.fields.map((d,X0)=>y1(y0(k.references[X0],h),y0(d,Z)))),b=this._buildRelationalQuery({fullSchema:$,schema:J,tableNamesMap:W,table:$[q],tableConfig:J[q],queryConfig:j(S,W6)?R===!0?{limit:1}:{...R,limit:1}:R,tableAlias:h,joinOn:x,nestedQueryRelation:S}),r=E`${E.identifier(h)}.${E.identifier("data")}`.as(L);F.push({on:E`true`,table:new C0(b.sql,{},h),alias:h,joinType:"left",lateral:!0}),z.push({dbKey:L,tsKey:L,field:r,relationTableTsKey:q,isJson:!0,selection:b.selection})}}if(z.length===0)throw new t1({message:`No fields selected for table "${Y.tsName}" ("${Z}")`});let M;if(O=F1(G,O),H){let A=E`json_array(${E.join(z.map(({field:Q,tsKey:N,isJson:_})=>_?E`${E.identifier(`${Z}_${N}`)}.${E.identifier("data")}`:j(Q,u.Aliased)?Q.sql:Q),E`, `)})`;if(j(H,$8))A=E`coalesce(json_arrayagg(${A}), json_array())`;let I=[{dbKey:"data",tsKey:"data",field:A.as("data"),isJson:!0,relationTableTsKey:Y.tsName,selection:z}];if(w!==void 0||D!==void 0||(K?.length??0)>0)M=this.buildSelectQuery({table:A1(X,Z),fields:{},fieldsFlat:[{path:[],field:E.raw("*")},...(K?.length??0)>0?[{path:[],field:E`row_number() over (order by ${E.join(K,E`, `)})`}]:[]],where:O,limit:w,offset:D,setOperators:[]}),O=void 0,w=void 0,D=void 0,K=void 0;else M=A1(X,Z);M=this.buildSelectQuery({table:j(M,Z6)?M:new C0(M,{},Z),fields:{},fieldsFlat:I.map(({field:Q})=>({path:[],field:j(Q,G0)?y0(Q,Z):Q})),joins:F,where:O,limit:w,offset:D,orderBy:K,setOperators:[]})}else M=this.buildSelectQuery({table:A1(X,Z),fields:{},fieldsFlat:z.map(({field:A})=>({path:[],field:j(A,G0)?y0(A,Z):A})),joins:F,where:O,limit:w,offset:D,orderBy:K,setOperators:[]});return{tableTsKey:Y.tsName,sql:M,selection:z}}_buildRelationalQueryWithoutLateralSubqueries({fullSchema:$,schema:J,tableNamesMap:W,table:X,tableConfig:Y,queryConfig:U,tableAlias:Z,nestedQueryRelation:H,joinOn:G}){let z=[],w,D,K=[],O;if(U===!0)z=Object.entries(Y.columns).map(([A,I])=>({dbKey:I.name,tsKey:A,field:y0(I,Z),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let M=Object.fromEntries(Object.entries(Y.columns).map(([_,L])=>[_,y0(L,Z)]));if(U.where){let _=typeof U.where==="function"?U.where(M,tJ()):U.where;O=_&&J6(_,Z)}let A=[],I=[];if(U.columns){let _=!1;for(let[L,R]of Object.entries(U.columns)){if(R===void 0)continue;if(L in Y.columns){if(!_&&R===!0)_=!0;I.push(L)}}if(I.length>0)I=_?I.filter((L)=>U.columns?.[L]===!0):Object.keys(Y.columns).filter((L)=>!I.includes(L))}else I=Object.keys(Y.columns);for(let _ of I){let L=Y.columns[_];A.push({tsKey:_,value:L})}let P=[];if(U.with)P=Object.entries(U.with).filter((_)=>!!_[1]).map(([_,L])=>({tsKey:_,queryConfig:L,relation:Y.relations[_]}));let Q;if(U.extras){Q=typeof U.extras==="function"?U.extras(M,{sql:E}):U.extras;for(let[_,L]of Object.entries(Q))A.push({tsKey:_,value:B9(L,Z)})}for(let{tsKey:_,value:L}of A)z.push({dbKey:j(L,u.Aliased)?L.fieldAlias:Y.columns[_].name,tsKey:_,field:j(L,G0)?y0(L,Z):L,relationTableTsKey:void 0,isJson:!1,selection:[]});let N=typeof U.orderBy==="function"?U.orderBy(M,aJ()):U.orderBy??[];if(!Array.isArray(N))N=[N];K=N.map((_)=>{if(j(_,G0))return y0(_,Z);return J6(_,Z)}),w=U.limit,D=U.offset;for(let{tsKey:_,queryConfig:L,relation:R}of P){let S=oJ(J,W,R),k=C6(R.referencedTable),T=W[k],q=`${Z}_${_}`,h=F1(...S.fields.map((d,X0)=>y1(y0(S.references[X0],q),y0(d,Z)))),x=this._buildRelationalQueryWithoutLateralSubqueries({fullSchema:$,schema:J,tableNamesMap:W,table:$[T],tableConfig:J[T],queryConfig:j(R,W6)?L===!0?{limit:1}:{...L,limit:1}:L,tableAlias:q,joinOn:h,nestedQueryRelation:R}),b=E`(${x.sql})`;if(j(R,$8))b=E`coalesce(${b}, json_array())`;let r=b.as(_);z.push({dbKey:_,tsKey:_,field:r,relationTableTsKey:T,isJson:!0,selection:x.selection})}}if(z.length===0)throw new t1({message:`No fields selected for table "${Y.tsName}" ("${Z}"). You need to have at least one item in "columns", "with" or "extras". If you need to select all columns, omit the "columns" key or set it to undefined.`});let F;if(O=F1(G,O),H){let M=E`json_array(${E.join(z.map(({field:P})=>j(P,H7)?E.identifier(this.casing.getColumnCasing(P)):j(P,u.Aliased)?P.sql:P),E`, `)})`;if(j(H,$8))M=E`json_arrayagg(${M})`;let A=[{dbKey:"data",tsKey:"data",field:M,isJson:!0,relationTableTsKey:Y.tsName,selection:z}];if(w!==void 0||D!==void 0||K.length>0)F=this.buildSelectQuery({table:A1(X,Z),fields:{},fieldsFlat:[{path:[],field:E.raw("*")},...K.length>0?[{path:[],field:E`row_number() over (order by ${E.join(K,E`, `)})`}]:[]],where:O,limit:w,offset:D,setOperators:[]}),O=void 0,w=void 0,D=void 0,K=void 0;else F=A1(X,Z);F=this.buildSelectQuery({table:j(F,Z6)?F:new C0(F,{},Z),fields:{},fieldsFlat:A.map(({field:P})=>({path:[],field:j(P,G0)?y0(P,Z):P})),where:O,limit:w,offset:D,orderBy:K,setOperators:[]})}else F=this.buildSelectQuery({table:A1(X,Z),fields:{},fieldsFlat:z.map(({field:M})=>({path:[],field:j(M,G0)?y0(M,Z):M})),where:O,limit:w,offset:D,orderBy:K,setOperators:[]});return{tableTsKey:Y.tsName,sql:F,selection:z}}nestedSelectionerror(){throw new t1({message:"Views with nested selections are not supported by the relational query builder"})}buildRqbColumn($,J,W){if(j(J,G0)){let X=E`${$}.${E.identifier(this.casing.getColumnCasing(J))}`;switch(J.columnType){case"MySqlBinary":case"MySqlVarBinary":case"MySqlTime":case"MySqlDateTimeString":case"MySqlTimestampString":case"MySqlFloat":case"MySqlDecimal":case"MySqlDecimalNumber":case"MySqlDecimalBigInt":case"MySqlBigInt64":return E`cast(${X} as char) as ${E.identifier(W)}`;case"MySqlCustomColumn":return E`${J.jsonSelectIdentifier(X,E)} as ${E.identifier(W)}`;default:return E`${X} as ${E.identifier(W)}`}}return E`${$}.${j(J,u.Aliased)?E.identifier(J.fieldAlias):Q5(J)?E.identifier(W):this.nestedSelectionerror()} as ${E.identifier(W)}`}unwrapAllColumns=($,J)=>{return E.join(Object.entries($[f1]).map(([W,X])=>{return J.push({key:W,field:X}),this.buildRqbColumn($,X,W)}),E`, `)};getSelectedTableColumns=($,J)=>{let W=[],X=$[f1],Y=Object.entries(J),U;for(let[Z,H]of Y){if(H===void 0)continue;if(U=U||H,H){let G=X[Z];W.push({column:G,tsName:Z})}}if(U===!1)for(let[Z,H]of Object.entries(X)){if(J[Z]===!1)continue;W.push({column:H,tsName:Z})}return W};buildColumns=($,J,W)=>W?.columns?(()=>{let X=[],Y=this.getSelectedTableColumns($,W.columns);for(let{column:U,tsName:Z}of Y)X.push(this.buildRqbColumn($,U,Z)),J.push({key:Z,field:U});return X.length?E.join(X,E`, `):void 0})():this.unwrapAllColumns($,J);buildRelationalQuery({schema:$,table:J,tableConfig:W,queryConfig:X,relationWhere:Y,mode:U,errorPath:Z,depth:H,isNestedMany:G,throughJoin:z}){let w=[],D=U==="first",K=X===!0?void 0:X,O=Z??"",F=H??0;if(!F)J=A1(J,`d${F}`);let M=D?1:K?.limit,A=K?.offset,I=this.buildColumns(J,w,K),P=K?.where&&Y?F1(F$(J,K.where,W.relations,$,this.casing),Y):K?.where?F$(J,K.where,W.relations,$,this.casing):Y,Q=K?.orderBy?yW(J,K.orderBy):void 0,N=K?.extras?cW(J,K.extras):void 0;if(N)w.push(...N.selection);let _=I?[I]:[],L=K?(()=>{let{with:k}=K;if(!k)return;let T=Object.entries(k).filter(([q,h])=>h);if(!T.length)return;return E.join(T.map(([q,h])=>{_.push(E`${E.identifier(q)}.${E.identifier("r")} as ${E.identifier(q)}`);let x=W.relations[q],b=j(x,N5),r=A1(x.targetTable,`d${F+1}`),d=x.throughTable?A1(x.throughTable,`tr${F}`):void 0,{filter:X0,joinCondition:i}=J7(this.casing,x,J,r,d),K0=d?E` inner join ${X6(d)} on ${i}`:void 0,D0=this.buildRelationalQuery({table:r,mode:b?"first":"many",schema:$,queryConfig:h,tableConfig:$[x.targetTableName],relationWhere:X0,errorPath:`${O.length?`${O}.`:""}${q}`,depth:F+1,isNestedMany:!b,throughJoin:K0});w.push({field:r,key:q,selection:D0.selection,isArray:!b,isOptional:(x.optional??!1)||h!==!0&&!!h.where});let U0=E.join(D0.selection.map((g0)=>E`${E.raw(this.escapeString(g0.key))}, ${E.identifier(g0.key)}`),E`, `);return E` left join lateral(select ${E`${b?E`json_object(${U0})`:E`coalesce(json_arrayagg(json_object(${U0})), json_array())`} as ${E.identifier("r")}`} from (${D0.sql}) as ${E.identifier("t")}) as ${E.identifier(q)} on true`}))})():void 0;if(N?.sql)_.push(N.sql);if(!_.length)throw new t1({message:`No fields selected for table "${W.name}"${O?` ("${O}")`:""}`});if(G&&Q)_.push(E`row_number() over (order by ${Q})`);let R=E.join(_,E`, `);return{sql:E`select ${R} from ${X6(J)}${z}${E`${L}`.if(L)}${E` where ${P}`.if(P)}${E` order by ${Q}`.if(Q)}${E` limit ${M}`.if(M!==void 0)}${E` offset ${A}`.if(A!==void 0)}`,selection:w}}}class X8{static[B]="MySqlSelectBuilder";fields;session;dialect;withList=[];distinct;constructor($){if(this.fields=$.fields,this.session=$.session,this.dialect=$.dialect,$.withList)this.withList=$.withList;this.distinct=$.distinct}from($,J){let W=!!this.fields,X;if(this.fields)X=this.fields;else if(j($,C0))X=Object.fromEntries(Object.keys($._.selectedFields).map((H)=>[H,$[H]]));else if(j($,R2))X=$[R0].selectedFields;else if(j($,u))X={};else X=q6($);let Y=[],U=[],Z=[];if(j($,Z6)&&J&&typeof J!=="string"){if(J.useIndex)Y=G7(z7(J.useIndex));if(J.forceIndex)U=G7(z7(J.forceIndex));if(J.ignoreIndex)Z=G7(z7(J.ignoreIndex))}return new uO({table:$,fields:X,isPartialSelect:W,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct,useIndex:Y,forceIndex:U,ignoreIndex:Z})}}class lk extends X7{static[B]="MySqlSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;cacheConfig=void 0;usedTables=new Set;constructor({table:$,fields:J,isPartialSelect:W,session:X,dialect:Y,withList:U,distinct:Z,useIndex:H,forceIndex:G,ignoreIndex:z}){super();this.config={withList:U,table:$,fields:{...J},distinct:Z,setOperators:[],useIndex:H,forceIndex:G,ignoreIndex:z},this.isPartialSelect=W,this.session=X,this.dialect=Y,this._={selectedFields:J,config:this.config},this.tableName=m4($),this.joinsNotNullableMap=typeof this.tableName==="string"?{[this.tableName]:!0}:{};for(let w of W8($))this.usedTables.add(w)}getUsedTables(){return[...this.usedTables]}createJoin($,J){return(W,X,Y)=>{let U=$==="cross",Z=U?void 0:X,H=U?X:Y,G=this.tableName,z=m4(W);for(let O of W8(W))this.usedTables.add(O);if(typeof z==="string"&&this.config.joins?.some((O)=>O.alias===z))throw Error(`Alias "${z}" is already used in this query`);if(!this.isPartialSelect){if(Object.keys(this.joinsNotNullableMap).length===1&&typeof G==="string")this.config.fields={[G]:this.config.fields};if(typeof z==="string"&&!j(W,u)){let O=j(W,C0)?W._.selectedFields:j(W,j1)?W[R0].selectedFields:W[y.Symbol.Columns];this.config.fields[z]=O}}if(typeof Z==="function")Z=Z(new Proxy(this.config.fields,new O0({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})));if(!this.config.joins)this.config.joins=[];let w=[],D=[],K=[];if(j(W,Z6)&&H&&typeof H!=="string"){if(H.useIndex)w=G7(z7(H.useIndex));if(H.forceIndex)D=G7(z7(H.forceIndex));if(H.ignoreIndex)K=G7(z7(H.ignoreIndex))}if(this.config.joins.push({on:Z,table:W,joinType:$,alias:z,useIndex:w,forceIndex:D,ignoreIndex:K,lateral:J}),typeof z==="string")switch($){case"left":{this.joinsNotNullableMap[z]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([O])=>[O,!1])),this.joinsNotNullableMap[z]=!0;break}case"cross":case"inner":{this.joinsNotNullableMap[z]=!0;break}}return this}}leftJoin=this.createJoin("left",!1);leftJoinLateral=this.createJoin("left",!0);rightJoin=this.createJoin("right",!1);innerJoin=this.createJoin("inner",!1);innerJoinLateral=this.createJoin("inner",!0);crossJoin=this.createJoin("cross",!1);crossJoinLateral=this.createJoin("cross",!0);createSetOperator($,J){return(W)=>{let X=typeof W==="function"?W(hr()):W;if(!O$(this.getSelectedFields(),X.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:$,isAll:J,rightSelect:X}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators($){return this.config.setOperators.push(...$),this}where($){if(typeof $==="function")$=$(new Proxy(this.config.fields,new O0({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})));return this.config.where=$,this}having($){if(typeof $==="function")$=$(new Proxy(this.config.fields,new O0({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})));return this.config.having=$,this}groupBy(...$){if(typeof $[0]==="function"){let J=$[0](new Proxy(this.config.fields,new O0({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(J)?J:[J]}else this.config.groupBy=$;return this}orderBy(...$){if(typeof $[0]==="function"){let J=$[0](new Proxy(this.config.fields,new O0({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),W=Array.isArray(J)?J:[J];if(this.config.setOperators.length>0)this.config.setOperators.at(-1).orderBy=W;else this.config.orderBy=W}else{let J=$;if(this.config.setOperators.length>0)this.config.setOperators.at(-1).orderBy=J;else this.config.orderBy=J}return this}limit($){if(this.config.setOperators.length>0)this.config.setOperators.at(-1).limit=$;else this.config.limit=$;return this}offset($){if(this.config.setOperators.length>0)this.config.setOperators.at(-1).offset=$;else this.config.offset=$;return this}for($,J={}){return this.config.lockingClause={strength:$,config:J},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:$,...J}=this.dialect.sqlToQuery(this.getSQL());return J}as($){let J=[];if(J.push(...W8(this.config.table)),this.config.joins)for(let W of this.config.joins)J.push(...W8(W.table));return new Proxy(new C0(this.getSQL(),this.config.fields,$,!1,[...new Set(J)]),new O0({alias:$,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new O0({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}$withCache($){return this.cacheConfig=$===void 0?{config:{},enable:!0,autoInvalidate:!0}:$===!1?{enable:!1}:{enable:!0,autoInvalidate:!0,...$},this}}class uO extends lk{static[B]="MySqlSelect";prepare(){if(!this.session)throw Error("Cannot execute a query on a query builder. Please use a database instance instead.");let $=k1(this.config.fields),J=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),$,void 0,void 0,void 0,{type:"select",tables:[...this.usedTables]},this.cacheConfig);return J.joinsNotNullableMap=this.joinsNotNullableMap,J}execute=($)=>{return this.prepare().execute($)};createIterator=()=>{let $=this;return async function*(J){yield*$.prepare().iterator(J)}};iterator=this.createIterator()}kW(uO,[j0]);function dW($,J){return(W,X,...Y)=>{let U=[X,...Y].map((Z)=>({type:$,isAll:J,rightSelect:Z}));for(let Z of U)if(!O$(W.getSelectedFields(),Z.rightSelect.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return W.addSetOperators(U)}}var hr=()=>({union:xr,unionAll:br,intersect:gr,intersectAll:fr,except:mr,exceptAll:yr}),xr=dW("union",!1),br=dW("union",!0),gr=dW("intersect",!1),fr=dW("intersect",!0),mr=dW("except",!1),yr=dW("except",!0);class S2{static[B]="MySqlQueryBuilder";dialect;dialectConfig;constructor($){this.dialect=j($,w7)?$:void 0,this.dialectConfig=j($,w7)?void 0:$}$with=($,J)=>{let W=this;return{as:(Y)=>{if(typeof Y==="function")Y=Y(W);return new Proxy(new $6(Y.getSQL(),J??("getSelectedFields"in Y?Y.getSelectedFields()??{}:{}),$,!0),new O0({alias:$,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}}};with(...$){let J=this;function W(Y){return new X8({fields:Y??void 0,session:void 0,dialect:J.getDialect(),withList:$})}function X(Y){return new X8({fields:Y??void 0,session:void 0,dialect:J.getDialect(),withList:$,distinct:!0})}return{select:W,selectDistinct:X}}select($){return new X8({fields:$??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct($){return new X8({fields:$??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}getDialect(){if(!this.dialect)this.dialect=new w7(this.dialectConfig);return this.dialect}}class dO{constructor($,J,W){this.table=$,this.session=J,this.dialect=W}static[B]="MySqlInsertBuilder";shouldIgnore=!1;ignore(){return this.shouldIgnore=!0,this}values($){if($=Array.isArray($)?$:[$],$.length===0)throw Error("values() must be called with at least one value");let J=$.map((W)=>{let X={},Y=this.table[y.Symbol.Columns];for(let U of Object.keys(W)){let Z=W[U];X[U]=j(Z,u)?Z:new J4(Z,Y[U])}return X});return new pO(this.table,J,this.shouldIgnore,this.session,this.dialect)}select($){let J=typeof $==="function"?$(new S2):$;if(!j(J,u)&&!O$(this.table[f1],J._.selectedFields))throw Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new pO(this.table,J,this.shouldIgnore,this.session,this.dialect,!0)}}class pO extends j0{constructor($,J,W,X,Y,U){super();this.session=X,this.dialect=Y,this.config={table:$,values:J,select:U,ignore:W}}static[B]="MySqlInsert";config;cacheConfig;onDuplicateKeyUpdate($){let J=this.dialect.buildUpdateSet(this.config.table,T6(this.config.table,$.set));return this.config.onConflict=E`update ${J}`,this}$returningId(){let $=[];for(let[J,W]of Object.entries(this.config.table[y.Symbol.Columns]))if(W.primary)$.push({field:W,path:[J]});return this.config.returning=$,this}getSQL(){return this.dialect.buildInsertQuery(this.config).sql}toSQL(){let{typings:$,...J}=this.dialect.sqlToQuery(this.getSQL());return J}prepare(){let{sql:$,generatedIds:J}=this.dialect.buildInsertQuery(this.config);return this.session.prepareQuery(this.dialect.sqlToQuery($),void 0,void 0,J,this.config.returning,{type:"insert",tables:W8(this.config.table)},this.cacheConfig)}execute=($)=>{return this.prepare().execute($)};createIterator=()=>{let $=this;return async function*(J){yield*$.prepare().iterator(J)}};iterator=this.createIterator();$dynamic(){return this}}class jG{constructor($,J,W,X){this.table=$,this.session=J,this.dialect=W,this.withList=X}static[B]="MySqlUpdateBuilder";set($){return new rk(this.table,T6(this.table,$),this.session,this.dialect,this.withList)}}class rk extends j0{constructor($,J,W,X,Y){super();this.session=W,this.dialect=X,this.config={set:J,table:$,withList:Y}}static[B]="MySqlUpdate";config;cacheConfig;where($){return this.config.where=$,this}orderBy(...$){if(typeof $[0]==="function"){let J=$[0](new Proxy(this.config.table[y.Symbol.Columns],new O0({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),W=Array.isArray(J)?J:[J];this.config.orderBy=W}else{let J=$;this.config.orderBy=J}return this}limit($){return this.config.limit=$,this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:$,...J}=this.dialect.sqlToQuery(this.getSQL());return J}prepare(){return this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,void 0,void 0,this.config.returning,{type:"insert",tables:W8(this.config.table)},this.cacheConfig)}execute=($)=>{return this.prepare().execute($)};createIterator=()=>{let $=this;return async function*(J){yield*$.prepare().iterator(J)}};iterator=this.createIterator();$dynamic(){return this}}class rO{constructor($,J,W,X,Y){this.schema=$,this.table=J,this.tableConfig=W,this.dialect=X,this.session=Y}static[B]="MySqlRelationalQueryBuilderV2";findMany($){return new lO(this.schema,this.table,this.tableConfig,this.dialect,this.session,$??!0,"many")}findFirst($){return new lO(this.schema,this.table,this.tableConfig,this.dialect,this.session,$??!0,"first")}}class lO extends j0{constructor($,J,W,X,Y,U,Z){super();this.schema=$,this.table=J,this.tableConfig=W,this.dialect=X,this.session=Y,this.config=U,this.mode=Z}static[B]="MySqlRelationalQueryV2";prepare(){let{query:$,builtQuery:J}=this._toSQL();return this.session.prepareRelationalQuery(J,void 0,(W)=>{let X=W.map((Y)=>T9(Y,$.selection));if(this.mode==="first")return X[0];return X})}_getQuery(){return this.dialect.buildRelationalQuery({schema:this.schema,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,mode:this.mode})}_toSQL(){let $=this._getQuery();return{builtQuery:this.dialect.sqlToQuery($.sql),query:$}}getSQL(){return this._getQuery().sql}toSQL(){return this._toSQL().builtQuery}execute(){return this.prepare().execute()}}class j2{constructor($,J,W,X,Y){if(this.dialect=$,this.session=J,this.mode=Y,this._=X?{schema:X.schema,fullSchema:X.fullSchema,tableNamesMap:X.tableNamesMap,relations:W}:{schema:void 0,fullSchema:{},tableNamesMap:{},relations:W},this._query={},this._.schema)for(let[U,Z]of Object.entries(this._.schema))this._query[U]=new cO(X.fullSchema,this._.schema,this._.tableNamesMap,X.fullSchema[U],Z,$,J,this.mode);this.query={};for(let[U,Z]of Object.entries(W))this.query[U]=new rO(W,W[Z.name].table,Z,$,J);this.$cache={invalidate:async(U)=>{}}}static[B]="MySqlDatabase";_query;query;$with=($,J)=>{let W=this;return{as:(Y)=>{if(typeof Y==="function")Y=Y(new S2(W.dialect));return new Proxy(new $6(Y.getSQL(),J??("getSelectedFields"in Y?Y.getSelectedFields()??{}:{}),$,!0),new O0({alias:$,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}}};$count($,J){return new B2({source:$,filters:J,session:this.session})}$cache;with(...$){let J=this;function W(Z){return new X8({fields:Z??void 0,session:J.session,dialect:J.dialect,withList:$})}function X(Z){return new X8({fields:Z??void 0,session:J.session,dialect:J.dialect,withList:$,distinct:!0})}function Y(Z){return new jG(Z,J.session,J.dialect,$)}function U(Z){return new SG(Z,J.session,J.dialect,$)}return{select:W,selectDistinct:X,update:Y,delete:U}}select($){return new X8({fields:$??void 0,session:this.session,dialect:this.dialect})}selectDistinct($){return new X8({fields:$??void 0,session:this.session,dialect:this.dialect,distinct:!0})}update($){return new jG($,this.session,this.dialect)}insert($){return new dO($,this.session,this.dialect)}delete($){return new SG($,this.session,this.dialect)}execute($){return this.session.execute(typeof $==="string"?E.raw($):$.getSQL())}transaction($,J){return this.session.transaction($,J)}}class nO{constructor($,J,W){if(this.cache=$,this.queryMetadata=J,this.cacheConfig=W,$&&$.strategy()==="all"&&W===void 0)this.cacheConfig={enable:!0,autoInvalidate:!0};if(!this.cacheConfig?.enable)this.cacheConfig=void 0}static[B]="MySqlPreparedQuery";async queryWithCache($,J,W){if(this.cache===void 0||j(this.cache,Y6)||this.queryMetadata===void 0)try{return await W()}catch(X){throw new a1($,J,X)}if(this.cacheConfig&&!this.cacheConfig.enable)try{return await W()}catch(X){throw new a1($,J,X)}if((this.queryMetadata.type==="insert"||this.queryMetadata.type==="update"||this.queryMetadata.type==="delete")&&this.queryMetadata.tables.length>0)try{let[X]=await Promise.all([W(),this.cache.onMutate({tables:this.queryMetadata.tables})]);return X}catch(X){throw new a1($,J,X)}if(!this.cacheConfig)try{return await W()}catch(X){throw new a1($,J,X)}if(this.queryMetadata.type==="select"){let X=await this.cache.get(this.cacheConfig.tag??await B5($,J),this.queryMetadata.tables,this.cacheConfig.tag!==void 0,this.cacheConfig.autoInvalidate);if(X===void 0){let Y;try{Y=await W()}catch(U){throw new a1($,J,U)}return await this.cache.put(this.cacheConfig.tag??await B5($,J),Y,this.cacheConfig.autoInvalidate?this.queryMetadata.tables:[],this.cacheConfig.tag!==void 0,this.cacheConfig.config),Y}return X}try{return await W()}catch(X){throw new a1($,J,X)}}joinsNotNullableMap}class iO{constructor($){this.dialect=$}static[B]="MySqlSession";execute($){return this.prepareQuery(this.dialect.sqlToQuery($),void 0).execute()}async count($){let J=await this.execute($);return Number(J[0][0].count)}getSetTransactionSQL($){let J=[];if($.isolationLevel)J.push(`isolation level ${$.isolationLevel}`);return J.length?E`set transaction ${E.raw(J.join(" "))}`:void 0}getStartTransactionSQL($){let J=[];if($.withConsistentSnapshot)J.push("with consistent snapshot");if($.accessMode)J.push($.accessMode);return J.length?E`start transaction ${E.raw(J.join(" "))}`:void 0}}class tO extends j2{constructor($,J,W,X,Y,U){super($,J,W,X,U);this.relations=W,this.schema=X,this.nestedIndex=Y}static[B]="MySqlTransaction";rollback(){throw new eJ}}class aO extends nO{constructor($,J,W,X,Y,U,Z,H,G,z,w,D){super(Y,U,Z);this.client=$,this.query=J,this.params=W,this.logger=X,this.fields=H,this.customResultMapper=G,this.generatedIds=z,this.returningIds=w,this.isRqbV2Query=D}static[B]="BunMySqlPreparedQuery";async execute($={}){if(this.isRqbV2Query)return this.executeRqbV2($);let{fields:J,client:W,logger:X,params:Y,query:U,joinsNotNullableMap:Z,customResultMapper:H,returningIds:G,generatedIds:z}=this,w=K$(Y,$);if(X.logQuery(U,w),!J&&!H){let K=await this.queryWithCache(U,w,async()=>{return await W.unsafe(U,w)}),O=K.lastInsertRowid,F=K.affectedRows;if(G){let M=[],A=0;for(let I=O;I<O+F;I++){for(let P of G){let Q=G[0].path[0];if(j(P.field,G0)){if(P.field.primary&&P.field.autoIncrement)M.push({[Q]:I});if(P.field.defaultFn&&z)M.push({[Q]:z[A][Q]})}}A++}return M}return K}let D=await this.queryWithCache(U,w,async()=>{return await W.unsafe(U,w).values()});if(H)return H(D);return D.map((K)=>R9(J,K,Z))}async executeRqbV2($={}){let J=K$(this.params,$);this.logger.logQuery(this.query,J);let{client:W,query:X,customResultMapper:Y}=this,U=await W.unsafe(X,J);return Y(U)}async*iterator($={}){let{fields:J,params:W,query:X,joinsNotNullableMap:Y,client:U,customResultMapper:Z}=this,H=K$(W,$),G=await this.queryWithCache(X,H,async()=>{return await U.unsafe(X,H).values()}),z=Boolean(J||Z);for(let w of G){if(w===void 0||Array.isArray(w)&&w.length===0)break;if(z)if(Z){let D=Z([w]);yield Array.isArray(D)?D[0]:D}else yield R9(J,w,Y);else yield w}}}class k2 extends iO{constructor($,J,W,X,Y){super(J);this.client=$,this.relations=W,this.schema=X,this.options=Y,this.logger=Y.logger??new Z7,this.cache=Y.cache??new Y6,this.mode=Y.mode}static[B]="BunMySqlSession";logger;mode;cache;prepareQuery($,J,W,X,Y,U,Z){return new aO(this.client,$.sql,$.params,this.logger,this.cache,U,Z,J,W,X,Y)}prepareRelationalQuery($,J,W,X,Y){return new aO(this.client,$.sql,$.params,this.logger,this.cache,void 0,void 0,J,W,X,Y,!0)}async query($,J){return this.logger.logQuery($,J),await this.client.unsafe($,J)}all($){let J=this.dialect.sqlToQuery($);return this.logger.logQuery(J.sql,J.params),this.client.unsafe(J.sql,J.params)}async count($){let J=this.dialect.sqlToQuery($),X=(await this.client.unsafe(J.sql,J.params).values())[0][0];if(typeof X==="number")return X;return Number(X)}async transaction($,J){let W=J?this.getStartTransactionSQL(J)?.inlineParams().toQuery(this.dialect).sql.slice(18)??"":"";if(J?.isolationLevel)throw Error("Driver doesn't support setting isolation level on transaction");return this.client.begin(W,async(X)=>{let Y=new k2(X,this.dialect,this.relations,this.schema,this.options),U=new oO(this.dialect,Y,this.relations,this.schema,0,this.mode);return $(U)})}}class oO extends tO{static[B]="BunMySqlTransaction";async transaction($){return this.session.client.savepoint((J)=>{let W=new k2(J,this.dialect,this.relations,this.schema,this.session.options),X=new oO(this.dialect,W,this.relations,this.schema,this.nestedIndex+1,this.mode);return $(X)})}}class nk extends j2{static[B]="BunMySqlDatabase"}function lW($,J={}){let W=new w7({casing:J.casing}),X;if(J.logger===!0)X=new U7;else if(J.logger!==!1)X=J.logger;let Y;if(J.schema){if(J.mode===void 0)throw new t1({message:'You need to specify "mode": "planetscale" or "default" when providing a schema. Read more: https://orm.drizzle.team/docs/rqb#modes'});let z=gW(J.schema,fW);Y={fullSchema:J.schema,schema:z.tables,tableNamesMap:z.tableNamesMap}}let U=J.mode??"default",Z=J.relations??{},H=new k2($,W,Z,Y,{logger:X,mode:U,cache:J.cache}),G=new nk(W,H,Z,Y,U);if(G.$client=$,G.$cache=J.cache,G.$cache)G.$cache.invalidate=J.cache?.onMutate;return G}function v2(...$){if(typeof $[0]==="string"){let J=new sO($[0]);return lW(J,$[1])}if(vW($[0])){let{connection:J,client:W,...X}=$[0];if(W)return lW(W,X);if(typeof J==="object"&&J.url!==void 0){let{url:U,...Z}=J,H=new sO({url:U,...Z});return lW(H,X)}let Y=new sO(J);return lW(Y,X)}return lW($[0],$[1])}(($)=>{function J(W){return lW({options:{parsers:{},serializers:{}}},W)}$.mock=J})(v2||(v2={}));var{SQL:JF}=globalThis.Bun;class eO extends hO{constructor($,J,W,X,Y,U,Z,H,G,z,w){super({sql:J,params:W},Y,U,Z);this.client=$,this.queryString=J,this.params=W,this.logger=X,this.fields=H,this._isResponseInArrayMode=G,this.customResultMapper=z,this.isRqbV2Query=w}static[B]="BunSQLPreparedQuery";async execute($={}){if(this.isRqbV2Query)return this.executeRqbV2($);return t0.startActiveSpan("drizzle.execute",async(J)=>{let W=K$(this.params,$);J?.setAttributes({"drizzle.query.text":this.queryString,"drizzle.query.params":JSON.stringify(W)}),this.logger.logQuery(this.queryString,W);let{fields:X,queryString:Y,client:U,joinsNotNullableMap:Z,customResultMapper:H}=this;if(!X&&!H)return t0.startActiveSpan("drizzle.driver.execute",async()=>{return await this.queryWithCache(Y,W,async()=>{return await U.unsafe(Y,W)})});let G=await t0.startActiveSpan("drizzle.driver.execute",async()=>{return J?.setAttributes({"drizzle.query.text":Y,"drizzle.query.params":JSON.stringify(W)}),await this.queryWithCache(Y,W,async()=>{return U.unsafe(Y,W).values()})});return t0.startActiveSpan("drizzle.mapResponse",()=>{return H?H(G):G.map((z)=>R9(X,z,Z))})})}async executeRqbV2($={}){return t0.startActiveSpan("drizzle.execute",async(J)=>{let W=K$(this.params,$);J?.setAttributes({"drizzle.query.text":this.queryString,"drizzle.query.params":JSON.stringify(W)}),this.logger.logQuery(this.queryString,W);let{queryString:X,client:Y,customResultMapper:U}=this,Z=await t0.startActiveSpan("drizzle.driver.execute",()=>{return J?.setAttributes({"drizzle.query.text":X,"drizzle.query.params":JSON.stringify(W)}),Y.unsafe(X,W)});return t0.startActiveSpan("drizzle.mapResponse",()=>{return U(Z)})})}all($={}){return t0.startActiveSpan("drizzle.execute",async(J)=>{let W=K$(this.params,$);return J?.setAttributes({"drizzle.query.text":this.queryString,"drizzle.query.params":JSON.stringify(W)}),this.logger.logQuery(this.queryString,W),t0.startActiveSpan("drizzle.driver.execute",async()=>{return J?.setAttributes({"drizzle.query.text":this.queryString,"drizzle.query.params":JSON.stringify(W)}),await this.queryWithCache(this.queryString,W,async()=>{return await this.client.unsafe(this.queryString,W)})})})}isResponseInArrayMode(){return this._isResponseInArrayMode}}class C2 extends xO{constructor($,J,W,X,Y={}){super(J);this.client=$,this.relations=W,this.schema=X,this.options=Y,this.logger=Y.logger??new Z7,this.cache=Y.cache??new Y6}static[B]="BunSQLSession";logger;cache;prepareQuery($,J,W,X,Y,U,Z){return new eO(this.client,$.sql,$.params,this.logger,this.cache,U,Z,J,X,Y)}prepareRelationalQuery($,J,W,X){return new eO(this.client,$.sql,$.params,this.logger,this.cache,void 0,void 0,J,!0,X,!0)}query($,J){return this.logger.logQuery($,J),this.client.unsafe($,J).values()}queryObjects($,J){return this.client.unsafe($,J)}transaction($,J){return this.client.begin(async(W)=>{let X=new C2(W,this.dialect,this.relations,this.schema,this.options),Y=new $F(this.dialect,X,this.relations,this.schema);if(J)await Y.setTransaction(J);return $(Y)})}}class $F extends bO{constructor($,J,W,X,Y=0){super($,J,W,X,Y);this.session=J}static[B]="BunSQLTransaction";transaction($){return this.session.client.savepoint((J)=>{let W=new C2(J,this.dialect,this.relations,this.schema,this.session.options),X=new $F(this.dialect,W,this.relations,this.schema);return $(X)})}}class ik extends _2{static[B]="BunSQLDatabase"}function rW($,J={}){let W=new W7({casing:J.casing}),X;if(J.logger===!0)X=new U7;else if(J.logger!==!1)X=J.logger;let Y;if(J.schema){let G=gW(J.schema,fW);Y={fullSchema:J.schema,schema:G.tables,tableNamesMap:G.tableNamesMap}}let U=J.relations??{},Z=new C2($,W,U,Y,{logger:X,cache:J.cache}),H=new ik(W,Z,U,Y);if(H.$client=$,H.$cache=J.cache,H.$cache)H.$cache.invalidate=J.cache?.onMutate;return H}function D7(...$){if(typeof $[0]==="string"){let J=new JF($[0]);return rW(J,$[1])}if(vW($[0])){let{connection:J,client:W,...X}=$[0];if(W)return rW(W,X);if(typeof J==="object"&&J.url!==void 0){let{url:U,...Z}=J,H=new JF({url:U,...Z});return rW(H,X)}let Y=new JF(J);return rW(Y,X)}return rW($[0],$[1])}(($)=>{function J(W){return rW({options:{parsers:{},serializers:{}}},W)}$.mock=J})(D7||(D7={}));var{SQL:EF}=globalThis.Bun;function tk($,J){return`${$[f4]}_${J.join("_")}_unique`}class T2 extends G0{static[B]="SQLiteColumn";table;constructor($,J){if(!J.uniqueName)J.uniqueName=tk($,[J.name]);super($,J);this.table=$}}var ak=Symbol.for("drizzle:SQLiteInlineForeignKeys");class e4 extends y{static[B]="SQLiteTable";static Symbol=Object.assign({},y.Symbol,{InlineForeignKeys:ak});[y.Symbol.Columns];[ak]=[];[y.Symbol.ExtraConfigBuilder]=void 0}function Y8($){if(j($,e4))return[`${$[y.Symbol.BaseName]}`];if(j($,C0))return $._.usedTables??[];if(j($,u))return $.usedTables??[];return[]}class kG extends j0{constructor($,J,W,X){super();this.table=$,this.session=J,this.dialect=W,this.config={table:$,withList:X}}static[B]="SQLiteDelete";config;where($){return this.config.where=$,this}orderBy(...$){if(typeof $[0]==="function"){let J=$[0](new Proxy(this.config.table[y.Symbol.Columns],new O0({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),W=Array.isArray(J)?J:[J];this.config.orderBy=W}else{let J=$;this.config.orderBy=J}return this}limit($){return this.config.limit=$,this}returning($=this.table[e4.Symbol.Columns]){return this.config.returning=k1($),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:$,...J}=this.dialect.sqlToQuery(this.getSQL());return J}_prepare($=!0){return this.session[$?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run",!0,void 0,{type:"delete",tables:Y8(this.config.table)})}prepare(){return this._prepare(!1)}run=($)=>{return this._prepare().run($)};all=($)=>{return this._prepare().all($)};get=($)=>{return this._prepare().get($)};values=($)=>{return this._prepare().values($)};async execute($){return this._prepare().execute($)}$dynamic(){return this}}class K7 extends j1{static[B]="SQLiteViewBase"}class nW{static[B]="SQLiteDialect";casing;constructor($){this.casing=new sJ($?.casing)}escapeName($){return`"${$}"`}escapeParam($){return"?"}escapeString($){return`'${$.replace(/'/g,"''")}'`}buildWithCTE($){if(!$?.length)return;let J=[E`with `];for(let[W,X]of $.entries())if(J.push(E`${E.identifier(X._.alias)} as (${X._.sql})`),W<$.length-1)J.push(E`, `);return J.push(E` `),E.join(J)}buildDeleteQuery({table:$,where:J,returning:W,withList:X,limit:Y,orderBy:U}){let Z=this.buildWithCTE(X),H=W?E` returning ${this.buildSelection(W,{isSingleTable:!0})}`:void 0,G=J?E` where ${J}`:void 0,z=this.buildOrderBy(U),w=this.buildLimit(Y);return E`${Z}delete from ${$}${G}${H}${z}${w}`}buildUpdateSet($,J){let W=$[y.Symbol.Columns],X=Object.keys(W).filter((U)=>J[U]!==void 0||W[U]?.onUpdateFn!==void 0),Y=X.length;return E.join(X.flatMap((U,Z)=>{let H=W[U],G=J[U]??E.param(H.onUpdateFn(),H),z=E`${E.identifier(this.casing.getColumnCasing(H))} = ${G}`;if(Z<Y-1)return[z,E.raw(", ")];return[z]}))}buildUpdateQuery({table:$,set:J,where:W,returning:X,withList:Y,joins:U,from:Z,limit:H,orderBy:G}){let z=this.buildWithCTE(Y),w=this.buildUpdateSet($,J),D=Z&&E.join([E.raw(" from "),this.buildFromTable(Z)]),K=this.buildJoins(U),O=X?E` returning ${this.buildSelection(X,{isSingleTable:!0})}`:void 0,F=W?E` where ${W}`:void 0,M=this.buildOrderBy(G),A=this.buildLimit(H);return E`${z}update ${$} set ${w}${D}${K}${F}${O}${M}${A}`}buildSelection($,{isSingleTable:J=!1}={}){let W=$.length,X=$.flatMap(({field:Y},U)=>{let Z=[];if(j(Y,u.Aliased)&&Y.isSelectionField)Z.push(E.identifier(Y.fieldAlias));else if(j(Y,u.Aliased)||j(Y,u)){let H=j(Y,u.Aliased)?Y.sql:Y;if(J)Z.push(new u(H.queryChunks.map((G)=>{if(j(G,G0))return E.identifier(this.casing.getColumnCasing(G));return G})));else Z.push(H);if(j(Y,u.Aliased))Z.push(E` as ${E.identifier(Y.fieldAlias)}`)}else if(j(Y,G0)){let H=Y.table[y.Symbol.Name];if(Y.columnType==="SQLiteNumericBigInt")if(J)Z.push(E`cast(${E.identifier(this.casing.getColumnCasing(Y))} as text)`);else Z.push(E`cast(${E.identifier(H)}.${E.identifier(this.casing.getColumnCasing(Y))} as text)`);else if(J)Z.push(E.identifier(this.casing.getColumnCasing(Y)));else Z.push(E`${E.identifier(H)}.${E.identifier(this.casing.getColumnCasing(Y))}`)}if(U<W-1)Z.push(E`, `);return Z});return E.join(X)}buildJoins($){if(!$||$.length===0)return;let J=[];if($)for(let[W,X]of $.entries()){if(W===0)J.push(E` `);let Y=X.table,U=X.on?E` on ${X.on}`:void 0;if(j(Y,e4)){let Z=Y[e4.Symbol.Name],H=Y[e4.Symbol.Schema],G=Y[e4.Symbol.OriginalName],z=Z===G?void 0:X.alias;J.push(E`${E.raw(X.joinType)} join ${H?E`${E.identifier(H)}.`:void 0}${E.identifier(G)}${z&&E` ${E.identifier(z)}`}${U}`)}else J.push(E`${E.raw(X.joinType)} join ${Y}${U}`);if(W<$.length-1)J.push(E` `)}return E.join(J)}buildLimit($){return typeof $==="object"||typeof $==="number"&&$>=0?E` limit ${$}`:void 0}buildOrderBy($){let J=[];if($){for(let[W,X]of $.entries())if(J.push(X),W<$.length-1)J.push(E`, `)}return J.length>0?E` order by ${E.join(J)}`:void 0}buildFromTable($){if(j($,y)&&$[y.Symbol.IsAlias])return E`${E`${E.identifier($[y.Symbol.Schema]??"")}.`.if($[y.Symbol.Schema])}${E.identifier($[y.Symbol.OriginalName])} ${E.identifier($[y.Symbol.Name])}`;return $}buildSelectQuery({withList:$,fields:J,fieldsFlat:W,where:X,having:Y,table:U,joins:Z,orderBy:H,groupBy:G,limit:z,offset:w,distinct:D,setOperators:K}){let O=W??k1(J);for(let h of O)if(j(h.field,G0)&&m1(h.field.table)!==(j(U,C0)?U._.alias:j(U,K7)?U[R0].name:j(U,u)?void 0:m1(U))&&!((x)=>Z?.some(({alias:b})=>b===(x[y.Symbol.IsAlias]?m1(x):x[y.Symbol.BaseName])))(h.field.table)){let x=m1(h.field.table);throw Error(`Your "${h.path.join("->")}" field references a column "${x}"."${h.field.name}", but the table "${x}" is not part of the query! Did you forget to join it?`)}let F=!Z||Z.length===0,M=this.buildWithCTE($),A=D?E` distinct`:void 0,I=this.buildSelection(O,{isSingleTable:F}),P=this.buildFromTable(U),Q=this.buildJoins(Z),N=X?E` where ${X}`:void 0,_=Y?E` having ${Y}`:void 0,L=[];if(G){for(let[h,x]of G.entries())if(L.push(x),h<G.length-1)L.push(E`, `)}let R=L.length>0?E` group by ${E.join(L)}`:void 0,S=this.buildOrderBy(H),k=this.buildLimit(z),T=w?E` offset ${w}`:void 0,q=E`${M}select${A} ${I} from ${P}${Q}${N}${R}${_}${S}${k}${T}`;if(K.length>0)return this.buildSetOperations(q,K);return q}buildSetOperations($,J){let[W,...X]=J;if(!W)throw Error("Cannot pass undefined values to any set operator");if(X.length===0)return this.buildSetOperationQuery({leftSelect:$,setOperator:W});return this.buildSetOperations(this.buildSetOperationQuery({leftSelect:$,setOperator:W}),X)}buildSetOperationQuery({leftSelect:$,setOperator:{type:J,isAll:W,rightSelect:X,limit:Y,orderBy:U,offset:Z}}){let H=E`${$.getSQL()} `,G=E`${X.getSQL()}`,z;if(U&&U.length>0){let O=[];for(let F of U)if(j(F,T2))O.push(E.identifier(F.name));else if(j(F,u)){for(let M=0;M<F.queryChunks.length;M++){let A=F.queryChunks[M];if(j(A,T2))F.queryChunks[M]=E.identifier(this.casing.getColumnCasing(A))}O.push(E`${F}`)}else O.push(E`${F}`);z=E` order by ${E.join(O,E`, `)}`}let w=typeof Y==="object"||typeof Y==="number"&&Y>=0?E` limit ${Y}`:void 0,D=E.raw(`${J} ${W?"all ":""}`),K=Z?E` offset ${Z}`:void 0;return E`${H}${D}${G}${z}${w}${K}`}buildInsertQuery({table:$,values:J,onConflict:W,returning:X,withList:Y,select:U}){let Z=[],H=$[y.Symbol.Columns],G=Object.entries(H).filter(([F,M])=>!M.shouldDisableInsert()),z=G.map(([,F])=>E.identifier(this.casing.getColumnCasing(F)));if(U){let F=J;if(j(F,u))Z.push(F);else Z.push(F.getSQL())}else{let F=J;Z.push(E.raw("values "));for(let[M,A]of F.entries()){let I=[];for(let[P,Q]of G){let N=A[P];if(N===void 0||j(N,J4)&&N.value===void 0){let _;if(Q.default!==null&&Q.default!==void 0)_=j(Q.default,u)?Q.default:E.param(Q.default,Q);else if(Q.defaultFn!==void 0){let L=Q.defaultFn();_=j(L,u)?L:E.param(L,Q)}else if(!Q.default&&Q.onUpdateFn!==void 0){let L=Q.onUpdateFn();_=j(L,u)?L:E.param(L,Q)}else _=E`null`;I.push(_)}else I.push(N)}if(Z.push(I),M<F.length-1)Z.push(E`, `)}}let w=this.buildWithCTE(Y),D=E.join(Z),K=X?E` returning ${this.buildSelection(X,{isSingleTable:!0})}`:void 0,O=W?.length?E.join(W):void 0;return E`${w}insert into ${$} ${z} ${D}${O}${K}`}sqlToQuery($,J){return $.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,invokeSource:J})}_buildRelationalQuery({fullSchema:$,schema:J,tableNamesMap:W,table:X,tableConfig:Y,queryConfig:U,tableAlias:Z,nestedQueryRelation:H,joinOn:G}){let z=[],w,D,K=[],O,F=[];if(U===!0)z=Object.entries(Y.columns).map(([I,P])=>({dbKey:P.name,tsKey:I,field:y0(P,Z),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let A=Object.fromEntries(Object.entries(Y.columns).map(([L,R])=>[L,y0(R,Z)]));if(U.where){let L=typeof U.where==="function"?U.where(A,tJ()):U.where;O=L&&J6(L,Z)}let I=[],P=[];if(U.columns){let L=!1;for(let[R,S]of Object.entries(U.columns)){if(S===void 0)continue;if(R in Y.columns){if(!L&&S===!0)L=!0;P.push(R)}}if(P.length>0)P=L?P.filter((R)=>U.columns?.[R]===!0):Object.keys(Y.columns).filter((R)=>!P.includes(R))}else P=Object.keys(Y.columns);for(let L of P){let R=Y.columns[L];I.push({tsKey:L,value:R})}let Q=[];if(U.with)Q=Object.entries(U.with).filter((L)=>!!L[1]).map(([L,R])=>({tsKey:L,queryConfig:R,relation:Y.relations[L]}));let N;if(U.extras){N=typeof U.extras==="function"?U.extras(A,{sql:E}):U.extras;for(let[L,R]of Object.entries(N))I.push({tsKey:L,value:B9(R,Z)})}for(let{tsKey:L,value:R}of I)z.push({dbKey:j(R,u.Aliased)?R.fieldAlias:Y.columns[L].name,tsKey:L,field:j(R,G0)?y0(R,Z):R,relationTableTsKey:void 0,isJson:!1,selection:[]});let _=typeof U.orderBy==="function"?U.orderBy(A,aJ()):U.orderBy??[];if(!Array.isArray(_))_=[_];K=_.map((L)=>{if(j(L,G0))return y0(L,Z);return J6(L,Z)}),w=U.limit,D=U.offset;for(let{tsKey:L,queryConfig:R,relation:S}of Q){let k=oJ(J,W,S),T=C6(S.referencedTable),q=W[T],h=`${Z}_${L}`,x=F1(...k.fields.map((d,X0)=>y1(y0(k.references[X0],h),y0(d,Z)))),b=this._buildRelationalQuery({fullSchema:$,schema:J,tableNamesMap:W,table:$[q],tableConfig:J[q],queryConfig:j(S,W6)?R===!0?{limit:1}:{...R,limit:1}:R,tableAlias:h,joinOn:x,nestedQueryRelation:S}),r=E`(${b.sql})`.as(L);z.push({dbKey:L,tsKey:L,field:r,relationTableTsKey:q,isJson:!0,selection:b.selection})}}if(z.length===0)throw new t1({message:`No fields selected for table "${Y.tsName}" ("${Z}"). You need to have at least one item in "columns", "with" or "extras". If you need to select all columns, omit the "columns" key or set it to undefined.`});let M;if(O=F1(G,O),H){let A=E`json_array(${E.join(z.map(({field:Q})=>j(Q,T2)?E.identifier(this.casing.getColumnCasing(Q)):j(Q,u.Aliased)?Q.sql:Q),E`, `)})`;if(j(H,$8))A=E`coalesce(json_group_array(${A}), json_array())`;let I=[{dbKey:"data",tsKey:"data",field:A.as("data"),isJson:!0,relationTableTsKey:Y.tsName,selection:z}];if(w!==void 0||D!==void 0||K.length>0)M=this.buildSelectQuery({table:A1(X,Z),fields:{},fieldsFlat:[{path:[],field:E.raw("*")}],where:O,limit:w,offset:D,orderBy:K,setOperators:[]}),O=void 0,w=void 0,D=void 0,K=void 0;else M=A1(X,Z);M=this.buildSelectQuery({table:j(M,e4)?M:new C0(M,{},Z),fields:{},fieldsFlat:I.map(({field:Q})=>({path:[],field:j(Q,G0)?y0(Q,Z):Q})),joins:F,where:O,limit:w,offset:D,orderBy:K,setOperators:[]})}else M=this.buildSelectQuery({table:A1(X,Z),fields:{},fieldsFlat:z.map(({field:A})=>({path:[],field:j(A,G0)?y0(A,Z):A})),joins:F,where:O,limit:w,offset:D,orderBy:K,setOperators:[]});return{tableTsKey:Y.tsName,sql:M,selection:z}}nestedSelectionerror(){throw new t1({message:"Views with nested selections are not supported by the relational query builder"})}buildRqbColumn($,J,W){if(j(J,G0)){let X=E`${$}.${E.identifier(this.casing.getColumnCasing(J))}`;switch(J.columnType){case"SQLiteBigInt":case"SQLiteBlobJson":case"SQLiteBlobBuffer":return E`hex(${X}) as ${E.identifier(W)}`;case"SQLiteNumeric":case"SQLiteNumericNumber":case"SQLiteNumericBigInt":return E`cast(${X} as text) as ${E.identifier(W)}`;case"SQLiteCustomColumn":return E`${J.jsonSelectIdentifier(X,E)} as ${E.identifier(W)}`;default:return E`${X} as ${E.identifier(W)}`}}return E`${$}.${j(J,u.Aliased)?E.identifier(J.fieldAlias):Q5(J)?E.identifier(W):this.nestedSelectionerror()} as ${E.identifier(W)}`}unwrapAllColumns=($,J)=>{return E.join(Object.entries($[f1]).map(([W,X])=>{return J.push({key:W,field:X}),this.buildRqbColumn($,X,W)}),E`, `)};getSelectedTableColumns=($,J)=>{let W=[],X=$[f1],Y=Object.entries(J),U;for(let[Z,H]of Y){if(H===void 0)continue;if(U=U||H,H){let G=X[Z];W.push({column:G,tsName:Z})}}if(U===!1)for(let[Z,H]of Object.entries(X)){if(J[Z]===!1)continue;W.push({column:H,tsName:Z})}return W};buildColumns=($,J,W)=>W?.columns?(()=>{let X=[],Y=this.getSelectedTableColumns($,W?.columns);for(let{column:U,tsName:Z}of Y)X.push(this.buildRqbColumn($,U,Z)),J.push({key:Z,field:U});return X.length?E.join(X,E`, `):void 0})():this.unwrapAllColumns($,J);buildRelationalQuery({schema:$,table:J,tableConfig:W,queryConfig:X,relationWhere:Y,mode:U,isNested:Z,errorPath:H,depth:G,throughJoin:z,jsonb:w}){let D=[],K=U==="first",O=X===!0?void 0:X,F=H??"",M=G??0;if(!M)J=A1(J,`d${M}`);let A=K?1:O?.limit,I=O?.offset,P=this.buildColumns(J,D,O),Q=O?.where&&Y?F1(F$(J,O.where,W.relations,$,this.casing),Y):O?.where?F$(J,O.where,W.relations,$,this.casing):Y,N=O?.orderBy?yW(J,O.orderBy):void 0,_=O?.extras?cW(J,O.extras):void 0;if(_)D.push(..._.selection);let L=O?(()=>{let{with:T}=O;if(!T)return;let q=Object.entries(T).filter(([h,x])=>x);if(!q.length)return;return E.join(q.map(([h,x])=>{let b=W.relations[h],r=j(b,N5),d=A1(b.targetTable,`d${M+1}`),X0=b.throughTable?A1(b.throughTable,`tr${M}`):void 0,{filter:i,joinCondition:K0}=J7(this.casing,b,J,d,X0),D0=X0?E` inner join ${X6(X0)} on ${K0}`:void 0,U0=this.buildRelationalQuery({table:d,mode:r?"first":"many",schema:$,queryConfig:x,tableConfig:$[b.targetTableName],relationWhere:i,isNested:!0,errorPath:`${F.length?`${F}.`:""}${h}`,depth:M+1,throughJoin:D0,jsonb:w});D.push({field:d,key:h,selection:U0.selection,isArray:!r,isOptional:(b.optional??!1)||x!==!0&&!!x.where});let B0=E.join(U0.selection.map((T1)=>{return E`${E.raw(this.escapeString(T1.key))}, ${T1.selection?E`${w}(${E.identifier(T1.key)})`:E.identifier(T1.key)}`}),E`, `),g0=Z?w:E`json`;return r?E`(select ${g0}_object(${B0}) as ${E.identifier("r")} from (${U0.sql}) as ${E.identifier("t")}) as ${E.identifier(h)}`:E`coalesce((select ${g0}_group_array(json_object(${B0})) as ${E.identifier("r")} from (${U0.sql}) as ${E.identifier("t")}), ${w}_array()) as ${E.identifier(h)}`}),E`, `)})():void 0,R=[P,_?.sql,L].filter((T)=>T!==void 0);if(!R.length)throw new t1({message:`No fields selected for table "${W.name}"${F?` ("${F}")`:""}`});let S=E.join(R,E`, `);return{sql:E`select ${S} from ${X6(J)}${z}${E` where ${Q}`.if(Q)}${E` order by ${N}`.if(N)}${E` limit ${A}`.if(A!==void 0)}${E` offset ${I}`.if(I!==void 0)}`,selection:D}}}class WF extends nW{static[B]="SQLiteSyncDialect";migrate($,J,W){let X=W===void 0?"__drizzle_migrations":typeof W==="string"?"__drizzle_migrations":W.migrationsTable??"__drizzle_migrations",Y=E`
			CREATE TABLE IF NOT EXISTS ${E.identifier(X)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at numeric
			)
		`;J.run(Y);let Z=J.values(E`SELECT id, hash, created_at FROM ${E.identifier(X)} ORDER BY created_at DESC LIMIT 1`)[0]??void 0;J.run(E`BEGIN`);try{for(let H of $)if(!Z||Number(Z[2])<H.folderMillis){for(let G of H.sql)J.run(E.raw(G));J.run(E`INSERT INTO ${E.identifier(X)} ("hash", "created_at") VALUES(${H.hash}, ${H.folderMillis})`)}J.run(E`COMMIT`)}catch(H){throw J.run(E`ROLLBACK`),H}}}class XF extends nW{static[B]="SQLiteAsyncDialect";async migrate($,J,W){let X=W===void 0?"__drizzle_migrations":typeof W==="string"?"__drizzle_migrations":W.migrationsTable??"__drizzle_migrations",Y=E`
			CREATE TABLE IF NOT EXISTS ${E.identifier(X)} (
				id INTEGER PRIMARY KEY,
				hash text NOT NULL,
				created_at numeric
			)
		`;await J.run(Y);let Z=(await J.values(E`SELECT id, hash, created_at FROM ${E.identifier(X)} ORDER BY created_at DESC LIMIT 1`))[0]??void 0;await J.transaction(async(H)=>{for(let G of $)if(!Z||Number(Z[2])<G.folderMillis){for(let z of G.sql)await H.run(E.raw(z));await H.run(E`INSERT INTO ${E.identifier(X)} ("hash", "created_at") VALUES(${G.hash}, ${G.folderMillis})`)}})}}class U8{static[B]="SQLiteSelectBuilder";fields;session;dialect;withList;distinct;constructor($){this.fields=$.fields,this.session=$.session,this.dialect=$.dialect,this.withList=$.withList,this.distinct=$.distinct}from($){let J=!!this.fields,W;if(this.fields)W=this.fields;else if(j($,C0))W=Object.fromEntries(Object.keys($._.selectedFields).map((X)=>[X,$[X]]));else if(j($,K7))W=$[R0].selectedFields;else if(j($,u))W={};else W=q6($);return new YF({table:$,fields:W,isPartialSelect:J,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct})}}class ok extends X7{static[B]="SQLiteSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;cacheConfig=void 0;usedTables=new Set;constructor({table:$,fields:J,isPartialSelect:W,session:X,dialect:Y,withList:U,distinct:Z}){super();this.config={withList:U,table:$,fields:{...J},distinct:Z,setOperators:[]},this.isPartialSelect=W,this.session=X,this.dialect=Y,this._={selectedFields:J,config:this.config},this.tableName=m4($),this.joinsNotNullableMap=typeof this.tableName==="string"?{[this.tableName]:!0}:{};for(let H of Y8($))this.usedTables.add(H)}getUsedTables(){return[...this.usedTables]}createJoin($){return(J,W)=>{let X=this.tableName,Y=m4(J);for(let U of Y8(J))this.usedTables.add(U);if(typeof Y==="string"&&this.config.joins?.some((U)=>U.alias===Y))throw Error(`Alias "${Y}" is already used in this query`);if(!this.isPartialSelect){if(Object.keys(this.joinsNotNullableMap).length===1&&typeof X==="string")this.config.fields={[X]:this.config.fields};if(typeof Y==="string"&&!j(J,u)){let U=j(J,C0)?J._.selectedFields:j(J,j1)?J[R0].selectedFields:J[y.Symbol.Columns];this.config.fields[Y]=U}}if(typeof W==="function")W=W(new Proxy(this.config.fields,new O0({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})));if(!this.config.joins)this.config.joins=[];if(this.config.joins.push({on:W,table:J,joinType:$,alias:Y}),typeof Y==="string")switch($){case"left":{this.joinsNotNullableMap[Y]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([U])=>[U,!1])),this.joinsNotNullableMap[Y]=!0;break}case"cross":case"inner":{this.joinsNotNullableMap[Y]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([U])=>[U,!1])),this.joinsNotNullableMap[Y]=!1;break}}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");crossJoin=this.createJoin("cross");createSetOperator($,J){return(W)=>{let X=typeof W==="function"?W(cr()):W;if(!O$(this.getSelectedFields(),X.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:$,isAll:J,rightSelect:X}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);except=this.createSetOperator("except",!1);addSetOperators($){return this.config.setOperators.push(...$),this}where($){if(typeof $==="function")$=$(new Proxy(this.config.fields,new O0({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})));return this.config.where=$,this}having($){if(typeof $==="function")$=$(new Proxy(this.config.fields,new O0({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})));return this.config.having=$,this}groupBy(...$){if(typeof $[0]==="function"){let J=$[0](new Proxy(this.config.fields,new O0({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(J)?J:[J]}else this.config.groupBy=$;return this}orderBy(...$){if(typeof $[0]==="function"){let J=$[0](new Proxy(this.config.fields,new O0({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),W=Array.isArray(J)?J:[J];if(this.config.setOperators.length>0)this.config.setOperators.at(-1).orderBy=W;else this.config.orderBy=W}else{let J=$;if(this.config.setOperators.length>0)this.config.setOperators.at(-1).orderBy=J;else this.config.orderBy=J}return this}limit($){if(this.config.setOperators.length>0)this.config.setOperators.at(-1).limit=$;else this.config.limit=$;return this}offset($){if(this.config.setOperators.length>0)this.config.setOperators.at(-1).offset=$;else this.config.offset=$;return this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:$,...J}=this.dialect.sqlToQuery(this.getSQL());return J}as($){let J=[];if(J.push(...Y8(this.config.table)),this.config.joins)for(let W of this.config.joins)J.push(...Y8(W.table));return new Proxy(new C0(this.getSQL(),this.config.fields,$,!1,[...new Set(J)]),new O0({alias:$,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new O0({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}}class YF extends ok{static[B]="SQLiteSelect";_prepare($=!0){if(!this.session)throw Error("Cannot execute a query on a query builder. Please use a database instance instead.");let J=k1(this.config.fields),W=this.session[$?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),J,"all",!0,void 0,{type:"select",tables:[...this.usedTables]},this.cacheConfig);return W.joinsNotNullableMap=this.joinsNotNullableMap,W}$withCache($){return this.cacheConfig=$===void 0?{config:{},enable:!0,autoInvalidate:!0}:$===!1?{enable:!1}:{enable:!0,autoInvalidate:!0,...$},this}prepare(){return this._prepare(!1)}run=($)=>{return this._prepare().run($)};all=($)=>{return this._prepare().all($)};get=($)=>{return this._prepare().get($)};values=($)=>{return this._prepare().values($)};async execute(){return this.all()}}kW(YF,[j0]);function vG($,J){return(W,X,...Y)=>{let U=[X,...Y].map((Z)=>({type:$,isAll:J,rightSelect:Z}));for(let Z of U)if(!O$(W.getSelectedFields(),Z.rightSelect.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return W.addSetOperators(U)}}var cr=()=>({union:ur,unionAll:pr,intersect:dr,except:lr}),ur=vG("union",!1),pr=vG("union",!0),dr=vG("intersect",!1),lr=vG("except",!1);class q2{static[B]="SQLiteQueryBuilder";dialect;dialectConfig;constructor($){this.dialect=j($,nW)?$:void 0,this.dialectConfig=j($,nW)?void 0:$}$with=($,J)=>{let W=this;return{as:(Y)=>{if(typeof Y==="function")Y=Y(W);return new Proxy(new $6(Y.getSQL(),J??("getSelectedFields"in Y?Y.getSelectedFields()??{}:{}),$,!0),new O0({alias:$,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}}};with(...$){let J=this;function W(Y){return new U8({fields:Y??void 0,session:void 0,dialect:J.getDialect(),withList:$})}function X(Y){return new U8({fields:Y??void 0,session:void 0,dialect:J.getDialect(),withList:$,distinct:!0})}return{select:W,selectDistinct:X}}select($){return new U8({fields:$??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct($){return new U8({fields:$??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}getDialect(){if(!this.dialect)this.dialect=new WF(this.dialectConfig);return this.dialect}}class CG{constructor($,J,W,X){this.table=$,this.session=J,this.dialect=W,this.withList=X}static[B]="SQLiteInsertBuilder";values($){if($=Array.isArray($)?$:[$],$.length===0)throw Error("values() must be called with at least one value");let J=$.map((W)=>{let X={},Y=this.table[y.Symbol.Columns];for(let U of Object.keys(W)){let Z=W[U];X[U]=j(Z,u)?Z:new J4(Z,Y[U])}return X});return new UF(this.table,J,this.session,this.dialect,this.withList)}select($){let J=typeof $==="function"?$(new q2):$;if(!j(J,u)&&!O$(this.table[f1],J._.selectedFields))throw Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new UF(this.table,J,this.session,this.dialect,this.withList,!0)}}class UF extends j0{constructor($,J,W,X,Y,U){super();this.session=W,this.dialect=X,this.config={table:$,values:J,withList:Y,select:U}}static[B]="SQLiteInsert";config;returning($=this.config.table[e4.Symbol.Columns]){return this.config.returning=k1($),this}onConflictDoNothing($={}){if(!this.config.onConflict)this.config.onConflict=[];if($.target===void 0)this.config.onConflict.push(E` on conflict do nothing`);else{let J=Array.isArray($.target)?E`${$.target}`:E`${[$.target]}`,W=$.where?E` where ${$.where}`:E``;this.config.onConflict.push(E` on conflict ${J} do nothing${W}`)}return this}onConflictDoUpdate($){if($.where&&($.targetWhere||$.setWhere))throw Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');if(!this.config.onConflict)this.config.onConflict=[];let J=$.where?E` where ${$.where}`:void 0,W=$.targetWhere?E` where ${$.targetWhere}`:void 0,X=$.setWhere?E` where ${$.setWhere}`:void 0,Y=Array.isArray($.target)?E`${$.target}`:E`${[$.target]}`,U=this.dialect.buildUpdateSet(this.config.table,T6(this.config.table,$.set));return this.config.onConflict.push(E` on conflict ${Y}${W} do update set ${U}${J}${X}`),this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:$,...J}=this.dialect.sqlToQuery(this.getSQL());return J}_prepare($=!0){return this.session[$?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run",!0,void 0,{type:"insert",tables:Y8(this.config.table)})}prepare(){return this._prepare(!1)}run=($)=>{return this._prepare().run($)};all=($)=>{return this._prepare().all($)};get=($)=>{return this._prepare().get($)};values=($)=>{return this._prepare().values($)};async execute(){return this.config.returning?this.all():this.run()}$dynamic(){return this}}class TG{constructor($,J,W,X){this.table=$,this.session=J,this.dialect=W,this.withList=X}static[B]="SQLiteUpdateBuilder";set($){return new sk(this.table,T6(this.table,$),this.session,this.dialect,this.withList)}}class sk extends j0{constructor($,J,W,X,Y){super();this.session=W,this.dialect=X,this.config={set:J,table:$,withList:Y,joins:[]}}static[B]="SQLiteUpdate";config;from($){return this.config.from=$,this}createJoin($){return(J,W)=>{let X=m4(J);if(typeof X==="string"&&this.config.joins.some((Y)=>Y.alias===X))throw Error(`Alias "${X}" is already used in this query`);if(typeof W==="function"){let Y=this.config.from?j(J,e4)?J[y.Symbol.Columns]:j(J,C0)?J._.selectedFields:j(J,K7)?J[R0].selectedFields:void 0:void 0;W=W(new Proxy(this.config.table[y.Symbol.Columns],new O0({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),Y&&new Proxy(Y,new O0({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}return this.config.joins.push({on:W,table:J,joinType:$,alias:X}),this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where($){return this.config.where=$,this}orderBy(...$){if(typeof $[0]==="function"){let J=$[0](new Proxy(this.config.table[y.Symbol.Columns],new O0({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),W=Array.isArray(J)?J:[J];this.config.orderBy=W}else{let J=$;this.config.orderBy=J}return this}limit($){return this.config.limit=$,this}returning($=this.config.table[e4.Symbol.Columns]){return this.config.returning=k1($),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:$,...J}=this.dialect.sqlToQuery(this.getSQL());return J}_prepare($=!0){return this.session[$?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run",!0,void 0,{type:"insert",tables:Y8(this.config.table)})}prepare(){return this._prepare(!1)}run=($)=>{return this._prepare().run($)};all=($)=>{return this._prepare().all($)};get=($)=>{return this._prepare().get($)};values=($)=>{return this._prepare().values($)};async execute(){return this.config.returning?this.all():this.run()}$dynamic(){return this}}class HF{constructor($,J,W,X,Y,U,Z,H){this.mode=$,this.fullSchema=J,this.schema=W,this.tableNamesMap=X,this.table=Y,this.tableConfig=U,this.dialect=Z,this.session=H}static[B]="SQLiteAsyncRelationalQueryBuilder";findMany($){return this.mode==="sync"?new ZF(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,$?$:{},"many"):new qG(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,$?$:{},"many")}findFirst($){return this.mode==="sync"?new ZF(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,$?{...$,limit:1}:{limit:1},"first"):new qG(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,$?{...$,limit:1}:{limit:1},"first")}}class qG extends j0{constructor($,J,W,X,Y,U,Z,H,G){super();this.fullSchema=$,this.schema=J,this.tableNamesMap=W,this.table=X,this.tableConfig=Y,this.dialect=U,this.session=Z,this.config=H,this.mode=G}static[B]="SQLiteAsyncRelationalQuery";mode;getSQL(){return this.dialect._buildRelationalQuery({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}).sql}_prepare($=!1){let{query:J,builtQuery:W}=this._toSQL();return this.session[$?"prepareOneTimeQuery":"prepareQuery"](W,void 0,this.mode==="first"?"get":"all",!0,(X,Y)=>{let U=X.map((Z)=>C9(this.schema,this.tableConfig,Z,J.selection,Y));if(this.mode==="first")return U[0];return U})}prepare(){return this._prepare(!1)}_toSQL(){let $=this.dialect._buildRelationalQuery({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}),J=this.dialect.sqlToQuery($.sql);return{query:$,builtQuery:J}}toSQL(){return this._toSQL().builtQuery}executeRaw(){if(this.mode==="first")return this._prepare(!1).get();return this._prepare(!1).all()}async execute(){return this.executeRaw()}}class ZF extends qG{static[B]="SQLiteSyncRelationalQuery";sync(){return this.executeRaw()}}class h2 extends u{constructor($){super(h2.buildEmbeddedCount($.source,$.filters).queryChunks);this.params=$,this.session=$.session,this.sql=h2.buildCount($.source,$.filters)}sql;static[B]="SQLiteCountBuilderAsync";[Symbol.toStringTag]="SQLiteCountBuilderAsync";session;static buildEmbeddedCount($,J){return E`(select count(*) from ${$}${E.raw(" where ").if(J)}${J})`}static buildCount($,J){return E`select count(*) from ${$}${E.raw(" where ").if(J)}${J}`}then($,J){return Promise.resolve(this.session.count(this.sql)).then($,J)}catch($){return this.then(void 0,$)}finally($){return this.then((J)=>{return $?.(),J},(J)=>{throw $?.(),J})}}class zF{constructor($,J,W,X,Y,U,Z,H){this.mode=$,this.schema=J,this.table=W,this.tableConfig=X,this.dialect=Y,this.session=U,this.rowMode=Z,this.forbidJsonb=H}static[B]="SQLiteAsyncRelationalQueryBuilderV2";findMany($){return this.mode==="sync"?new GF(this.schema,this.table,this.tableConfig,this.dialect,this.session,$??!0,"many",this.rowMode,this.forbidJsonb):new hG(this.schema,this.table,this.tableConfig,this.dialect,this.session,$??!0,"many",this.rowMode,this.forbidJsonb)}findFirst($){return this.mode==="sync"?new GF(this.schema,this.table,this.tableConfig,this.dialect,this.session,$??!0,"first",this.rowMode,this.forbidJsonb):new hG(this.schema,this.table,this.tableConfig,this.dialect,this.session,$??!0,"first",this.rowMode,this.forbidJsonb)}}class hG extends j0{constructor($,J,W,X,Y,U,Z,H,G){super();this.schema=$,this.tableConfig=W,this.dialect=X,this.session=Y,this.config=U,this.rowMode=H,this.forbidJsonb=G,this.mode=Z,this.table=J}static[B]="SQLiteAsyncRelationalQueryV2";mode;table;getSQL(){return this.dialect.buildRelationalQuery({schema:this.schema,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,mode:this.mode,jsonb:this.forbidJsonb?E`json`:E`jsonb`}).sql}_prepare($=!0){let{query:J,builtQuery:W}=this._toSQL();return this.session[$?"prepareOneTimeRelationalQuery":"prepareRelationalQuery"](W,void 0,this.mode==="first"?"get":"all",(X,Y)=>{let U=X.map((Z)=>T9(Z,J.selection,Y,!this.rowMode));if(this.mode==="first")return U[0];return U})}prepare(){return this._prepare(!1)}_getQuery(){let $=this.forbidJsonb?E`json`:E`jsonb`,J=this.dialect.buildRelationalQuery({schema:this.schema,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,mode:this.mode,isNested:this.rowMode,jsonb:$});if(this.rowMode){let W=E.join(J.selection.map((X)=>{return E`${E.raw(this.dialect.escapeString(X.key))}, ${X.selection?E`${$}(${E.identifier(X.key)})`:E.identifier(X.key)}`}),E`, `);J.sql=E`select json_object(${W}) as ${E.identifier("r")} from (${J.sql}) as ${E.identifier("t")}`}return J}_toSQL(){let $=this._getQuery(),J=this.dialect.sqlToQuery($.sql);return{query:$,builtQuery:J}}toSQL(){return this._toSQL().builtQuery}executeRaw(){if(this.mode==="first")return this._prepare().get();return this._prepare().all()}async execute(){return this.executeRaw()}}class GF extends hG{static[B]="SQLiteSyncRelationalQueryV2";sync(){return this.executeRaw()}}class iW extends j0{constructor($,J,W,X,Y){super();this.execute=$,this.getSQL=J,this.dialect=X,this.mapBatchResult=Y,this.config={action:W}}static[B]="SQLiteRaw";config;getQuery(){return{...this.dialect.sqlToQuery(this.getSQL()),method:this.config.action}}mapResult($,J){return J?this.mapBatchResult($):$}_prepare(){return this}isResponseInArrayMode(){return!1}}class x2{constructor($,J,W,X,Y,U,Z){this.resultKind=$,this.dialect=J,this.session=W,this.rowModeRQB=U,this.forbidJsonb=Z,this._=Y?{schema:Y.schema,fullSchema:Y.fullSchema,tableNamesMap:Y.tableNamesMap,relations:X}:{schema:void 0,fullSchema:{},tableNamesMap:{},relations:X},this._query={};let H=this._query;if(this._.schema)for(let[G,z]of Object.entries(this._.schema))H[G]=new HF($,Y.fullSchema,this._.schema,this._.tableNamesMap,Y.fullSchema[G],z,J,W);this.query={};for(let[G,z]of Object.entries(X))this.query[G]=new zF($,X,X[z.name].table,z,J,W,U,Z);this.$cache={invalidate:async(G)=>{}}}static[B]="BaseSQLiteDatabase";_query;query;$with=($,J)=>{let W=this;return{as:(Y)=>{if(typeof Y==="function")Y=Y(new q2(W.dialect));return new Proxy(new $6(Y.getSQL(),J??("getSelectedFields"in Y?Y.getSelectedFields()??{}:{}),$,!0),new O0({alias:$,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}}};$count($,J){return new h2({source:$,filters:J,session:this.session})}with(...$){let J=this;function W(H){return new U8({fields:H??void 0,session:J.session,dialect:J.dialect,withList:$})}function X(H){return new U8({fields:H??void 0,session:J.session,dialect:J.dialect,withList:$,distinct:!0})}function Y(H){return new TG(H,J.session,J.dialect,$)}function U(H){return new CG(H,J.session,J.dialect,$)}function Z(H){return new kG(H,J.session,J.dialect,$)}return{select:W,selectDistinct:X,update:Y,insert:U,delete:Z}}select($){return new U8({fields:$??void 0,session:this.session,dialect:this.dialect})}selectDistinct($){return new U8({fields:$??void 0,session:this.session,dialect:this.dialect,distinct:!0})}update($){return new TG($,this.session,this.dialect)}$cache;insert($){return new CG($,this.session,this.dialect)}delete($){return new kG($,this.session,this.dialect)}run($){let J=typeof $==="string"?E.raw($):$.getSQL();if(this.resultKind==="async")return new iW(async()=>this.session.run(J),()=>J,"run",this.dialect,this.session.extractRawRunValueFromBatchResult.bind(this.session));return this.session.run(J)}all($){let J=typeof $==="string"?E.raw($):$.getSQL();if(this.resultKind==="async")return new iW(async()=>this.session.all(J),()=>J,"all",this.dialect,this.session.extractRawAllValueFromBatchResult.bind(this.session));return this.session.all(J)}get($){let J=typeof $==="string"?E.raw($):$.getSQL();if(this.resultKind==="async")return new iW(async()=>this.session.get(J),()=>J,"get",this.dialect,this.session.extractRawGetValueFromBatchResult.bind(this.session));return this.session.get(J)}values($){let J=typeof $==="string"?E.raw($):$.getSQL();if(this.resultKind==="async")return new iW(async()=>this.session.values(J),()=>J,"values",this.dialect,this.session.extractRawValuesValueFromBatchResult.bind(this.session));return this.session.values(J)}transaction($,J){return this.session.transaction($,J)}}class ek extends j0{constructor($){super();this.resultCb=$}static[B]="ExecuteResultSync";async execute(){return this.resultCb()}sync(){return this.resultCb()}}class wF{constructor($,J,W,X,Y,U){if(this.mode=$,this.executeMethod=J,this.query=W,this.cache=X,this.queryMetadata=Y,this.cacheConfig=U,X&&X.strategy()==="all"&&U===void 0)this.cacheConfig={enable:!0,autoInvalidate:!0};if(!this.cacheConfig?.enable)this.cacheConfig=void 0}static[B]="PreparedQuery";joinsNotNullableMap;async queryWithCache($,J,W){if(this.cache===void 0||j(this.cache,Y6)||this.queryMetadata===void 0)try{return await W()}catch(X){throw new a1($,J,X)}if(this.cacheConfig&&!this.cacheConfig.enable)try{return await W()}catch(X){throw new a1($,J,X)}if((this.queryMetadata.type==="insert"||this.queryMetadata.type==="update"||this.queryMetadata.type==="delete")&&this.queryMetadata.tables.length>0)try{let[X]=await Promise.all([W(),this.cache.onMutate({tables:this.queryMetadata.tables})]);return X}catch(X){throw new a1($,J,X)}if(!this.cacheConfig)try{return await W()}catch(X){throw new a1($,J,X)}if(this.queryMetadata.type==="select"){let X=await this.cache.get(this.cacheConfig.tag??await B5($,J),this.queryMetadata.tables,this.cacheConfig.tag!==void 0,this.cacheConfig.autoInvalidate);if(X===void 0){let Y;try{Y=await W()}catch(U){throw new a1($,J,U)}return await this.cache.put(this.cacheConfig.tag??await B5($,J),Y,this.cacheConfig.autoInvalidate?this.queryMetadata.tables:[],this.cacheConfig.tag!==void 0,this.cacheConfig.config),Y}return X}try{return await W()}catch(X){throw new a1($,J,X)}}getQuery(){return this.query}mapRunResult($,J){return $}mapAllResult($,J){throw Error("Not implemented")}mapGetResult($,J){throw Error("Not implemented")}execute($){if(this.mode==="async")return this[this.executeMethod]($);return new ek(()=>this[this.executeMethod]($))}mapResult($,J){switch(this.executeMethod){case"run":return this.mapRunResult($,J);case"all":return this.mapAllResult($,J);case"get":return this.mapGetResult($,J)}}}class DF{constructor($){this.dialect=$}static[B]="SQLiteSession";prepareOneTimeQuery($,J,W,X,Y,U,Z){return this.prepareQuery($,J,W,X,Y,U,Z)}prepareOneTimeRelationalQuery($,J,W,X){return this.prepareRelationalQuery($,J,W,X)}run($){let J=this.dialect.sqlToQuery($);try{return this.prepareOneTimeQuery(J,void 0,"run",!1).run()}catch(W){throw new t1({cause:W,message:`Failed to run the query '${J.sql}'`})}}extractRawRunValueFromBatchResult($){return $}all($){return this.prepareOneTimeQuery(this.dialect.sqlToQuery($),void 0,"run",!1).all()}extractRawAllValueFromBatchResult($){throw Error("Not implemented")}get($){return this.prepareOneTimeQuery(this.dialect.sqlToQuery($),void 0,"run",!1).get()}extractRawGetValueFromBatchResult($){throw Error("Not implemented")}values($){return this.prepareOneTimeQuery(this.dialect.sqlToQuery($),void 0,"run",!1).values()}async count($){return(await this.values($))[0][0]}extractRawValuesValueFromBatchResult($){throw Error("Not implemented")}}class KF extends x2{constructor($,J,W,X,Y,U=0,Z,H){super($,J,W,X,Y,Z,H);this.relations=X,this.schema=Y,this.nestedIndex=U}static[B]="SQLiteTransaction";rollback(){throw new eJ}}class b2 extends DF{constructor($,J,W,X,Y){super(J);this.client=$,this.relations=W,this.schema=X,this.options=Y,this.logger=Y.logger??new Z7,this.cache=Y.cache??new Y6}static[B]="BunSQLiteSession";logger;cache;prepareQuery($,J,W,X,Y,U,Z){return new OF(this.client,$,this.logger,this.cache,U,Z,J,W,X,Y)}prepareRelationalQuery($,J,W,X){return new OF(this.client,$,this.logger,this.cache,void 0,void 0,J,W,!1,X,!0)}async run($){let J=this.dialect.sqlToQuery($);try{return await this.prepareOneTimeQuery(J,void 0,"run",!1).run()}catch(W){throw new t1({cause:W,message:`Failed to run the query '${J.sql}'`})}}async transaction($,J){return this.client.begin(J?.behavior??"",async(W)=>{let X=new b2(W,this.dialect,this.relations,this.schema,this.options),Y=new FF("async",this.dialect,X,this.relations,this.schema);return await $(Y)})}}class FF extends KF{static[B]="BunSQLiteTransaction";async transaction($){return this.session.client.savepoint(async(J)=>{let W=new b2(J,this.session.dialect,this.relations,this.schema,this.session.options),X=new FF("async",this.dialect,W,this.relations,this.schema,this.nestedIndex+1);return await $(X)})}}class OF extends wF{constructor($,J,W,X,Y,U,Z,H,G,z,w){super("async",H,J,X,Y,U);this.client=$,this.logger=W,this.fields=Z,this._isResponseInArrayMode=G,this.customResultMapper=z,this.isRqbV2Query=w,this.customResultMapper=z,this.fields=Z}static[B]="BunSQLitePreparedQuery";async run($={}){let{logger:J,query:W,client:X}=this,Y=K$(W.params,$);return J.logQuery(W.sql,Y),await this.queryWithCache(W.sql,Y,async()=>{return await X.unsafe(W.sql,Y)})}async all($={}){if(this.isRqbV2Query)return this.allRqbV2($);let{logger:J,query:W,fields:X,joinsNotNullableMap:Y,customResultMapper:U,client:Z}=this;if(!X&&!U){let G=K$(W.params,$);return J.logQuery(W.sql,G),await this.queryWithCache(W.sql,G,async()=>{return await Z.unsafe(W.sql,G)})}let H=await this.values($);if(U)return U(H);return H.map((G)=>R9(X,G,Y))}async allRqbV2($={}){let{logger:J,query:W,customResultMapper:X,client:Y}=this,U=K$(W.params,$);J.logQuery(W.sql,U);let Z=await Y.unsafe(W.sql,U);return X(Z)}async get($={}){if(this.isRqbV2Query)return this.getRqbV2($);let{logger:J,query:W,fields:X,joinsNotNullableMap:Y,customResultMapper:U,client:Z}=this;if(!X&&!U){let z=K$(W.params,$);return J.logQuery(W.sql,z),await this.queryWithCache(W.sql,z,async()=>{return(await Z.unsafe(W.sql,z))[0]})}let H=await this.values($),G=H[0];if(U)return U(H);if(G===void 0)return G;return R9(X,G,Y)}async getRqbV2($={}){let{logger:J,query:W,customResultMapper:X,client:Y}=this,U=K$(W.params,$);J.logQuery(W.sql,U);let H=(await Y.unsafe(W.sql,U))[0];if(H===void 0)return H;return X([H])}async values($={}){let{client:J,logger:W,query:X}=this,Y=K$(X.params,$);return W.logQuery(X.sql,Y),await this.queryWithCache(X.sql,Y,async()=>{return await J.unsafe(X.sql,Y).values()})}isResponseInArrayMode(){return this._isResponseInArrayMode}}class $v extends x2{static[B]="BunSQLiteDatabase"}function tW($,J={}){let W=new XF({casing:J.casing}),X;if(J.logger===!0)X=new U7;else if(J.logger!==!1)X=J.logger;let Y;if(J.schema){let G=gW(J.schema,fW);Y={fullSchema:J.schema,schema:G.tables,tableNamesMap:G.tableNamesMap}}let U=J.relations??{},Z=new b2($,W,U,Y,{logger:X,cache:J.cache}),H=new $v("async",W,Z,U,Y);if(H.$client=$,H.$cache=J.cache,H.$cache)H.$cache.invalidate=J.cache?.onMutate;return H}function g2(...$){if(typeof $[0]==="string"){let J=new EF($[0]);return tW(J,$[1])}if(vW($[0])){let{connection:J,client:W,...X}=$[0];if(W)return tW(W,X);if(typeof J==="object"&&J.url!==void 0){let{url:U,...Z}=J,H=new EF({url:U,...Z});return tW(H,X)}let Y=new EF(J);return tW(Y,X)}return tW($[0],$[1])}(($)=>{function J(W){return tW({options:{parsers:{},serializers:{}}},W)}$.mock=J})(g2||(g2={}));function xG(...$){return D7(...$)}(($)=>{function J(U){return D7.mock(U)}$.mock=J;function W(...U){return D7(...U)}$.postgres=W,((U)=>{function Z(H){return D7.mock(H)}U.mock=Z})(W=$.postgres||($.postgres={}));function X(...U){return g2(...U)}$.sqlite=X,((U)=>{function Z(H){return g2.mock(H)}U.mock=Z})(X=$.sqlite||($.sqlite={}));function Y(...U){return v2(...U)}$.mysql=Y,((U)=>{function Z(H){return v2.mock(H)}U.mock=Z})(Y=$.mysql||($.mysql={}))})(xG||(xG={}));var MF={};x$(MF,{account:()=>f2});var f2=j9("account",{id:I1("id").primaryKey(),accountId:I1("accountId").notNull(),providerId:I1("providerId").notNull(),userId:I1("userId").notNull(),accessToken:I1("accessToken"),refreshToken:I1("refreshToken"),idToken:I1("idToken"),accessTokenExpiresAt:j4("accessTokenExpiresAt"),refreshTokenExpiresAt:j4("refreshTokenExpiresAt"),scope:I1("scope"),password:I1("password"),createdAt:j4("createdAt").notNull(),updatedAt:j4("updatedAt").notNull()});var VF={};x$(VF,{session:()=>m2});var m2=j9("session",{id:I1("id").primaryKey(),expiresAt:j4("expiresAt").notNull(),token:I1("token").notNull().unique(),createdAt:j4("createdAt").notNull(),updatedAt:j4("updatedAt").notNull(),ipAddress:I1("ipAddress"),userAgent:I1("userAgent"),userId:I1("userId").notNull()});var Jv=PG({account:f2,session:m2,user:U6},($)=>({account:{user:$.one.user({from:$.account.userId,to:$.user.id})},session:{user:$.one.user({from:$.session.userId,to:$.user.id})}}));var Wv=PG({user:U6,account:f2,session:m2},($)=>({user:{accounts:$.many.account({from:$.user.id,to:$.account.userId}),sessions:$.many.session({from:$.user.id,to:$.session.userId})}}));var bG={...Wv,...Jv};var nr=new rr(process.env.DATABASE_URL),u8=xG({client:nr,relations:bG});var QF={};x$(QF,{verification:()=>ir});var ir=j9("verification",{id:I1("id").primaryKey(),identifier:I1("identifier").notNull(),value:I1("value").notNull(),expiresAt:j4("expiresAt").notNull(),createdAt:j4("createdAt"),updatedAt:j4("updatedAt")});var Xv={...gO,...MF,...VF,...QF};var gG=Object.create(null),y2=($)=>globalThis.process?.env||globalThis.Deno?.env.toObject()||globalThis.__env__||($?gG:globalThis),W1=new Proxy(gG,{get($,J){return y2()[J]??gG[J]},has($,J){let W=y2();return J in W||J in gG},set($,J,W){let X=y2(!0);return X[J]=W,!0},deleteProperty($,J){if(!J)return!1;let W=y2(!0);return delete W[J],!0},ownKeys(){let $=y2(!0);return Object.keys($)}});function tr($){return $?$!=="false":!1}var fG=typeof process<"u"&&process.env&&"development"||"",u2=fG==="production",aW=fG==="dev"||fG==="development",p2=()=>fG==="test"||tr(W1.TEST);function z1($,J){if(typeof process<"u"&&process.env)return process.env[$]??J;if(typeof Deno<"u")return Deno.env.get($)??J;if(typeof Bun<"u")return Bun.env[$]??J;return J}function IF($,J=!0){let W=z1($);if(!W)return J;return W!=="0"&&W.toLowerCase()!=="false"&&W!==""}var Uv=Object.freeze({get BETTER_AUTH_SECRET(){return z1("BETTER_AUTH_SECRET")},get AUTH_SECRET(){return z1("AUTH_SECRET")},get BETTER_AUTH_TELEMETRY(){return z1("BETTER_AUTH_TELEMETRY")},get BETTER_AUTH_TELEMETRY_ID(){return z1("BETTER_AUTH_TELEMETRY_ID")},get NODE_ENV(){return z1("NODE_ENV","development")},get PACKAGE_VERSION(){return z1("PACKAGE_VERSION","0.0.0")},get BETTER_AUTH_TELEMETRY_ENDPOINT(){return z1("BETTER_AUTH_TELEMETRY_ENDPOINT","https://telemetry.better-auth.com/v1/track")}}),c2=1,k4=4,p8=8,H6=24,Yv={eterm:k4,cons25:k4,console:k4,cygwin:k4,dtterm:k4,gnome:k4,hurd:k4,jfbterm:k4,konsole:k4,kterm:k4,mlterm:k4,mosh:H6,putty:k4,st:k4,"rxvt-unicode-24bit":H6,terminator:H6,"xterm-kitty":H6},ar=new Map(Object.entries({APPVEYOR:p8,BUILDKITE:p8,CIRCLECI:H6,DRONE:p8,GITEA_ACTIONS:H6,GITHUB_ACTIONS:H6,GITLAB_CI:p8,TRAVIS:p8})),or=[/ansi/,/color/,/linux/,/direct/,/^con[0-9]*x[0-9]/,/^rxvt/,/^screen/,/^xterm/,/^vt100/,/^vt220/];function LF(){if(z1("FORCE_COLOR")!==void 0)switch(z1("FORCE_COLOR")){case"":case"1":case"true":return k4;case"2":return p8;case"3":return H6;default:return c2}if(z1("NODE_DISABLE_COLORS")!==void 0&&z1("NODE_DISABLE_COLORS")!==""||z1("NO_COLOR")!==void 0&&z1("NO_COLOR")!==""||z1("TERM")==="dumb")return c2;if(z1("TMUX"))return H6;if("TF_BUILD"in W1&&"AGENT_NAME"in W1)return k4;if("CI"in W1){for(let{0:$,1:J}of ar)if($ in W1)return J;if(z1("CI_NAME")==="codeship")return p8;return c2}if("TEAMCITY_VERSION"in W1)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.exec(z1("TEAMCITY_VERSION"))!==null?k4:c2;switch(z1("TERM_PROGRAM")){case"iTerm.app":if(!z1("TERM_PROGRAM_VERSION")||/^[0-2]\./.exec(z1("TERM_PROGRAM_VERSION"))!==null)return p8;return H6;case"HyperTerm":case"MacTerm":return H6;case"Apple_Terminal":return p8}if(z1("COLORTERM")==="truecolor"||z1("COLORTERM")==="24bit")return H6;if(z1("TERM")){if(/truecolor/.exec(z1("TERM"))!==null)return H6;if(/^xterm-256/.exec(z1("TERM"))!==null)return p8;let $=z1("TERM").toLowerCase();if(Yv[$])return Yv[$];if(or.some((J)=>J.exec($)!==null))return k4}if(z1("COLORTERM"))return k4;return c2}var O4={reset:"\x1B[0m",bright:"\x1B[1m",dim:"\x1B[2m",undim:"\x1B[22m",underscore:"\x1B[4m",blink:"\x1B[5m",reverse:"\x1B[7m",hidden:"\x1B[8m",fg:{black:"\x1B[30m",red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m"},bg:{black:"\x1B[40m",red:"\x1B[41m",green:"\x1B[42m",yellow:"\x1B[43m",blue:"\x1B[44m",magenta:"\x1B[45m",cyan:"\x1B[46m",white:"\x1B[47m"}},AF=["info","success","warn","error","debug"];function d2($,J){return AF.indexOf(J)<=AF.indexOf($)}var sr={info:O4.fg.blue,success:O4.fg.green,warn:O4.fg.yellow,error:O4.fg.red,debug:O4.fg.magenta},er=($,J,W)=>{let X=new Date().toISOString();if(W)return`${O4.dim}${X}${O4.reset} ${sr[$]}${$.toUpperCase()}${O4.reset} ${O4.bright}[Better Auth]:${O4.reset} ${J}`;return`${X} ${$.toUpperCase()} [Better Auth]: ${J}`},l2=($)=>{let J=$?.disabled!==!0,W=$?.level??"error",Y=$?.disableColors!==void 0?!$.disableColors:LF()!==1,U=(H,G,z=[])=>{if(!J||!d2(W,H))return;let w=er(H,G,Y);if(!$||typeof $.log!=="function"){if(H==="error")console.error(w,...z);else if(H==="warn")console.warn(w,...z);else console.log(w,...z);return}$.log(H==="success"?"info":H,G,...z)};return{...Object.fromEntries(AF.map((H)=>[H,(...[G,...z])=>U(H,G,z)])),get level(){return W}}},_0=l2();function mG($){return $?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"}function Zv($,J,W){let X="",Y=0,U=0;for(let Z of $){Y=Y<<8|Z,U+=8;while(U>=6)U-=6,X+=J[Y>>U&63]}if(U>0)X+=J[Y<<6-U&63];if(W){let Z=(4-X.length%4)%4;X+="=".repeat(Z)}return X}function Hv($,J){let W=new Map;for(let Z=0;Z<J.length;Z++)W.set(J[Z],Z);let X=[],Y=0,U=0;for(let Z of $){if(Z==="=")break;let H=W.get(Z);if(H===void 0)throw Error(`Invalid Base64 character: ${Z}`);if(Y=Y<<6|H,U+=6,U>=8)U-=8,X.push(Y>>U&255)}return Uint8Array.from(X)}var $$={encode($,J={}){let W=mG(!1),X=typeof $==="string"?new TextEncoder().encode($):new Uint8Array($);return Zv(X,W,J.padding??!0)},decode($){if(typeof $!=="string")$=new TextDecoder().decode($);let J=$.includes("-")||$.includes("_"),W=mG(J);return Hv($,W)}},d8={encode($,J={}){let W=mG(!0),X=typeof $==="string"?new TextEncoder().encode($):new Uint8Array($);return Zv(X,W,J.padding??!0)},decode($){let J=$.includes("-")||$.includes("_"),W=mG(J);return Hv($,W)}};var{defineProperty:$n,defineProperties:Jn,getOwnPropertyDescriptors:Wn,getOwnPropertySymbols:Gv}=Object,Xn=Object.prototype.hasOwnProperty,Yn=Object.prototype.propertyIsEnumerable,zv=($,J,W)=>(J in $)?$n($,J,{enumerable:!0,configurable:!0,writable:!0,value:W}):$[J]=W,O7=($,J)=>{for(var W in J||(J={}))if(Xn.call(J,W))zv($,W,J[W]);if(Gv){for(var W of Gv(J))if(Yn.call(J,W))zv($,W,J[W])}return $},F7=($,J)=>Jn($,Wn(J)),Un=class extends Error{constructor($,J,W){super(J||$.toString(),{cause:W});this.status=$,this.statusText=J,this.error=W}},Zn=async($,J)=>{var W,X,Y,U,Z,H;let G=J||{},z={onRequest:[J==null?void 0:J.onRequest],onResponse:[J==null?void 0:J.onResponse],onSuccess:[J==null?void 0:J.onSuccess],onError:[J==null?void 0:J.onError],onRetry:[J==null?void 0:J.onRetry]};if(!J||!(J==null?void 0:J.plugins))return{url:$,options:G,hooks:z};for(let w of(J==null?void 0:J.plugins)||[]){if(w.init){let D=await((W=w.init)==null?void 0:W.call(w,$.toString(),J));G=D.options||G,$=D.url}z.onRequest.push((X=w.hooks)==null?void 0:X.onRequest),z.onResponse.push((Y=w.hooks)==null?void 0:Y.onResponse),z.onSuccess.push((U=w.hooks)==null?void 0:U.onSuccess),z.onError.push((Z=w.hooks)==null?void 0:Z.onError),z.onRetry.push((H=w.hooks)==null?void 0:H.onRetry)}return{url:$,options:G,hooks:z}},wv=class{constructor($){this.options=$}shouldAttemptRetry($,J){if(this.options.shouldRetry)return Promise.resolve($<this.options.attempts&&this.options.shouldRetry(J));return Promise.resolve($<this.options.attempts)}getDelay(){return this.options.delay}},Hn=class{constructor($){this.options=$}shouldAttemptRetry($,J){if(this.options.shouldRetry)return Promise.resolve($<this.options.attempts&&this.options.shouldRetry(J));return Promise.resolve($<this.options.attempts)}getDelay($){return Math.min(this.options.maxDelay,this.options.baseDelay*2**$)}};function Gn($){if(typeof $==="number")return new wv({type:"linear",attempts:$,delay:1000});switch($.type){case"linear":return new wv($);case"exponential":return new Hn($);default:throw Error("Invalid retry strategy")}}var zn=async($)=>{let J={},W=async(X)=>typeof X==="function"?await X():X;if($==null?void 0:$.auth){if($.auth.type==="Bearer"){let X=await W($.auth.token);if(!X)return J;J.authorization=`Bearer ${X}`}else if($.auth.type==="Basic"){let X=W($.auth.username),Y=W($.auth.password);if(!X||!Y)return J;J.authorization=`Basic ${btoa(`${X}:${Y}`)}`}else if($.auth.type==="Custom"){let X=W($.auth.value);if(!X)return J;J.authorization=`${W($.auth.prefix)} ${X}`}}return J},wn=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function Dn($){let J=$.headers.get("content-type"),W=new Set(["image/svg","application/xml","application/xhtml","application/html"]);if(!J)return"json";let X=J.split(";").shift()||"";if(wn.test(X))return"json";if(W.has(X)||X.startsWith("text/"))return"text";return"blob"}function Kn($){try{return JSON.parse($),!0}catch(J){return!1}}function Ov($){if($===void 0)return!1;let J=typeof $;if(J==="string"||J==="number"||J==="boolean"||J===null)return!0;if(J!=="object")return!1;if(Array.isArray($))return!0;if($.buffer)return!1;return $.constructor&&$.constructor.name==="Object"||typeof $.toJSON==="function"}function Dv($){try{return JSON.parse($)}catch(J){return $}}function Kv($){return typeof $==="function"}function On($){if($==null?void 0:$.customFetchImpl)return $.customFetchImpl;if(typeof globalThis<"u"&&Kv(globalThis.fetch))return globalThis.fetch;if(typeof window<"u"&&Kv(window.fetch))return window.fetch;throw Error("No fetch implementation found")}async function Fn($){let J=new Headers($==null?void 0:$.headers),W=await zn($);for(let[X,Y]of Object.entries(W||{}))J.set(X,Y);if(!J.has("content-type")){let X=En($==null?void 0:$.body);if(X)J.set("content-type",X)}return J}function En($){if(Ov($))return"application/json";return null}function Mn($){if(!($==null?void 0:$.body))return null;let J=new Headers($==null?void 0:$.headers);if(Ov($.body)&&!J.has("content-type")){for(let[W,X]of Object.entries($==null?void 0:$.body))if(X instanceof Date)$.body[W]=X.toISOString();return JSON.stringify($.body)}return $.body}function Vn($,J){var W;if(J==null?void 0:J.method)return J.method.toUpperCase();if($.startsWith("@")){let X=(W=$.split("@")[1])==null?void 0:W.split("/")[0];if(!Fv.includes(X))return(J==null?void 0:J.body)?"POST":"GET";return X.toUpperCase()}return(J==null?void 0:J.body)?"POST":"GET"}function Qn($,J){let W;if(!($==null?void 0:$.signal)&&($==null?void 0:$.timeout))W=setTimeout(()=>J==null?void 0:J.abort(),$==null?void 0:$.timeout);return{abortTimeout:W,clearTimeout:()=>{if(W)clearTimeout(W)}}}var An=class $ extends Error{constructor(J,W){super(W||JSON.stringify(J,null,2));this.issues=J,Object.setPrototypeOf(this,$.prototype)}};async function In($,J){let W=await $["~standard"].validate(J);if(W.issues)throw new An(W.issues);return W.value}var Fv=["get","post","put","patch","delete"];function Ln($,J){let{baseURL:W,params:X,query:Y}=J||{query:{},params:{},baseURL:""},U=$.startsWith("http")?$.split("/").slice(0,3).join("/"):W||"";if($.startsWith("@")){let D=$.toString().split("@")[1].split("/")[0];if(Fv.includes(D))$=$.replace(`@${D}/`,"/")}if(!U.endsWith("/"))U+="/";let[Z,H]=$.replace(U,"").split("?"),G=new URLSearchParams(H);for(let[D,K]of Object.entries(Y||{})){if(K==null)continue;G.set(D,String(K))}if(X)if(Array.isArray(X)){let D=Z.split("/").filter((K)=>K.startsWith(":"));for(let[K,O]of D.entries()){let F=X[K];Z=Z.replace(O,F)}}else for(let[D,K]of Object.entries(X))Z=Z.replace(`:${D}`,String(K));if(Z=Z.split("/").map(encodeURIComponent).join("/"),Z.startsWith("/"))Z=Z.slice(1);let z=G.toString();if(z=z.length>0?`?${z}`.replace(/\+/g,"%20"):"",!U.startsWith("http"))return`${U}${Z}${z}`;return new URL(`${Z}${z}`,U)}var T0=async($,J)=>{var W,X,Y,U,Z,H,G,z;let{hooks:w,url:D,options:K}=await Zn($,J),O=On(K),F=new AbortController,M=(W=K.signal)!=null?W:F.signal,A=Ln(D,K),I=Mn(K),P=await Fn(K),Q=Vn(D,K),N=F7(O7({},K),{url:A,headers:P,body:I,method:Q,signal:M});for(let x of w.onRequest)if(x){let b=await x(N);if(b instanceof Object)N=b}if("pipeTo"in N&&typeof N.pipeTo==="function"||typeof((X=J==null?void 0:J.body)==null?void 0:X.pipe)==="function"){if(!("duplex"in N))N.duplex="half"}let{clearTimeout:_}=Qn(K,F),L=await O(N.url,N);_();let R={response:L,request:N};for(let x of w.onResponse)if(x){let b=await x(F7(O7({},R),{response:((Y=J==null?void 0:J.hookOptions)==null?void 0:Y.cloneResponse)?L.clone():L}));if(b instanceof Response)L=b;else if(b instanceof Object)L=b.response}if(L.ok){if(N.method==="HEAD")return{data:"",error:null};let b=Dn(L),r={data:"",response:L,request:N};if(b==="json"||b==="text"){let d=await L.text(),i=await((U=N.jsonParser)!=null?U:Dv)(d);r.data=i}else r.data=await L[b]();if(N==null?void 0:N.output){if(N.output&&!N.disableValidation)r.data=await In(N.output,r.data)}for(let d of w.onSuccess)if(d)await d(F7(O7({},r),{response:((Z=J==null?void 0:J.hookOptions)==null?void 0:Z.cloneResponse)?L.clone():L}));if(J==null?void 0:J.throw)return r.data;return{data:r.data,error:null}}let S=(H=J==null?void 0:J.jsonParser)!=null?H:Dv,k=await L.text(),T=Kn(k),q=T?await S(k):null,h={response:L,responseText:k,request:N,error:F7(O7({},q),{status:L.status,statusText:L.statusText})};for(let x of w.onError)if(x)await x(F7(O7({},h),{response:((G=J==null?void 0:J.hookOptions)==null?void 0:G.cloneResponse)?L.clone():L}));if(J==null?void 0:J.retry){let x=Gn(J.retry),b=(z=J.retryAttempt)!=null?z:0;if(await x.shouldAttemptRetry(b,L)){for(let d of w.onRetry)if(d)await d(R);let r=x.getDelay(b);return await new Promise((d)=>setTimeout(d,r)),await T0($,F7(O7({},J),{retryAttempt:b+1}))}}if(J==null?void 0:J.throw)throw new Un(L.status,L.statusText,T?q:k);return{data:null,error:F7(O7({},q),{status:L.status,statusText:L.statusText})}};var b$=new TextEncoder,J$=new TextDecoder;function yG(...$){let J=$.reduce((Y,{length:U})=>Y+U,0),W=new Uint8Array(J),X=0;for(let Y of $)W.set(Y,X),X+=Y.length;return W}function Ev($){if(Uint8Array.prototype.toBase64)return $.toBase64();let J=32768,W=[];for(let X=0;X<$.length;X+=J)W.push(String.fromCharCode.apply(null,$.subarray(X,X+J)));return btoa(W.join(""))}function Mv($){if(Uint8Array.fromBase64)return Uint8Array.fromBase64($);let J=atob($),W=new Uint8Array(J.length);for(let X=0;X<J.length;X++)W[X]=J.charCodeAt(X);return W}function h6($){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof $==="string"?$:J$.decode($),{alphabet:"base64url"});let J=$;if(J instanceof Uint8Array)J=J$.decode(J);J=J.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return Mv(J)}catch{throw TypeError("The input to be decoded is not correctly encoded.")}}function cG($){let J=$;if(typeof J==="string")J=b$.encode(J);if(Uint8Array.prototype.toBase64)return J.toBase64({alphabet:"base64url",omitPadding:!0});return Ev(J).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class M$ extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor($,J){super($,J);this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class x6 extends M${static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor($,J,W="unspecified",X="unspecified"){super($,{cause:{claim:W,reason:X,payload:J}});this.claim=W,this.reason=X,this.payload=J}}class oW extends M${static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor($,J,W="unspecified",X="unspecified"){super($,{cause:{claim:W,reason:X,payload:J}});this.claim=W,this.reason=X,this.payload=J}}class PF extends M${static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"}class W$ extends M${static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class L1 extends M${static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"}class V$ extends M${static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class uG extends M${static code="ERR_JWKS_INVALID";code="ERR_JWKS_INVALID"}class r2 extends M${static code="ERR_JWKS_NO_MATCHING_KEY";code="ERR_JWKS_NO_MATCHING_KEY";constructor($="no applicable key found in the JSON Web Key Set",J){super($,J)}}class _F extends M${[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor($="multiple matching keys found in the JSON Web Key Set",J){super($,J)}}class NF extends M${static code="ERR_JWKS_TIMEOUT";code="ERR_JWKS_TIMEOUT";constructor($="request timed out",J){super($,J)}}class BF extends M${static code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";constructor($="signature verification failed",J){super($,J)}}function l8($,J="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${J} must be ${$}`)}function sW($,J){return $.name===J}function RF($){return parseInt($.name.slice(4),10)}function Nn($){switch($){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}function Bn($,J){if(J&&!$.usages.includes(J))throw TypeError(`CryptoKey does not support this operation, its usages must include ${J}.`)}function Vv($,J,W){switch(J){case"HS256":case"HS384":case"HS512":{if(!sW($.algorithm,"HMAC"))throw l8("HMAC");let X=parseInt(J.slice(2),10);if(RF($.algorithm.hash)!==X)throw l8(`SHA-${X}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!sW($.algorithm,"RSASSA-PKCS1-v1_5"))throw l8("RSASSA-PKCS1-v1_5");let X=parseInt(J.slice(2),10);if(RF($.algorithm.hash)!==X)throw l8(`SHA-${X}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!sW($.algorithm,"RSA-PSS"))throw l8("RSA-PSS");let X=parseInt(J.slice(2),10);if(RF($.algorithm.hash)!==X)throw l8(`SHA-${X}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":{if(!sW($.algorithm,"Ed25519"))throw l8("Ed25519");break}case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":{if(!sW($.algorithm,J))throw l8(J);break}case"ES256":case"ES384":case"ES512":{if(!sW($.algorithm,"ECDSA"))throw l8("ECDSA");let X=Nn(J);if($.algorithm.namedCurve!==X)throw l8(X,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}Bn($,W)}function Qv($,J,...W){if(W=W.filter(Boolean),W.length>2){let X=W.pop();$+=`one of type ${W.join(", ")}, or ${X}.`}else if(W.length===2)$+=`one of type ${W[0]} or ${W[1]}.`;else $+=`of type ${W[0]}.`;if(J==null)$+=` Received ${J}`;else if(typeof J==="function"&&J.name)$+=` Received function ${J.name}`;else if(typeof J==="object"&&J!=null){if(J.constructor?.name)$+=` Received an instance of ${J.constructor.name}`}return $}var Av=($,...J)=>{return Qv("Key must be ",$,...J)};function SF($,J,...W){return Qv(`Key for the ${$} algorithm must be `,J,...W)}function jF($){return $?.[Symbol.toStringTag]==="CryptoKey"}function kF($){return $?.[Symbol.toStringTag]==="KeyObject"}var vF=($)=>{return jF($)||kF($)};var pG=(...$)=>{let J=$.filter(Boolean);if(J.length===0||J.length===1)return!0;let W;for(let X of J){let Y=Object.keys(X);if(!W||W.size===0){W=new Set(Y);continue}for(let U of Y){if(W.has(U))return!1;W.add(U)}}return!0};function Rn($){return typeof $==="object"&&$!==null}var L4=($)=>{if(!Rn($)||Object.prototype.toString.call($)!=="[object Object]")return!1;if(Object.getPrototypeOf($)===null)return!0;let J=$;while(Object.getPrototypeOf(J)!==null)J=Object.getPrototypeOf(J);return Object.getPrototypeOf($)===J};var dG=($,J)=>{if($.startsWith("RS")||$.startsWith("PS")){let{modulusLength:W}=J.algorithm;if(typeof W!=="number"||W<2048)throw TypeError(`${$} requires key modulusLength to be 2048 bits or larger`)}};function Sn($){let J,W;switch($.kty){case"AKP":{switch($.alg){case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":J={name:$.alg},W=$.priv?["sign"]:["verify"];break;default:throw new W$('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"RSA":{switch($.alg){case"PS256":case"PS384":case"PS512":J={name:"RSA-PSS",hash:`SHA-${$.alg.slice(-3)}`},W=$.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":J={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${$.alg.slice(-3)}`},W=$.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":J={name:"RSA-OAEP",hash:`SHA-${parseInt($.alg.slice(-3),10)||1}`},W=$.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new W$('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch($.alg){case"ES256":J={name:"ECDSA",namedCurve:"P-256"},W=$.d?["sign"]:["verify"];break;case"ES384":J={name:"ECDSA",namedCurve:"P-384"},W=$.d?["sign"]:["verify"];break;case"ES512":J={name:"ECDSA",namedCurve:"P-521"},W=$.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":J={name:"ECDH",namedCurve:$.crv},W=$.d?["deriveBits"]:[];break;default:throw new W$('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch($.alg){case"Ed25519":case"EdDSA":J={name:"Ed25519"},W=$.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":J={name:$.crv},W=$.d?["deriveBits"]:[];break;default:throw new W$('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new W$('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:J,keyUsages:W}}var eW=async($)=>{if(!$.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:J,keyUsages:W}=Sn($),X={...$};if(X.kty!=="AKP")delete X.alg;return delete X.use,crypto.subtle.importKey("jwk",X,J,$.ext??($.d||$.priv?!1:!0),$.key_ops??W)};async function $X($,J,W){if(!L4($))throw TypeError("JWK must be an object");let X;switch(J??=$.alg,X??=W?.extractable??$.ext,$.kty){case"oct":if(typeof $.k!=="string"||!$.k)throw TypeError('missing "k" (Key Value) Parameter value');return h6($.k);case"RSA":if("oth"in $&&$.oth!==void 0)throw new W$('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');return eW({...$,alg:J,ext:X});case"AKP":{if(typeof $.alg!=="string"||!$.alg)throw TypeError('missing "alg" (Algorithm) Parameter value');if(J!==void 0&&J!==$.alg)throw TypeError("JWK alg and alg option value mismatch");return eW({...$,ext:X})}case"EC":case"OKP":return eW({...$,alg:J,ext:X});default:throw new W$('Unsupported "kty" (Key Type) Parameter value')}}var lG=($,J,W,X,Y)=>{if(Y.crit!==void 0&&X?.crit===void 0)throw new $('"crit" (Critical) Header Parameter MUST be integrity protected');if(!X||X.crit===void 0)return new Set;if(!Array.isArray(X.crit)||X.crit.length===0||X.crit.some((Z)=>typeof Z!=="string"||Z.length===0))throw new $('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let U;if(W!==void 0)U=new Map([...Object.entries(W),...J.entries()]);else U=J;for(let Z of X.crit){if(!U.has(Z))throw new W$(`Extension Header Parameter "${Z}" is not recognized`);if(Y[Z]===void 0)throw new $(`Extension Header Parameter "${Z}" is missing`);if(U.get(Z)&&X[Z]===void 0)throw new $(`Extension Header Parameter "${Z}" MUST be integrity protected`)}return new Set(X.crit)};var Iv=($,J)=>{if(J!==void 0&&(!Array.isArray(J)||J.some((W)=>typeof W!=="string")))throw TypeError(`"${$}" option must be an array of strings`);if(!J)return;return new Set(J)};function n2($){return L4($)&&typeof $.kty==="string"}function Lv($){return $.kty!=="oct"&&($.kty==="AKP"&&typeof $.priv==="string"||typeof $.d==="string")}function Pv($){return $.kty!=="oct"&&typeof $.d>"u"&&typeof $.priv>"u"}function _v($){return $.kty==="oct"&&typeof $.k==="string"}var JX,Nv=async($,J,W,X=!1)=>{JX||=new WeakMap;let Y=JX.get($);if(Y?.[W])return Y[W];let U=await eW({...J,alg:W});if(X)Object.freeze($);if(!Y)JX.set($,{[W]:U});else Y[W]=U;return U},kn=($,J)=>{JX||=new WeakMap;let W=JX.get($);if(W?.[J])return W[J];let X=$.type==="public",Y=X?!0:!1,U;if($.asymmetricKeyType==="x25519"){switch(J){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}U=$.toCryptoKey($.asymmetricKeyType,Y,X?[]:["deriveBits"])}if($.asymmetricKeyType==="ed25519"){if(J!=="EdDSA"&&J!=="Ed25519")throw TypeError("given KeyObject instance cannot be used for this algorithm");U=$.toCryptoKey($.asymmetricKeyType,Y,[X?"verify":"sign"])}switch($.asymmetricKeyType){case"ml-dsa-44":case"ml-dsa-65":case"ml-dsa-87":{if(J!==$.asymmetricKeyType.toUpperCase())throw TypeError("given KeyObject instance cannot be used for this algorithm");U=$.toCryptoKey($.asymmetricKeyType,Y,[X?"verify":"sign"])}}if($.asymmetricKeyType==="rsa"){let Z;switch(J){case"RSA-OAEP":Z="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":Z="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":Z="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":Z="SHA-512";break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}if(J.startsWith("RSA-OAEP"))return $.toCryptoKey({name:"RSA-OAEP",hash:Z},Y,X?["encrypt"]:["decrypt"]);U=$.toCryptoKey({name:J.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:Z},Y,[X?"verify":"sign"])}if($.asymmetricKeyType==="ec"){let H=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get($.asymmetricKeyDetails?.namedCurve);if(!H)throw TypeError("given KeyObject instance cannot be used for this algorithm");if(J==="ES256"&&H==="P-256")U=$.toCryptoKey({name:"ECDSA",namedCurve:H},Y,[X?"verify":"sign"]);if(J==="ES384"&&H==="P-384")U=$.toCryptoKey({name:"ECDSA",namedCurve:H},Y,[X?"verify":"sign"]);if(J==="ES512"&&H==="P-521")U=$.toCryptoKey({name:"ECDSA",namedCurve:H},Y,[X?"verify":"sign"]);if(J.startsWith("ECDH-ES"))U=$.toCryptoKey({name:"ECDH",namedCurve:H},Y,X?[]:["deriveBits"])}if(!U)throw TypeError("given KeyObject instance cannot be used for this algorithm");if(!W)JX.set($,{[J]:U});else W[J]=U;return U},rG=async($,J)=>{if($ instanceof Uint8Array)return $;if(jF($))return $;if(kF($)){if($.type==="secret")return $.export();if("toCryptoKey"in $&&typeof $.toCryptoKey==="function")try{return kn($,J)}catch(X){if(X instanceof TypeError)throw X}let W=$.export({format:"jwk"});return Nv($,W,J)}if(n2($)){if($.k)return h6($.k);return Nv($,$,J,!0)}throw Error("unreachable")};var WX=($)=>$?.[Symbol.toStringTag],CF=($,J,W)=>{if(J.use!==void 0){let X;switch(W){case"sign":case"verify":X="sig";break;case"encrypt":case"decrypt":X="enc";break}if(J.use!==X)throw TypeError(`Invalid key for this operation, its "use" must be "${X}" when present`)}if(J.alg!==void 0&&J.alg!==$)throw TypeError(`Invalid key for this operation, its "alg" must be "${$}" when present`);if(Array.isArray(J.key_ops)){let X;switch(!0){case(W==="sign"||W==="verify"):case $==="dir":case $.includes("CBC-HS"):X=W;break;case $.startsWith("PBES2"):X="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test($):if(!$.includes("GCM")&&$.endsWith("KW"))X=W==="encrypt"?"wrapKey":"unwrapKey";else X=W;break;case(W==="encrypt"&&$.startsWith("RSA")):X="wrapKey";break;case W==="decrypt":X=$.startsWith("RSA")?"unwrapKey":"deriveBits";break}if(X&&J.key_ops?.includes?.(X)===!1)throw TypeError(`Invalid key for this operation, its "key_ops" must include "${X}" when present`)}return!0},vn=($,J,W)=>{if(J instanceof Uint8Array)return;if(n2(J)){if(_v(J)&&CF($,J,W))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!vF(J))throw TypeError(SF($,J,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if(J.type!=="secret")throw TypeError(`${WX(J)} instances for symmetric algorithms must be of type "secret"`)},Cn=($,J,W)=>{if(n2(J))switch(W){case"decrypt":case"sign":if(Lv(J)&&CF($,J,W))return;throw TypeError("JSON Web Key for this operation be a private JWK");case"encrypt":case"verify":if(Pv(J)&&CF($,J,W))return;throw TypeError("JSON Web Key for this operation be a public JWK")}if(!vF(J))throw TypeError(SF($,J,"CryptoKey","KeyObject","JSON Web Key"));if(J.type==="secret")throw TypeError(`${WX(J)} instances for asymmetric algorithms must not be of type "secret"`);if(J.type==="public")switch(W){case"sign":throw TypeError(`${WX(J)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw TypeError(`${WX(J)} instances for asymmetric algorithm decryption must be of type "private"`);default:break}if(J.type==="private")switch(W){case"verify":throw TypeError(`${WX(J)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw TypeError(`${WX(J)} instances for asymmetric algorithm encryption must be of type "public"`);default:break}},nG=($,J,W)=>{if($.startsWith("HS")||$==="dir"||$.startsWith("PBES2")||/^A(?:128|192|256)(?:GCM)?(?:KW)?$/.test($)||/^A(?:128|192|256)CBC-HS(?:256|384|512)$/.test($))vn($,J,W);else Cn($,J,W)};var iG=($,J)=>{let W=`SHA-${$.slice(-3)}`;switch($){case"HS256":case"HS384":case"HS512":return{hash:W,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:W,name:"RSA-PSS",saltLength:parseInt($.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:W,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:W,name:"ECDSA",namedCurve:J.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return{name:$};default:throw new W$(`alg ${$} is not supported either by JOSE or your javascript runtime`)}};var tG=async($,J,W)=>{if(J instanceof Uint8Array){if(!$.startsWith("HS"))throw TypeError(Av(J,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",J,{hash:`SHA-${$.slice(-3)}`,name:"HMAC"},!1,[W])}return Vv(J,$,W),J};var Bv=async($,J,W,X)=>{let Y=await tG($,J,"verify");dG($,Y);let U=iG($,Y.algorithm);try{return await crypto.subtle.verify(U,Y,W,X)}catch{return!1}};async function Rv($,J,W){if(!L4($))throw new L1("Flattened JWS must be an object");if($.protected===void 0&&$.header===void 0)throw new L1('Flattened JWS must have either of the "protected" or "header" members');if($.protected!==void 0&&typeof $.protected!=="string")throw new L1("JWS Protected Header incorrect type");if($.payload===void 0)throw new L1("JWS Payload missing");if(typeof $.signature!=="string")throw new L1("JWS Signature missing or incorrect type");if($.header!==void 0&&!L4($.header))throw new L1("JWS Unprotected Header incorrect type");let X={};if($.protected)try{let A=h6($.protected);X=JSON.parse(J$.decode(A))}catch{throw new L1("JWS Protected Header is invalid")}if(!pG(X,$.header))throw new L1("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let Y={...X,...$.header},U=lG(L1,new Map([["b64",!0]]),W?.crit,X,Y),Z=!0;if(U.has("b64")){if(Z=X.b64,typeof Z!=="boolean")throw new L1('The "b64" (base64url-encode payload) Header Parameter must be a boolean')}let{alg:H}=Y;if(typeof H!=="string"||!H)throw new L1('JWS "alg" (Algorithm) Header Parameter missing or invalid');let G=W&&Iv("algorithms",W.algorithms);if(G&&!G.has(H))throw new PF('"alg" (Algorithm) Header Parameter value not allowed');if(Z){if(typeof $.payload!=="string")throw new L1("JWS Payload must be a string")}else if(typeof $.payload!=="string"&&!($.payload instanceof Uint8Array))throw new L1("JWS Payload must be a string or an Uint8Array instance");let z=!1;if(typeof J==="function")J=await J(X,$),z=!0;nG(H,J,"verify");let w=yG(b$.encode($.protected??""),b$.encode("."),typeof $.payload==="string"?b$.encode($.payload):$.payload),D;try{D=h6($.signature)}catch{throw new L1("Failed to base64url decode the signature")}let K=await rG(J,H);if(!await Bv(H,K,D,w))throw new BF;let F;if(Z)try{F=h6($.payload)}catch{throw new L1("Failed to base64url decode the payload")}else if(typeof $.payload==="string")F=b$.encode($.payload);else F=$.payload;let M={payload:F};if($.protected!==void 0)M.protectedHeader=X;if($.header!==void 0)M.unprotectedHeader=$.header;if(z)return{...M,key:K};return M}async function Sv($,J,W){if($ instanceof Uint8Array)$=J$.decode($);if(typeof $!=="string")throw new L1("Compact JWS must be a string or Uint8Array");let{0:X,1:Y,2:U,length:Z}=$.split(".");if(Z!==3)throw new L1("Invalid Compact JWS");let H=await Rv({payload:Y,protected:X,signature:U},J,W),G={payload:H.payload,protectedHeader:H.protectedHeader};if(typeof J==="function")return{...G,key:H.key};return G}var S5=($)=>Math.floor($.getTime()/1000);var Tn=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,XX=($)=>{let J=Tn.exec($);if(!J||J[4]&&J[1])throw TypeError("Invalid time period format");let W=parseFloat(J[2]),X=J[3].toLowerCase(),Y;switch(X){case"sec":case"secs":case"second":case"seconds":case"s":Y=Math.round(W);break;case"minute":case"minutes":case"min":case"mins":case"m":Y=Math.round(W*60);break;case"hour":case"hours":case"hr":case"hrs":case"h":Y=Math.round(W*3600);break;case"day":case"days":case"d":Y=Math.round(W*86400);break;case"week":case"weeks":case"w":Y=Math.round(W*604800);break;default:Y=Math.round(W*31557600);break}if(J[1]==="-"||J[4]==="ago")return-Y;return Y};function E7($,J){if(!Number.isFinite(J))throw TypeError(`Invalid ${$} input`);return J}var jv=($)=>{if($.includes("/"))return $.toLowerCase();return`application/${$.toLowerCase()}`},qn=($,J)=>{if(typeof $==="string")return J.includes($);if(Array.isArray($))return J.some(Set.prototype.has.bind(new Set($)));return!1};function kv($,J,W={}){let X;try{X=JSON.parse(J$.decode(J))}catch{}if(!L4(X))throw new V$("JWT Claims Set must be a top-level JSON object");let{typ:Y}=W;if(Y&&(typeof $.typ!=="string"||jv($.typ)!==jv(Y)))throw new x6('unexpected "typ" JWT header value',X,"typ","check_failed");let{requiredClaims:U=[],issuer:Z,subject:H,audience:G,maxTokenAge:z}=W,w=[...U];if(z!==void 0)w.push("iat");if(G!==void 0)w.push("aud");if(H!==void 0)w.push("sub");if(Z!==void 0)w.push("iss");for(let F of new Set(w.reverse()))if(!(F in X))throw new x6(`missing required "${F}" claim`,X,F,"missing");if(Z&&!(Array.isArray(Z)?Z:[Z]).includes(X.iss))throw new x6('unexpected "iss" claim value',X,"iss","check_failed");if(H&&X.sub!==H)throw new x6('unexpected "sub" claim value',X,"sub","check_failed");if(G&&!qn(X.aud,typeof G==="string"?[G]:G))throw new x6('unexpected "aud" claim value',X,"aud","check_failed");let D;switch(typeof W.clockTolerance){case"string":D=XX(W.clockTolerance);break;case"number":D=W.clockTolerance;break;case"undefined":D=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:K}=W,O=S5(K||new Date);if((X.iat!==void 0||z)&&typeof X.iat!=="number")throw new x6('"iat" claim must be a number',X,"iat","invalid");if(X.nbf!==void 0){if(typeof X.nbf!=="number")throw new x6('"nbf" claim must be a number',X,"nbf","invalid");if(X.nbf>O+D)throw new x6('"nbf" claim timestamp check failed',X,"nbf","check_failed")}if(X.exp!==void 0){if(typeof X.exp!=="number")throw new x6('"exp" claim must be a number',X,"exp","invalid");if(X.exp<=O-D)throw new oW('"exp" claim timestamp check failed',X,"exp","check_failed")}if(z){let F=O-X.iat,M=typeof z==="number"?z:XX(z);if(F-D>M)throw new oW('"iat" claim timestamp check failed (too far in the past)',X,"iat","check_failed");if(F<0-D)throw new x6('"iat" claim timestamp check failed (it should be in the past)',X,"iat","check_failed")}return X}class TF{#$;constructor($){if(!L4($))throw TypeError("JWT Claims Set MUST be an object");this.#$=structuredClone($)}data(){return b$.encode(JSON.stringify(this.#$))}get iss(){return this.#$.iss}set iss($){this.#$.iss=$}get sub(){return this.#$.sub}set sub($){this.#$.sub=$}get aud(){return this.#$.aud}set aud($){this.#$.aud=$}set jti($){this.#$.jti=$}set nbf($){if(typeof $==="number")this.#$.nbf=E7("setNotBefore",$);else if($ instanceof Date)this.#$.nbf=E7("setNotBefore",S5($));else this.#$.nbf=S5(new Date)+XX($)}set exp($){if(typeof $==="number")this.#$.exp=E7("setExpirationTime",$);else if($ instanceof Date)this.#$.exp=E7("setExpirationTime",S5($));else this.#$.exp=S5(new Date)+XX($)}set iat($){if(typeof $>"u")this.#$.iat=S5(new Date);else if($ instanceof Date)this.#$.iat=E7("setIssuedAt",S5($));else if(typeof $==="string")this.#$.iat=E7("setIssuedAt",S5(new Date)+XX($));else this.#$.iat=E7("setIssuedAt",$)}}async function M7($,J,W){let X=await Sv($,J,W);if(X.protectedHeader.crit?.includes("b64")&&X.protectedHeader.b64===!1)throw new V$("JWTs MUST NOT use unencoded payload");let U={payload:kv(X.protectedHeader,X.payload,W),protectedHeader:X.protectedHeader};if(typeof J==="function")return{...U,key:X.key};return U}var vv=async($,J,W)=>{let X=await tG($,J,"sign");dG($,X);let Y=await crypto.subtle.sign(iG($,X.algorithm),X,W);return new Uint8Array(Y)};class qF{#$;#J;#W;constructor($){if(!($ instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this.#$=$}setProtectedHeader($){if(this.#J)throw TypeError("setProtectedHeader can only be called once");return this.#J=$,this}setUnprotectedHeader($){if(this.#W)throw TypeError("setUnprotectedHeader can only be called once");return this.#W=$,this}async sign($,J){if(!this.#J&&!this.#W)throw new L1("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!pG(this.#J,this.#W))throw new L1("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let W={...this.#J,...this.#W},X=lG(L1,new Map([["b64",!0]]),J?.crit,this.#J,W),Y=!0;if(X.has("b64")){if(Y=this.#J.b64,typeof Y!=="boolean")throw new L1('The "b64" (base64url-encode payload) Header Parameter must be a boolean')}let{alg:U}=W;if(typeof U!=="string"||!U)throw new L1('JWS "alg" (Algorithm) Header Parameter missing or invalid');nG(U,$,"sign");let Z=this.#$;if(Y)Z=b$.encode(cG(Z));let H;if(this.#J)H=b$.encode(cG(JSON.stringify(this.#J)));else H=b$.encode("");let G=yG(H,b$.encode("."),Z),z=await rG($,U),w=await vv(U,z,G),D={signature:cG(w),payload:""};if(Y)D.payload=J$.decode(Z);if(this.#W)D.header=this.#W;if(this.#J)D.protected=J$.decode(H);return D}}class hF{#$;constructor($){this.#$=new qF($)}setProtectedHeader($){return this.#$.setProtectedHeader($),this}async sign($,J){let W=await this.#$.sign($,J);if(W.payload===void 0)throw TypeError("use the flattened module for creating JWS with b64: false");return`${W.protected}.${W.payload}.${W.signature}`}}class aG{#$;#J;constructor($={}){this.#J=new TF($)}setIssuer($){return this.#J.iss=$,this}setSubject($){return this.#J.sub=$,this}setAudience($){return this.#J.aud=$,this}setJti($){return this.#J.jti=$,this}setNotBefore($){return this.#J.nbf=$,this}setExpirationTime($){return this.#J.exp=$,this}setIssuedAt($){return this.#J.iat=$,this}setProtectedHeader($){return this.#$=$,this}async sign($,J){let W=new hF(this.#J.data());if(W.setProtectedHeader(this.#$),Array.isArray(this.#$?.crit)&&this.#$.crit.includes("b64")&&this.#$.b64===!1)throw new V$("JWTs MUST NOT use unencoded payload");return W.sign($,J)}}function hn($){switch(typeof $==="string"&&$.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";case"ML":return"AKP";default:throw new W$('Unsupported "alg" value for a JSON Web Key Set')}}function xn($){return $&&typeof $==="object"&&Array.isArray($.keys)&&$.keys.every(bn)}function bn($){return L4($)}class Tv{#$;#J=new WeakMap;constructor($){if(!xn($))throw new uG("JSON Web Key Set malformed");this.#$=structuredClone($)}jwks(){return this.#$}async getKey($,J){let{alg:W,kid:X}={...$,...J?.header},Y=hn(W),U=this.#$.keys.filter((G)=>{let z=Y===G.kty;if(z&&typeof X==="string")z=X===G.kid;if(z&&(typeof G.alg==="string"||Y==="AKP"))z=W===G.alg;if(z&&typeof G.use==="string")z=G.use==="sig";if(z&&Array.isArray(G.key_ops))z=G.key_ops.includes("verify");if(z)switch(W){case"ES256":z=G.crv==="P-256";break;case"ES384":z=G.crv==="P-384";break;case"ES512":z=G.crv==="P-521";break;case"Ed25519":case"EdDSA":z=G.crv==="Ed25519";break}return z}),{0:Z,length:H}=U;if(H===0)throw new r2;if(H!==1){let G=new _F,z=this.#J;throw G[Symbol.asyncIterator]=async function*(){for(let w of U)try{yield await Cv(z,w,W)}catch{}},G}return Cv(this.#J,Z,W)}}async function Cv($,J,W){let X=$.get(J)||$.set(J,{}).get(J);if(X[W]===void 0){let Y=await $X({...J,ext:!0},W);if(Y instanceof Uint8Array||Y.type!=="public")throw new uG("JSON Web Key Set members must be public keys");X[W]=Y}return X[W]}function xF($){let J=new Tv($),W=async(X,Y)=>J.getKey(X,Y);return Object.defineProperties(W,{jwks:{value:()=>structuredClone(J.jwks()),enumerable:!1,configurable:!1,writable:!1}}),W}function gn(){return typeof WebSocketPair<"u"||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||typeof EdgeRuntime<"u"&&EdgeRuntime==="vercel"}var bF;if(typeof navigator>"u"||!navigator.userAgent?.startsWith?.("Mozilla/5.0 "))bF="jose/v6.1.0";var qv=Symbol();async function fn($,J,W,X=fetch){let Y=await X($,{method:"GET",signal:W,redirect:"manual",headers:J}).catch((U)=>{if(U.name==="TimeoutError")throw new NF;throw U});if(Y.status!==200)throw new M$("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await Y.json()}catch{throw new M$("Failed to parse the JSON Web Key Set HTTP response as JSON")}}var oG=Symbol();function mn($,J){if(typeof $!=="object"||$===null)return!1;if(!("uat"in $)||typeof $.uat!=="number"||Date.now()-$.uat>=J)return!1;if(!("jwks"in $)||!L4($.jwks)||!Array.isArray($.jwks.keys)||!Array.prototype.every.call($.jwks.keys,L4))return!1;return!0}class hv{#$;#J;#W;#X;#Y;#Z;#H;#w;#z;#G;constructor($,J){if(!($ instanceof URL))throw TypeError("url must be an instance of URL");if(this.#$=new URL($.href),this.#J=typeof J?.timeoutDuration==="number"?J?.timeoutDuration:5000,this.#W=typeof J?.cooldownDuration==="number"?J?.cooldownDuration:30000,this.#X=typeof J?.cacheMaxAge==="number"?J?.cacheMaxAge:600000,this.#H=new Headers(J?.headers),bF&&!this.#H.has("User-Agent"))this.#H.set("User-Agent",bF);if(!this.#H.has("accept"))this.#H.set("accept","application/json"),this.#H.append("accept","application/jwk-set+json");if(this.#w=J?.[qv],J?.[oG]!==void 0){if(this.#G=J?.[oG],mn(J?.[oG],this.#X))this.#Y=this.#G.uat,this.#z=xF(this.#G.jwks)}}pendingFetch(){return!!this.#Z}coolingDown(){return typeof this.#Y==="number"?Date.now()<this.#Y+this.#W:!1}fresh(){return typeof this.#Y==="number"?Date.now()<this.#Y+this.#X:!1}jwks(){return this.#z?.jwks()}async getKey($,J){if(!this.#z||!this.fresh())await this.reload();try{return await this.#z($,J)}catch(W){if(W instanceof r2){if(this.coolingDown()===!1)return await this.reload(),this.#z($,J)}throw W}}async reload(){if(this.#Z&&gn())this.#Z=void 0;this.#Z||=fn(this.#$.href,this.#H,AbortSignal.timeout(this.#J),this.#w).then(($)=>{if(this.#z=xF($),this.#G)this.#G.uat=Date.now(),this.#G.jwks=$;this.#Y=Date.now(),this.#Z=void 0}).catch(($)=>{throw this.#Z=void 0,$}),await this.#Z}}function gF($,J){let W=new hv($,J),X=async(Y,U)=>W.getKey(Y,U);return Object.defineProperties(X,{coolingDown:{get:()=>W.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>W.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>W.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>W.pendingFetch(),enumerable:!0,configurable:!1},jwks:{value:()=>W.jwks(),enumerable:!0,configurable:!1,writable:!1}}),X}function sG($){let J;if(typeof $==="string"){let W=$.split(".");if(W.length===3||W.length===5)[J]=W}else if(typeof $==="object"&&$)if("protected"in $)J=$.protected;else throw TypeError("Token does not contain a Protected Header");try{if(typeof J!=="string"||!J)throw Error();let W=JSON.parse(J$.decode(h6(J)));if(!L4(W))throw Error();return W}catch{throw TypeError("Invalid Token or Protected Header formatting")}}function r8($){if(typeof $!=="string")throw new V$("JWTs must use Compact JWS serialization, JWT must be a string");let{1:J,length:W}=$.split(".");if(W===5)throw new V$("Only JWTs using Compact JWS serialization can be decoded");if(W!==3)throw new V$("Invalid JWT");if(!J)throw new V$("JWTs must contain a payload");let X;try{X=h6(J)}catch{throw new V$("Failed to base64url decode the payload")}let Y;try{Y=JSON.parse(J$.decode(X))}catch{throw new V$("Failed to parse the decoded payload as JSON")}if(!L4(Y))throw new V$("Invalid JWT Claims Set");return Y}function fF($){let J=(W)=>{return new Date(new Date().getTime()+W*1000)};return{tokenType:$.token_type,accessToken:$.access_token,refreshToken:$.refresh_token,accessTokenExpiresAt:$.expires_in?J($.expires_in):void 0,refreshTokenExpiresAt:$.refresh_token_expires_in?J($.refresh_token_expires_in):void 0,scopes:$?.scope?typeof $.scope==="string"?$.scope.split(" "):$.scope:[],idToken:$.id_token}}async function mF($){let W=new TextEncoder().encode($),X=await crypto.subtle.digest("SHA-256",W);return d8.encode(new Uint8Array(X),{padding:!1})}async function v1({id:$,options:J,authorizationEndpoint:W,state:X,codeVerifier:Y,scopes:U,claims:Z,redirectURI:H,duration:G,prompt:z,accessType:w,responseType:D,display:K,loginHint:O,hd:F,responseMode:M,additionalParams:A,scopeJoiner:I}){let P=new URL(W);P.searchParams.set("response_type",D||"code");let Q=Array.isArray(J.clientId)?J.clientId[0]:J.clientId;if(P.searchParams.set("client_id",Q),P.searchParams.set("state",X),P.searchParams.set("scope",U.join(I||" ")),P.searchParams.set("redirect_uri",J.redirectURI||H),G&&P.searchParams.set("duration",G),K&&P.searchParams.set("display",K),O&&P.searchParams.set("login_hint",O),z&&P.searchParams.set("prompt",z),F&&P.searchParams.set("hd",F),w&&P.searchParams.set("access_type",w),M&&P.searchParams.set("response_mode",M),Y){let N=await mF(Y);P.searchParams.set("code_challenge_method","S256"),P.searchParams.set("code_challenge",N)}if(Z){let N=Z.reduce((_,L)=>{return _[L]=null,_},{});P.searchParams.set("claims",JSON.stringify({id_token:{email:null,email_verified:null,...N}}))}if(A)Object.entries(A).forEach(([N,_])=>{P.searchParams.set(N,_)});return P}function yn({code:$,codeVerifier:J,redirectURI:W,options:X,authentication:Y,deviceId:U,headers:Z,additionalParams:H={},resource:G}){let z=new URLSearchParams,w={"content-type":"application/x-www-form-urlencoded",accept:"application/json","user-agent":"better-auth",...Z};if(z.set("grant_type","authorization_code"),z.set("code",$),J&&z.set("code_verifier",J),X.clientKey&&z.set("client_key",X.clientKey),U&&z.set("device_id",U),z.set("redirect_uri",X.redirectURI||W),G)if(typeof G==="string")z.append("resource",G);else for(let D of G)z.append("resource",D);if(Y==="basic"){let D=Array.isArray(X.clientId)?X.clientId[0]:X.clientId,K=$$.encode(`${D}:${X.clientSecret??""}`);w.authorization=`Basic ${K}`}else{let D=Array.isArray(X.clientId)?X.clientId[0]:X.clientId;if(z.set("client_id",D),X.clientSecret)z.set("client_secret",X.clientSecret)}for(let[D,K]of Object.entries(H))if(!z.has(D))z.append(D,K);return{body:z,headers:w}}async function D1({code:$,codeVerifier:J,redirectURI:W,options:X,tokenEndpoint:Y,authentication:U,deviceId:Z,headers:H,additionalParams:G={},resource:z}){let{body:w,headers:D}=yn({code:$,codeVerifier:J,redirectURI:W,options:X,authentication:U,deviceId:Z,headers:H,additionalParams:G,resource:z}),{data:K,error:O}=await T0(Y,{method:"POST",body:w,headers:D});if(O)throw O;return fF(K)}function cn({refreshToken:$,options:J,authentication:W,extraParams:X,resource:Y}){let U=new URLSearchParams,Z={"content-type":"application/x-www-form-urlencoded",accept:"application/json"};if(U.set("grant_type","refresh_token"),U.set("refresh_token",$),W==="basic"){let H=Array.isArray(J.clientId)?J.clientId[0]:J.clientId;if(H)Z.authorization="Basic "+$$.encode(`${H}:${J.clientSecret??""}`);else Z.authorization="Basic "+$$.encode(`:${J.clientSecret??""}`)}else{let H=Array.isArray(J.clientId)?J.clientId[0]:J.clientId;if(U.set("client_id",H),J.clientSecret)U.set("client_secret",J.clientSecret)}if(Y)if(typeof Y==="string")U.append("resource",Y);else for(let H of Y)U.append("resource",H);if(X)for(let[H,G]of Object.entries(X))U.set(H,G);return{body:U,headers:Z}}async function E1({refreshToken:$,options:J,tokenEndpoint:W,authentication:X,extraParams:Y}){let{body:U,headers:Z}=cn({refreshToken:$,options:J,authentication:X,extraParams:Y}),{data:H,error:G}=await T0(W,{method:"POST",body:U,headers:Z});if(G)throw G;let z={accessToken:H.access_token,refreshToken:H.refresh_token,tokenType:H.token_type,scopes:H.scope?.split(" "),idToken:H.id_token};if(H.expires_in){let w=new Date;z.accessTokenExpiresAt=new Date(w.getTime()+H.expires_in*1000)}return z}function xv($){return $}var E0=xv({USER_NOT_FOUND:"User not found",FAILED_TO_CREATE_USER:"Failed to create user",FAILED_TO_CREATE_SESSION:"Failed to create session",FAILED_TO_UPDATE_USER:"Failed to update user",FAILED_TO_GET_SESSION:"Failed to get session",INVALID_PASSWORD:"Invalid password",INVALID_EMAIL:"Invalid email",INVALID_EMAIL_OR_PASSWORD:"Invalid email or password",SOCIAL_ACCOUNT_ALREADY_LINKED:"Social account already linked",PROVIDER_NOT_FOUND:"Provider not found",INVALID_TOKEN:"Invalid token",ID_TOKEN_NOT_SUPPORTED:"id_token not supported",FAILED_TO_GET_USER_INFO:"Failed to get user info",USER_EMAIL_NOT_FOUND:"User email not found",EMAIL_NOT_VERIFIED:"Email not verified",PASSWORD_TOO_SHORT:"Password too short",PASSWORD_TOO_LONG:"Password too long",USER_ALREADY_EXISTS:"User already exists.",USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL:"User already exists. Use another email.",EMAIL_CAN_NOT_BE_UPDATED:"Email can not be updated",CREDENTIAL_ACCOUNT_NOT_FOUND:"Credential account not found",SESSION_EXPIRED:"Session expired. Re-authenticate to perform this action.",FAILED_TO_UNLINK_LAST_ACCOUNT:"You can't unlink your last account",ACCOUNT_NOT_FOUND:"Account not found",USER_ALREADY_HAS_PASSWORD:"User already has a password. Provide that to delete the account."});class h0 extends Error{constructor($,J){super($);this.name="BetterAuthError",this.message=$,this.cause=J,this.stack=""}}var un="node:async_hooks",LM0=import(un).then(($)=>$.AsyncLocalStorage).catch(($)=>{if("AsyncLocalStorage"in globalThis)return globalThis.AsyncLocalStorage;throw console.warn("[better-auth] Warning: AsyncLocalStorage is not available in this environment. Some features may not work as expected."),console.warn("[better-auth] Please read more about this warning at https://better-auth.com/docs/installation#mount-handler"),console.warn("[better-auth] If you are using Cloudflare Workers, please see: https://developers.cloudflare.com/workers/configuration/compatibility-flags/#nodejs-compatibility-flag"),$});function n8(){let $=typeof globalThis<"u"&&globalThis.crypto;if($&&typeof $.subtle==="object"&&$.subtle!=null)return $.subtle;throw Error("crypto.subtle must be defined")}var eG=(()=>{let $=function(){};return $.prototype=Object.create(null),$})();function uF(){return{root:{key:""},static:new eG}}function pF($){return $.split("/").filter(Boolean)}function bv($,J){let W=new eG;for(let[X,Y]of J){let U=X<0?$.slice(-1*X).join("/"):$[X];if(typeof Y==="string")W[Y]=U;else{let Z=U.match(Y);if(Z)for(let H in Z.groups)W[H]=Z.groups[H]}}return W}function dF($,J="",W,X){let Y=pF(W),U=$.root,Z=0,H=[];for(let z=0;z<Y.length;z++){let w=Y[z];if(w.startsWith("**")){if(!U.wildcard)U.wildcard={key:"**"};U=U.wildcard,H.push([-z,w.split(":")[1]||"_",w.length===2]);break}if(w==="*"||w.includes(":")){if(!U.param)U.param={key:"*"};U=U.param;let K=w==="*";H.push([z,K?`_${Z++}`:pn(w),K]);continue}let D=U.static?.[w];if(D)U=D;else{let K={key:w};if(!U.static)U.static=new eG;U.static[w]=K,U=K}}let G=H.length>0;if(!U.methods)U.methods=new eG;if(!U.methods[J])U.methods[J]=[];if(U.methods[J].push({data:X||null,paramsMap:G?H:void 0}),!G)$.static[W]=U}function pn($){if(!$.includes(":",1))return $.slice(1);let J=$.replace(/:(\w+)/g,(W,X)=>`(?<${X}>\\w+)`);return new RegExp(`^${J}$`)}function gv($,J="",W,X){if(W[W.length-1]==="/")W=W.slice(0,-1);let Y=$.static[W];if(Y&&Y.methods){let H=Y.methods[J]||Y.methods[""];if(H!==void 0)return H[0]}let U=pF(W),Z=yF($,$.root,J,U,0)?.[0];if(Z===void 0)return;if(X?.params===!1)return Z;return{data:Z.data,params:Z.paramsMap?bv(U,Z.paramsMap):void 0}}function yF($,J,W,X,Y){if(Y===X.length){if(J.methods){let Z=J.methods[W]||J.methods[""];if(Z)return Z}if(J.param&&J.param.methods){let Z=J.param.methods[W]||J.param.methods[""];if(Z){let H=Z[0].paramsMap;if(H?.[H?.length-1]?.[2])return Z}}if(J.wildcard&&J.wildcard.methods){let Z=J.wildcard.methods[W]||J.wildcard.methods[""];if(Z){let H=Z[0].paramsMap;if(H?.[H?.length-1]?.[2])return Z}}return}let U=X[Y];if(J.static){let Z=J.static[U];if(Z){let H=yF($,Z,W,X,Y+1);if(H)return H}}if(J.param){let Z=yF($,J.param,W,X,Y+1);if(Z)return Z}if(J.wildcard&&J.wildcard.methods)return J.wildcard.methods[W]||J.wildcard.methods[""];return}function fv($,J="",W,X){if(W[W.length-1]==="/")W=W.slice(0,-1);let Y=pF(W),U=cF($,$.root,J,Y,0);if(X?.params===!1)return U;return U.map((Z)=>{return{data:Z.data,params:Z.paramsMap?bv(Y,Z.paramsMap):void 0}})}function cF($,J,W,X,Y,U=[]){let Z=X[Y];if(J.wildcard&&J.wildcard.methods){let G=J.wildcard.methods[W]||J.wildcard.methods[""];if(G)U.push(...G)}if(J.param){if(cF($,J.param,W,X,Y+1,U),Y===X.length&&J.param.methods){let G=J.param.methods[W]||J.param.methods[""];if(G)U.push(...G)}}let H=J.static?.[Z];if(H)cF($,H,W,X,Y+1,U);if(Y===X.length&&J.methods){let G=J.methods[W]||J.methods[""];if(G)U.push(...G)}return U}var dn=Object.defineProperty,ln=($,J)=>{for(var W in J)dn($,W,{get:J[W],enumerable:!0})};function rn(){let $=Object.getOwnPropertyDescriptor(Error,"stackTraceLimit");if($===void 0)return Object.isExtensible(Error);return Object.prototype.hasOwnProperty.call($,"writable")?$.writable:$.set!==void 0}function nn($){let J=$.split(`
    at `);if(J.length<=1)return $;return J.splice(1,1),J.join(`
    at `)}function tn($,J){class W extends ${#$;constructor(...X){if(rn()){let U=Error.stackTraceLimit;Error.stackTraceLimit=0;super(...X);Error.stackTraceLimit=U}else super(...X);let Y=Error().stack;if(Y)this.#$=nn(Y.replace(/^Error/,this.name))}get errorStack(){return this.#$}}return Object.defineProperty(W.prototype,"constructor",{get(){return J},enumerable:!1,configurable:!0}),W}var an={OK:200,CREATED:201,ACCEPTED:202,NO_CONTENT:204,MULTIPLE_CHOICES:300,MOVED_PERMANENTLY:301,FOUND:302,SEE_OTHER:303,NOT_MODIFIED:304,TEMPORARY_REDIRECT:307,BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,PROXY_AUTHENTICATION_REQUIRED:407,REQUEST_TIMEOUT:408,CONFLICT:409,GONE:410,LENGTH_REQUIRED:411,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,URI_TOO_LONG:414,UNSUPPORTED_MEDIA_TYPE:415,RANGE_NOT_SATISFIABLE:416,EXPECTATION_FAILED:417,"I'M_A_TEAPOT":418,MISDIRECTED_REQUEST:421,UNPROCESSABLE_ENTITY:422,LOCKED:423,FAILED_DEPENDENCY:424,TOO_EARLY:425,UPGRADE_REQUIRED:426,PRECONDITION_REQUIRED:428,TOO_MANY_REQUESTS:429,REQUEST_HEADER_FIELDS_TOO_LARGE:431,UNAVAILABLE_FOR_LEGAL_REASONS:451,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,HTTP_VERSION_NOT_SUPPORTED:505,VARIANT_ALSO_NEGOTIATES:506,INSUFFICIENT_STORAGE:507,LOOP_DETECTED:508,NOT_EXTENDED:510,NETWORK_AUTHENTICATION_REQUIRED:511},on=class extends Error{constructor($="INTERNAL_SERVER_ERROR",J=void 0,W={},X=typeof $==="number"?$:an[$]){super(J?.message,J?.cause?{cause:J.cause}:void 0);this.status=$,this.body=J,this.headers=W,this.statusCode=X,this.name="APIError",this.status=$,this.headers=W,this.statusCode=X,this.body=J?{code:J?.message?.toUpperCase().replace(/ /g,"_").replace(/[^A-Z0-9_]/g,""),...J}:void 0}},p=tn(on,Error);async function sn($){let J=$.headers.get("content-type")||"";if(!$.body)return;if(J.includes("application/json"))return await $.json();if(J.includes("application/x-www-form-urlencoded")){let W=await $.formData(),X={};return W.forEach((Y,U)=>{X[U]=Y.toString()}),X}if(J.includes("multipart/form-data")){let W=await $.formData(),X={};return W.forEach((Y,U)=>{X[U]=Y}),X}if(J.includes("text/plain"))return await $.text();if(J.includes("application/octet-stream"))return await $.arrayBuffer();if(J.includes("application/pdf")||J.includes("image/")||J.includes("video/"))return await $.blob();if(J.includes("application/stream")||$.body instanceof ReadableStream)return $.body;return await $.text()}function W3($){return $ instanceof p||$?.name==="APIError"}function en($){try{return $.includes("%")?decodeURIComponent($):$}catch{return $}}function $i($){if($===void 0)return!1;let J=typeof $;if(J==="string"||J==="number"||J==="boolean"||J===null)return!0;if(J!=="object")return!1;if(Array.isArray($))return!0;if($.buffer)return!1;return $.constructor&&$.constructor.name==="Object"||typeof $.toJSON==="function"}function Ji($,J,W){let X=0,Y=new WeakMap;return JSON.stringify($,(Z,H)=>{if(typeof H==="bigint")return H.toString();if(typeof H==="object"&&H!==null){if(Y.has(H))return`[Circular ref-${Y.get(H)}]`;Y.set(H,X++)}if(J)return J(Z,H);return H},W)}function Wi($){if(!$||typeof $!=="object")return!1;return"_flag"in $&&$._flag==="json"}function q9($,J){if($ instanceof Response){if(J?.headers instanceof Headers)J.headers.forEach((U,Z)=>{$.headers.set(Z,U)});return $}if(Wi($)){let{body:U,routerResponse:Z}=$;if(Z instanceof Response)return Z;let H=new Headers({...Z?.headers,...$.headers,...J?.headers,"Content-Type":"application/json"});return new Response(JSON.stringify(U),{...Z,headers:H,status:$.status??J?.status??Z?.status,statusText:J?.statusText??Z?.statusText})}if(W3($))return q9($.body,{status:J?.status??$.statusCode,statusText:$.status.toString(),headers:J?.headers||$.headers});let X=$,Y=new Headers(J?.headers);if(!$){if($===null)X=JSON.stringify(null);Y.set("content-type","application/json")}else if(typeof $==="string")X=$,Y.set("Content-Type","text/plain");else if($ instanceof ArrayBuffer||ArrayBuffer.isView($))X=$,Y.set("Content-Type","application/octet-stream");else if($ instanceof Blob)X=$,Y.set("Content-Type",$.type||"application/octet-stream");else if($ instanceof FormData)X=$;else if($ instanceof URLSearchParams)X=$,Y.set("Content-Type","application/x-www-form-urlencoded");else if($ instanceof ReadableStream)X=$,Y.set("Content-Type","application/octet-stream");else if($i($))X=Ji($),Y.set("Content-Type","application/json");return new Response(X,{...J,headers:Y})}async function Xi($,J={}){let W={body:J.body,query:J.query};if($.body){let X=await $.body["~standard"].validate(J.body);if(X.issues)return{data:null,error:mv(X.issues,"body")};W.body=X.value}if($.query){let X=await $.query["~standard"].validate(J.query);if(X.issues)return{data:null,error:mv(X.issues,"query")};W.query=X.value}if($.requireHeaders&&!J.headers)return{data:null,error:{message:"Headers is required"}};if($.requireRequest&&!J.request)return{data:null,error:{message:"Request is required"}};return{data:W,error:null}}function mv($,J){let W=[];for(let X of $){let Y=X.message;W.push(Y)}return{message:`Invalid ${J} parameters`}}var tF={name:"HMAC",hash:"SHA-256"},XC=async($)=>{let J=typeof $==="string"?new TextEncoder().encode($):$;return await n8().importKey("raw",J,tF,!1,["sign","verify"])},Yi=async($,J,W)=>{try{let X=atob($),Y=new Uint8Array(X.length);for(let U=0,Z=X.length;U<Z;U++)Y[U]=X.charCodeAt(U);return await n8().verify(tF,W,Y,new TextEncoder().encode(J))}catch(X){return!1}},Ui=async($,J)=>{let W=await XC(J),X=await n8().sign(tF.name,W,new TextEncoder().encode($));return btoa(String.fromCharCode(...new Uint8Array(X)))},Zi=async($,J)=>{let W=await Ui($,J);return $=`${$}.${W}`,$=encodeURIComponent($),$},yv=($,J)=>{let W=$;if(J)if(J==="secure")W="__Secure-"+$;else if(J==="host")W="__Host-"+$;else return;return W};function Hi($){if(typeof $!=="string")throw TypeError("argument str must be a string");let J=new Map,W=0;while(W<$.length){let X=$.indexOf("=",W);if(X===-1)break;let Y=$.indexOf(";",W);if(Y===-1)Y=$.length;else if(Y<X){W=$.lastIndexOf(";",X-1)+1;continue}let U=$.slice(W,X).trim();if(!J.has(U)){let Z=$.slice(X+1,Y).trim();if(Z.codePointAt(0)===34)Z=Z.slice(1,-1);J.set(U,en(Z))}W=Y+1}return J}var YC=($,J,W={})=>{let X;if(W?.prefix==="secure")X=`${`__Secure-${$}`}=${J}`;else if(W?.prefix==="host")X=`${`__Host-${$}`}=${J}`;else X=`${$}=${J}`;if($.startsWith("__Secure-")&&!W.secure)W.secure=!0;if($.startsWith("__Host-")){if(!W.secure)W.secure=!0;if(W.path!=="/")W.path="/";if(W.domain)W.domain=void 0}if(W&&typeof W.maxAge==="number"&&W.maxAge>=0){if(W.maxAge>34560000)throw Error("Cookies Max-Age SHOULD NOT be greater than 400 days (34560000 seconds) in duration.");X+=`; Max-Age=${Math.floor(W.maxAge)}`}if(W.domain&&W.prefix!=="host")X+=`; Domain=${W.domain}`;if(W.path)X+=`; Path=${W.path}`;if(W.expires){if(W.expires.getTime()-Date.now()>34560000000)throw Error("Cookies Expires SHOULD NOT be greater than 400 days (34560000 seconds) in the future.");X+=`; Expires=${W.expires.toUTCString()}`}if(W.httpOnly)X+="; HttpOnly";if(W.secure)X+="; Secure";if(W.sameSite)X+=`; SameSite=${W.sameSite.charAt(0).toUpperCase()+W.sameSite.slice(1)}`;if(W.partitioned){if(!W.secure)W.secure=!0;X+="; Partitioned"}return X},Gi=($,J,W)=>{return J=encodeURIComponent(J),YC($,J,W)},zi=async($,J,W,X)=>{return J=await Zi(J,W),YC($,J,X)},UC=async($,{options:J,path:W})=>{let X=new Headers,{data:Y,error:U}=await Xi(J,$);if(U)throw new p(400,{message:U.message,code:"VALIDATION_ERROR"});let Z="headers"in $?$.headers instanceof Headers?$.headers:new Headers($.headers):("request"in $)&&$.request instanceof Request?$.request.headers:null,H=Z?.get("cookie"),G=H?Hi(H):void 0,z={...$,body:Y.body,query:Y.query,path:$.path||W,context:"context"in $&&$.context?$.context:{},returned:void 0,headers:$?.headers,request:$?.request,params:"params"in $?$.params:void 0,method:$.method,setHeader:(w,D)=>{X.set(w,D)},getHeader:(w)=>{if(!Z)return null;return Z.get(w)},getCookie:(w,D)=>{let K=yv(w,D);if(!K)return null;return G?.get(K)||null},getSignedCookie:async(w,D,K)=>{let O=yv(w,K);if(!O)return null;let F=G?.get(O);if(!F)return null;let M=F.lastIndexOf(".");if(M<1)return null;let A=F.substring(0,M),I=F.substring(M+1);if(I.length!==44||!I.endsWith("="))return null;let P=await XC(D);return await Yi(I,A,P)?A:!1},setCookie:(w,D,K)=>{let O=Gi(w,D,K);return X.append("set-cookie",O),O},setSignedCookie:async(w,D,K,O)=>{let F=await zi(w,D,K,O);return X.append("set-cookie",F),F},redirect:(w)=>{return X.set("location",w),new p("FOUND",void 0,X)},error:(w,D,K)=>{return new p(w,D,K)},json:(w,D)=>{if(!$.asResponse)return w;return{body:D?.body||w,routerResponse:D,_flag:"json"}},responseHeaders:X};for(let w of J.use||[]){let D=await w({...z,returnHeaders:!0,asResponse:!1});if(D.response)Object.assign(z.context,D.response);if(D.headers)D.headers.forEach((K,O)=>{z.responseHeaders.set(O,K)})}return z};function V7($,J){let W=async(X)=>{let Y=X,U=typeof $==="function"?$:J,H=await UC(Y,{options:typeof $==="function"?{}:$,path:"/"});if(!U)throw Error("handler must be defined");let G=await U(H),z=H.responseHeaders;return Y.returnHeaders?{headers:z,response:G}:G};return W.options=typeof $==="function"?{}:$,W}V7.create=($)=>{function J(W,X){if(typeof W==="function")return V7({use:$?.use},W);if(!X)throw Error("Middleware handler is required");return V7({...W,method:"*",use:[...$?.use||[],...W.use||[]]},X)}return J};var a2=($,J,W)=>{let X=async(...Y)=>{let U=Y[0]||{},Z=await UC(U,{options:J,path:$}),H=await W(Z).catch(async(z)=>{if(W3(z)){let w=J.onAPIError;if(w)await w(z);if(U.asResponse)return z}throw z}),G=Z.responseHeaders;return U.asResponse?q9(H,{headers:G}):U.returnHeaders?{headers:G,response:H}:H};return X.options=J,X.path=$,X};a2.create=($)=>{return(J,W,X)=>{return a2(J,{...W,use:[...W?.use||[],...$?.use||[]]},X)}};var SM0=Object.freeze({status:"aborted"});function k0($,J,W){function X(H,G){var z;Object.defineProperty(H,"_zod",{value:H._zod??{},enumerable:!1}),(z=H._zod).traits??(z.traits=new Set),H._zod.traits.add($),J(H,G);for(let w in Z.prototype)if(!(w in H))Object.defineProperty(H,w,{value:Z.prototype[w].bind(H)});H._zod.constr=Z,H._zod.def=G}let Y=W?.Parent??Object;class U extends Y{}Object.defineProperty(U,"name",{value:$});function Z(H){var G;let z=W?.Parent?new U:this;X(z,H),(G=z._zod).deferred??(G.deferred=[]);for(let w of z._zod.deferred)w();return z}return Object.defineProperty(Z,"init",{value:X}),Object.defineProperty(Z,Symbol.hasInstance,{value:(H)=>{if(W?.Parent&&H instanceof W.Parent)return!0;return H?._zod?.traits?.has($)}}),Object.defineProperty(Z,"name",{value:$}),Z}var jM0=Symbol("zod_brand"),o2=class extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}},rF={};function Q7($){if($)Object.assign(rF,$);return rF}var y4={};ln(y4,{BIGINT_FORMAT_RANGES:()=>Bi,Class:()=>hi,NUMBER_FORMAT_RANGES:()=>Ni,aborted:()=>UX,allowsEval:()=>GC,assert:()=>Fi,assertEqual:()=>wi,assertIs:()=>Ki,assertNever:()=>Oi,assertNotEqual:()=>Di,assignProp:()=>oF,cached:()=>aF,captureStackTrace:()=>sF,cleanEnum:()=>qi,cleanRegex:()=>H3,clone:()=>x9,createTransparentProxy:()=>_i,defineLazy:()=>c1,esc:()=>YX,escapeRegex:()=>wC,extend:()=>ji,finalizeIssue:()=>h9,floatSafeRemainder:()=>Mi,getElementAtPath:()=>Vi,getEnumValues:()=>ZC,getLengthableOrigin:()=>z3,getParsedType:()=>Li,getSizableOrigin:()=>Ti,isObject:()=>X3,isPlainObject:()=>Y3,issue:()=>OC,joinValues:()=>Ei,jsonStringifyReplacer:()=>HC,merge:()=>ki,normalizeParams:()=>A7,nullish:()=>Z3,numKeys:()=>Ii,omit:()=>Si,optionalKeys:()=>KC,partial:()=>vi,pick:()=>Ri,prefixIssues:()=>G3,primitiveTypes:()=>Pi,promiseAllObject:()=>Qi,propertyKeyTypes:()=>zC,randomString:()=>Ai,required:()=>Ci,stringifyPrimitive:()=>DC,unwrapMessage:()=>i2});function wi($){return $}function Di($){return $}function Ki($){}function Oi($){throw Error()}function Fi($){}function ZC($){let J=Object.values($).filter((X)=>typeof X==="number");return Object.entries($).filter(([X,Y])=>J.indexOf(+X)===-1).map(([X,Y])=>Y)}function Ei($,J="|"){return $.map((W)=>DC(W)).join(J)}function HC($,J){if(typeof J==="bigint")return J.toString();return J}function aF($){return{get value(){{let W=$();return Object.defineProperty(this,"value",{value:W}),W}throw Error("cached value already set")}}}function Z3($){return $===null||$===void 0}function H3($){let J=$.startsWith("^")?1:0,W=$.endsWith("$")?$.length-1:$.length;return $.slice(J,W)}function Mi($,J){let W=($.toString().split(".")[1]||"").length,X=(J.toString().split(".")[1]||"").length,Y=W>X?W:X,U=Number.parseInt($.toFixed(Y).replace(".","")),Z=Number.parseInt(J.toFixed(Y).replace(".",""));return U%Z/10**Y}function c1($,J,W){Object.defineProperty($,J,{get(){{let Y=W();return $[J]=Y,Y}throw Error("cached value already set")},set(Y){Object.defineProperty($,J,{value:Y})},configurable:!0})}function oF($,J,W){Object.defineProperty($,J,{value:W,writable:!0,enumerable:!0,configurable:!0})}function Vi($,J){if(!J)return $;return J.reduce((W,X)=>W?.[X],$)}function Qi($){let J=Object.keys($),W=J.map((X)=>$[X]);return Promise.all(W).then((X)=>{let Y={};for(let U=0;U<J.length;U++)Y[J[U]]=X[U];return Y})}function Ai($=10){let W="";for(let X=0;X<$;X++)W+="abcdefghijklmnopqrstuvwxyz"[Math.floor(Math.random()*26)];return W}function YX($){return JSON.stringify($)}var sF=Error.captureStackTrace?Error.captureStackTrace:(...$)=>{};function X3($){return typeof $==="object"&&$!==null&&!Array.isArray($)}var GC=aF(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch($){return!1}});function Y3($){if(X3($)===!1)return!1;let J=$.constructor;if(J===void 0)return!0;let W=J.prototype;if(X3(W)===!1)return!1;if(Object.prototype.hasOwnProperty.call(W,"isPrototypeOf")===!1)return!1;return!0}function Ii($){let J=0;for(let W in $)if(Object.prototype.hasOwnProperty.call($,W))J++;return J}var Li=($)=>{let J=typeof $;switch(J){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN($)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray($))return"array";if($===null)return"null";if($.then&&typeof $.then==="function"&&$.catch&&typeof $.catch==="function")return"promise";if(typeof Map<"u"&&$ instanceof Map)return"map";if(typeof Set<"u"&&$ instanceof Set)return"set";if(typeof Date<"u"&&$ instanceof Date)return"date";if(typeof File<"u"&&$ instanceof File)return"file";return"object";default:throw Error(`Unknown data type: ${J}`)}},zC=new Set(["string","number","symbol"]),Pi=new Set(["string","number","bigint","boolean","symbol","undefined"]);function wC($){return $.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function x9($,J,W){let X=new $._zod.constr(J??$._zod.def);if(!J||W?.parent)X._zod.parent=$;return X}function A7($){let J=$;if(!J)return{};if(typeof J==="string")return{error:()=>J};if(J?.message!==void 0){if(J?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");J.error=J.message}if(delete J.message,typeof J.error==="string")return{...J,error:()=>J.error};return J}function _i($){let J;return new Proxy({},{get(W,X,Y){return J??(J=$()),Reflect.get(J,X,Y)},set(W,X,Y,U){return J??(J=$()),Reflect.set(J,X,Y,U)},has(W,X){return J??(J=$()),Reflect.has(J,X)},deleteProperty(W,X){return J??(J=$()),Reflect.deleteProperty(J,X)},ownKeys(W){return J??(J=$()),Reflect.ownKeys(J)},getOwnPropertyDescriptor(W,X){return J??(J=$()),Reflect.getOwnPropertyDescriptor(J,X)},defineProperty(W,X,Y){return J??(J=$()),Reflect.defineProperty(J,X,Y)}})}function DC($){if(typeof $==="bigint")return $.toString()+"n";if(typeof $==="string")return`"${$}"`;return`${$}`}function KC($){return Object.keys($).filter((J)=>{return $[J]._zod.optin==="optional"&&$[J]._zod.optout==="optional"})}var Ni={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-340282346638528860000000000000000000000,340282346638528860000000000000000000000],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},Bi={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function Ri($,J){let W={},X=$._zod.def;for(let Y in J){if(!(Y in X.shape))throw Error(`Unrecognized key: "${Y}"`);if(!J[Y])continue;W[Y]=X.shape[Y]}return x9($,{...$._zod.def,shape:W,checks:[]})}function Si($,J){let W={...$._zod.def.shape},X=$._zod.def;for(let Y in J){if(!(Y in X.shape))throw Error(`Unrecognized key: "${Y}"`);if(!J[Y])continue;delete W[Y]}return x9($,{...$._zod.def,shape:W,checks:[]})}function ji($,J){if(!Y3(J))throw Error("Invalid input to extend: expected a plain object");let W={...$._zod.def,get shape(){let X={...$._zod.def.shape,...J};return oF(this,"shape",X),X},checks:[]};return x9($,W)}function ki($,J){return x9($,{...$._zod.def,get shape(){let W={...$._zod.def.shape,...J._zod.def.shape};return oF(this,"shape",W),W},catchall:J._zod.def.catchall,checks:[]})}function vi($,J,W){let X=J._zod.def.shape,Y={...X};if(W)for(let U in W){if(!(U in X))throw Error(`Unrecognized key: "${U}"`);if(!W[U])continue;Y[U]=$?new $({type:"optional",innerType:X[U]}):X[U]}else for(let U in X)Y[U]=$?new $({type:"optional",innerType:X[U]}):X[U];return x9(J,{...J._zod.def,shape:Y,checks:[]})}function Ci($,J,W){let X=J._zod.def.shape,Y={...X};if(W)for(let U in W){if(!(U in Y))throw Error(`Unrecognized key: "${U}"`);if(!W[U])continue;Y[U]=new $({type:"nonoptional",innerType:X[U]})}else for(let U in X)Y[U]=new $({type:"nonoptional",innerType:X[U]});return x9(J,{...J._zod.def,shape:Y,checks:[]})}function UX($,J=0){for(let W=J;W<$.issues.length;W++)if($.issues[W]?.continue!==!0)return!0;return!1}function G3($,J){return J.map((W)=>{var X;return(X=W).path??(X.path=[]),W.path.unshift($),W})}function i2($){return typeof $==="string"?$:$?.message}function h9($,J,W){let X={...$,path:$.path??[]};if(!$.message){let Y=i2($.inst?._zod.def?.error?.($))??i2(J?.error?.($))??i2(W.customError?.($))??i2(W.localeError?.($))??"Invalid input";X.message=Y}if(delete X.inst,delete X.continue,!J?.reportInput)delete X.input;return X}function Ti($){if($ instanceof Set)return"set";if($ instanceof Map)return"map";if($ instanceof File)return"file";return"unknown"}function z3($){if(Array.isArray($))return"array";if(typeof $==="string")return"string";return"unknown"}function OC(...$){let[J,W,X]=$;if(typeof J==="string")return{message:J,code:"custom",input:W,inst:X};return{...J}}function qi($){return Object.entries($).filter(([J,W])=>{return Number.isNaN(Number.parseInt(J,10))}).map((J)=>J[1])}var hi=class{constructor(...$){}},FC=($,J)=>{$.name="$ZodError",Object.defineProperty($,"_zod",{value:$._zod,enumerable:!1}),Object.defineProperty($,"issues",{value:J,enumerable:!1}),Object.defineProperty($,"message",{get(){return JSON.stringify(J,HC,2)},enumerable:!0}),Object.defineProperty($,"toString",{value:()=>$.message,enumerable:!1})},EC=k0("$ZodError",FC),MC=k0("$ZodError",FC,{Parent:Error});function xi($,J=(W)=>W.message){let W={},X=[];for(let Y of $.issues)if(Y.path.length>0)W[Y.path[0]]=W[Y.path[0]]||[],W[Y.path[0]].push(J(Y));else X.push(J(Y));return{formErrors:X,fieldErrors:W}}function bi($,J){let W=J||function(U){return U.message},X={_errors:[]},Y=(U)=>{for(let Z of U.issues)if(Z.code==="invalid_union"&&Z.errors.length)Z.errors.map((H)=>Y({issues:H}));else if(Z.code==="invalid_key")Y({issues:Z.issues});else if(Z.code==="invalid_element")Y({issues:Z.issues});else if(Z.path.length===0)X._errors.push(W(Z));else{let H=X,G=0;while(G<Z.path.length){let z=Z.path[G];if(G!==Z.path.length-1)H[z]=H[z]||{_errors:[]};else H[z]=H[z]||{_errors:[]},H[z]._errors.push(W(Z));H=H[z],G++}}};return Y($),X}var gi=($)=>(J,W,X,Y)=>{let U=X?Object.assign(X,{async:!1}):{async:!1},Z=J._zod.run({value:W,issues:[]},U);if(Z instanceof Promise)throw new o2;if(Z.issues.length){let H=new(Y?.Err??$)(Z.issues.map((G)=>h9(G,U,Q7())));throw sF(H,Y?.callee),H}return Z.value},fi=($)=>async(J,W,X,Y)=>{let U=X?Object.assign(X,{async:!0}):{async:!0},Z=J._zod.run({value:W,issues:[]},U);if(Z instanceof Promise)Z=await Z;if(Z.issues.length){let H=new(Y?.Err??$)(Z.issues.map((G)=>h9(G,U,Q7())));throw sF(H,Y?.callee),H}return Z.value},VC=($)=>(J,W,X)=>{let Y=X?{...X,async:!1}:{async:!1},U=J._zod.run({value:W,issues:[]},Y);if(U instanceof Promise)throw new o2;return U.issues.length?{success:!1,error:new($??EC)(U.issues.map((Z)=>h9(Z,Y,Q7())))}:{success:!0,data:U.value}},mi=VC(MC),QC=($)=>async(J,W,X)=>{let Y=X?Object.assign(X,{async:!0}):{async:!0},U=J._zod.run({value:W,issues:[]},Y);if(U instanceof Promise)U=await U;return U.issues.length?{success:!1,error:new $(U.issues.map((Z)=>h9(Z,Y,Q7())))}:{success:!0,data:U.value}},yi=QC(MC),ZX=k0("$ZodCheck",($,J)=>{var W;$._zod??($._zod={}),$._zod.def=J,(W=$._zod).onattach??(W.onattach=[])}),ci=k0("$ZodCheckMaxLength",($,J)=>{var W;ZX.init($,J),(W=$._zod.def).when??(W.when=(X)=>{let Y=X.value;return!Z3(Y)&&Y.length!==void 0}),$._zod.onattach.push((X)=>{let Y=X._zod.bag.maximum??Number.POSITIVE_INFINITY;if(J.maximum<Y)X._zod.bag.maximum=J.maximum}),$._zod.check=(X)=>{let Y=X.value;if(Y.length<=J.maximum)return;let Z=z3(Y);X.issues.push({origin:Z,code:"too_big",maximum:J.maximum,inclusive:!0,input:Y,inst:$,continue:!J.abort})}}),ui=k0("$ZodCheckMinLength",($,J)=>{var W;ZX.init($,J),(W=$._zod.def).when??(W.when=(X)=>{let Y=X.value;return!Z3(Y)&&Y.length!==void 0}),$._zod.onattach.push((X)=>{let Y=X._zod.bag.minimum??Number.NEGATIVE_INFINITY;if(J.minimum>Y)X._zod.bag.minimum=J.minimum}),$._zod.check=(X)=>{let Y=X.value;if(Y.length>=J.minimum)return;let Z=z3(Y);X.issues.push({origin:Z,code:"too_small",minimum:J.minimum,inclusive:!0,input:Y,inst:$,continue:!J.abort})}}),pi=k0("$ZodCheckLengthEquals",($,J)=>{var W;ZX.init($,J),(W=$._zod.def).when??(W.when=(X)=>{let Y=X.value;return!Z3(Y)&&Y.length!==void 0}),$._zod.onattach.push((X)=>{let Y=X._zod.bag;Y.minimum=J.length,Y.maximum=J.length,Y.length=J.length}),$._zod.check=(X)=>{let Y=X.value,U=Y.length;if(U===J.length)return;let Z=z3(Y),H=U>J.length;X.issues.push({origin:Z,...H?{code:"too_big",maximum:J.length}:{code:"too_small",minimum:J.length},inclusive:!0,exact:!0,input:X.value,inst:$,continue:!J.abort})}}),di=k0("$ZodCheckOverwrite",($,J)=>{ZX.init($,J),$._zod.check=(W)=>{W.value=J.tx(W.value)}}),li=class{constructor($=[]){if(this.content=[],this.indent=0,this)this.args=$}indented($){this.indent+=1,$(this),this.indent-=1}write($){if(typeof $==="function"){$(this,{execution:"sync"}),$(this,{execution:"async"});return}let W=$.split(`
`).filter((U)=>U),X=Math.min(...W.map((U)=>U.length-U.trimStart().length)),Y=W.map((U)=>U.slice(X)).map((U)=>" ".repeat(this.indent*2)+U);for(let U of Y)this.content.push(U)}compile(){let $=Function,J=this?.args,X=[...(this?.content??[""]).map((Y)=>`  ${Y}`)];return new $(...J,X.join(`
`))}},ri={major:4,minor:0,patch:0},P4=k0("$ZodType",($,J)=>{var W;$??($={}),$._zod.def=J,$._zod.bag=$._zod.bag||{},$._zod.version=ri;let X=[...$._zod.def.checks??[]];if($._zod.traits.has("$ZodCheck"))X.unshift($);for(let Y of X)for(let U of Y._zod.onattach)U($);if(X.length===0)(W=$._zod).deferred??(W.deferred=[]),$._zod.deferred?.push(()=>{$._zod.run=$._zod.parse});else{let Y=(U,Z,H)=>{let G=UX(U),z;for(let w of Z){if(w._zod.def.when){if(!w._zod.def.when(U))continue}else if(G)continue;let D=U.issues.length,K=w._zod.check(U);if(K instanceof Promise&&H?.async===!1)throw new o2;if(z||K instanceof Promise)z=(z??Promise.resolve()).then(async()=>{if(await K,U.issues.length===D)return;if(!G)G=UX(U,D)});else{if(U.issues.length===D)continue;if(!G)G=UX(U,D)}}if(z)return z.then(()=>{return U});return U};$._zod.run=(U,Z)=>{let H=$._zod.parse(U,Z);if(H instanceof Promise){if(Z.async===!1)throw new o2;return H.then((G)=>Y(G,X,Z))}return Y(H,X,Z)}}$["~standard"]={validate:(Y)=>{try{let U=mi($,Y);return U.success?{value:U.data}:{issues:U.error?.issues}}catch(U){return yi($,Y).then((Z)=>Z.success?{value:Z.data}:{issues:Z.error?.issues})}},vendor:"zod",version:1}}),ni=k0("$ZodUnknown",($,J)=>{P4.init($,J),$._zod.parse=(W)=>W}),ii=k0("$ZodNever",($,J)=>{P4.init($,J),$._zod.parse=(W,X)=>{return W.issues.push({expected:"never",code:"invalid_type",input:W.value,inst:$}),W}});function cv($,J,W){if($.issues.length)J.issues.push(...G3(W,$.issues));J.value[W]=$.value}var ti=k0("$ZodArray",($,J)=>{P4.init($,J),$._zod.parse=(W,X)=>{let Y=W.value;if(!Array.isArray(Y))return W.issues.push({expected:"array",code:"invalid_type",input:Y,inst:$}),W;W.value=Array(Y.length);let U=[];for(let Z=0;Z<Y.length;Z++){let H=Y[Z],G=J.element._zod.run({value:H,issues:[]},X);if(G instanceof Promise)U.push(G.then((z)=>cv(z,W,Z)));else cv(G,W,Z)}if(U.length)return Promise.all(U).then(()=>W);return W}});function $3($,J,W){if($.issues.length)J.issues.push(...G3(W,$.issues));J.value[W]=$.value}function uv($,J,W,X){if($.issues.length)if(X[W]===void 0)if(W in X)J.value[W]=void 0;else J.value[W]=$.value;else J.issues.push(...G3(W,$.issues));else if($.value===void 0){if(W in X)J.value[W]=void 0}else J.value[W]=$.value}var ai=k0("$ZodObject",($,J)=>{P4.init($,J);let W=aF(()=>{let D=Object.keys(J.shape);for(let O of D)if(!(J.shape[O]instanceof P4))throw Error(`Invalid element at key "${O}": expected a Zod schema`);let K=KC(J.shape);return{shape:J.shape,keys:D,keySet:new Set(D),numKeys:D.length,optionalKeys:new Set(K)}});c1($._zod,"propValues",()=>{let D=J.shape,K={};for(let O in D){let F=D[O]._zod;if(F.values){K[O]??(K[O]=new Set);for(let M of F.values)K[O].add(M)}}return K});let X=(D)=>{let K=new li(["shape","payload","ctx"]),O=W.value,F=(P)=>{let Q=YX(P);return`shape[${Q}]._zod.run({ value: input[${Q}], issues: [] }, ctx)`};K.write("const input = payload.value;");let M=Object.create(null),A=0;for(let P of O.keys)M[P]=`key_${A++}`;K.write("const newResult = {}");for(let P of O.keys)if(O.optionalKeys.has(P)){let Q=M[P];K.write(`const ${Q} = ${F(P)};`);let N=YX(P);K.write(`
        if (${Q}.issues.length) {
          if (input[${N}] === undefined) {
            if (${N} in input) {
              newResult[${N}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${Q}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${N}, ...iss.path] : [${N}],
              }))
            );
          }
        } else if (${Q}.value === undefined) {
          if (${N} in input) newResult[${N}] = undefined;
        } else {
          newResult[${N}] = ${Q}.value;
        }
        `)}else{let Q=M[P];K.write(`const ${Q} = ${F(P)};`),K.write(`
          if (${Q}.issues.length) payload.issues = payload.issues.concat(${Q}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${YX(P)}, ...iss.path] : [${YX(P)}]
          })));`),K.write(`newResult[${YX(P)}] = ${Q}.value`)}K.write("payload.value = newResult;"),K.write("return payload;");let I=K.compile();return(P,Q)=>I(D,P,Q)},Y,U=X3,Z=!rF.jitless,G=Z&&GC.value,z=J.catchall,w;$._zod.parse=(D,K)=>{w??(w=W.value);let O=D.value;if(!U(O))return D.issues.push({expected:"object",code:"invalid_type",input:O,inst:$}),D;let F=[];if(Z&&G&&K?.async===!1&&K.jitless!==!0){if(!Y)Y=X(J.shape);D=Y(D,K)}else{D.value={};let Q=w.shape;for(let N of w.keys){let _=Q[N],L=_._zod.run({value:O[N],issues:[]},K),R=_._zod.optin==="optional"&&_._zod.optout==="optional";if(L instanceof Promise)F.push(L.then((S)=>R?uv(S,D,N,O):$3(S,D,N)));else if(R)uv(L,D,N,O);else $3(L,D,N)}}if(!z)return F.length?Promise.all(F).then(()=>D):D;let M=[],A=w.keySet,I=z._zod,P=I.def.type;for(let Q of Object.keys(O)){if(A.has(Q))continue;if(P==="never"){M.push(Q);continue}let N=I.run({value:O[Q],issues:[]},K);if(N instanceof Promise)F.push(N.then((_)=>$3(_,D,Q)));else $3(N,D,Q)}if(M.length)D.issues.push({code:"unrecognized_keys",keys:M,input:O,inst:$});if(!F.length)return D;return Promise.all(F).then(()=>{return D})}});function pv($,J,W,X){for(let Y of $)if(Y.issues.length===0)return J.value=Y.value,J;return J.issues.push({code:"invalid_union",input:J.value,inst:W,errors:$.map((Y)=>Y.issues.map((U)=>h9(U,X,Q7())))}),J}var oi=k0("$ZodUnion",($,J)=>{P4.init($,J),c1($._zod,"optin",()=>J.options.some((W)=>W._zod.optin==="optional")?"optional":void 0),c1($._zod,"optout",()=>J.options.some((W)=>W._zod.optout==="optional")?"optional":void 0),c1($._zod,"values",()=>{if(J.options.every((W)=>W._zod.values))return new Set(J.options.flatMap((W)=>Array.from(W._zod.values)));return}),c1($._zod,"pattern",()=>{if(J.options.every((W)=>W._zod.pattern)){let W=J.options.map((X)=>X._zod.pattern);return new RegExp(`^(${W.map((X)=>H3(X.source)).join("|")})$`)}return}),$._zod.parse=(W,X)=>{let Y=!1,U=[];for(let Z of J.options){let H=Z._zod.run({value:W.value,issues:[]},X);if(H instanceof Promise)U.push(H),Y=!0;else{if(H.issues.length===0)return H;U.push(H)}}if(!Y)return pv(U,W,$,X);return Promise.all(U).then((Z)=>{return pv(Z,W,$,X)})}}),si=k0("$ZodIntersection",($,J)=>{P4.init($,J),$._zod.parse=(W,X)=>{let Y=W.value,U=J.left._zod.run({value:Y,issues:[]},X),Z=J.right._zod.run({value:Y,issues:[]},X);if(U instanceof Promise||Z instanceof Promise)return Promise.all([U,Z]).then(([G,z])=>{return dv(W,G,z)});return dv(W,U,Z)}});function nF($,J){if($===J)return{valid:!0,data:$};if($ instanceof Date&&J instanceof Date&&+$===+J)return{valid:!0,data:$};if(Y3($)&&Y3(J)){let W=Object.keys(J),X=Object.keys($).filter((U)=>W.indexOf(U)!==-1),Y={...$,...J};for(let U of X){let Z=nF($[U],J[U]);if(!Z.valid)return{valid:!1,mergeErrorPath:[U,...Z.mergeErrorPath]};Y[U]=Z.data}return{valid:!0,data:Y}}if(Array.isArray($)&&Array.isArray(J)){if($.length!==J.length)return{valid:!1,mergeErrorPath:[]};let W=[];for(let X=0;X<$.length;X++){let Y=$[X],U=J[X],Z=nF(Y,U);if(!Z.valid)return{valid:!1,mergeErrorPath:[X,...Z.mergeErrorPath]};W.push(Z.data)}return{valid:!0,data:W}}return{valid:!1,mergeErrorPath:[]}}function dv($,J,W){if(J.issues.length)$.issues.push(...J.issues);if(W.issues.length)$.issues.push(...W.issues);if(UX($))return $;let X=nF(J.value,W.value);if(!X.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(X.mergeErrorPath)}`);return $.value=X.data,$}var ei=k0("$ZodEnum",($,J)=>{P4.init($,J);let W=ZC(J.entries);$._zod.values=new Set(W),$._zod.pattern=new RegExp(`^(${W.filter((X)=>zC.has(typeof X)).map((X)=>typeof X==="string"?wC(X):X.toString()).join("|")})$`),$._zod.parse=(X,Y)=>{let U=X.value;if($._zod.values.has(U))return X;return X.issues.push({code:"invalid_value",values:W,input:U,inst:$}),X}}),$t=k0("$ZodTransform",($,J)=>{P4.init($,J),$._zod.parse=(W,X)=>{let Y=J.transform(W.value,W);if(X.async)return(Y instanceof Promise?Y:Promise.resolve(Y)).then((Z)=>{return W.value=Z,W});if(Y instanceof Promise)throw new o2;return W.value=Y,W}}),Jt=k0("$ZodOptional",($,J)=>{P4.init($,J),$._zod.optin="optional",$._zod.optout="optional",c1($._zod,"values",()=>{return J.innerType._zod.values?new Set([...J.innerType._zod.values,void 0]):void 0}),c1($._zod,"pattern",()=>{let W=J.innerType._zod.pattern;return W?new RegExp(`^(${H3(W.source)})?$`):void 0}),$._zod.parse=(W,X)=>{if(J.innerType._zod.optin==="optional")return J.innerType._zod.run(W,X);if(W.value===void 0)return W;return J.innerType._zod.run(W,X)}}),Wt=k0("$ZodNullable",($,J)=>{P4.init($,J),c1($._zod,"optin",()=>J.innerType._zod.optin),c1($._zod,"optout",()=>J.innerType._zod.optout),c1($._zod,"pattern",()=>{let W=J.innerType._zod.pattern;return W?new RegExp(`^(${H3(W.source)}|null)$`):void 0}),c1($._zod,"values",()=>{return J.innerType._zod.values?new Set([...J.innerType._zod.values,null]):void 0}),$._zod.parse=(W,X)=>{if(W.value===null)return W;return J.innerType._zod.run(W,X)}}),Xt=k0("$ZodDefault",($,J)=>{P4.init($,J),$._zod.optin="optional",c1($._zod,"values",()=>J.innerType._zod.values),$._zod.parse=(W,X)=>{if(W.value===void 0)return W.value=J.defaultValue,W;let Y=J.innerType._zod.run(W,X);if(Y instanceof Promise)return Y.then((U)=>lv(U,J));return lv(Y,J)}});function lv($,J){if($.value===void 0)$.value=J.defaultValue;return $}var Yt=k0("$ZodPrefault",($,J)=>{P4.init($,J),$._zod.optin="optional",c1($._zod,"values",()=>J.innerType._zod.values),$._zod.parse=(W,X)=>{if(W.value===void 0)W.value=J.defaultValue;return J.innerType._zod.run(W,X)}}),Ut=k0("$ZodNonOptional",($,J)=>{P4.init($,J),c1($._zod,"values",()=>{let W=J.innerType._zod.values;return W?new Set([...W].filter((X)=>X!==void 0)):void 0}),$._zod.parse=(W,X)=>{let Y=J.innerType._zod.run(W,X);if(Y instanceof Promise)return Y.then((U)=>rv(U,$));return rv(Y,$)}});function rv($,J){if(!$.issues.length&&$.value===void 0)$.issues.push({code:"invalid_type",expected:"nonoptional",input:$.value,inst:J});return $}var Zt=k0("$ZodCatch",($,J)=>{P4.init($,J),$._zod.optin="optional",c1($._zod,"optout",()=>J.innerType._zod.optout),c1($._zod,"values",()=>J.innerType._zod.values),$._zod.parse=(W,X)=>{let Y=J.innerType._zod.run(W,X);if(Y instanceof Promise)return Y.then((U)=>{if(W.value=U.value,U.issues.length)W.value=J.catchValue({...W,error:{issues:U.issues.map((Z)=>h9(Z,X,Q7()))},input:W.value}),W.issues=[];return W});if(W.value=Y.value,Y.issues.length)W.value=J.catchValue({...W,error:{issues:Y.issues.map((U)=>h9(U,X,Q7()))},input:W.value}),W.issues=[];return W}}),Ht=k0("$ZodPipe",($,J)=>{P4.init($,J),c1($._zod,"values",()=>J.in._zod.values),c1($._zod,"optin",()=>J.in._zod.optin),c1($._zod,"optout",()=>J.out._zod.optout),$._zod.parse=(W,X)=>{let Y=J.in._zod.run(W,X);if(Y instanceof Promise)return Y.then((U)=>nv(U,J,X));return nv(Y,J,X)}});function nv($,J,W){if(UX($))return $;return J.out._zod.run({value:$.value,issues:$.issues},W)}var Gt=k0("$ZodReadonly",($,J)=>{P4.init($,J),c1($._zod,"propValues",()=>J.innerType._zod.propValues),c1($._zod,"values",()=>J.innerType._zod.values),c1($._zod,"optin",()=>J.innerType._zod.optin),c1($._zod,"optout",()=>J.innerType._zod.optout),$._zod.parse=(W,X)=>{let Y=J.innerType._zod.run(W,X);if(Y instanceof Promise)return Y.then(iv);return iv(Y)}});function iv($){return $.value=Object.freeze($.value),$}var zt=k0("$ZodCustom",($,J)=>{ZX.init($,J),P4.init($,J),$._zod.parse=(W,X)=>{return W},$._zod.check=(W)=>{let X=W.value,Y=J.fn(X);if(Y instanceof Promise)return Y.then((U)=>tv(U,W,X,$));tv(Y,W,X,$);return}});function tv($,J,W,X){if(!$){let Y={code:"custom",input:W,inst:X,path:[...X._zod.def.path??[]],continue:!X._zod.def.abort};if(X._zod.def.params)Y.params=X._zod.def.params;J.issues.push(OC(Y))}}var kM0=Symbol("ZodOutput"),vM0=Symbol("ZodInput"),wt=class{constructor(){this._map=new Map,this._idmap=new Map}add($,...J){let W=J[0];if(this._map.set($,W),W&&typeof W==="object"&&"id"in W){if(this._idmap.has(W.id))throw Error(`ID ${W.id} already exists in the registry`);this._idmap.set(W.id,$)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove($){let J=this._map.get($);if(J&&typeof J==="object"&&"id"in J)this._idmap.delete(J.id);return this._map.delete($),this}get($){let J=$._zod.parent;if(J){let W={...this.get(J)??{}};return delete W.id,{...W,...this._map.get($)}}return this._map.get($)}has($){return this._map.has($)}};function Dt(){return new wt}var J3=Dt();function Kt($){return new $({type:"unknown"})}function Ot($,J){return new $({type:"never",...A7(J)})}function Ft($,J){return new ci({check:"max_length",...A7(J),maximum:$})}function av($,J){return new ui({check:"min_length",...A7(J),minimum:$})}function Et($,J){return new pi({check:"length_equals",...A7(J),length:$})}function Mt($){return new di({check:"overwrite",tx:$})}function Vt($,J,W){return new $({type:"array",element:J,...A7(W)})}function Qt($,J,W){return new $({type:"custom",check:"custom",fn:J,...A7(W)})}var AC=($,J)=>{EC.init($,J),$.name="ZodError",Object.defineProperties($,{format:{value:(W)=>bi($,W)},flatten:{value:(W)=>xi($,W)},addIssue:{value:(W)=>$.issues.push(W)},addIssues:{value:(W)=>$.issues.push(...W)},isEmpty:{get(){return $.issues.length===0}}})},CM0=k0("ZodError",AC),w3=k0("ZodError",AC,{Parent:Error}),At=gi(w3),It=fi(w3),Lt=VC(w3),Pt=QC(w3),c4=k0("ZodType",($,J)=>{return P4.init($,J),$.def=J,Object.defineProperty($,"_def",{value:J}),$.check=(...W)=>{return $.clone({...J,checks:[...J.checks??[],...W.map((X)=>typeof X==="function"?{_zod:{check:X,def:{check:"custom"},onattach:[]}}:X)]})},$.clone=(W,X)=>x9($,W,X),$.brand=()=>$,$.register=(W,X)=>{return W.add($,X),$},$.parse=(W,X)=>At($,W,X,{callee:$.parse}),$.safeParse=(W,X)=>Lt($,W,X),$.parseAsync=async(W,X)=>It($,W,X,{callee:$.parseAsync}),$.safeParseAsync=async(W,X)=>Pt($,W,X),$.spa=$.safeParseAsync,$.refine=(W,X)=>$.check(it(W,X)),$.superRefine=(W)=>$.check(tt(W)),$.overwrite=(W)=>$.check(Mt(W)),$.optional=()=>sv($),$.nullable=()=>ev($),$.nullish=()=>sv(ev($)),$.nonoptional=(W)=>yt($,W),$.array=()=>St($),$.or=(W)=>kt([$,W]),$.and=(W)=>Ct($,W),$.transform=(W)=>$C($,ht(W)),$.default=(W)=>gt($,W),$.prefault=(W)=>mt($,W),$.catch=(W)=>ut($,W),$.pipe=(W)=>$C($,W),$.readonly=()=>lt($),$.describe=(W)=>{let X=$.clone();return J3.add(X,{description:W}),X},Object.defineProperty($,"description",{get(){return J3.get($)?.description},configurable:!0}),$.meta=(...W)=>{if(W.length===0)return J3.get($);let X=$.clone();return J3.add(X,W[0]),X},$.isOptional=()=>$.safeParse(void 0).success,$.isNullable=()=>$.safeParse(null).success,$}),_t=k0("ZodUnknown",($,J)=>{ni.init($,J),c4.init($,J)});function ov(){return Kt(_t)}var Nt=k0("ZodNever",($,J)=>{ii.init($,J),c4.init($,J)});function Bt($){return Ot(Nt,$)}var Rt=k0("ZodArray",($,J)=>{ti.init($,J),c4.init($,J),$.element=J.element,$.min=(W,X)=>$.check(av(W,X)),$.nonempty=(W)=>$.check(av(1,W)),$.max=(W,X)=>$.check(Ft(W,X)),$.length=(W,X)=>$.check(Et(W,X)),$.unwrap=()=>$.element});function St($,J){return Vt(Rt,$,J)}var U3=k0("ZodObject",($,J)=>{ai.init($,J),c4.init($,J),y4.defineLazy($,"shape",()=>J.shape),$.keyof=()=>Tt(Object.keys($._zod.def.shape)),$.catchall=(W)=>$.clone({...$._zod.def,catchall:W}),$.passthrough=()=>$.clone({...$._zod.def,catchall:ov()}),$.loose=()=>$.clone({...$._zod.def,catchall:ov()}),$.strict=()=>$.clone({...$._zod.def,catchall:Bt()}),$.strip=()=>$.clone({...$._zod.def,catchall:void 0}),$.extend=(W)=>{return y4.extend($,W)},$.merge=(W)=>y4.merge($,W),$.pick=(W)=>y4.pick($,W),$.omit=(W)=>y4.omit($,W),$.partial=(...W)=>y4.partial(t2,$,W[0]),$.required=(...W)=>y4.required(IC,$,W[0])}),jt=k0("ZodUnion",($,J)=>{oi.init($,J),c4.init($,J),$.options=J.options});function kt($,J){return new jt({type:"union",options:$,...y4.normalizeParams(J)})}var vt=k0("ZodIntersection",($,J)=>{si.init($,J),c4.init($,J)});function Ct($,J){return new vt({type:"intersection",left:$,right:J})}var iF=k0("ZodEnum",($,J)=>{ei.init($,J),c4.init($,J),$.enum=J.entries,$.options=Object.values(J.entries);let W=new Set(Object.keys(J.entries));$.extract=(X,Y)=>{let U={};for(let Z of X)if(W.has(Z))U[Z]=J.entries[Z];else throw Error(`Key ${Z} not found in enum`);return new iF({...J,checks:[],...y4.normalizeParams(Y),entries:U})},$.exclude=(X,Y)=>{let U={...J.entries};for(let Z of X)if(W.has(Z))delete U[Z];else throw Error(`Key ${Z} not found in enum`);return new iF({...J,checks:[],...y4.normalizeParams(Y),entries:U})}});function Tt($,J){let W=Array.isArray($)?Object.fromEntries($.map((X)=>[X,X])):$;return new iF({type:"enum",entries:W,...y4.normalizeParams(J)})}var qt=k0("ZodTransform",($,J)=>{$t.init($,J),c4.init($,J),$._zod.parse=(W,X)=>{W.addIssue=(U)=>{if(typeof U==="string")W.issues.push(y4.issue(U,W.value,J));else{let Z=U;if(Z.fatal)Z.continue=!1;Z.code??(Z.code="custom"),Z.input??(Z.input=W.value),Z.inst??(Z.inst=$),Z.continue??(Z.continue=!0),W.issues.push(y4.issue(Z))}};let Y=J.transform(W.value,W);if(Y instanceof Promise)return Y.then((U)=>{return W.value=U,W});return W.value=Y,W}});function ht($){return new qt({type:"transform",transform:$})}var t2=k0("ZodOptional",($,J)=>{Jt.init($,J),c4.init($,J),$.unwrap=()=>$._zod.def.innerType});function sv($){return new t2({type:"optional",innerType:$})}var xt=k0("ZodNullable",($,J)=>{Wt.init($,J),c4.init($,J),$.unwrap=()=>$._zod.def.innerType});function ev($){return new xt({type:"nullable",innerType:$})}var bt=k0("ZodDefault",($,J)=>{Xt.init($,J),c4.init($,J),$.unwrap=()=>$._zod.def.innerType,$.removeDefault=$.unwrap});function gt($,J){return new bt({type:"default",innerType:$,get defaultValue(){return typeof J==="function"?J():J}})}var ft=k0("ZodPrefault",($,J)=>{Yt.init($,J),c4.init($,J),$.unwrap=()=>$._zod.def.innerType});function mt($,J){return new ft({type:"prefault",innerType:$,get defaultValue(){return typeof J==="function"?J():J}})}var IC=k0("ZodNonOptional",($,J)=>{Ut.init($,J),c4.init($,J),$.unwrap=()=>$._zod.def.innerType});function yt($,J){return new IC({type:"nonoptional",innerType:$,...y4.normalizeParams(J)})}var ct=k0("ZodCatch",($,J)=>{Zt.init($,J),c4.init($,J),$.unwrap=()=>$._zod.def.innerType,$.removeCatch=$.unwrap});function ut($,J){return new ct({type:"catch",innerType:$,catchValue:typeof J==="function"?J:()=>J})}var pt=k0("ZodPipe",($,J)=>{Ht.init($,J),c4.init($,J),$.in=J.in,$.out=J.out});function $C($,J){return new pt({type:"pipe",in:$,out:J})}var dt=k0("ZodReadonly",($,J)=>{Gt.init($,J),c4.init($,J)});function lt($){return new dt({type:"readonly",innerType:$})}var rt=k0("ZodCustom",($,J)=>{zt.init($,J),c4.init($,J)});function nt($){let J=new ZX({check:"custom"});return J._zod.check=$,J}function it($,J={}){return Qt(rt,$,J)}function tt($){let J=nt((W)=>{return W.addIssue=(X)=>{if(typeof X==="string")W.issues.push(y4.issue(X,W.value,J._zod.def));else{let Y=X;if(Y.fatal)Y.continue=!1;Y.code??(Y.code="custom"),Y.input??(Y.input=W.value),Y.inst??(Y.inst=J),Y.continue??(Y.continue=!J._zod.def.abort),W.issues.push(y4.issue(Y))}},$(W.value,W)});return J}var lF={};function LC($){switch($.constructor.name){case"ZodString":return"string";case"ZodNumber":return"number";case"ZodBoolean":return"boolean";case"ZodObject":return"object";case"ZodArray":return"array";default:return"string"}}function JC($){let J=[];if($.metadata?.openapi?.parameters)return J.push(...$.metadata.openapi.parameters),J;if($.query instanceof U3)Object.entries($.query.shape).forEach(([W,X])=>{if(X instanceof U3)J.push({name:W,in:"query",schema:{type:LC(X),..."minLength"in X&&X.minLength?{minLength:X.minLength}:{},description:X.description}})});return J}function at($){if($.metadata?.openapi?.requestBody)return $.metadata.openapi.requestBody;if(!$.body)return;if($.body instanceof U3||$.body instanceof t2){let J=$.body.shape;if(!J)return;let W={},X=[];return Object.entries(J).forEach(([Y,U])=>{if(U instanceof U3){if(W[Y]={type:LC(U),description:U.description},!(U instanceof t2))X.push(Y)}}),{required:$.body instanceof t2?!1:$.body?!0:!1,content:{"application/json":{schema:{type:"object",properties:W,required:X}}}}}return}function WC($){return{"400":{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Bad Request. Usually due to missing parameters, or invalid parameters."},"401":{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Unauthorized. Due to missing or invalid authentication."},"403":{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Forbidden. You do not have permission to access this resource or to perform this action."},"404":{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Not Found. The requested resource was not found."},"429":{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Too Many Requests. You have exceeded the rate limit. Try again later."},"500":{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Internal Server Error. This is a problem with the server that you cannot fix."},...$}}async function ot($,J){let W={schemas:{}};return Object.entries($).forEach(([Y,U])=>{let Z=U.options;if(Z.metadata?.SERVER_ONLY)return;if(Z.method==="GET")lF[U.path]={get:{tags:["Default",...Z.metadata?.openapi?.tags||[]],description:Z.metadata?.openapi?.description,operationId:Z.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:JC(Z),responses:WC(Z.metadata?.openapi?.responses)}};if(Z.method==="POST"){let H=at(Z);lF[U.path]={post:{tags:["Default",...Z.metadata?.openapi?.tags||[]],description:Z.metadata?.openapi?.description,operationId:Z.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:JC(Z),...H?{requestBody:H}:{requestBody:{content:{"application/json":{schema:{type:"object",properties:{}}}}}},responses:WC(Z.metadata?.openapi?.responses)}}}}),{openapi:"3.1.1",info:{title:"Better Auth",description:"API Reference for your Better Auth Instance",version:"1.1.0"},components:W,security:[{apiKeyCookie:[]}],servers:[{url:J?.url}],tags:[{name:"Default",description:"Default endpoints that are included with Better Auth by default. These endpoints are not part of any plugin."}],paths:lF}}var st=($,J)=>`<!doctype html>
<html>
  <head>
    <title>Scalar API Reference</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1" />
  </head>
  <body>
    <script
      id="api-reference"
      type="application/json">
    ${JSON.stringify($)}
    </script>
	 <script>
      var configuration = {
	  	favicon: ${J?.logo?`data:image/svg+xml;utf8,${encodeURIComponent(J.logo)}`:void 0} ,
	   	theme: ${J?.theme||"saturn"},
        metaData: {
			title: ${J?.title||"Open API Reference"},
			description: ${J?.description||"Better Call Open API"},
		}
      }
      document.getElementById('api-reference').dataset.configuration =
        JSON.stringify(configuration)
    </script>
	  <script src="https://cdn.jsdelivr.net/npm/@scalar/api-reference"></script>
  </body>
</html>`,PC=($,J)=>{if(!J?.openapi?.disabled){let U={path:"/api/reference",...J?.openapi};$.openapi=a2(U.path,{method:"GET"},async(Z)=>{let H=await ot($);return new Response(st(H,U.scalar),{headers:{"Content-Type":"text/html"}})})}let W=uF(),X=uF();for(let U of Object.values($)){if(!U.options)continue;if(U.options?.metadata?.SERVER_ONLY)continue;let Z=Array.isArray(U.options?.method)?U.options.method:[U.options?.method];for(let H of Z)dF(W,H,U.path,U)}if(J?.routerMiddleware?.length)for(let{path:U,middleware:Z}of J.routerMiddleware)dF(X,"*",U,Z);let Y=async(U)=>{let Z=new URL(U.url),H=J?.basePath?Z.pathname.split(J.basePath).reduce((K,O,F)=>{if(F!==0)if(F>1)K.push(`${J.basePath}${O}`);else K.push(O);return K},[]).join(""):Z.pathname;if(!H?.length)return new Response(null,{status:404,statusText:"Not Found"});let G=gv(W,U.method,H);if(!G?.data)return new Response(null,{status:404,statusText:"Not Found"});let z={};Z.searchParams.forEach((K,O)=>{if(O in z)if(Array.isArray(z[O]))z[O].push(K);else z[O]=[z[O],K];else z[O]=K});let w=G.data,D={path:H,method:U.method,headers:U.headers,params:G.params?JSON.parse(JSON.stringify(G.params)):{},request:U,body:w.options.disableBody?void 0:await sn(w.options.cloneRequest?U.clone():U),query:z,_flag:"router",asResponse:!0,context:J?.routerContext};try{let K=fv(X,"*",H);if(K?.length)for(let{data:F,params:M}of K){let A=await F({...D,params:M,asResponse:!1});if(A instanceof Response)return A}return await w(D)}catch(K){if(J?.onError)try{let O=await J.onError(K);if(O instanceof Response)return q9(O)}catch(O){if(W3(O))return q9(O);throw O}if(J?.throwError)throw K;if(W3(K))return q9(K);return console.error("# SERVER_ERROR: ",K),new Response(null,{status:500,statusText:"Internal Server Error"})}};return{handler:async(U)=>{let Z=await J?.onRequest?.(U);if(Z instanceof Response)return Z;let H=Z instanceof Request?Z:U,G=await Y(H),z=await J?.onResponse?.(G);if(z instanceof Response)return z;return G},endpoints:$}};var cU={};x$(cU,{xid:()=>cs,void:()=>we,uuidv7:()=>qs,uuidv6:()=>Ts,uuidv4:()=>Cs,uuid:()=>vs,util:()=>s,url:()=>hs,uppercase:()=>NU,unknown:()=>AX,union:()=>TA,undefined:()=>ze,ulid:()=>ys,uint64:()=>He,uint32:()=>Ye,tuple:()=>MT,trim:()=>vU,treeifyError:()=>zE,transform:()=>hA,toUpperCase:()=>TU,toLowerCase:()=>CU,toJSONSchema:()=>iQ,templateLiteral:()=>Be,symbol:()=>Ge,superRefine:()=>yT,success:()=>Pe,stringbool:()=>Ce,stringFormat:()=>os,string:()=>a,strictObject:()=>Ke,startsWith:()=>RU,size:()=>LU,setErrorMap:()=>xe,set:()=>Ve,safeParseAsync:()=>WA,safeParse:()=>JA,safeEncodeAsync:()=>zA,safeEncode:()=>HA,safeDecodeAsync:()=>wA,safeDecode:()=>GA,registry:()=>b3,regexes:()=>b6,regex:()=>PU,refine:()=>mT,record:()=>LX,readonly:()=>qT,property:()=>cQ,promise:()=>Re,prettifyError:()=>wE,preprocess:()=>qe,prefault:()=>RT,positive:()=>gQ,pipe:()=>Dz,partialRecord:()=>Ee,parseAsync:()=>$A,parse:()=>eQ,overwrite:()=>v5,optional:()=>u9,object:()=>a0,number:()=>p9,nullish:()=>Le,nullable:()=>wz,null:()=>ZT,normalize:()=>kU,nonpositive:()=>mQ,nonoptional:()=>ST,nonnegative:()=>yQ,never:()=>vA,negative:()=>fQ,nativeEnum:()=>Qe,nanoid:()=>gs,nan:()=>_e,multipleOf:()=>N7,minSize:()=>B7,minLength:()=>c9,mime:()=>jU,maxSize:()=>EX,maxLength:()=>MX,map:()=>Me,lte:()=>g6,lt:()=>j5,lowercase:()=>_U,looseObject:()=>Oe,locales:()=>VU,literal:()=>Ae,length:()=>VX,lazy:()=>bT,ksuid:()=>us,keyof:()=>De,jwt:()=>as,json:()=>Te,iso:()=>Gz,ipv6:()=>ds,ipv4:()=>ps,intersection:()=>FT,int64:()=>Ze,int32:()=>Xe,int:()=>DA,instanceof:()=>ve,includes:()=>BU,httpUrl:()=>xs,hostname:()=>ss,hex:()=>es,hash:()=>$e,guid:()=>ks,gte:()=>f$,gt:()=>k5,globalRegistry:()=>a8,getErrorMap:()=>be,function:()=>Se,formatError:()=>HU,float64:()=>We,float32:()=>Je,flattenError:()=>ZU,file:()=>Ie,enum:()=>yU,endsWith:()=>SU,encodeAsync:()=>UA,encode:()=>XA,emoji:()=>bs,email:()=>R7,e164:()=>ts,discriminatedUnion:()=>Fe,decodeAsync:()=>ZA,decode:()=>YA,date:()=>d9,custom:()=>ke,cuid2:()=>ms,cuid:()=>fs,core:()=>C5,config:()=>F4,coerce:()=>Z8,codec:()=>Ne,clone:()=>Q$,cidrv6:()=>rs,cidrv4:()=>ls,check:()=>je,catch:()=>vT,boolean:()=>f6,bigint:()=>Ue,base64url:()=>is,base64:()=>ns,array:()=>l9,any:()=>mU,_function:()=>Se,_default:()=>NT,_ZodString:()=>KA,ZodXID:()=>AA,ZodVoid:()=>wT,ZodUnknown:()=>GT,ZodUnion:()=>CA,ZodUndefined:()=>YT,ZodUUID:()=>T5,ZodURL:()=>Kz,ZodULID:()=>QA,ZodType:()=>b0,ZodTuple:()=>ET,ZodTransform:()=>LT,ZodTemplateLiteral:()=>hT,ZodSymbol:()=>XT,ZodSuccess:()=>jT,ZodStringFormat:()=>C1,ZodString:()=>hU,ZodSet:()=>QT,ZodRecord:()=>qA,ZodRealError:()=>m$,ZodReadonly:()=>TT,ZodPromise:()=>gT,ZodPrefault:()=>BT,ZodPipe:()=>gA,ZodOptional:()=>xA,ZodObject:()=>Fz,ZodNumberFormat:()=>IX,ZodNumber:()=>bU,ZodNullable:()=>PT,ZodNull:()=>UT,ZodNonOptional:()=>bA,ZodNever:()=>zT,ZodNanoID:()=>EA,ZodNaN:()=>CT,ZodMap:()=>VT,ZodLiteral:()=>AT,ZodLazy:()=>xT,ZodKSUID:()=>IA,ZodJWT:()=>jA,ZodIssueCode:()=>he,ZodIntersection:()=>OT,ZodISOTime:()=>Zz,ZodISODuration:()=>Hz,ZodISODateTime:()=>Yz,ZodISODate:()=>Uz,ZodIPv6:()=>PA,ZodIPv4:()=>LA,ZodGUID:()=>zz,ZodFunction:()=>fT,ZodFirstPartyTypeKind:()=>mA,ZodFile:()=>IT,ZodError:()=>Ss,ZodEnum:()=>qU,ZodEmoji:()=>FA,ZodEmail:()=>OA,ZodE164:()=>SA,ZodDiscriminatedUnion:()=>KT,ZodDefault:()=>_T,ZodDate:()=>Oz,ZodCustomStringFormat:()=>xU,ZodCustom:()=>Ez,ZodCodec:()=>fA,ZodCatch:()=>kT,ZodCUID2:()=>VA,ZodCUID:()=>MA,ZodCIDRv6:()=>NA,ZodCIDRv4:()=>_A,ZodBoolean:()=>gU,ZodBigIntFormat:()=>kA,ZodBigInt:()=>fU,ZodBase64URL:()=>RA,ZodBase64:()=>BA,ZodArray:()=>DT,ZodAny:()=>HT,TimePrecision:()=>zQ,NEVER:()=>eF,$output:()=>UQ,$input:()=>ZQ,$brand:()=>$E});var C5={};x$(C5,{version:()=>ZM,util:()=>s,treeifyError:()=>zE,toJSONSchema:()=>iQ,toDotPath:()=>jC,safeParseAsync:()=>KE,safeParse:()=>DE,safeEncodeAsync:()=>Ca,safeEncode:()=>ka,safeDecodeAsync:()=>Ta,safeDecode:()=>va,registry:()=>b3,regexes:()=>b6,prettifyError:()=>wE,parseAsync:()=>F3,parse:()=>O3,locales:()=>VU,isValidJWT:()=>rC,isValidBase64URL:()=>lC,isValidBase64:()=>SM,globalRegistry:()=>a8,globalConfig:()=>s2,formatError:()=>HU,flattenError:()=>ZU,encodeAsync:()=>Sa,encode:()=>Ba,decodeAsync:()=>ja,decode:()=>Ra,config:()=>F4,clone:()=>Q$,_xid:()=>n3,_void:()=>qQ,_uuidv7:()=>c3,_uuidv6:()=>y3,_uuidv4:()=>m3,_uuid:()=>f3,_url:()=>IU,_uppercase:()=>NU,_unknown:()=>CQ,_union:()=>Ys,_undefined:()=>jQ,_ulid:()=>r3,_uint64:()=>RQ,_uint32:()=>IQ,_tuple:()=>Hs,_trim:()=>vU,_transform:()=>Fs,_toUpperCase:()=>TU,_toLowerCase:()=>CU,_templateLiteral:()=>_s,_symbol:()=>SQ,_superRefine:()=>rQ,_success:()=>As,_stringbool:()=>nQ,_stringFormat:()=>QX,_string:()=>HQ,_startsWith:()=>RU,_size:()=>LU,_set:()=>ws,_safeParseAsync:()=>OX,_safeParse:()=>KX,_safeEncodeAsync:()=>L3,_safeEncode:()=>A3,_safeDecodeAsync:()=>P3,_safeDecode:()=>I3,_regex:()=>PU,_refine:()=>lQ,_record:()=>Gs,_readonly:()=>Ps,_property:()=>cQ,_promise:()=>Bs,_positive:()=>gQ,_pipe:()=>Ls,_parseAsync:()=>DX,_parse:()=>wX,_overwrite:()=>v5,_optional:()=>Es,_number:()=>FQ,_nullable:()=>Ms,_null:()=>kQ,_normalize:()=>kU,_nonpositive:()=>mQ,_nonoptional:()=>Qs,_nonnegative:()=>yQ,_never:()=>TQ,_negative:()=>fQ,_nativeEnum:()=>Ks,_nanoid:()=>p3,_nan:()=>bQ,_multipleOf:()=>N7,_minSize:()=>B7,_minLength:()=>c9,_min:()=>f$,_mime:()=>jU,_maxSize:()=>EX,_maxLength:()=>MX,_max:()=>g6,_map:()=>zs,_lte:()=>g6,_lt:()=>j5,_lowercase:()=>_U,_literal:()=>Os,_length:()=>VX,_lazy:()=>Ns,_ksuid:()=>i3,_jwt:()=>Wz,_isoTime:()=>KQ,_isoDuration:()=>OQ,_isoDateTime:()=>wQ,_isoDate:()=>DQ,_ipv6:()=>a3,_ipv4:()=>t3,_intersection:()=>Zs,_int64:()=>BQ,_int32:()=>AQ,_int:()=>MQ,_includes:()=>BU,_guid:()=>AU,_gte:()=>f$,_gt:()=>k5,_float64:()=>QQ,_float32:()=>VQ,_file:()=>pQ,_enum:()=>Ds,_endsWith:()=>SU,_encodeAsync:()=>V3,_encode:()=>E3,_emoji:()=>u3,_email:()=>g3,_e164:()=>Jz,_discriminatedUnion:()=>Us,_default:()=>Vs,_decodeAsync:()=>Q3,_decode:()=>M3,_date:()=>hQ,_custom:()=>dQ,_cuid2:()=>l3,_cuid:()=>d3,_coercedString:()=>GQ,_coercedNumber:()=>EQ,_coercedDate:()=>xQ,_coercedBoolean:()=>PQ,_coercedBigint:()=>NQ,_cidrv6:()=>s3,_cidrv4:()=>o3,_check:()=>eC,_catch:()=>Is,_boolean:()=>LQ,_bigint:()=>_Q,_base64url:()=>$z,_base64:()=>e3,_array:()=>uQ,_any:()=>vQ,TimePrecision:()=>zQ,NEVER:()=>eF,JSONSchemaGenerator:()=>Xz,JSONSchema:()=>$T,Doc:()=>R3,$output:()=>UQ,$input:()=>ZQ,$constructor:()=>f,$brand:()=>$E,$ZodXID:()=>VM,$ZodVoid:()=>cM,$ZodUnknown:()=>mM,$ZodUnion:()=>h3,$ZodUndefined:()=>bM,$ZodUUID:()=>zM,$ZodURL:()=>DM,$ZodULID:()=>MM,$ZodType:()=>S0,$ZodTuple:()=>x3,$ZodTransform:()=>eM,$ZodTemplateLiteral:()=>wV,$ZodSymbol:()=>xM,$ZodSuccess:()=>UV,$ZodStringFormat:()=>P1,$ZodString:()=>_7,$ZodSet:()=>tM,$ZodRegistry:()=>QU,$ZodRecord:()=>nM,$ZodRealError:()=>g$,$ZodReadonly:()=>zV,$ZodPromise:()=>KV,$ZodPrefault:()=>XV,$ZodPipe:()=>GV,$ZodOptional:()=>$V,$ZodObjectJIT:()=>dM,$ZodObject:()=>tC,$ZodNumberFormat:()=>qM,$ZodNumber:()=>T3,$ZodNullable:()=>JV,$ZodNull:()=>gM,$ZodNonOptional:()=>YV,$ZodNever:()=>yM,$ZodNanoID:()=>OM,$ZodNaN:()=>HV,$ZodMap:()=>iM,$ZodLiteral:()=>oM,$ZodLazy:()=>OV,$ZodKSUID:()=>QM,$ZodJWT:()=>CM,$ZodIntersection:()=>rM,$ZodISOTime:()=>LM,$ZodISODuration:()=>PM,$ZodISODateTime:()=>AM,$ZodISODate:()=>IM,$ZodIPv6:()=>NM,$ZodIPv4:()=>_M,$ZodGUID:()=>GM,$ZodFunction:()=>DV,$ZodFile:()=>sM,$ZodError:()=>UU,$ZodEnum:()=>aM,$ZodEncodeError:()=>I7,$ZodEmoji:()=>KM,$ZodEmail:()=>wM,$ZodE164:()=>vM,$ZodDiscriminatedUnion:()=>lM,$ZodDefault:()=>WV,$ZodDate:()=>uM,$ZodCustomStringFormat:()=>TM,$ZodCustom:()=>FV,$ZodCodec:()=>DU,$ZodCheckUpperCase:()=>eE,$ZodCheckStringFormat:()=>FX,$ZodCheckStartsWith:()=>JM,$ZodCheckSizeEquals:()=>nE,$ZodCheckRegex:()=>oE,$ZodCheckProperty:()=>XM,$ZodCheckOverwrite:()=>UM,$ZodCheckNumberFormat:()=>pE,$ZodCheckMultipleOf:()=>uE,$ZodCheckMinSize:()=>rE,$ZodCheckMinLength:()=>tE,$ZodCheckMimeType:()=>YM,$ZodCheckMaxSize:()=>lE,$ZodCheckMaxLength:()=>iE,$ZodCheckLowerCase:()=>sE,$ZodCheckLessThan:()=>N3,$ZodCheckLengthEquals:()=>aE,$ZodCheckIncludes:()=>$M,$ZodCheckGreaterThan:()=>B3,$ZodCheckEndsWith:()=>WM,$ZodCheckBigIntFormat:()=>dE,$ZodCheck:()=>q1,$ZodCatch:()=>ZV,$ZodCUID2:()=>EM,$ZodCUID:()=>FM,$ZodCIDRv6:()=>RM,$ZodCIDRv4:()=>BM,$ZodBoolean:()=>wU,$ZodBigIntFormat:()=>hM,$ZodBigInt:()=>q3,$ZodBase64URL:()=>kM,$ZodBase64:()=>jM,$ZodAsyncError:()=>i8,$ZodArray:()=>pM,$ZodAny:()=>fM});var eF=Object.freeze({status:"aborted"});function f($,J,W){function X(H,G){var z;Object.defineProperty(H,"_zod",{value:H._zod??{},enumerable:!1}),(z=H._zod).traits??(z.traits=new Set),H._zod.traits.add($),J(H,G);for(let w in Z.prototype)if(!(w in H))Object.defineProperty(H,w,{value:Z.prototype[w].bind(H)});H._zod.constr=Z,H._zod.def=G}let Y=W?.Parent??Object;class U extends Y{}Object.defineProperty(U,"name",{value:$});function Z(H){var G;let z=W?.Parent?new U:this;X(z,H),(G=z._zod).deferred??(G.deferred=[]);for(let w of z._zod.deferred)w();return z}return Object.defineProperty(Z,"init",{value:X}),Object.defineProperty(Z,Symbol.hasInstance,{value:(H)=>{if(W?.Parent&&H instanceof W.Parent)return!0;return H?._zod?.traits?.has($)}}),Object.defineProperty(Z,"name",{value:$}),Z}var $E=Symbol("zod_brand");class i8 extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class I7 extends Error{constructor($){super(`Encountered unidirectional transform during encode: ${$}`);this.name="ZodEncodeError"}}var s2={};function F4($){if($)Object.assign(s2,$);return s2}var s={};x$(s,{unwrapMessage:()=>e2,uint8ArrayToHex:()=>_a,uint8ArrayToBase64url:()=>La,uint8ArrayToBase64:()=>BC,stringifyPrimitive:()=>t,shallowClone:()=>YE,safeExtend:()=>Ea,required:()=>Qa,randomString:()=>Ga,propertyKeyTypes:()=>WU,promiseAllObject:()=>Ha,primitiveTypes:()=>UE,prefixIssues:()=>G6,pick:()=>Ka,partial:()=>Va,optionalKeys:()=>ZE,omit:()=>Oa,objectClone:()=>Ya,numKeys:()=>za,nullish:()=>b9,normalizeParams:()=>o,mergeDefs:()=>f9,merge:()=>Ma,jsonStringifyReplacer:()=>HX,joinValues:()=>c,issue:()=>zX,isPlainObject:()=>m9,isObject:()=>L7,hexToUint8Array:()=>Pa,getSizableOrigin:()=>XU,getParsedType:()=>wa,getLengthableOrigin:()=>YU,getEnumValues:()=>$U,getElementAtPath:()=>Za,floatSafeRemainder:()=>WE,finalizeIssue:()=>z6,extend:()=>Fa,escapeRegex:()=>t8,esc:()=>D3,defineLazy:()=>m0,createTransparentProxy:()=>Da,cloneDef:()=>Ua,clone:()=>Q$,cleanRegex:()=>JU,cleanEnum:()=>Aa,captureStackTrace:()=>K3,cached:()=>GX,base64urlToUint8Array:()=>Ia,base64ToUint8Array:()=>NC,assignProp:()=>g9,assertNotEqual:()=>$a,assertNever:()=>Wa,assertIs:()=>Ja,assertEqual:()=>et,assert:()=>Xa,allowsEval:()=>XE,aborted:()=>y9,NUMBER_FORMAT_RANGES:()=>HE,Class:()=>RC,BIGINT_FORMAT_RANGES:()=>GE});function et($){return $}function $a($){return $}function Ja($){}function Wa($){throw Error()}function Xa($){}function $U($){let J=Object.values($).filter((X)=>typeof X==="number");return Object.entries($).filter(([X,Y])=>J.indexOf(+X)===-1).map(([X,Y])=>Y)}function c($,J="|"){return $.map((W)=>t(W)).join(J)}function HX($,J){if(typeof J==="bigint")return J.toString();return J}function GX($){return{get value(){{let W=$();return Object.defineProperty(this,"value",{value:W}),W}throw Error("cached value already set")}}}function b9($){return $===null||$===void 0}function JU($){let J=$.startsWith("^")?1:0,W=$.endsWith("$")?$.length-1:$.length;return $.slice(J,W)}function WE($,J){let W=($.toString().split(".")[1]||"").length,X=J.toString(),Y=(X.split(".")[1]||"").length;if(Y===0&&/\d?e-\d?/.test(X)){let G=X.match(/\d?e-(\d?)/);if(G?.[1])Y=Number.parseInt(G[1])}let U=W>Y?W:Y,Z=Number.parseInt($.toFixed(U).replace(".","")),H=Number.parseInt(J.toFixed(U).replace(".",""));return Z%H/10**U}var _C=Symbol("evaluating");function m0($,J,W){let X=void 0;Object.defineProperty($,J,{get(){if(X===_C)return;if(X===void 0)X=_C,X=W();return X},set(Y){Object.defineProperty($,J,{value:Y})},configurable:!0})}function Ya($){return Object.create(Object.getPrototypeOf($),Object.getOwnPropertyDescriptors($))}function g9($,J,W){Object.defineProperty($,J,{value:W,writable:!0,enumerable:!0,configurable:!0})}function f9(...$){let J={};for(let W of $){let X=Object.getOwnPropertyDescriptors(W);Object.assign(J,X)}return Object.defineProperties({},J)}function Ua($){return f9($._zod.def)}function Za($,J){if(!J)return $;return J.reduce((W,X)=>W?.[X],$)}function Ha($){let J=Object.keys($),W=J.map((X)=>$[X]);return Promise.all(W).then((X)=>{let Y={};for(let U=0;U<J.length;U++)Y[J[U]]=X[U];return Y})}function Ga($=10){let W="";for(let X=0;X<$;X++)W+="abcdefghijklmnopqrstuvwxyz"[Math.floor(Math.random()*26)];return W}function D3($){return JSON.stringify($)}var K3="captureStackTrace"in Error?Error.captureStackTrace:(...$)=>{};function L7($){return typeof $==="object"&&$!==null&&!Array.isArray($)}var XE=GX(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch($){return!1}});function m9($){if(L7($)===!1)return!1;let J=$.constructor;if(J===void 0)return!0;let W=J.prototype;if(L7(W)===!1)return!1;if(Object.prototype.hasOwnProperty.call(W,"isPrototypeOf")===!1)return!1;return!0}function YE($){if(m9($))return{...$};if(Array.isArray($))return[...$];return $}function za($){let J=0;for(let W in $)if(Object.prototype.hasOwnProperty.call($,W))J++;return J}var wa=($)=>{let J=typeof $;switch(J){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN($)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray($))return"array";if($===null)return"null";if($.then&&typeof $.then==="function"&&$.catch&&typeof $.catch==="function")return"promise";if(typeof Map<"u"&&$ instanceof Map)return"map";if(typeof Set<"u"&&$ instanceof Set)return"set";if(typeof Date<"u"&&$ instanceof Date)return"date";if(typeof File<"u"&&$ instanceof File)return"file";return"object";default:throw Error(`Unknown data type: ${J}`)}},WU=new Set(["string","number","symbol"]),UE=new Set(["string","number","bigint","boolean","symbol","undefined"]);function t8($){return $.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Q$($,J,W){let X=new $._zod.constr(J??$._zod.def);if(!J||W?.parent)X._zod.parent=$;return X}function o($){let J=$;if(!J)return{};if(typeof J==="string")return{error:()=>J};if(J?.message!==void 0){if(J?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");J.error=J.message}if(delete J.message,typeof J.error==="string")return{...J,error:()=>J.error};return J}function Da($){let J;return new Proxy({},{get(W,X,Y){return J??(J=$()),Reflect.get(J,X,Y)},set(W,X,Y,U){return J??(J=$()),Reflect.set(J,X,Y,U)},has(W,X){return J??(J=$()),Reflect.has(J,X)},deleteProperty(W,X){return J??(J=$()),Reflect.deleteProperty(J,X)},ownKeys(W){return J??(J=$()),Reflect.ownKeys(J)},getOwnPropertyDescriptor(W,X){return J??(J=$()),Reflect.getOwnPropertyDescriptor(J,X)},defineProperty(W,X,Y){return J??(J=$()),Reflect.defineProperty(J,X,Y)}})}function t($){if(typeof $==="bigint")return $.toString()+"n";if(typeof $==="string")return`"${$}"`;return`${$}`}function ZE($){return Object.keys($).filter((J)=>{return $[J]._zod.optin==="optional"&&$[J]._zod.optout==="optional"})}var HE={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-340282346638528860000000000000000000000,340282346638528860000000000000000000000],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},GE={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function Ka($,J){let W=$._zod.def,X=f9($._zod.def,{get shape(){let Y={};for(let U in J){if(!(U in W.shape))throw Error(`Unrecognized key: "${U}"`);if(!J[U])continue;Y[U]=W.shape[U]}return g9(this,"shape",Y),Y},checks:[]});return Q$($,X)}function Oa($,J){let W=$._zod.def,X=f9($._zod.def,{get shape(){let Y={...$._zod.def.shape};for(let U in J){if(!(U in W.shape))throw Error(`Unrecognized key: "${U}"`);if(!J[U])continue;delete Y[U]}return g9(this,"shape",Y),Y},checks:[]});return Q$($,X)}function Fa($,J){if(!m9(J))throw Error("Invalid input to extend: expected a plain object");let W=$._zod.def.checks;if(W&&W.length>0)throw Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let Y=f9($._zod.def,{get shape(){let U={...$._zod.def.shape,...J};return g9(this,"shape",U),U},checks:[]});return Q$($,Y)}function Ea($,J){if(!m9(J))throw Error("Invalid input to safeExtend: expected a plain object");let W={...$._zod.def,get shape(){let X={...$._zod.def.shape,...J};return g9(this,"shape",X),X},checks:$._zod.def.checks};return Q$($,W)}function Ma($,J){let W=f9($._zod.def,{get shape(){let X={...$._zod.def.shape,...J._zod.def.shape};return g9(this,"shape",X),X},get catchall(){return J._zod.def.catchall},checks:[]});return Q$($,W)}function Va($,J,W){let X=f9(J._zod.def,{get shape(){let Y=J._zod.def.shape,U={...Y};if(W)for(let Z in W){if(!(Z in Y))throw Error(`Unrecognized key: "${Z}"`);if(!W[Z])continue;U[Z]=$?new $({type:"optional",innerType:Y[Z]}):Y[Z]}else for(let Z in Y)U[Z]=$?new $({type:"optional",innerType:Y[Z]}):Y[Z];return g9(this,"shape",U),U},checks:[]});return Q$(J,X)}function Qa($,J,W){let X=f9(J._zod.def,{get shape(){let Y=J._zod.def.shape,U={...Y};if(W)for(let Z in W){if(!(Z in U))throw Error(`Unrecognized key: "${Z}"`);if(!W[Z])continue;U[Z]=new $({type:"nonoptional",innerType:Y[Z]})}else for(let Z in Y)U[Z]=new $({type:"nonoptional",innerType:Y[Z]});return g9(this,"shape",U),U},checks:[]});return Q$(J,X)}function y9($,J=0){if($.aborted===!0)return!0;for(let W=J;W<$.issues.length;W++)if($.issues[W]?.continue!==!0)return!0;return!1}function G6($,J){return J.map((W)=>{var X;return(X=W).path??(X.path=[]),W.path.unshift($),W})}function e2($){return typeof $==="string"?$:$?.message}function z6($,J,W){let X={...$,path:$.path??[]};if(!$.message){let Y=e2($.inst?._zod.def?.error?.($))??e2(J?.error?.($))??e2(W.customError?.($))??e2(W.localeError?.($))??"Invalid input";X.message=Y}if(delete X.inst,delete X.continue,!J?.reportInput)delete X.input;return X}function XU($){if($ instanceof Set)return"set";if($ instanceof Map)return"map";if($ instanceof File)return"file";return"unknown"}function YU($){if(Array.isArray($))return"array";if(typeof $==="string")return"string";return"unknown"}function zX(...$){let[J,W,X]=$;if(typeof J==="string")return{message:J,code:"custom",input:W,inst:X};return{...J}}function Aa($){return Object.entries($).filter(([J,W])=>{return Number.isNaN(Number.parseInt(J,10))}).map((J)=>J[1])}function NC($){let J=atob($),W=new Uint8Array(J.length);for(let X=0;X<J.length;X++)W[X]=J.charCodeAt(X);return W}function BC($){let J="";for(let W=0;W<$.length;W++)J+=String.fromCharCode($[W]);return btoa(J)}function Ia($){let J=$.replace(/-/g,"+").replace(/_/g,"/"),W="=".repeat((4-J.length%4)%4);return NC(J+W)}function La($){return BC($).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Pa($){let J=$.replace(/^0x/,"");if(J.length%2!==0)throw Error("Invalid hex string length");let W=new Uint8Array(J.length/2);for(let X=0;X<J.length;X+=2)W[X/2]=Number.parseInt(J.slice(X,X+2),16);return W}function _a($){return Array.from($).map((J)=>J.toString(16).padStart(2,"0")).join("")}class RC{constructor(...$){}}var SC=($,J)=>{$.name="$ZodError",Object.defineProperty($,"_zod",{value:$._zod,enumerable:!1}),Object.defineProperty($,"issues",{value:J,enumerable:!1}),$.message=JSON.stringify(J,HX,2),Object.defineProperty($,"toString",{value:()=>$.message,enumerable:!1})},UU=f("$ZodError",SC),g$=f("$ZodError",SC,{Parent:Error});function ZU($,J=(W)=>W.message){let W={},X=[];for(let Y of $.issues)if(Y.path.length>0)W[Y.path[0]]=W[Y.path[0]]||[],W[Y.path[0]].push(J(Y));else X.push(J(Y));return{formErrors:X,fieldErrors:W}}function HU($,J=(W)=>W.message){let W={_errors:[]},X=(Y)=>{for(let U of Y.issues)if(U.code==="invalid_union"&&U.errors.length)U.errors.map((Z)=>X({issues:Z}));else if(U.code==="invalid_key")X({issues:U.issues});else if(U.code==="invalid_element")X({issues:U.issues});else if(U.path.length===0)W._errors.push(J(U));else{let Z=W,H=0;while(H<U.path.length){let G=U.path[H];if(H!==U.path.length-1)Z[G]=Z[G]||{_errors:[]};else Z[G]=Z[G]||{_errors:[]},Z[G]._errors.push(J(U));Z=Z[G],H++}}};return X($),W}function zE($,J=(W)=>W.message){let W={errors:[]},X=(Y,U=[])=>{var Z,H;for(let G of Y.issues)if(G.code==="invalid_union"&&G.errors.length)G.errors.map((z)=>X({issues:z},G.path));else if(G.code==="invalid_key")X({issues:G.issues},G.path);else if(G.code==="invalid_element")X({issues:G.issues},G.path);else{let z=[...U,...G.path];if(z.length===0){W.errors.push(J(G));continue}let w=W,D=0;while(D<z.length){let K=z[D],O=D===z.length-1;if(typeof K==="string")w.properties??(w.properties={}),(Z=w.properties)[K]??(Z[K]={errors:[]}),w=w.properties[K];else w.items??(w.items=[]),(H=w.items)[K]??(H[K]={errors:[]}),w=w.items[K];if(O)w.errors.push(J(G));D++}}};return X($),W}function jC($){let J=[],W=$.map((X)=>typeof X==="object"?X.key:X);for(let X of W)if(typeof X==="number")J.push(`[${X}]`);else if(typeof X==="symbol")J.push(`[${JSON.stringify(String(X))}]`);else if(/[^\w$]/.test(X))J.push(`[${JSON.stringify(X)}]`);else{if(J.length)J.push(".");J.push(X)}return J.join("")}function wE($){let J=[],W=[...$.issues].sort((X,Y)=>(X.path??[]).length-(Y.path??[]).length);for(let X of W)if(J.push(`\u2716 ${X.message}`),X.path?.length)J.push(`  \u2192 at ${jC(X.path)}`);return J.join(`
`)}var wX=($)=>(J,W,X,Y)=>{let U=X?Object.assign(X,{async:!1}):{async:!1},Z=J._zod.run({value:W,issues:[]},U);if(Z instanceof Promise)throw new i8;if(Z.issues.length){let H=new(Y?.Err??$)(Z.issues.map((G)=>z6(G,U,F4())));throw K3(H,Y?.callee),H}return Z.value},O3=wX(g$),DX=($)=>async(J,W,X,Y)=>{let U=X?Object.assign(X,{async:!0}):{async:!0},Z=J._zod.run({value:W,issues:[]},U);if(Z instanceof Promise)Z=await Z;if(Z.issues.length){let H=new(Y?.Err??$)(Z.issues.map((G)=>z6(G,U,F4())));throw K3(H,Y?.callee),H}return Z.value},F3=DX(g$),KX=($)=>(J,W,X)=>{let Y=X?{...X,async:!1}:{async:!1},U=J._zod.run({value:W,issues:[]},Y);if(U instanceof Promise)throw new i8;return U.issues.length?{success:!1,error:new($??UU)(U.issues.map((Z)=>z6(Z,Y,F4())))}:{success:!0,data:U.value}},DE=KX(g$),OX=($)=>async(J,W,X)=>{let Y=X?Object.assign(X,{async:!0}):{async:!0},U=J._zod.run({value:W,issues:[]},Y);if(U instanceof Promise)U=await U;return U.issues.length?{success:!1,error:new $(U.issues.map((Z)=>z6(Z,Y,F4())))}:{success:!0,data:U.value}},KE=OX(g$),E3=($)=>(J,W,X)=>{let Y=X?Object.assign(X,{direction:"backward"}):{direction:"backward"};return wX($)(J,W,Y)},Ba=E3(g$),M3=($)=>(J,W,X)=>{return wX($)(J,W,X)},Ra=M3(g$),V3=($)=>async(J,W,X)=>{let Y=X?Object.assign(X,{direction:"backward"}):{direction:"backward"};return DX($)(J,W,Y)},Sa=V3(g$),Q3=($)=>async(J,W,X)=>{return DX($)(J,W,X)},ja=Q3(g$),A3=($)=>(J,W,X)=>{let Y=X?Object.assign(X,{direction:"backward"}):{direction:"backward"};return KX($)(J,W,Y)},ka=A3(g$),I3=($)=>(J,W,X)=>{return KX($)(J,W,X)},va=I3(g$),L3=($)=>async(J,W,X)=>{let Y=X?Object.assign(X,{direction:"backward"}):{direction:"backward"};return OX($)(J,W,Y)},Ca=L3(g$),P3=($)=>async(J,W,X)=>{return OX($)(J,W,X)},Ta=P3(g$);var b6={};x$(b6,{xid:()=>ME,uuid7:()=>ba,uuid6:()=>xa,uuid4:()=>ha,uuid:()=>P7,uppercase:()=>cE,unicodeEmail:()=>kC,undefined:()=>mE,ulid:()=>EE,time:()=>CE,string:()=>qE,sha512_hex:()=>Jo,sha512_base64url:()=>Xo,sha512_base64:()=>Wo,sha384_hex:()=>sa,sha384_base64url:()=>$o,sha384_base64:()=>ea,sha256_hex:()=>ta,sha256_base64url:()=>oa,sha256_base64:()=>aa,sha1_hex:()=>ra,sha1_base64url:()=>ia,sha1_base64:()=>na,rfc5322Email:()=>fa,number:()=>bE,null:()=>fE,nanoid:()=>QE,md5_hex:()=>pa,md5_base64url:()=>la,md5_base64:()=>da,lowercase:()=>yE,ksuid:()=>VE,ipv6:()=>NE,ipv4:()=>_E,integer:()=>xE,idnEmail:()=>ma,html5Email:()=>ga,hostname:()=>jE,hex:()=>ua,guid:()=>IE,extendedDuration:()=>qa,emoji:()=>PE,email:()=>LE,e164:()=>kE,duration:()=>AE,domain:()=>ca,datetime:()=>TE,date:()=>vE,cuid2:()=>FE,cuid:()=>OE,cidrv6:()=>RE,cidrv4:()=>BE,browserEmail:()=>ya,boolean:()=>gE,bigint:()=>hE,base64url:()=>_3,base64:()=>SE});var OE=/^[cC][^\s-]{8,}$/,FE=/^[0-9a-z]+$/,EE=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,ME=/^[0-9a-vA-V]{20}$/,VE=/^[A-Za-z0-9]{27}$/,QE=/^[a-zA-Z0-9_-]{21}$/,AE=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,qa=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,IE=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,P7=($)=>{if(!$)return/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/;return new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${$}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`)},ha=P7(4),xa=P7(6),ba=P7(7),LE=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,ga=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,fa=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,kC=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,ma=kC,ya=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function PE(){return new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")}var _E=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,NE=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,BE=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,RE=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,SE=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,_3=/^[A-Za-z0-9_-]*$/,jE=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,ca=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,kE=/^\+(?:[0-9]){6,14}[0-9]$/,vC="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",vE=new RegExp(`^${vC}$`);function CC($){return typeof $.precision==="number"?$.precision===-1?"(?:[01]\\d|2[0-3]):[0-5]\\d":$.precision===0?"(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d":`(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d\\.\\d{${$.precision}}`:"(?:[01]\\d|2[0-3]):[0-5]\\d(?::[0-5]\\d(?:\\.\\d+)?)?"}function CE($){return new RegExp(`^${CC($)}$`)}function TE($){let J=CC({precision:$.precision}),W=["Z"];if($.local)W.push("");if($.offset)W.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let X=`${J}(?:${W.join("|")})`;return new RegExp(`^${vC}T(?:${X})$`)}var qE=($)=>{let J=$?`[\\s\\S]{${$?.minimum??0},${$?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${J}$`)},hE=/^-?\d+n?$/,xE=/^-?\d+$/,bE=/^-?\d+(?:\.\d+)?/,gE=/^(?:true|false)$/i,fE=/^null$/i;var mE=/^undefined$/i;var yE=/^[^A-Z]*$/,cE=/^[^a-z]*$/,ua=/^[0-9a-fA-F]*$/;function GU($,J){return new RegExp(`^[A-Za-z0-9+/]{${$}}${J}$`)}function zU($){return new RegExp(`^[A-Za-z0-9_-]{${$}}$`)}var pa=/^[0-9a-fA-F]{32}$/,da=GU(22,"=="),la=zU(22),ra=/^[0-9a-fA-F]{40}$/,na=GU(27,"="),ia=zU(27),ta=/^[0-9a-fA-F]{64}$/,aa=GU(43,"="),oa=zU(43),sa=/^[0-9a-fA-F]{96}$/,ea=GU(64,""),$o=zU(64),Jo=/^[0-9a-fA-F]{128}$/,Wo=GU(86,"=="),Xo=zU(86);var q1=f("$ZodCheck",($,J)=>{var W;$._zod??($._zod={}),$._zod.def=J,(W=$._zod).onattach??(W.onattach=[])}),qC={number:"number",bigint:"bigint",object:"date"},N3=f("$ZodCheckLessThan",($,J)=>{q1.init($,J);let W=qC[typeof J.value];$._zod.onattach.push((X)=>{let Y=X._zod.bag,U=(J.inclusive?Y.maximum:Y.exclusiveMaximum)??Number.POSITIVE_INFINITY;if(J.value<U)if(J.inclusive)Y.maximum=J.value;else Y.exclusiveMaximum=J.value}),$._zod.check=(X)=>{if(J.inclusive?X.value<=J.value:X.value<J.value)return;X.issues.push({origin:W,code:"too_big",maximum:J.value,input:X.value,inclusive:J.inclusive,inst:$,continue:!J.abort})}}),B3=f("$ZodCheckGreaterThan",($,J)=>{q1.init($,J);let W=qC[typeof J.value];$._zod.onattach.push((X)=>{let Y=X._zod.bag,U=(J.inclusive?Y.minimum:Y.exclusiveMinimum)??Number.NEGATIVE_INFINITY;if(J.value>U)if(J.inclusive)Y.minimum=J.value;else Y.exclusiveMinimum=J.value}),$._zod.check=(X)=>{if(J.inclusive?X.value>=J.value:X.value>J.value)return;X.issues.push({origin:W,code:"too_small",minimum:J.value,input:X.value,inclusive:J.inclusive,inst:$,continue:!J.abort})}}),uE=f("$ZodCheckMultipleOf",($,J)=>{q1.init($,J),$._zod.onattach.push((W)=>{var X;(X=W._zod.bag).multipleOf??(X.multipleOf=J.value)}),$._zod.check=(W)=>{if(typeof W.value!==typeof J.value)throw Error("Cannot mix number and bigint in multiple_of check.");if(typeof W.value==="bigint"?W.value%J.value===BigInt(0):WE(W.value,J.value)===0)return;W.issues.push({origin:typeof W.value,code:"not_multiple_of",divisor:J.value,input:W.value,inst:$,continue:!J.abort})}}),pE=f("$ZodCheckNumberFormat",($,J)=>{q1.init($,J),J.format=J.format||"float64";let W=J.format?.includes("int"),X=W?"int":"number",[Y,U]=HE[J.format];$._zod.onattach.push((Z)=>{let H=Z._zod.bag;if(H.format=J.format,H.minimum=Y,H.maximum=U,W)H.pattern=xE}),$._zod.check=(Z)=>{let H=Z.value;if(W){if(!Number.isInteger(H)){Z.issues.push({expected:X,format:J.format,code:"invalid_type",continue:!1,input:H,inst:$});return}if(!Number.isSafeInteger(H)){if(H>0)Z.issues.push({input:H,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:$,origin:X,continue:!J.abort});else Z.issues.push({input:H,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:$,origin:X,continue:!J.abort});return}}if(H<Y)Z.issues.push({origin:"number",input:H,code:"too_small",minimum:Y,inclusive:!0,inst:$,continue:!J.abort});if(H>U)Z.issues.push({origin:"number",input:H,code:"too_big",maximum:U,inst:$})}}),dE=f("$ZodCheckBigIntFormat",($,J)=>{q1.init($,J);let[W,X]=GE[J.format];$._zod.onattach.push((Y)=>{let U=Y._zod.bag;U.format=J.format,U.minimum=W,U.maximum=X}),$._zod.check=(Y)=>{let U=Y.value;if(U<W)Y.issues.push({origin:"bigint",input:U,code:"too_small",minimum:W,inclusive:!0,inst:$,continue:!J.abort});if(U>X)Y.issues.push({origin:"bigint",input:U,code:"too_big",maximum:X,inst:$})}}),lE=f("$ZodCheckMaxSize",($,J)=>{var W;q1.init($,J),(W=$._zod.def).when??(W.when=(X)=>{let Y=X.value;return!b9(Y)&&Y.size!==void 0}),$._zod.onattach.push((X)=>{let Y=X._zod.bag.maximum??Number.POSITIVE_INFINITY;if(J.maximum<Y)X._zod.bag.maximum=J.maximum}),$._zod.check=(X)=>{let Y=X.value;if(Y.size<=J.maximum)return;X.issues.push({origin:XU(Y),code:"too_big",maximum:J.maximum,inclusive:!0,input:Y,inst:$,continue:!J.abort})}}),rE=f("$ZodCheckMinSize",($,J)=>{var W;q1.init($,J),(W=$._zod.def).when??(W.when=(X)=>{let Y=X.value;return!b9(Y)&&Y.size!==void 0}),$._zod.onattach.push((X)=>{let Y=X._zod.bag.minimum??Number.NEGATIVE_INFINITY;if(J.minimum>Y)X._zod.bag.minimum=J.minimum}),$._zod.check=(X)=>{let Y=X.value;if(Y.size>=J.minimum)return;X.issues.push({origin:XU(Y),code:"too_small",minimum:J.minimum,inclusive:!0,input:Y,inst:$,continue:!J.abort})}}),nE=f("$ZodCheckSizeEquals",($,J)=>{var W;q1.init($,J),(W=$._zod.def).when??(W.when=(X)=>{let Y=X.value;return!b9(Y)&&Y.size!==void 0}),$._zod.onattach.push((X)=>{let Y=X._zod.bag;Y.minimum=J.size,Y.maximum=J.size,Y.size=J.size}),$._zod.check=(X)=>{let Y=X.value,U=Y.size;if(U===J.size)return;let Z=U>J.size;X.issues.push({origin:XU(Y),...Z?{code:"too_big",maximum:J.size}:{code:"too_small",minimum:J.size},inclusive:!0,exact:!0,input:X.value,inst:$,continue:!J.abort})}}),iE=f("$ZodCheckMaxLength",($,J)=>{var W;q1.init($,J),(W=$._zod.def).when??(W.when=(X)=>{let Y=X.value;return!b9(Y)&&Y.length!==void 0}),$._zod.onattach.push((X)=>{let Y=X._zod.bag.maximum??Number.POSITIVE_INFINITY;if(J.maximum<Y)X._zod.bag.maximum=J.maximum}),$._zod.check=(X)=>{let Y=X.value;if(Y.length<=J.maximum)return;let Z=YU(Y);X.issues.push({origin:Z,code:"too_big",maximum:J.maximum,inclusive:!0,input:Y,inst:$,continue:!J.abort})}}),tE=f("$ZodCheckMinLength",($,J)=>{var W;q1.init($,J),(W=$._zod.def).when??(W.when=(X)=>{let Y=X.value;return!b9(Y)&&Y.length!==void 0}),$._zod.onattach.push((X)=>{let Y=X._zod.bag.minimum??Number.NEGATIVE_INFINITY;if(J.minimum>Y)X._zod.bag.minimum=J.minimum}),$._zod.check=(X)=>{let Y=X.value;if(Y.length>=J.minimum)return;let Z=YU(Y);X.issues.push({origin:Z,code:"too_small",minimum:J.minimum,inclusive:!0,input:Y,inst:$,continue:!J.abort})}}),aE=f("$ZodCheckLengthEquals",($,J)=>{var W;q1.init($,J),(W=$._zod.def).when??(W.when=(X)=>{let Y=X.value;return!b9(Y)&&Y.length!==void 0}),$._zod.onattach.push((X)=>{let Y=X._zod.bag;Y.minimum=J.length,Y.maximum=J.length,Y.length=J.length}),$._zod.check=(X)=>{let Y=X.value,U=Y.length;if(U===J.length)return;let Z=YU(Y),H=U>J.length;X.issues.push({origin:Z,...H?{code:"too_big",maximum:J.length}:{code:"too_small",minimum:J.length},inclusive:!0,exact:!0,input:X.value,inst:$,continue:!J.abort})}}),FX=f("$ZodCheckStringFormat",($,J)=>{var W,X;if(q1.init($,J),$._zod.onattach.push((Y)=>{let U=Y._zod.bag;if(U.format=J.format,J.pattern)U.patterns??(U.patterns=new Set),U.patterns.add(J.pattern)}),J.pattern)(W=$._zod).check??(W.check=(Y)=>{if(J.pattern.lastIndex=0,J.pattern.test(Y.value))return;Y.issues.push({origin:"string",code:"invalid_format",format:J.format,input:Y.value,...J.pattern?{pattern:J.pattern.toString()}:{},inst:$,continue:!J.abort})});else(X=$._zod).check??(X.check=()=>{})}),oE=f("$ZodCheckRegex",($,J)=>{FX.init($,J),$._zod.check=(W)=>{if(J.pattern.lastIndex=0,J.pattern.test(W.value))return;W.issues.push({origin:"string",code:"invalid_format",format:"regex",input:W.value,pattern:J.pattern.toString(),inst:$,continue:!J.abort})}}),sE=f("$ZodCheckLowerCase",($,J)=>{J.pattern??(J.pattern=yE),FX.init($,J)}),eE=f("$ZodCheckUpperCase",($,J)=>{J.pattern??(J.pattern=cE),FX.init($,J)}),$M=f("$ZodCheckIncludes",($,J)=>{q1.init($,J);let W=t8(J.includes),X=new RegExp(typeof J.position==="number"?`^.{${J.position}}${W}`:W);J.pattern=X,$._zod.onattach.push((Y)=>{let U=Y._zod.bag;U.patterns??(U.patterns=new Set),U.patterns.add(X)}),$._zod.check=(Y)=>{if(Y.value.includes(J.includes,J.position))return;Y.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:J.includes,input:Y.value,inst:$,continue:!J.abort})}}),JM=f("$ZodCheckStartsWith",($,J)=>{q1.init($,J);let W=new RegExp(`^${t8(J.prefix)}.*`);J.pattern??(J.pattern=W),$._zod.onattach.push((X)=>{let Y=X._zod.bag;Y.patterns??(Y.patterns=new Set),Y.patterns.add(W)}),$._zod.check=(X)=>{if(X.value.startsWith(J.prefix))return;X.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:J.prefix,input:X.value,inst:$,continue:!J.abort})}}),WM=f("$ZodCheckEndsWith",($,J)=>{q1.init($,J);let W=new RegExp(`.*${t8(J.suffix)}$`);J.pattern??(J.pattern=W),$._zod.onattach.push((X)=>{let Y=X._zod.bag;Y.patterns??(Y.patterns=new Set),Y.patterns.add(W)}),$._zod.check=(X)=>{if(X.value.endsWith(J.suffix))return;X.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:J.suffix,input:X.value,inst:$,continue:!J.abort})}});function TC($,J,W){if($.issues.length)J.issues.push(...G6(W,$.issues))}var XM=f("$ZodCheckProperty",($,J)=>{q1.init($,J),$._zod.check=(W)=>{let X=J.schema._zod.run({value:W.value[J.property],issues:[]},{});if(X instanceof Promise)return X.then((Y)=>TC(Y,W,J.property));TC(X,W,J.property);return}}),YM=f("$ZodCheckMimeType",($,J)=>{q1.init($,J);let W=new Set(J.mime);$._zod.onattach.push((X)=>{X._zod.bag.mime=J.mime}),$._zod.check=(X)=>{if(W.has(X.value.type))return;X.issues.push({code:"invalid_value",values:J.mime,input:X.value.type,inst:$,continue:!J.abort})}}),UM=f("$ZodCheckOverwrite",($,J)=>{q1.init($,J),$._zod.check=(W)=>{W.value=J.tx(W.value)}});class R3{constructor($=[]){if(this.content=[],this.indent=0,this)this.args=$}indented($){this.indent+=1,$(this),this.indent-=1}write($){if(typeof $==="function"){$(this,{execution:"sync"}),$(this,{execution:"async"});return}let W=$.split(`
`).filter((U)=>U),X=Math.min(...W.map((U)=>U.length-U.trimStart().length)),Y=W.map((U)=>U.slice(X)).map((U)=>" ".repeat(this.indent*2)+U);for(let U of Y)this.content.push(U)}compile(){let $=Function,J=this?.args,X=[...(this?.content??[""]).map((Y)=>`  ${Y}`)];return new $(...J,X.join(`
`))}}var ZM={major:4,minor:1,patch:12};var S0=f("$ZodType",($,J)=>{var W;$??($={}),$._zod.def=J,$._zod.bag=$._zod.bag||{},$._zod.version=ZM;let X=[...$._zod.def.checks??[]];if($._zod.traits.has("$ZodCheck"))X.unshift($);for(let Y of X)for(let U of Y._zod.onattach)U($);if(X.length===0)(W=$._zod).deferred??(W.deferred=[]),$._zod.deferred?.push(()=>{$._zod.run=$._zod.parse});else{let Y=(Z,H,G)=>{let z=y9(Z),w;for(let D of H){if(D._zod.def.when){if(!D._zod.def.when(Z))continue}else if(z)continue;let K=Z.issues.length,O=D._zod.check(Z);if(O instanceof Promise&&G?.async===!1)throw new i8;if(w||O instanceof Promise)w=(w??Promise.resolve()).then(async()=>{if(await O,Z.issues.length===K)return;if(!z)z=y9(Z,K)});else{if(Z.issues.length===K)continue;if(!z)z=y9(Z,K)}}if(w)return w.then(()=>{return Z});return Z},U=(Z,H,G)=>{if(y9(Z))return Z.aborted=!0,Z;let z=Y(H,X,G);if(z instanceof Promise){if(G.async===!1)throw new i8;return z.then((w)=>$._zod.parse(w,G))}return $._zod.parse(z,G)};$._zod.run=(Z,H)=>{if(H.skipChecks)return $._zod.parse(Z,H);if(H.direction==="backward"){let z=$._zod.parse({value:Z.value,issues:[]},{...H,skipChecks:!0});if(z instanceof Promise)return z.then((w)=>{return U(w,Z,H)});return U(z,Z,H)}let G=$._zod.parse(Z,H);if(G instanceof Promise){if(H.async===!1)throw new i8;return G.then((z)=>Y(z,X,H))}return Y(G,X,H)}}$["~standard"]={validate:(Y)=>{try{let U=DE($,Y);return U.success?{value:U.data}:{issues:U.error?.issues}}catch(U){return KE($,Y).then((Z)=>Z.success?{value:Z.data}:{issues:Z.error?.issues})}},vendor:"zod",version:1}}),_7=f("$ZodString",($,J)=>{S0.init($,J),$._zod.pattern=[...$?._zod.bag?.patterns??[]].pop()??qE($._zod.bag),$._zod.parse=(W,X)=>{if(J.coerce)try{W.value=String(W.value)}catch(Y){}if(typeof W.value==="string")return W;return W.issues.push({expected:"string",code:"invalid_type",input:W.value,inst:$}),W}}),P1=f("$ZodStringFormat",($,J)=>{FX.init($,J),_7.init($,J)}),GM=f("$ZodGUID",($,J)=>{J.pattern??(J.pattern=IE),P1.init($,J)}),zM=f("$ZodUUID",($,J)=>{if(J.version){let X={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[J.version];if(X===void 0)throw Error(`Invalid UUID version: "${J.version}"`);J.pattern??(J.pattern=P7(X))}else J.pattern??(J.pattern=P7());P1.init($,J)}),wM=f("$ZodEmail",($,J)=>{J.pattern??(J.pattern=LE),P1.init($,J)}),DM=f("$ZodURL",($,J)=>{P1.init($,J),$._zod.check=(W)=>{try{let X=W.value.trim(),Y=new URL(X);if(J.hostname){if(J.hostname.lastIndex=0,!J.hostname.test(Y.hostname))W.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:jE.source,input:W.value,inst:$,continue:!J.abort})}if(J.protocol){if(J.protocol.lastIndex=0,!J.protocol.test(Y.protocol.endsWith(":")?Y.protocol.slice(0,-1):Y.protocol))W.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:J.protocol.source,input:W.value,inst:$,continue:!J.abort})}if(J.normalize)W.value=Y.href;else W.value=X;return}catch(X){W.issues.push({code:"invalid_format",format:"url",input:W.value,inst:$,continue:!J.abort})}}}),KM=f("$ZodEmoji",($,J)=>{J.pattern??(J.pattern=PE()),P1.init($,J)}),OM=f("$ZodNanoID",($,J)=>{J.pattern??(J.pattern=QE),P1.init($,J)}),FM=f("$ZodCUID",($,J)=>{J.pattern??(J.pattern=OE),P1.init($,J)}),EM=f("$ZodCUID2",($,J)=>{J.pattern??(J.pattern=FE),P1.init($,J)}),MM=f("$ZodULID",($,J)=>{J.pattern??(J.pattern=EE),P1.init($,J)}),VM=f("$ZodXID",($,J)=>{J.pattern??(J.pattern=ME),P1.init($,J)}),QM=f("$ZodKSUID",($,J)=>{J.pattern??(J.pattern=VE),P1.init($,J)}),AM=f("$ZodISODateTime",($,J)=>{J.pattern??(J.pattern=TE(J)),P1.init($,J)}),IM=f("$ZodISODate",($,J)=>{J.pattern??(J.pattern=vE),P1.init($,J)}),LM=f("$ZodISOTime",($,J)=>{J.pattern??(J.pattern=CE(J)),P1.init($,J)}),PM=f("$ZodISODuration",($,J)=>{J.pattern??(J.pattern=AE),P1.init($,J)}),_M=f("$ZodIPv4",($,J)=>{J.pattern??(J.pattern=_E),P1.init($,J),$._zod.onattach.push((W)=>{let X=W._zod.bag;X.format="ipv4"})}),NM=f("$ZodIPv6",($,J)=>{J.pattern??(J.pattern=NE),P1.init($,J),$._zod.onattach.push((W)=>{let X=W._zod.bag;X.format="ipv6"}),$._zod.check=(W)=>{try{new URL(`http://[${W.value}]`)}catch{W.issues.push({code:"invalid_format",format:"ipv6",input:W.value,inst:$,continue:!J.abort})}}}),BM=f("$ZodCIDRv4",($,J)=>{J.pattern??(J.pattern=BE),P1.init($,J)}),RM=f("$ZodCIDRv6",($,J)=>{J.pattern??(J.pattern=RE),P1.init($,J),$._zod.check=(W)=>{let X=W.value.split("/");try{if(X.length!==2)throw Error();let[Y,U]=X;if(!U)throw Error();let Z=Number(U);if(`${Z}`!==U)throw Error();if(Z<0||Z>128)throw Error();new URL(`http://[${Y}]`)}catch{W.issues.push({code:"invalid_format",format:"cidrv6",input:W.value,inst:$,continue:!J.abort})}}});function SM($){if($==="")return!0;if($.length%4!==0)return!1;try{return atob($),!0}catch{return!1}}var jM=f("$ZodBase64",($,J)=>{J.pattern??(J.pattern=SE),P1.init($,J),$._zod.onattach.push((W)=>{W._zod.bag.contentEncoding="base64"}),$._zod.check=(W)=>{if(SM(W.value))return;W.issues.push({code:"invalid_format",format:"base64",input:W.value,inst:$,continue:!J.abort})}});function lC($){if(!_3.test($))return!1;let J=$.replace(/[-_]/g,(X)=>X==="-"?"+":"/"),W=J.padEnd(Math.ceil(J.length/4)*4,"=");return SM(W)}var kM=f("$ZodBase64URL",($,J)=>{J.pattern??(J.pattern=_3),P1.init($,J),$._zod.onattach.push((W)=>{W._zod.bag.contentEncoding="base64url"}),$._zod.check=(W)=>{if(lC(W.value))return;W.issues.push({code:"invalid_format",format:"base64url",input:W.value,inst:$,continue:!J.abort})}}),vM=f("$ZodE164",($,J)=>{J.pattern??(J.pattern=kE),P1.init($,J)});function rC($,J=null){try{let W=$.split(".");if(W.length!==3)return!1;let[X]=W;if(!X)return!1;let Y=JSON.parse(atob(X));if("typ"in Y&&Y?.typ!=="JWT")return!1;if(!Y.alg)return!1;if(J&&(!("alg"in Y)||Y.alg!==J))return!1;return!0}catch{return!1}}var CM=f("$ZodJWT",($,J)=>{P1.init($,J),$._zod.check=(W)=>{if(rC(W.value,J.alg))return;W.issues.push({code:"invalid_format",format:"jwt",input:W.value,inst:$,continue:!J.abort})}}),TM=f("$ZodCustomStringFormat",($,J)=>{P1.init($,J),$._zod.check=(W)=>{if(J.fn(W.value))return;W.issues.push({code:"invalid_format",format:J.format,input:W.value,inst:$,continue:!J.abort})}}),T3=f("$ZodNumber",($,J)=>{S0.init($,J),$._zod.pattern=$._zod.bag.pattern??bE,$._zod.parse=(W,X)=>{if(J.coerce)try{W.value=Number(W.value)}catch(Z){}let Y=W.value;if(typeof Y==="number"&&!Number.isNaN(Y)&&Number.isFinite(Y))return W;let U=typeof Y==="number"?Number.isNaN(Y)?"NaN":!Number.isFinite(Y)?"Infinity":void 0:void 0;return W.issues.push({expected:"number",code:"invalid_type",input:Y,inst:$,...U?{received:U}:{}}),W}}),qM=f("$ZodNumber",($,J)=>{pE.init($,J),T3.init($,J)}),wU=f("$ZodBoolean",($,J)=>{S0.init($,J),$._zod.pattern=gE,$._zod.parse=(W,X)=>{if(J.coerce)try{W.value=Boolean(W.value)}catch(U){}let Y=W.value;if(typeof Y==="boolean")return W;return W.issues.push({expected:"boolean",code:"invalid_type",input:Y,inst:$}),W}}),q3=f("$ZodBigInt",($,J)=>{S0.init($,J),$._zod.pattern=hE,$._zod.parse=(W,X)=>{if(J.coerce)try{W.value=BigInt(W.value)}catch(Y){}if(typeof W.value==="bigint")return W;return W.issues.push({expected:"bigint",code:"invalid_type",input:W.value,inst:$}),W}}),hM=f("$ZodBigInt",($,J)=>{dE.init($,J),q3.init($,J)}),xM=f("$ZodSymbol",($,J)=>{S0.init($,J),$._zod.parse=(W,X)=>{let Y=W.value;if(typeof Y==="symbol")return W;return W.issues.push({expected:"symbol",code:"invalid_type",input:Y,inst:$}),W}}),bM=f("$ZodUndefined",($,J)=>{S0.init($,J),$._zod.pattern=mE,$._zod.values=new Set([void 0]),$._zod.optin="optional",$._zod.optout="optional",$._zod.parse=(W,X)=>{let Y=W.value;if(typeof Y>"u")return W;return W.issues.push({expected:"undefined",code:"invalid_type",input:Y,inst:$}),W}}),gM=f("$ZodNull",($,J)=>{S0.init($,J),$._zod.pattern=fE,$._zod.values=new Set([null]),$._zod.parse=(W,X)=>{let Y=W.value;if(Y===null)return W;return W.issues.push({expected:"null",code:"invalid_type",input:Y,inst:$}),W}}),fM=f("$ZodAny",($,J)=>{S0.init($,J),$._zod.parse=(W)=>W}),mM=f("$ZodUnknown",($,J)=>{S0.init($,J),$._zod.parse=(W)=>W}),yM=f("$ZodNever",($,J)=>{S0.init($,J),$._zod.parse=(W,X)=>{return W.issues.push({expected:"never",code:"invalid_type",input:W.value,inst:$}),W}}),cM=f("$ZodVoid",($,J)=>{S0.init($,J),$._zod.parse=(W,X)=>{let Y=W.value;if(typeof Y>"u")return W;return W.issues.push({expected:"void",code:"invalid_type",input:Y,inst:$}),W}}),uM=f("$ZodDate",($,J)=>{S0.init($,J),$._zod.parse=(W,X)=>{if(J.coerce)try{W.value=new Date(W.value)}catch(H){}let Y=W.value,U=Y instanceof Date;if(U&&!Number.isNaN(Y.getTime()))return W;return W.issues.push({expected:"date",code:"invalid_type",input:Y,...U?{received:"Invalid Date"}:{},inst:$}),W}});function xC($,J,W){if($.issues.length)J.issues.push(...G6(W,$.issues));J.value[W]=$.value}var pM=f("$ZodArray",($,J)=>{S0.init($,J),$._zod.parse=(W,X)=>{let Y=W.value;if(!Array.isArray(Y))return W.issues.push({expected:"array",code:"invalid_type",input:Y,inst:$}),W;W.value=Array(Y.length);let U=[];for(let Z=0;Z<Y.length;Z++){let H=Y[Z],G=J.element._zod.run({value:H,issues:[]},X);if(G instanceof Promise)U.push(G.then((z)=>xC(z,W,Z)));else xC(G,W,Z)}if(U.length)return Promise.all(U).then(()=>W);return W}});function C3($,J,W,X){if($.issues.length)J.issues.push(...G6(W,$.issues));if($.value===void 0){if(W in X)J.value[W]=void 0}else J.value[W]=$.value}function nC($){let J=Object.keys($.shape);for(let X of J)if(!$.shape?.[X]?._zod?.traits?.has("$ZodType"))throw Error(`Invalid element at key "${X}": expected a Zod schema`);let W=ZE($.shape);return{...$,keys:J,keySet:new Set(J),numKeys:J.length,optionalKeys:new Set(W)}}function iC($,J,W,X,Y,U){let Z=[],H=Y.keySet,G=Y.catchall._zod,z=G.def.type;for(let w of Object.keys(J)){if(H.has(w))continue;if(z==="never"){Z.push(w);continue}let D=G.run({value:J[w],issues:[]},X);if(D instanceof Promise)$.push(D.then((K)=>C3(K,W,w,J)));else C3(D,W,w,J)}if(Z.length)W.issues.push({code:"unrecognized_keys",keys:Z,input:J,inst:U});if(!$.length)return W;return Promise.all($).then(()=>{return W})}var tC=f("$ZodObject",($,J)=>{if(S0.init($,J),!Object.getOwnPropertyDescriptor(J,"shape")?.get){let H=J.shape;Object.defineProperty(J,"shape",{get:()=>{let G={...H};return Object.defineProperty(J,"shape",{value:G}),G}})}let X=GX(()=>nC(J));m0($._zod,"propValues",()=>{let H=J.shape,G={};for(let z in H){let w=H[z]._zod;if(w.values){G[z]??(G[z]=new Set);for(let D of w.values)G[z].add(D)}}return G});let Y=L7,U=J.catchall,Z;$._zod.parse=(H,G)=>{Z??(Z=X.value);let z=H.value;if(!Y(z))return H.issues.push({expected:"object",code:"invalid_type",input:z,inst:$}),H;H.value={};let w=[],D=Z.shape;for(let K of Z.keys){let F=D[K]._zod.run({value:z[K],issues:[]},G);if(F instanceof Promise)w.push(F.then((M)=>C3(M,H,K,z)));else C3(F,H,K,z)}if(!U)return w.length?Promise.all(w).then(()=>H):H;return iC(w,z,H,G,X.value,$)}}),dM=f("$ZodObjectJIT",($,J)=>{tC.init($,J);let W=$._zod.parse,X=GX(()=>nC(J)),Y=(K)=>{let O=new R3(["shape","payload","ctx"]),F=X.value,M=(Q)=>{let N=D3(Q);return`shape[${N}]._zod.run({ value: input[${N}], issues: [] }, ctx)`};O.write("const input = payload.value;");let A=Object.create(null),I=0;for(let Q of F.keys)A[Q]=`key_${I++}`;O.write("const newResult = {};");for(let Q of F.keys){let N=A[Q],_=D3(Q);O.write(`const ${N} = ${M(Q)};`),O.write(`
        if (${N}.issues.length) {
          payload.issues = payload.issues.concat(${N}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${_}, ...iss.path] : [${_}]
          })));
        }
        
        
        if (${N}.value === undefined) {
          if (${_} in input) {
            newResult[${_}] = undefined;
          }
        } else {
          newResult[${_}] = ${N}.value;
        }
        
      `)}O.write("payload.value = newResult;"),O.write("return payload;");let P=O.compile();return(Q,N)=>P(K,Q,N)},U,Z=L7,H=!s2.jitless,z=H&&XE.value,w=J.catchall,D;$._zod.parse=(K,O)=>{D??(D=X.value);let F=K.value;if(!Z(F))return K.issues.push({expected:"object",code:"invalid_type",input:F,inst:$}),K;if(H&&z&&O?.async===!1&&O.jitless!==!0){if(!U)U=Y(J.shape);if(K=U(K,O),!w)return K;return iC([],F,K,O,D,$)}return W(K,O)}});function bC($,J,W,X){for(let U of $)if(U.issues.length===0)return J.value=U.value,J;let Y=$.filter((U)=>!y9(U));if(Y.length===1)return J.value=Y[0].value,Y[0];return J.issues.push({code:"invalid_union",input:J.value,inst:W,errors:$.map((U)=>U.issues.map((Z)=>z6(Z,X,F4())))}),J}var h3=f("$ZodUnion",($,J)=>{S0.init($,J),m0($._zod,"optin",()=>J.options.some((Y)=>Y._zod.optin==="optional")?"optional":void 0),m0($._zod,"optout",()=>J.options.some((Y)=>Y._zod.optout==="optional")?"optional":void 0),m0($._zod,"values",()=>{if(J.options.every((Y)=>Y._zod.values))return new Set(J.options.flatMap((Y)=>Array.from(Y._zod.values)));return}),m0($._zod,"pattern",()=>{if(J.options.every((Y)=>Y._zod.pattern)){let Y=J.options.map((U)=>U._zod.pattern);return new RegExp(`^(${Y.map((U)=>JU(U.source)).join("|")})$`)}return});let W=J.options.length===1,X=J.options[0]._zod.run;$._zod.parse=(Y,U)=>{if(W)return X(Y,U);let Z=!1,H=[];for(let G of J.options){let z=G._zod.run({value:Y.value,issues:[]},U);if(z instanceof Promise)H.push(z),Z=!0;else{if(z.issues.length===0)return z;H.push(z)}}if(!Z)return bC(H,Y,$,U);return Promise.all(H).then((G)=>{return bC(G,Y,$,U)})}}),lM=f("$ZodDiscriminatedUnion",($,J)=>{h3.init($,J);let W=$._zod.parse;m0($._zod,"propValues",()=>{let Y={};for(let U of J.options){let Z=U._zod.propValues;if(!Z||Object.keys(Z).length===0)throw Error(`Invalid discriminated union option at index "${J.options.indexOf(U)}"`);for(let[H,G]of Object.entries(Z)){if(!Y[H])Y[H]=new Set;for(let z of G)Y[H].add(z)}}return Y});let X=GX(()=>{let Y=J.options,U=new Map;for(let Z of Y){let H=Z._zod.propValues?.[J.discriminator];if(!H||H.size===0)throw Error(`Invalid discriminated union option at index "${J.options.indexOf(Z)}"`);for(let G of H){if(U.has(G))throw Error(`Duplicate discriminator value "${String(G)}"`);U.set(G,Z)}}return U});$._zod.parse=(Y,U)=>{let Z=Y.value;if(!L7(Z))return Y.issues.push({code:"invalid_type",expected:"object",input:Z,inst:$}),Y;let H=X.value.get(Z?.[J.discriminator]);if(H)return H._zod.run(Y,U);if(J.unionFallback)return W(Y,U);return Y.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:J.discriminator,input:Z,path:[J.discriminator],inst:$}),Y}}),rM=f("$ZodIntersection",($,J)=>{S0.init($,J),$._zod.parse=(W,X)=>{let Y=W.value,U=J.left._zod.run({value:Y,issues:[]},X),Z=J.right._zod.run({value:Y,issues:[]},X);if(U instanceof Promise||Z instanceof Promise)return Promise.all([U,Z]).then(([G,z])=>{return gC(W,G,z)});return gC(W,U,Z)}});function HM($,J){if($===J)return{valid:!0,data:$};if($ instanceof Date&&J instanceof Date&&+$===+J)return{valid:!0,data:$};if(m9($)&&m9(J)){let W=Object.keys(J),X=Object.keys($).filter((U)=>W.indexOf(U)!==-1),Y={...$,...J};for(let U of X){let Z=HM($[U],J[U]);if(!Z.valid)return{valid:!1,mergeErrorPath:[U,...Z.mergeErrorPath]};Y[U]=Z.data}return{valid:!0,data:Y}}if(Array.isArray($)&&Array.isArray(J)){if($.length!==J.length)return{valid:!1,mergeErrorPath:[]};let W=[];for(let X=0;X<$.length;X++){let Y=$[X],U=J[X],Z=HM(Y,U);if(!Z.valid)return{valid:!1,mergeErrorPath:[X,...Z.mergeErrorPath]};W.push(Z.data)}return{valid:!0,data:W}}return{valid:!1,mergeErrorPath:[]}}function gC($,J,W){if(J.issues.length)$.issues.push(...J.issues);if(W.issues.length)$.issues.push(...W.issues);if(y9($))return $;let X=HM(J.value,W.value);if(!X.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(X.mergeErrorPath)}`);return $.value=X.data,$}var x3=f("$ZodTuple",($,J)=>{S0.init($,J);let W=J.items,X=W.length-[...W].reverse().findIndex((Y)=>Y._zod.optin!=="optional");$._zod.parse=(Y,U)=>{let Z=Y.value;if(!Array.isArray(Z))return Y.issues.push({input:Z,inst:$,expected:"tuple",code:"invalid_type"}),Y;Y.value=[];let H=[];if(!J.rest){let z=Z.length>W.length,w=Z.length<X-1;if(z||w)return Y.issues.push({...z?{code:"too_big",maximum:W.length}:{code:"too_small",minimum:W.length},input:Z,inst:$,origin:"array"}),Y}let G=-1;for(let z of W){if(G++,G>=Z.length){if(G>=X)continue}let w=z._zod.run({value:Z[G],issues:[]},U);if(w instanceof Promise)H.push(w.then((D)=>S3(D,Y,G)));else S3(w,Y,G)}if(J.rest){let z=Z.slice(W.length);for(let w of z){G++;let D=J.rest._zod.run({value:w,issues:[]},U);if(D instanceof Promise)H.push(D.then((K)=>S3(K,Y,G)));else S3(D,Y,G)}}if(H.length)return Promise.all(H).then(()=>Y);return Y}});function S3($,J,W){if($.issues.length)J.issues.push(...G6(W,$.issues));J.value[W]=$.value}var nM=f("$ZodRecord",($,J)=>{S0.init($,J),$._zod.parse=(W,X)=>{let Y=W.value;if(!m9(Y))return W.issues.push({expected:"record",code:"invalid_type",input:Y,inst:$}),W;let U=[];if(J.keyType._zod.values){let Z=J.keyType._zod.values;W.value={};for(let G of Z)if(typeof G==="string"||typeof G==="number"||typeof G==="symbol"){let z=J.valueType._zod.run({value:Y[G],issues:[]},X);if(z instanceof Promise)U.push(z.then((w)=>{if(w.issues.length)W.issues.push(...G6(G,w.issues));W.value[G]=w.value}));else{if(z.issues.length)W.issues.push(...G6(G,z.issues));W.value[G]=z.value}}let H;for(let G in Y)if(!Z.has(G))H=H??[],H.push(G);if(H&&H.length>0)W.issues.push({code:"unrecognized_keys",input:Y,inst:$,keys:H})}else{W.value={};for(let Z of Reflect.ownKeys(Y)){if(Z==="__proto__")continue;let H=J.keyType._zod.run({value:Z,issues:[]},X);if(H instanceof Promise)throw Error("Async schemas not supported in object keys currently");if(H.issues.length){W.issues.push({code:"invalid_key",origin:"record",issues:H.issues.map((z)=>z6(z,X,F4())),input:Z,path:[Z],inst:$}),W.value[H.value]=H.value;continue}let G=J.valueType._zod.run({value:Y[Z],issues:[]},X);if(G instanceof Promise)U.push(G.then((z)=>{if(z.issues.length)W.issues.push(...G6(Z,z.issues));W.value[H.value]=z.value}));else{if(G.issues.length)W.issues.push(...G6(Z,G.issues));W.value[H.value]=G.value}}}if(U.length)return Promise.all(U).then(()=>W);return W}}),iM=f("$ZodMap",($,J)=>{S0.init($,J),$._zod.parse=(W,X)=>{let Y=W.value;if(!(Y instanceof Map))return W.issues.push({expected:"map",code:"invalid_type",input:Y,inst:$}),W;let U=[];W.value=new Map;for(let[Z,H]of Y){let G=J.keyType._zod.run({value:Z,issues:[]},X),z=J.valueType._zod.run({value:H,issues:[]},X);if(G instanceof Promise||z instanceof Promise)U.push(Promise.all([G,z]).then(([w,D])=>{fC(w,D,W,Z,Y,$,X)}));else fC(G,z,W,Z,Y,$,X)}if(U.length)return Promise.all(U).then(()=>W);return W}});function fC($,J,W,X,Y,U,Z){if($.issues.length)if(WU.has(typeof X))W.issues.push(...G6(X,$.issues));else W.issues.push({code:"invalid_key",origin:"map",input:Y,inst:U,issues:$.issues.map((H)=>z6(H,Z,F4()))});if(J.issues.length)if(WU.has(typeof X))W.issues.push(...G6(X,J.issues));else W.issues.push({origin:"map",code:"invalid_element",input:Y,inst:U,key:X,issues:J.issues.map((H)=>z6(H,Z,F4()))});W.value.set($.value,J.value)}var tM=f("$ZodSet",($,J)=>{S0.init($,J),$._zod.parse=(W,X)=>{let Y=W.value;if(!(Y instanceof Set))return W.issues.push({input:Y,inst:$,expected:"set",code:"invalid_type"}),W;let U=[];W.value=new Set;for(let Z of Y){let H=J.valueType._zod.run({value:Z,issues:[]},X);if(H instanceof Promise)U.push(H.then((G)=>mC(G,W)));else mC(H,W)}if(U.length)return Promise.all(U).then(()=>W);return W}});function mC($,J){if($.issues.length)J.issues.push(...$.issues);J.value.add($.value)}var aM=f("$ZodEnum",($,J)=>{S0.init($,J);let W=$U(J.entries),X=new Set(W);$._zod.values=X,$._zod.pattern=new RegExp(`^(${W.filter((Y)=>WU.has(typeof Y)).map((Y)=>typeof Y==="string"?t8(Y):Y.toString()).join("|")})$`),$._zod.parse=(Y,U)=>{let Z=Y.value;if(X.has(Z))return Y;return Y.issues.push({code:"invalid_value",values:W,input:Z,inst:$}),Y}}),oM=f("$ZodLiteral",($,J)=>{if(S0.init($,J),J.values.length===0)throw Error("Cannot create literal schema with no valid values");$._zod.values=new Set(J.values),$._zod.pattern=new RegExp(`^(${J.values.map((W)=>typeof W==="string"?t8(W):W?t8(W.toString()):String(W)).join("|")})$`),$._zod.parse=(W,X)=>{let Y=W.value;if($._zod.values.has(Y))return W;return W.issues.push({code:"invalid_value",values:J.values,input:Y,inst:$}),W}}),sM=f("$ZodFile",($,J)=>{S0.init($,J),$._zod.parse=(W,X)=>{let Y=W.value;if(Y instanceof File)return W;return W.issues.push({expected:"file",code:"invalid_type",input:Y,inst:$}),W}}),eM=f("$ZodTransform",($,J)=>{S0.init($,J),$._zod.parse=(W,X)=>{if(X.direction==="backward")throw new I7($.constructor.name);let Y=J.transform(W.value,W);if(X.async)return(Y instanceof Promise?Y:Promise.resolve(Y)).then((Z)=>{return W.value=Z,W});if(Y instanceof Promise)throw new i8;return W.value=Y,W}});function yC($,J){if($.issues.length&&J===void 0)return{issues:[],value:void 0};return $}var $V=f("$ZodOptional",($,J)=>{S0.init($,J),$._zod.optin="optional",$._zod.optout="optional",m0($._zod,"values",()=>{return J.innerType._zod.values?new Set([...J.innerType._zod.values,void 0]):void 0}),m0($._zod,"pattern",()=>{let W=J.innerType._zod.pattern;return W?new RegExp(`^(${JU(W.source)})?$`):void 0}),$._zod.parse=(W,X)=>{if(J.innerType._zod.optin==="optional"){let Y=J.innerType._zod.run(W,X);if(Y instanceof Promise)return Y.then((U)=>yC(U,W.value));return yC(Y,W.value)}if(W.value===void 0)return W;return J.innerType._zod.run(W,X)}}),JV=f("$ZodNullable",($,J)=>{S0.init($,J),m0($._zod,"optin",()=>J.innerType._zod.optin),m0($._zod,"optout",()=>J.innerType._zod.optout),m0($._zod,"pattern",()=>{let W=J.innerType._zod.pattern;return W?new RegExp(`^(${JU(W.source)}|null)$`):void 0}),m0($._zod,"values",()=>{return J.innerType._zod.values?new Set([...J.innerType._zod.values,null]):void 0}),$._zod.parse=(W,X)=>{if(W.value===null)return W;return J.innerType._zod.run(W,X)}}),WV=f("$ZodDefault",($,J)=>{S0.init($,J),$._zod.optin="optional",m0($._zod,"values",()=>J.innerType._zod.values),$._zod.parse=(W,X)=>{if(X.direction==="backward")return J.innerType._zod.run(W,X);if(W.value===void 0)return W.value=J.defaultValue,W;let Y=J.innerType._zod.run(W,X);if(Y instanceof Promise)return Y.then((U)=>cC(U,J));return cC(Y,J)}});function cC($,J){if($.value===void 0)$.value=J.defaultValue;return $}var XV=f("$ZodPrefault",($,J)=>{S0.init($,J),$._zod.optin="optional",m0($._zod,"values",()=>J.innerType._zod.values),$._zod.parse=(W,X)=>{if(X.direction==="backward")return J.innerType._zod.run(W,X);if(W.value===void 0)W.value=J.defaultValue;return J.innerType._zod.run(W,X)}}),YV=f("$ZodNonOptional",($,J)=>{S0.init($,J),m0($._zod,"values",()=>{let W=J.innerType._zod.values;return W?new Set([...W].filter((X)=>X!==void 0)):void 0}),$._zod.parse=(W,X)=>{let Y=J.innerType._zod.run(W,X);if(Y instanceof Promise)return Y.then((U)=>uC(U,$));return uC(Y,$)}});function uC($,J){if(!$.issues.length&&$.value===void 0)$.issues.push({code:"invalid_type",expected:"nonoptional",input:$.value,inst:J});return $}var UV=f("$ZodSuccess",($,J)=>{S0.init($,J),$._zod.parse=(W,X)=>{if(X.direction==="backward")throw new I7("ZodSuccess");let Y=J.innerType._zod.run(W,X);if(Y instanceof Promise)return Y.then((U)=>{return W.value=U.issues.length===0,W});return W.value=Y.issues.length===0,W}}),ZV=f("$ZodCatch",($,J)=>{S0.init($,J),m0($._zod,"optin",()=>J.innerType._zod.optin),m0($._zod,"optout",()=>J.innerType._zod.optout),m0($._zod,"values",()=>J.innerType._zod.values),$._zod.parse=(W,X)=>{if(X.direction==="backward")return J.innerType._zod.run(W,X);let Y=J.innerType._zod.run(W,X);if(Y instanceof Promise)return Y.then((U)=>{if(W.value=U.value,U.issues.length)W.value=J.catchValue({...W,error:{issues:U.issues.map((Z)=>z6(Z,X,F4()))},input:W.value}),W.issues=[];return W});if(W.value=Y.value,Y.issues.length)W.value=J.catchValue({...W,error:{issues:Y.issues.map((U)=>z6(U,X,F4()))},input:W.value}),W.issues=[];return W}}),HV=f("$ZodNaN",($,J)=>{S0.init($,J),$._zod.parse=(W,X)=>{if(typeof W.value!=="number"||!Number.isNaN(W.value))return W.issues.push({input:W.value,inst:$,expected:"nan",code:"invalid_type"}),W;return W}}),GV=f("$ZodPipe",($,J)=>{S0.init($,J),m0($._zod,"values",()=>J.in._zod.values),m0($._zod,"optin",()=>J.in._zod.optin),m0($._zod,"optout",()=>J.out._zod.optout),m0($._zod,"propValues",()=>J.in._zod.propValues),$._zod.parse=(W,X)=>{if(X.direction==="backward"){let U=J.out._zod.run(W,X);if(U instanceof Promise)return U.then((Z)=>j3(Z,J.in,X));return j3(U,J.in,X)}let Y=J.in._zod.run(W,X);if(Y instanceof Promise)return Y.then((U)=>j3(U,J.out,X));return j3(Y,J.out,X)}});function j3($,J,W){if($.issues.length)return $.aborted=!0,$;return J._zod.run({value:$.value,issues:$.issues},W)}var DU=f("$ZodCodec",($,J)=>{S0.init($,J),m0($._zod,"values",()=>J.in._zod.values),m0($._zod,"optin",()=>J.in._zod.optin),m0($._zod,"optout",()=>J.out._zod.optout),m0($._zod,"propValues",()=>J.in._zod.propValues),$._zod.parse=(W,X)=>{if((X.direction||"forward")==="forward"){let U=J.in._zod.run(W,X);if(U instanceof Promise)return U.then((Z)=>k3(Z,J,X));return k3(U,J,X)}else{let U=J.out._zod.run(W,X);if(U instanceof Promise)return U.then((Z)=>k3(Z,J,X));return k3(U,J,X)}}});function k3($,J,W){if($.issues.length)return $.aborted=!0,$;if((W.direction||"forward")==="forward"){let Y=J.transform($.value,$);if(Y instanceof Promise)return Y.then((U)=>v3($,U,J.out,W));return v3($,Y,J.out,W)}else{let Y=J.reverseTransform($.value,$);if(Y instanceof Promise)return Y.then((U)=>v3($,U,J.in,W));return v3($,Y,J.in,W)}}function v3($,J,W,X){if($.issues.length)return $.aborted=!0,$;return W._zod.run({value:J,issues:$.issues},X)}var zV=f("$ZodReadonly",($,J)=>{S0.init($,J),m0($._zod,"propValues",()=>J.innerType._zod.propValues),m0($._zod,"values",()=>J.innerType._zod.values),m0($._zod,"optin",()=>J.innerType._zod.optin),m0($._zod,"optout",()=>J.innerType._zod.optout),$._zod.parse=(W,X)=>{if(X.direction==="backward")return J.innerType._zod.run(W,X);let Y=J.innerType._zod.run(W,X);if(Y instanceof Promise)return Y.then(pC);return pC(Y)}});function pC($){return $.value=Object.freeze($.value),$}var wV=f("$ZodTemplateLiteral",($,J)=>{S0.init($,J);let W=[];for(let X of J.parts)if(typeof X==="object"&&X!==null){if(!X._zod.pattern)throw Error(`Invalid template literal part, no pattern found: ${[...X._zod.traits].shift()}`);let Y=X._zod.pattern instanceof RegExp?X._zod.pattern.source:X._zod.pattern;if(!Y)throw Error(`Invalid template literal part: ${X._zod.traits}`);let U=Y.startsWith("^")?1:0,Z=Y.endsWith("$")?Y.length-1:Y.length;W.push(Y.slice(U,Z))}else if(X===null||UE.has(typeof X))W.push(t8(`${X}`));else throw Error(`Invalid template literal part: ${X}`);$._zod.pattern=new RegExp(`^${W.join("")}$`),$._zod.parse=(X,Y)=>{if(typeof X.value!=="string")return X.issues.push({input:X.value,inst:$,expected:"template_literal",code:"invalid_type"}),X;if($._zod.pattern.lastIndex=0,!$._zod.pattern.test(X.value))return X.issues.push({input:X.value,inst:$,code:"invalid_format",format:J.format??"template_literal",pattern:$._zod.pattern.source}),X;return X}}),DV=f("$ZodFunction",($,J)=>{return S0.init($,J),$._def=J,$._zod.def=J,$.implement=(W)=>{if(typeof W!=="function")throw Error("implement() must be called with a function");return function(...X){let Y=$._def.input?O3($._def.input,X):X,U=Reflect.apply(W,this,Y);if($._def.output)return O3($._def.output,U);return U}},$.implementAsync=(W)=>{if(typeof W!=="function")throw Error("implementAsync() must be called with a function");return async function(...X){let Y=$._def.input?await F3($._def.input,X):X,U=await Reflect.apply(W,this,Y);if($._def.output)return await F3($._def.output,U);return U}},$._zod.parse=(W,X)=>{if(typeof W.value!=="function")return W.issues.push({code:"invalid_type",expected:"function",input:W.value,inst:$}),W;if($._def.output&&$._def.output._zod.def.type==="promise")W.value=$.implementAsync(W.value);else W.value=$.implement(W.value);return W},$.input=(...W)=>{let X=$.constructor;if(Array.isArray(W[0]))return new X({type:"function",input:new x3({type:"tuple",items:W[0],rest:W[1]}),output:$._def.output});return new X({type:"function",input:W[0],output:$._def.output})},$.output=(W)=>{return new $.constructor({type:"function",input:$._def.input,output:W})},$}),KV=f("$ZodPromise",($,J)=>{S0.init($,J),$._zod.parse=(W,X)=>{return Promise.resolve(W.value).then((Y)=>J.innerType._zod.run({value:Y,issues:[]},X))}}),OV=f("$ZodLazy",($,J)=>{S0.init($,J),m0($._zod,"innerType",()=>J.getter()),m0($._zod,"pattern",()=>$._zod.innerType._zod.pattern),m0($._zod,"propValues",()=>$._zod.innerType._zod.propValues),m0($._zod,"optin",()=>$._zod.innerType._zod.optin??void 0),m0($._zod,"optout",()=>$._zod.innerType._zod.optout??void 0),$._zod.parse=(W,X)=>{return $._zod.innerType._zod.run(W,X)}}),FV=f("$ZodCustom",($,J)=>{q1.init($,J),S0.init($,J),$._zod.parse=(W,X)=>{return W},$._zod.check=(W)=>{let X=W.value,Y=J.fn(X);if(Y instanceof Promise)return Y.then((U)=>dC(U,W,X,$));dC(Y,W,X,$);return}});function dC($,J,W,X){if(!$){let Y={code:"custom",input:W,inst:X,path:[...X._zod.def.path??[]],continue:!X._zod.def.abort};if(X._zod.def.params)Y.params=X._zod.def.params;J.issues.push(zX(Y))}}var VU={};x$(VU,{zhTW:()=>XQ,zhCN:()=>WQ,yo:()=>YQ,vi:()=>JQ,ur:()=>$Q,uk:()=>MU,ua:()=>eV,tr:()=>sV,th:()=>oV,ta:()=>aV,sv:()=>tV,sl:()=>iV,ru:()=>nV,pt:()=>rV,ps:()=>dV,pl:()=>lV,ota:()=>pV,no:()=>uV,nl:()=>cV,ms:()=>yV,mk:()=>mV,lt:()=>fV,ko:()=>gV,km:()=>OU,kh:()=>bV,ka:()=>xV,ja:()=>hV,it:()=>qV,is:()=>TV,id:()=>CV,hu:()=>vV,he:()=>kV,frCA:()=>jV,fr:()=>SV,fi:()=>RV,fa:()=>BV,es:()=>NV,eo:()=>_V,en:()=>KU,de:()=>PV,da:()=>LV,cs:()=>IV,ca:()=>AV,bg:()=>QV,be:()=>VV,az:()=>MV,ar:()=>EV});var Uo=()=>{let $={string:{unit:"\u062D\u0631\u0641",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},file:{unit:"\u0628\u0627\u064A\u062A",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},array:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},set:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"NaN":"number";case"object":{if(Array.isArray(Y))return"array";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"\u0645\u062F\u062E\u0644",email:"\u0628\u0631\u064A\u062F \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A",url:"\u0631\u0627\u0628\u0637",emoji:"\u0625\u064A\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u064A\u062E \u0648\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",date:"\u062A\u0627\u0631\u064A\u062E \u0628\u0645\u0639\u064A\u0627\u0631 ISO",time:"\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",duration:"\u0645\u062F\u0629 \u0628\u0645\u0639\u064A\u0627\u0631 ISO",ipv4:"\u0639\u0646\u0648\u0627\u0646 IPv4",ipv6:"\u0639\u0646\u0648\u0627\u0646 IPv6",cidrv4:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv4",cidrv6:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv6",base64:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64-encoded",base64url:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64url-encoded",json_string:"\u0646\u064E\u0635 \u0639\u0644\u0649 \u0647\u064A\u0626\u0629 JSON",e164:"\u0631\u0642\u0645 \u0647\u0627\u062A\u0641 \u0628\u0645\u0639\u064A\u0627\u0631 E.164",jwt:"JWT",template_literal:"\u0645\u062F\u062E\u0644"};return(Y)=>{switch(Y.code){case"invalid_type":return`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${Y.expected}\u060C \u0648\u0644\u0643\u0646 \u062A\u0645 \u0625\u062F\u062E\u0627\u0644 ${W(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${t(Y.values[0])}`;return`\u0627\u062E\u062A\u064A\u0627\u0631 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062A\u0648\u0642\u0639 \u0627\u0646\u062A\u0642\u0627\u0621 \u0623\u062D\u062F \u0647\u0630\u0647 \u0627\u0644\u062E\u064A\u0627\u0631\u0627\u062A: ${c(Y.values,"|")}`;case"too_big":{let U=Y.inclusive?"<=":"<",Z=J(Y.origin);if(Z)return` \u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${Y.origin??"\u0627\u0644\u0642\u064A\u0645\u0629"} ${U} ${Y.maximum.toString()} ${Z.unit??"\u0639\u0646\u0635\u0631"}`;return`\u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${Y.origin??"\u0627\u0644\u0642\u064A\u0645\u0629"} ${U} ${Y.maximum.toString()}`}case"too_small":{let U=Y.inclusive?">=":">",Z=J(Y.origin);if(Z)return`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${Y.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${U} ${Y.minimum.toString()} ${Z.unit}`;return`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${Y.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${U} ${Y.minimum.toString()}`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0628\u062F\u0623 \u0628\u0640 "${Y.prefix}"`;if(U.format==="ends_with")return`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0646\u062A\u0647\u064A \u0628\u0640 "${U.suffix}"`;if(U.format==="includes")return`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u062A\u0636\u0645\u0651\u064E\u0646 "${U.includes}"`;if(U.format==="regex")return`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0637\u0627\u0628\u0642 \u0627\u0644\u0646\u0645\u0637 ${U.pattern}`;return`${X[U.format]??Y.format} \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644`}case"not_multiple_of":return`\u0631\u0642\u0645 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0645\u0646 \u0645\u0636\u0627\u0639\u0641\u0627\u062A ${Y.divisor}`;case"unrecognized_keys":return`\u0645\u0639\u0631\u0641${Y.keys.length>1?"\u0627\u062A":""} \u063A\u0631\u064A\u0628${Y.keys.length>1?"\u0629":""}: ${c(Y.keys,"\u060C ")}`;case"invalid_key":return`\u0645\u0639\u0631\u0641 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${Y.origin}`;case"invalid_union":return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644";case"invalid_element":return`\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${Y.origin}`;default:return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644"}}};function EV(){return{localeError:Uo()}}var Zo=()=>{let $={string:{unit:"simvol",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"element",verb:"olmal\u0131d\u0131r"},set:{unit:"element",verb:"olmal\u0131d\u0131r"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"NaN":"number";case"object":{if(Array.isArray(Y))return"array";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return(Y)=>{switch(Y.code){case"invalid_type":return`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${Y.expected}, daxil olan ${W(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${t(Y.values[0])}`;return`Yanl\u0131\u015F se\xE7im: a\u015Fa\u011F\u0131dak\u0131lardan biri olmal\u0131d\u0131r: ${c(Y.values,"|")}`;case"too_big":{let U=Y.inclusive?"<=":"<",Z=J(Y.origin);if(Z)return`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${Y.origin??"d\u0259y\u0259r"} ${U}${Y.maximum.toString()} ${Z.unit??"element"}`;return`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${Y.origin??"d\u0259y\u0259r"} ${U}${Y.maximum.toString()}`}case"too_small":{let U=Y.inclusive?">=":">",Z=J(Y.origin);if(Z)return`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${Y.origin} ${U}${Y.minimum.toString()} ${Z.unit}`;return`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${Y.origin} ${U}${Y.minimum.toString()}`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`Yanl\u0131\u015F m\u0259tn: "${U.prefix}" il\u0259 ba\u015Flamal\u0131d\u0131r`;if(U.format==="ends_with")return`Yanl\u0131\u015F m\u0259tn: "${U.suffix}" il\u0259 bitm\u0259lidir`;if(U.format==="includes")return`Yanl\u0131\u015F m\u0259tn: "${U.includes}" daxil olmal\u0131d\u0131r`;if(U.format==="regex")return`Yanl\u0131\u015F m\u0259tn: ${U.pattern} \u015Fablonuna uy\u011Fun olmal\u0131d\u0131r`;return`Yanl\u0131\u015F ${X[U.format]??Y.format}`}case"not_multiple_of":return`Yanl\u0131\u015F \u0259d\u0259d: ${Y.divisor} il\u0259 b\xF6l\xFCn\u0259 bil\u0259n olmal\u0131d\u0131r`;case"unrecognized_keys":return`Tan\u0131nmayan a\xE7ar${Y.keys.length>1?"lar":""}: ${c(Y.keys,", ")}`;case"invalid_key":return`${Y.origin} daxilind\u0259 yanl\u0131\u015F a\xE7ar`;case"invalid_union":return"Yanl\u0131\u015F d\u0259y\u0259r";case"invalid_element":return`${Y.origin} daxilind\u0259 yanl\u0131\u015F d\u0259y\u0259r`;default:return"Yanl\u0131\u015F d\u0259y\u0259r"}}};function MV(){return{localeError:Zo()}}function aC($,J,W,X){let Y=Math.abs($),U=Y%10,Z=Y%100;if(Z>=11&&Z<=19)return X;if(U===1)return J;if(U>=2&&U<=4)return W;return X}var Ho=()=>{let $={string:{unit:{one:"\u0441\u0456\u043C\u0432\u0430\u043B",few:"\u0441\u0456\u043C\u0432\u0430\u043B\u044B",many:"\u0441\u0456\u043C\u0432\u0430\u043B\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u044B",many:"\u0431\u0430\u0439\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"NaN":"\u043B\u0456\u043A";case"object":{if(Array.isArray(Y))return"\u043C\u0430\u0441\u0456\u045E";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"\u0443\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0430\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0456 \u0447\u0430\u0441",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0447\u0430\u0441",duration:"ISO \u043F\u0440\u0430\u0446\u044F\u0433\u043B\u0430\u0441\u0446\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0430\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0430\u0441",cidrv4:"IPv4 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",base64:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64",base64url:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64url",json_string:"JSON \u0440\u0430\u0434\u043E\u043A",e164:"\u043D\u0443\u043C\u0430\u0440 E.164",jwt:"JWT",template_literal:"\u0443\u0432\u043E\u0434"};return(Y)=>{switch(Y.code){case"invalid_type":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u045E\u0441\u044F ${Y.expected}, \u0430\u0442\u0440\u044B\u043C\u0430\u043D\u0430 ${W(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F ${t(Y.values[0])}`;return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0432\u0430\u0440\u044B\u044F\u043D\u0442: \u0447\u0430\u043A\u0430\u045E\u0441\u044F \u0430\u0434\u0437\u0456\u043D \u0437 ${c(Y.values,"|")}`;case"too_big":{let U=Y.inclusive?"<=":"<",Z=J(Y.origin);if(Z){let H=Number(Y.maximum),G=aC(H,Z.unit.one,Z.unit.few,Z.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${Y.origin??"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${Z.verb} ${U}${Y.maximum.toString()} ${G}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${Y.origin??"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${U}${Y.maximum.toString()}`}case"too_small":{let U=Y.inclusive?">=":">",Z=J(Y.origin);if(Z){let H=Number(Y.minimum),G=aC(H,Z.unit.one,Z.unit.few,Z.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${Y.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${Z.verb} ${U}${Y.minimum.toString()} ${G}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${Y.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${U}${Y.minimum.toString()}`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u043F\u0430\u0447\u044B\u043D\u0430\u0446\u0446\u0430 \u0437 "${U.prefix}"`;if(U.format==="ends_with")return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u0430\u043A\u0430\u043D\u0447\u0432\u0430\u0446\u0446\u0430 \u043D\u0430 "${U.suffix}"`;if(U.format==="includes")return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u043C\u044F\u0448\u0447\u0430\u0446\u044C "${U.includes}"`;if(U.format==="regex")return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0430\u0434\u043F\u0430\u0432\u044F\u0434\u0430\u0446\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${U.pattern}`;return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B ${X[U.format]??Y.format}`}case"not_multiple_of":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043B\u0456\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0431\u044B\u0446\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${Y.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u0430\u0437\u043D\u0430\u043D\u044B ${Y.keys.length>1?"\u043A\u043B\u044E\u0447\u044B":"\u043A\u043B\u044E\u0447"}: ${c(Y.keys,", ")}`;case"invalid_key":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043A\u043B\u044E\u0447 \u0443 ${Y.origin}`;case"invalid_union":return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434";case"invalid_element":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u0430\u0435 \u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435 \u045E ${Y.origin}`;default:return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434"}}};function VV(){return{localeError:Ho()}}var Go=($)=>{let J=typeof $;switch(J){case"number":return Number.isNaN($)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray($))return"\u043C\u0430\u0441\u0438\u0432";if($===null)return"null";if(Object.getPrototypeOf($)!==Object.prototype&&$.constructor)return $.constructor.name}}return J},zo=()=>{let $={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},file:{unit:"\u0431\u0430\u0439\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"}};function J(X){return $[X]??null}let W={regex:"\u0432\u0445\u043E\u0434",email:"\u0438\u043C\u0435\u0439\u043B \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0436\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u043F\u0440\u043E\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u043E\u0441\u0442",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"base64-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",base64url:"base64url-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",json_string:"JSON \u043D\u0438\u0437",e164:"E.164 \u043D\u043E\u043C\u0435\u0440",jwt:"JWT",template_literal:"\u0432\u0445\u043E\u0434"};return(X)=>{switch(X.code){case"invalid_type":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${X.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D ${Go(X.input)}`;case"invalid_value":if(X.values.length===1)return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${t(X.values[0])}`;return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u043E\u043F\u0446\u0438\u044F: \u043E\u0447\u0430\u043A\u0432\u0430\u043D\u043E \u0435\u0434\u043D\u043E \u043E\u0442 ${c(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",U=J(X.origin);if(U)return`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${X.origin??"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${Y}${X.maximum.toString()} ${U.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430"}`;return`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${X.origin??"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0431\u044A\u0434\u0435 ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",U=J(X.origin);if(U)return`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${X.origin} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${Y}${X.minimum.toString()} ${U.unit}`;return`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${X.origin} \u0434\u0430 \u0431\u044A\u0434\u0435 ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u0432\u0430 \u0441 "${Y.prefix}"`;if(Y.format==="ends_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u0432\u044A\u0440\u0448\u0432\u0430 \u0441 "${Y.suffix}"`;if(Y.format==="includes")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0432\u043A\u043B\u044E\u0447\u0432\u0430 "${Y.includes}"`;if(Y.format==="regex")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0441\u044A\u0432\u043F\u0430\u0434\u0430 \u0441 ${Y.pattern}`;let U="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D";if(Y.format==="emoji")U="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E";if(Y.format==="datetime")U="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E";if(Y.format==="date")U="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430";if(Y.format==="time")U="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E";if(Y.format==="duration")U="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430";return`${U} ${W[Y.format]??X.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E \u0447\u0438\u0441\u043B\u043E: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0431\u044A\u0434\u0435 \u043A\u0440\u0430\u0442\u043D\u043E \u043D\u0430 ${X.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0437\u043F\u043E\u0437\u043D\u0430\u0442${X.keys.length>1?"\u0438":""} \u043A\u043B\u044E\u0447${X.keys.length>1?"\u043E\u0432\u0435":""}: ${c(X.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043A\u043B\u044E\u0447 \u0432 ${X.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434";case"invalid_element":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442 \u0432 ${X.origin}`;default:return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434"}}};function QV(){return{localeError:zo()}}var wo=()=>{let $={string:{unit:"car\xE0cters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"NaN":"number";case"object":{if(Array.isArray(Y))return"array";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"entrada",email:"adre\xE7a electr\xF2nica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adre\xE7a IPv4",ipv6:"adre\xE7a IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return(Y)=>{switch(Y.code){case"invalid_type":return`Tipus inv\xE0lid: s'esperava ${Y.expected}, s'ha rebut ${W(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Valor inv\xE0lid: s'esperava ${t(Y.values[0])}`;return`Opci\xF3 inv\xE0lida: s'esperava una de ${c(Y.values," o ")}`;case"too_big":{let U=Y.inclusive?"com a m\xE0xim":"menys de",Z=J(Y.origin);if(Z)return`Massa gran: s'esperava que ${Y.origin??"el valor"} contingu\xE9s ${U} ${Y.maximum.toString()} ${Z.unit??"elements"}`;return`Massa gran: s'esperava que ${Y.origin??"el valor"} fos ${U} ${Y.maximum.toString()}`}case"too_small":{let U=Y.inclusive?"com a m\xEDnim":"m\xE9s de",Z=J(Y.origin);if(Z)return`Massa petit: s'esperava que ${Y.origin} contingu\xE9s ${U} ${Y.minimum.toString()} ${Z.unit}`;return`Massa petit: s'esperava que ${Y.origin} fos ${U} ${Y.minimum.toString()}`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`Format inv\xE0lid: ha de comen\xE7ar amb "${U.prefix}"`;if(U.format==="ends_with")return`Format inv\xE0lid: ha d'acabar amb "${U.suffix}"`;if(U.format==="includes")return`Format inv\xE0lid: ha d'incloure "${U.includes}"`;if(U.format==="regex")return`Format inv\xE0lid: ha de coincidir amb el patr\xF3 ${U.pattern}`;return`Format inv\xE0lid per a ${X[U.format]??Y.format}`}case"not_multiple_of":return`N\xFAmero inv\xE0lid: ha de ser m\xFAltiple de ${Y.divisor}`;case"unrecognized_keys":return`Clau${Y.keys.length>1?"s":""} no reconeguda${Y.keys.length>1?"s":""}: ${c(Y.keys,", ")}`;case"invalid_key":return`Clau inv\xE0lida a ${Y.origin}`;case"invalid_union":return"Entrada inv\xE0lida";case"invalid_element":return`Element inv\xE0lid a ${Y.origin}`;default:return"Entrada inv\xE0lida"}}};function AV(){return{localeError:wo()}}var Do=()=>{let $={string:{unit:"znak\u016F",verb:"m\xEDt"},file:{unit:"bajt\u016F",verb:"m\xEDt"},array:{unit:"prvk\u016F",verb:"m\xEDt"},set:{unit:"prvk\u016F",verb:"m\xEDt"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"NaN":"\u010D\xEDslo";case"string":return"\u0159et\u011Bzec";case"boolean":return"boolean";case"bigint":return"bigint";case"function":return"funkce";case"symbol":return"symbol";case"undefined":return"undefined";case"object":{if(Array.isArray(Y))return"pole";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"regul\xE1rn\xED v\xFDraz",email:"e-mailov\xE1 adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a \u010Das ve form\xE1tu ISO",date:"datum ve form\xE1tu ISO",time:"\u010Das ve form\xE1tu ISO",duration:"doba trv\xE1n\xED ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64",base64url:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64url",json_string:"\u0159et\u011Bzec ve form\xE1tu JSON",e164:"\u010D\xEDslo E.164",jwt:"JWT",template_literal:"vstup"};return(Y)=>{switch(Y.code){case"invalid_type":return`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${Y.expected}, obdr\u017Eeno ${W(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${t(Y.values[0])}`;return`Neplatn\xE1 mo\u017Enost: o\u010Dek\xE1v\xE1na jedna z hodnot ${c(Y.values,"|")}`;case"too_big":{let U=Y.inclusive?"<=":"<",Z=J(Y.origin);if(Z)return`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${Y.origin??"hodnota"} mus\xED m\xEDt ${U}${Y.maximum.toString()} ${Z.unit??"prvk\u016F"}`;return`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${Y.origin??"hodnota"} mus\xED b\xFDt ${U}${Y.maximum.toString()}`}case"too_small":{let U=Y.inclusive?">=":">",Z=J(Y.origin);if(Z)return`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${Y.origin??"hodnota"} mus\xED m\xEDt ${U}${Y.minimum.toString()} ${Z.unit??"prvk\u016F"}`;return`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${Y.origin??"hodnota"} mus\xED b\xFDt ${U}${Y.minimum.toString()}`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`Neplatn\xFD \u0159et\u011Bzec: mus\xED za\u010D\xEDnat na "${U.prefix}"`;if(U.format==="ends_with")return`Neplatn\xFD \u0159et\u011Bzec: mus\xED kon\u010Dit na "${U.suffix}"`;if(U.format==="includes")return`Neplatn\xFD \u0159et\u011Bzec: mus\xED obsahovat "${U.includes}"`;if(U.format==="regex")return`Neplatn\xFD \u0159et\u011Bzec: mus\xED odpov\xEDdat vzoru ${U.pattern}`;return`Neplatn\xFD form\xE1t ${X[U.format]??Y.format}`}case"not_multiple_of":return`Neplatn\xE9 \u010D\xEDslo: mus\xED b\xFDt n\xE1sobkem ${Y.divisor}`;case"unrecognized_keys":return`Nezn\xE1m\xE9 kl\xED\u010De: ${c(Y.keys,", ")}`;case"invalid_key":return`Neplatn\xFD kl\xED\u010D v ${Y.origin}`;case"invalid_union":return"Neplatn\xFD vstup";case"invalid_element":return`Neplatn\xE1 hodnota v ${Y.origin}`;default:return"Neplatn\xFD vstup"}}};function IV(){return{localeError:Do()}}var Ko=()=>{let $={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}},J={string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"s\xE6t",file:"fil"};function W(Z){return $[Z]??null}function X(Z){return J[Z]??Z}let Y=(Z)=>{let H=typeof Z;switch(H){case"number":return Number.isNaN(Z)?"NaN":"tal";case"object":{if(Array.isArray(Z))return"liste";if(Z===null)return"null";if(Object.getPrototypeOf(Z)!==Object.prototype&&Z.constructor)return Z.constructor.name;return"objekt"}}return H},U={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkesl\xE6t",date:"ISO-dato",time:"ISO-klokkesl\xE6t",duration:"ISO-varighed",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return(Z)=>{switch(Z.code){case"invalid_type":return`Ugyldigt input: forventede ${X(Z.expected)}, fik ${X(Y(Z.input))}`;case"invalid_value":if(Z.values.length===1)return`Ugyldig v\xE6rdi: forventede ${t(Z.values[0])}`;return`Ugyldigt valg: forventede en af f\xF8lgende ${c(Z.values,"|")}`;case"too_big":{let H=Z.inclusive?"<=":"<",G=W(Z.origin),z=X(Z.origin);if(G)return`For stor: forventede ${z??"value"} ${G.verb} ${H} ${Z.maximum.toString()} ${G.unit??"elementer"}`;return`For stor: forventede ${z??"value"} havde ${H} ${Z.maximum.toString()}`}case"too_small":{let H=Z.inclusive?">=":">",G=W(Z.origin),z=X(Z.origin);if(G)return`For lille: forventede ${z} ${G.verb} ${H} ${Z.minimum.toString()} ${G.unit}`;return`For lille: forventede ${z} havde ${H} ${Z.minimum.toString()}`}case"invalid_format":{let H=Z;if(H.format==="starts_with")return`Ugyldig streng: skal starte med "${H.prefix}"`;if(H.format==="ends_with")return`Ugyldig streng: skal ende med "${H.suffix}"`;if(H.format==="includes")return`Ugyldig streng: skal indeholde "${H.includes}"`;if(H.format==="regex")return`Ugyldig streng: skal matche m\xF8nsteret ${H.pattern}`;return`Ugyldig ${U[H.format]??Z.format}`}case"not_multiple_of":return`Ugyldigt tal: skal v\xE6re deleligt med ${Z.divisor}`;case"unrecognized_keys":return`${Z.keys.length>1?"Ukendte n\xF8gler":"Ukendt n\xF8gle"}: ${c(Z.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8gle i ${Z.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig v\xE6rdi i ${Z.origin}`;default:return"Ugyldigt input"}}};function LV(){return{localeError:Ko()}}var Oo=()=>{let $={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"NaN":"Zahl";case"object":{if(Array.isArray(Y))return"Array";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"};return(Y)=>{switch(Y.code){case"invalid_type":return`Ung\xFCltige Eingabe: erwartet ${Y.expected}, erhalten ${W(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Ung\xFCltige Eingabe: erwartet ${t(Y.values[0])}`;return`Ung\xFCltige Option: erwartet eine von ${c(Y.values,"|")}`;case"too_big":{let U=Y.inclusive?"<=":"<",Z=J(Y.origin);if(Z)return`Zu gro\xDF: erwartet, dass ${Y.origin??"Wert"} ${U}${Y.maximum.toString()} ${Z.unit??"Elemente"} hat`;return`Zu gro\xDF: erwartet, dass ${Y.origin??"Wert"} ${U}${Y.maximum.toString()} ist`}case"too_small":{let U=Y.inclusive?">=":">",Z=J(Y.origin);if(Z)return`Zu klein: erwartet, dass ${Y.origin} ${U}${Y.minimum.toString()} ${Z.unit} hat`;return`Zu klein: erwartet, dass ${Y.origin} ${U}${Y.minimum.toString()} ist`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`Ung\xFCltiger String: muss mit "${U.prefix}" beginnen`;if(U.format==="ends_with")return`Ung\xFCltiger String: muss mit "${U.suffix}" enden`;if(U.format==="includes")return`Ung\xFCltiger String: muss "${U.includes}" enthalten`;if(U.format==="regex")return`Ung\xFCltiger String: muss dem Muster ${U.pattern} entsprechen`;return`Ung\xFCltig: ${X[U.format]??Y.format}`}case"not_multiple_of":return`Ung\xFCltige Zahl: muss ein Vielfaches von ${Y.divisor} sein`;case"unrecognized_keys":return`${Y.keys.length>1?"Unbekannte Schl\xFCssel":"Unbekannter Schl\xFCssel"}: ${c(Y.keys,", ")}`;case"invalid_key":return`Ung\xFCltiger Schl\xFCssel in ${Y.origin}`;case"invalid_union":return"Ung\xFCltige Eingabe";case"invalid_element":return`Ung\xFCltiger Wert in ${Y.origin}`;default:return"Ung\xFCltige Eingabe"}}};function PV(){return{localeError:Oo()}}var Fo=($)=>{let J=typeof $;switch(J){case"number":return Number.isNaN($)?"NaN":"number";case"object":{if(Array.isArray($))return"array";if($===null)return"null";if(Object.getPrototypeOf($)!==Object.prototype&&$.constructor)return $.constructor.name}}return J},Eo=()=>{let $={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function J(X){return $[X]??null}let W={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return(X)=>{switch(X.code){case"invalid_type":return`Invalid input: expected ${X.expected}, received ${Fo(X.input)}`;case"invalid_value":if(X.values.length===1)return`Invalid input: expected ${t(X.values[0])}`;return`Invalid option: expected one of ${c(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",U=J(X.origin);if(U)return`Too big: expected ${X.origin??"value"} to have ${Y}${X.maximum.toString()} ${U.unit??"elements"}`;return`Too big: expected ${X.origin??"value"} to be ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",U=J(X.origin);if(U)return`Too small: expected ${X.origin} to have ${Y}${X.minimum.toString()} ${U.unit}`;return`Too small: expected ${X.origin} to be ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`Invalid string: must start with "${Y.prefix}"`;if(Y.format==="ends_with")return`Invalid string: must end with "${Y.suffix}"`;if(Y.format==="includes")return`Invalid string: must include "${Y.includes}"`;if(Y.format==="regex")return`Invalid string: must match pattern ${Y.pattern}`;return`Invalid ${W[Y.format]??X.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${X.divisor}`;case"unrecognized_keys":return`Unrecognized key${X.keys.length>1?"s":""}: ${c(X.keys,", ")}`;case"invalid_key":return`Invalid key in ${X.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${X.origin}`;default:return"Invalid input"}}};function KU(){return{localeError:Eo()}}var Mo=($)=>{let J=typeof $;switch(J){case"number":return Number.isNaN($)?"NaN":"nombro";case"object":{if(Array.isArray($))return"tabelo";if($===null)return"senvalora";if(Object.getPrototypeOf($)!==Object.prototype&&$.constructor)return $.constructor.name}}return J},Vo=()=>{let $={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}};function J(X){return $[X]??null}let W={regex:"enigo",email:"retadreso",url:"URL",emoji:"emo\u011Dio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-da\u016Dro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"};return(X)=>{switch(X.code){case"invalid_type":return`Nevalida enigo: atendi\u011Dis ${X.expected}, ricevi\u011Dis ${Mo(X.input)}`;case"invalid_value":if(X.values.length===1)return`Nevalida enigo: atendi\u011Dis ${t(X.values[0])}`;return`Nevalida opcio: atendi\u011Dis unu el ${c(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",U=J(X.origin);if(U)return`Tro granda: atendi\u011Dis ke ${X.origin??"valoro"} havu ${Y}${X.maximum.toString()} ${U.unit??"elementojn"}`;return`Tro granda: atendi\u011Dis ke ${X.origin??"valoro"} havu ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",U=J(X.origin);if(U)return`Tro malgranda: atendi\u011Dis ke ${X.origin} havu ${Y}${X.minimum.toString()} ${U.unit}`;return`Tro malgranda: atendi\u011Dis ke ${X.origin} estu ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`Nevalida karaktraro: devas komenci\u011Di per "${Y.prefix}"`;if(Y.format==="ends_with")return`Nevalida karaktraro: devas fini\u011Di per "${Y.suffix}"`;if(Y.format==="includes")return`Nevalida karaktraro: devas inkluzivi "${Y.includes}"`;if(Y.format==="regex")return`Nevalida karaktraro: devas kongrui kun la modelo ${Y.pattern}`;return`Nevalida ${W[Y.format]??X.format}`}case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${X.divisor}`;case"unrecognized_keys":return`Nekonata${X.keys.length>1?"j":""} \u015Dlosilo${X.keys.length>1?"j":""}: ${c(X.keys,", ")}`;case"invalid_key":return`Nevalida \u015Dlosilo en ${X.origin}`;case"invalid_union":return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${X.origin}`;default:return"Nevalida enigo"}}};function _V(){return{localeError:Vo()}}var Qo=()=>{let $={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}},J={string:"texto",number:"n\xFAmero",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"n\xFAmero grande",symbol:"s\xEDmbolo",undefined:"indefinido",null:"nulo",function:"funci\xF3n",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeraci\xF3n",union:"uni\xF3n",literal:"literal",promise:"promesa",void:"vac\xEDo",never:"nunca",unknown:"desconocido",any:"cualquiera"};function W(Z){return $[Z]??null}function X(Z){return J[Z]??Z}let Y=(Z)=>{let H=typeof Z;switch(H){case"number":return Number.isNaN(Z)?"NaN":"number";case"object":{if(Array.isArray(Z))return"array";if(Z===null)return"null";if(Object.getPrototypeOf(Z)!==Object.prototype)return Z.constructor.name;return"object"}}return H},U={regex:"entrada",email:"direcci\xF3n de correo electr\xF3nico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duraci\xF3n ISO",ipv4:"direcci\xF3n IPv4",ipv6:"direcci\xF3n IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return(Z)=>{switch(Z.code){case"invalid_type":return`Entrada inv\xE1lida: se esperaba ${X(Z.expected)}, recibido ${X(Y(Z.input))}`;case"invalid_value":if(Z.values.length===1)return`Entrada inv\xE1lida: se esperaba ${t(Z.values[0])}`;return`Opci\xF3n inv\xE1lida: se esperaba una de ${c(Z.values,"|")}`;case"too_big":{let H=Z.inclusive?"<=":"<",G=W(Z.origin),z=X(Z.origin);if(G)return`Demasiado grande: se esperaba que ${z??"valor"} tuviera ${H}${Z.maximum.toString()} ${G.unit??"elementos"}`;return`Demasiado grande: se esperaba que ${z??"valor"} fuera ${H}${Z.maximum.toString()}`}case"too_small":{let H=Z.inclusive?">=":">",G=W(Z.origin),z=X(Z.origin);if(G)return`Demasiado peque\xF1o: se esperaba que ${z} tuviera ${H}${Z.minimum.toString()} ${G.unit}`;return`Demasiado peque\xF1o: se esperaba que ${z} fuera ${H}${Z.minimum.toString()}`}case"invalid_format":{let H=Z;if(H.format==="starts_with")return`Cadena inv\xE1lida: debe comenzar con "${H.prefix}"`;if(H.format==="ends_with")return`Cadena inv\xE1lida: debe terminar en "${H.suffix}"`;if(H.format==="includes")return`Cadena inv\xE1lida: debe incluir "${H.includes}"`;if(H.format==="regex")return`Cadena inv\xE1lida: debe coincidir con el patr\xF3n ${H.pattern}`;return`Inv\xE1lido ${U[H.format]??Z.format}`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: debe ser m\xFAltiplo de ${Z.divisor}`;case"unrecognized_keys":return`Llave${Z.keys.length>1?"s":""} desconocida${Z.keys.length>1?"s":""}: ${c(Z.keys,", ")}`;case"invalid_key":return`Llave inv\xE1lida en ${X(Z.origin)}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido en ${X(Z.origin)}`;default:return"Entrada inv\xE1lida"}}};function NV(){return{localeError:Qo()}}var Ao=()=>{let $={string:{unit:"\u06A9\u0627\u0631\u0627\u06A9\u062A\u0631",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},file:{unit:"\u0628\u0627\u06CC\u062A",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},array:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},set:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"NaN":"\u0639\u062F\u062F";case"object":{if(Array.isArray(Y))return"\u0622\u0631\u0627\u06CC\u0647";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"\u0648\u0631\u0648\u062F\u06CC",email:"\u0622\u062F\u0631\u0633 \u0627\u06CC\u0645\u06CC\u0644",url:"URL",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u06CC\u062E \u0648 \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",date:"\u062A\u0627\u0631\u06CC\u062E \u0627\u06CC\u0632\u0648",time:"\u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",duration:"\u0645\u062F\u062A \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",ipv4:"IPv4 \u0622\u062F\u0631\u0633",ipv6:"IPv6 \u0622\u062F\u0631\u0633",cidrv4:"IPv4 \u062F\u0627\u0645\u0646\u0647",cidrv6:"IPv6 \u062F\u0627\u0645\u0646\u0647",base64:"base64-encoded \u0631\u0634\u062A\u0647",base64url:"base64url-encoded \u0631\u0634\u062A\u0647",json_string:"JSON \u0631\u0634\u062A\u0647",e164:"E.164 \u0639\u062F\u062F",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u06CC"};return(Y)=>{switch(Y.code){case"invalid_type":return`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${Y.expected} \u0645\u06CC\u200C\u0628\u0648\u062F\u060C ${W(Y.input)} \u062F\u0631\u06CC\u0627\u0641\u062A \u0634\u062F`;case"invalid_value":if(Y.values.length===1)return`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${t(Y.values[0])} \u0645\u06CC\u200C\u0628\u0648\u062F`;return`\u06AF\u0632\u06CC\u0646\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A \u06CC\u06A9\u06CC \u0627\u0632 ${c(Y.values,"|")} \u0645\u06CC\u200C\u0628\u0648\u062F`;case"too_big":{let U=Y.inclusive?"<=":"<",Z=J(Y.origin);if(Z)return`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${Y.origin??"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${U}${Y.maximum.toString()} ${Z.unit??"\u0639\u0646\u0635\u0631"} \u0628\u0627\u0634\u062F`;return`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${Y.origin??"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${U}${Y.maximum.toString()} \u0628\u0627\u0634\u062F`}case"too_small":{let U=Y.inclusive?">=":">",Z=J(Y.origin);if(Z)return`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${Y.origin} \u0628\u0627\u06CC\u062F ${U}${Y.minimum.toString()} ${Z.unit} \u0628\u0627\u0634\u062F`;return`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${Y.origin} \u0628\u0627\u06CC\u062F ${U}${Y.minimum.toString()} \u0628\u0627\u0634\u062F`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${U.prefix}" \u0634\u0631\u0648\u0639 \u0634\u0648\u062F`;if(U.format==="ends_with")return`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${U.suffix}" \u062A\u0645\u0627\u0645 \u0634\u0648\u062F`;if(U.format==="includes")return`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0634\u0627\u0645\u0644 "${U.includes}" \u0628\u0627\u0634\u062F`;if(U.format==="regex")return`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 \u0627\u0644\u06AF\u0648\u06CC ${U.pattern} \u0645\u0637\u0627\u0628\u0642\u062A \u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F`;return`${X[U.format]??Y.format} \u0646\u0627\u0645\u0639\u062A\u0628\u0631`}case"not_multiple_of":return`\u0639\u062F\u062F \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0645\u0636\u0631\u0628 ${Y.divisor} \u0628\u0627\u0634\u062F`;case"unrecognized_keys":return`\u06A9\u0644\u06CC\u062F${Y.keys.length>1?"\u0647\u0627\u06CC":""} \u0646\u0627\u0634\u0646\u0627\u0633: ${c(Y.keys,", ")}`;case"invalid_key":return`\u06A9\u0644\u06CC\u062F \u0646\u0627\u0634\u0646\u0627\u0633 \u062F\u0631 ${Y.origin}`;case"invalid_union":return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631";case"invalid_element":return`\u0645\u0642\u062F\u0627\u0631 \u0646\u0627\u0645\u0639\u062A\u0628\u0631 \u062F\u0631 ${Y.origin}`;default:return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631"}}};function BV(){return{localeError:Ao()}}var Io=()=>{let $={string:{unit:"merkki\xE4",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"p\xE4iv\xE4m\xE4\xE4r\xE4n"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"NaN":"number";case"object":{if(Array.isArray(Y))return"array";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"s\xE4\xE4nn\xF6llinen lauseke",email:"s\xE4hk\xF6postiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-p\xE4iv\xE4m\xE4\xE4r\xE4",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"};return(Y)=>{switch(Y.code){case"invalid_type":return`Virheellinen tyyppi: odotettiin ${Y.expected}, oli ${W(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Virheellinen sy\xF6te: t\xE4ytyy olla ${t(Y.values[0])}`;return`Virheellinen valinta: t\xE4ytyy olla yksi seuraavista: ${c(Y.values,"|")}`;case"too_big":{let U=Y.inclusive?"<=":"<",Z=J(Y.origin);if(Z)return`Liian suuri: ${Z.subject} t\xE4ytyy olla ${U}${Y.maximum.toString()} ${Z.unit}`.trim();return`Liian suuri: arvon t\xE4ytyy olla ${U}${Y.maximum.toString()}`}case"too_small":{let U=Y.inclusive?">=":">",Z=J(Y.origin);if(Z)return`Liian pieni: ${Z.subject} t\xE4ytyy olla ${U}${Y.minimum.toString()} ${Z.unit}`.trim();return`Liian pieni: arvon t\xE4ytyy olla ${U}${Y.minimum.toString()}`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`Virheellinen sy\xF6te: t\xE4ytyy alkaa "${U.prefix}"`;if(U.format==="ends_with")return`Virheellinen sy\xF6te: t\xE4ytyy loppua "${U.suffix}"`;if(U.format==="includes")return`Virheellinen sy\xF6te: t\xE4ytyy sis\xE4lt\xE4\xE4 "${U.includes}"`;if(U.format==="regex")return`Virheellinen sy\xF6te: t\xE4ytyy vastata s\xE4\xE4nn\xF6llist\xE4 lauseketta ${U.pattern}`;return`Virheellinen ${X[U.format]??Y.format}`}case"not_multiple_of":return`Virheellinen luku: t\xE4ytyy olla luvun ${Y.divisor} monikerta`;case"unrecognized_keys":return`${Y.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${c(Y.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return"Virheellinen sy\xF6te"}}};function RV(){return{localeError:Io()}}var Lo=()=>{let $={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"NaN":"nombre";case"object":{if(Array.isArray(Y))return"tableau";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"entr\xE9e",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"};return(Y)=>{switch(Y.code){case"invalid_type":return`Entr\xE9e invalide : ${Y.expected} attendu, ${W(Y.input)} re\xE7u`;case"invalid_value":if(Y.values.length===1)return`Entr\xE9e invalide : ${t(Y.values[0])} attendu`;return`Option invalide : une valeur parmi ${c(Y.values,"|")} attendue`;case"too_big":{let U=Y.inclusive?"<=":"<",Z=J(Y.origin);if(Z)return`Trop grand : ${Y.origin??"valeur"} doit ${Z.verb} ${U}${Y.maximum.toString()} ${Z.unit??"\xE9l\xE9ment(s)"}`;return`Trop grand : ${Y.origin??"valeur"} doit \xEAtre ${U}${Y.maximum.toString()}`}case"too_small":{let U=Y.inclusive?">=":">",Z=J(Y.origin);if(Z)return`Trop petit : ${Y.origin} doit ${Z.verb} ${U}${Y.minimum.toString()} ${Z.unit}`;return`Trop petit : ${Y.origin} doit \xEAtre ${U}${Y.minimum.toString()}`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`Cha\xEEne invalide : doit commencer par "${U.prefix}"`;if(U.format==="ends_with")return`Cha\xEEne invalide : doit se terminer par "${U.suffix}"`;if(U.format==="includes")return`Cha\xEEne invalide : doit inclure "${U.includes}"`;if(U.format==="regex")return`Cha\xEEne invalide : doit correspondre au mod\xE8le ${U.pattern}`;return`${X[U.format]??Y.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${Y.divisor}`;case"unrecognized_keys":return`Cl\xE9${Y.keys.length>1?"s":""} non reconnue${Y.keys.length>1?"s":""} : ${c(Y.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${Y.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${Y.origin}`;default:return"Entr\xE9e invalide"}}};function SV(){return{localeError:Lo()}}var Po=()=>{let $={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"NaN":"number";case"object":{if(Array.isArray(Y))return"array";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"entr\xE9e",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"};return(Y)=>{switch(Y.code){case"invalid_type":return`Entr\xE9e invalide : attendu ${Y.expected}, re\xE7u ${W(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Entr\xE9e invalide : attendu ${t(Y.values[0])}`;return`Option invalide : attendu l'une des valeurs suivantes ${c(Y.values,"|")}`;case"too_big":{let U=Y.inclusive?"\u2264":"<",Z=J(Y.origin);if(Z)return`Trop grand : attendu que ${Y.origin??"la valeur"} ait ${U}${Y.maximum.toString()} ${Z.unit}`;return`Trop grand : attendu que ${Y.origin??"la valeur"} soit ${U}${Y.maximum.toString()}`}case"too_small":{let U=Y.inclusive?"\u2265":">",Z=J(Y.origin);if(Z)return`Trop petit : attendu que ${Y.origin} ait ${U}${Y.minimum.toString()} ${Z.unit}`;return`Trop petit : attendu que ${Y.origin} soit ${U}${Y.minimum.toString()}`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`Cha\xEEne invalide : doit commencer par "${U.prefix}"`;if(U.format==="ends_with")return`Cha\xEEne invalide : doit se terminer par "${U.suffix}"`;if(U.format==="includes")return`Cha\xEEne invalide : doit inclure "${U.includes}"`;if(U.format==="regex")return`Cha\xEEne invalide : doit correspondre au motif ${U.pattern}`;return`${X[U.format]??Y.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${Y.divisor}`;case"unrecognized_keys":return`Cl\xE9${Y.keys.length>1?"s":""} non reconnue${Y.keys.length>1?"s":""} : ${c(Y.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${Y.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${Y.origin}`;default:return"Entr\xE9e invalide"}}};function jV(){return{localeError:Po()}}var _o=()=>{let $={string:{unit:"\u05D0\u05D5\u05EA\u05D9\u05D5\u05EA",verb:"\u05DC\u05DB\u05DC\u05D5\u05DC"},file:{unit:"\u05D1\u05D9\u05D9\u05D8\u05D9\u05DD",verb:"\u05DC\u05DB\u05DC\u05D5\u05DC"},array:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",verb:"\u05DC\u05DB\u05DC\u05D5\u05DC"},set:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",verb:"\u05DC\u05DB\u05DC\u05D5\u05DC"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"NaN":"number";case"object":{if(Array.isArray(Y))return"array";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"\u05E7\u05DC\u05D8",email:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05D0\u05D9\u05DE\u05D9\u05D9\u05DC",url:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05E8\u05E9\u05EA",emoji:"\u05D0\u05D9\u05DE\u05D5\u05D2'\u05D9",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u05EA\u05D0\u05E8\u05D9\u05DA \u05D5\u05D6\u05DE\u05DF ISO",date:"\u05EA\u05D0\u05E8\u05D9\u05DA ISO",time:"\u05D6\u05DE\u05DF ISO",duration:"\u05DE\u05E9\u05DA \u05D6\u05DE\u05DF ISO",ipv4:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv4",ipv6:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv6",cidrv4:"\u05D8\u05D5\u05D5\u05D7 IPv4",cidrv6:"\u05D8\u05D5\u05D5\u05D7 IPv6",base64:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64",base64url:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64 \u05DC\u05DB\u05EA\u05D5\u05D1\u05D5\u05EA \u05E8\u05E9\u05EA",json_string:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA JSON",e164:"\u05DE\u05E1\u05E4\u05E8 E.164",jwt:"JWT",template_literal:"\u05E7\u05DC\u05D8"};return(Y)=>{switch(Y.code){case"invalid_type":return`\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA ${Y.expected}, \u05D4\u05EA\u05E7\u05D1\u05DC ${W(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA ${t(Y.values[0])}`;return`\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA \u05D0\u05D7\u05EA \u05DE\u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA  ${c(Y.values,"|")}`;case"too_big":{let U=Y.inclusive?"<=":"<",Z=J(Y.origin);if(Z)return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${Y.origin??"value"} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${U}${Y.maximum.toString()} ${Z.unit??"elements"}`;return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${Y.origin??"value"} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${U}${Y.maximum.toString()}`}case"too_small":{let U=Y.inclusive?">=":">",Z=J(Y.origin);if(Z)return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${Y.origin} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${U}${Y.minimum.toString()} ${Z.unit}`;return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${Y.origin} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${U}${Y.minimum.toString()}`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05E0\u05D4: \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D7\u05D9\u05DC \u05D1"${U.prefix}"`;if(U.format==="ends_with")return`\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05E0\u05D4: \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05E1\u05EA\u05D9\u05D9\u05DD \u05D1 "${U.suffix}"`;if(U.format==="includes")return`\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05E0\u05D4: \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05DB\u05DC\u05D5\u05DC "${U.includes}"`;if(U.format==="regex")return`\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05E0\u05D4: \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D0\u05D9\u05DD \u05DC\u05EA\u05D1\u05E0\u05D9\u05EA ${U.pattern}`;return`${X[U.format]??Y.format} \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF`}case"not_multiple_of":return`\u05DE\u05E1\u05E4\u05E8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA \u05DE\u05DB\u05E4\u05DC\u05D4 \u05E9\u05DC ${Y.divisor}`;case"unrecognized_keys":return`\u05DE\u05E4\u05EA\u05D7${Y.keys.length>1?"\u05D5\u05EA":""} \u05DC\u05D0 \u05DE\u05D6\u05D5\u05D4${Y.keys.length>1?"\u05D9\u05DD":"\u05D4"}: ${c(Y.keys,", ")}`;case"invalid_key":return`\u05DE\u05E4\u05EA\u05D7 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1${Y.origin}`;case"invalid_union":return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF";case"invalid_element":return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1${Y.origin}`;default:return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF"}}};function kV(){return{localeError:_o()}}var No=()=>{let $={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"NaN":"sz\xE1m";case"object":{if(Array.isArray(Y))return"t\xF6mb";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"bemenet",email:"email c\xEDm",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO id\u0151b\xE9lyeg",date:"ISO d\xE1tum",time:"ISO id\u0151",duration:"ISO id\u0151intervallum",ipv4:"IPv4 c\xEDm",ipv6:"IPv6 c\xEDm",cidrv4:"IPv4 tartom\xE1ny",cidrv6:"IPv6 tartom\xE1ny",base64:"base64-k\xF3dolt string",base64url:"base64url-k\xF3dolt string",json_string:"JSON string",e164:"E.164 sz\xE1m",jwt:"JWT",template_literal:"bemenet"};return(Y)=>{switch(Y.code){case"invalid_type":return`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${Y.expected}, a kapott \xE9rt\xE9k ${W(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${t(Y.values[0])}`;return`\xC9rv\xE9nytelen opci\xF3: valamelyik \xE9rt\xE9k v\xE1rt ${c(Y.values,"|")}`;case"too_big":{let U=Y.inclusive?"<=":"<",Z=J(Y.origin);if(Z)return`T\xFAl nagy: ${Y.origin??"\xE9rt\xE9k"} m\xE9rete t\xFAl nagy ${U}${Y.maximum.toString()} ${Z.unit??"elem"}`;return`T\xFAl nagy: a bemeneti \xE9rt\xE9k ${Y.origin??"\xE9rt\xE9k"} t\xFAl nagy: ${U}${Y.maximum.toString()}`}case"too_small":{let U=Y.inclusive?">=":">",Z=J(Y.origin);if(Z)return`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${Y.origin} m\xE9rete t\xFAl kicsi ${U}${Y.minimum.toString()} ${Z.unit}`;return`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${Y.origin} t\xFAl kicsi ${U}${Y.minimum.toString()}`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`\xC9rv\xE9nytelen string: "${U.prefix}" \xE9rt\xE9kkel kell kezd\u0151dnie`;if(U.format==="ends_with")return`\xC9rv\xE9nytelen string: "${U.suffix}" \xE9rt\xE9kkel kell v\xE9gz\u0151dnie`;if(U.format==="includes")return`\xC9rv\xE9nytelen string: "${U.includes}" \xE9rt\xE9ket kell tartalmaznia`;if(U.format==="regex")return`\xC9rv\xE9nytelen string: ${U.pattern} mint\xE1nak kell megfelelnie`;return`\xC9rv\xE9nytelen ${X[U.format]??Y.format}`}case"not_multiple_of":return`\xC9rv\xE9nytelen sz\xE1m: ${Y.divisor} t\xF6bbsz\xF6r\xF6s\xE9nek kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${Y.keys.length>1?"s":""}: ${c(Y.keys,", ")}`;case"invalid_key":return`\xC9rv\xE9nytelen kulcs ${Y.origin}`;case"invalid_union":return"\xC9rv\xE9nytelen bemenet";case"invalid_element":return`\xC9rv\xE9nytelen \xE9rt\xE9k: ${Y.origin}`;default:return"\xC9rv\xE9nytelen bemenet"}}};function vV(){return{localeError:No()}}var Bo=()=>{let $={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"NaN":"number";case"object":{if(Array.isArray(Y))return"array";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"};return(Y)=>{switch(Y.code){case"invalid_type":return`Input tidak valid: diharapkan ${Y.expected}, diterima ${W(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Input tidak valid: diharapkan ${t(Y.values[0])}`;return`Pilihan tidak valid: diharapkan salah satu dari ${c(Y.values,"|")}`;case"too_big":{let U=Y.inclusive?"<=":"<",Z=J(Y.origin);if(Z)return`Terlalu besar: diharapkan ${Y.origin??"value"} memiliki ${U}${Y.maximum.toString()} ${Z.unit??"elemen"}`;return`Terlalu besar: diharapkan ${Y.origin??"value"} menjadi ${U}${Y.maximum.toString()}`}case"too_small":{let U=Y.inclusive?">=":">",Z=J(Y.origin);if(Z)return`Terlalu kecil: diharapkan ${Y.origin} memiliki ${U}${Y.minimum.toString()} ${Z.unit}`;return`Terlalu kecil: diharapkan ${Y.origin} menjadi ${U}${Y.minimum.toString()}`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`String tidak valid: harus dimulai dengan "${U.prefix}"`;if(U.format==="ends_with")return`String tidak valid: harus berakhir dengan "${U.suffix}"`;if(U.format==="includes")return`String tidak valid: harus menyertakan "${U.includes}"`;if(U.format==="regex")return`String tidak valid: harus sesuai pola ${U.pattern}`;return`${X[U.format]??Y.format} tidak valid`}case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${Y.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${Y.keys.length>1?"s":""}: ${c(Y.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${Y.origin}`;case"invalid_union":return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${Y.origin}`;default:return"Input tidak valid"}}};function CV(){return{localeError:Bo()}}var Ro=($)=>{let J=typeof $;switch(J){case"number":return Number.isNaN($)?"NaN":"n\xFAmer";case"object":{if(Array.isArray($))return"fylki";if($===null)return"null";if(Object.getPrototypeOf($)!==Object.prototype&&$.constructor)return $.constructor.name}}return J},So=()=>{let $={string:{unit:"stafi",verb:"a\xF0 hafa"},file:{unit:"b\xE6ti",verb:"a\xF0 hafa"},array:{unit:"hluti",verb:"a\xF0 hafa"},set:{unit:"hluti",verb:"a\xF0 hafa"}};function J(X){return $[X]??null}let W={regex:"gildi",email:"netfang",url:"vefsl\xF3\xF0",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og t\xEDmi",date:"ISO dagsetning",time:"ISO t\xEDmi",duration:"ISO t\xEDmalengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 t\xF6lugildi",jwt:"JWT",template_literal:"gildi"};return(X)=>{switch(X.code){case"invalid_type":return`Rangt gildi: \xDE\xFA sl\xF3st inn ${Ro(X.input)} \xFEar sem \xE1 a\xF0 vera ${X.expected}`;case"invalid_value":if(X.values.length===1)return`Rangt gildi: gert r\xE1\xF0 fyrir ${t(X.values[0])}`;return`\xD3gilt val: m\xE1 vera eitt af eftirfarandi ${c(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",U=J(X.origin);if(U)return`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${X.origin??"gildi"} hafi ${Y}${X.maximum.toString()} ${U.unit??"hluti"}`;return`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${X.origin??"gildi"} s\xE9 ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",U=J(X.origin);if(U)return`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${X.origin} hafi ${Y}${X.minimum.toString()} ${U.unit}`;return`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${X.origin} s\xE9 ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`\xD3gildur strengur: ver\xF0ur a\xF0 byrja \xE1 "${Y.prefix}"`;if(Y.format==="ends_with")return`\xD3gildur strengur: ver\xF0ur a\xF0 enda \xE1 "${Y.suffix}"`;if(Y.format==="includes")return`\xD3gildur strengur: ver\xF0ur a\xF0 innihalda "${Y.includes}"`;if(Y.format==="regex")return`\xD3gildur strengur: ver\xF0ur a\xF0 fylgja mynstri ${Y.pattern}`;return`Rangt ${W[Y.format]??X.format}`}case"not_multiple_of":return`R\xF6ng tala: ver\xF0ur a\xF0 vera margfeldi af ${X.divisor}`;case"unrecognized_keys":return`\xD3\xFEekkt ${X.keys.length>1?"ir lyklar":"ur lykill"}: ${c(X.keys,", ")}`;case"invalid_key":return`Rangur lykill \xED ${X.origin}`;case"invalid_union":return"Rangt gildi";case"invalid_element":return`Rangt gildi \xED ${X.origin}`;default:return"Rangt gildi"}}};function TV(){return{localeError:So()}}var jo=()=>{let $={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"NaN":"numero";case"object":{if(Array.isArray(Y))return"vettore";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"};return(Y)=>{switch(Y.code){case"invalid_type":return`Input non valido: atteso ${Y.expected}, ricevuto ${W(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Input non valido: atteso ${t(Y.values[0])}`;return`Opzione non valida: atteso uno tra ${c(Y.values,"|")}`;case"too_big":{let U=Y.inclusive?"<=":"<",Z=J(Y.origin);if(Z)return`Troppo grande: ${Y.origin??"valore"} deve avere ${U}${Y.maximum.toString()} ${Z.unit??"elementi"}`;return`Troppo grande: ${Y.origin??"valore"} deve essere ${U}${Y.maximum.toString()}`}case"too_small":{let U=Y.inclusive?">=":">",Z=J(Y.origin);if(Z)return`Troppo piccolo: ${Y.origin} deve avere ${U}${Y.minimum.toString()} ${Z.unit}`;return`Troppo piccolo: ${Y.origin} deve essere ${U}${Y.minimum.toString()}`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`Stringa non valida: deve iniziare con "${U.prefix}"`;if(U.format==="ends_with")return`Stringa non valida: deve terminare con "${U.suffix}"`;if(U.format==="includes")return`Stringa non valida: deve includere "${U.includes}"`;if(U.format==="regex")return`Stringa non valida: deve corrispondere al pattern ${U.pattern}`;return`Invalid ${X[U.format]??Y.format}`}case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${Y.divisor}`;case"unrecognized_keys":return`Chiav${Y.keys.length>1?"i":"e"} non riconosciut${Y.keys.length>1?"e":"a"}: ${c(Y.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${Y.origin}`;case"invalid_union":return"Input non valido";case"invalid_element":return`Valore non valido in ${Y.origin}`;default:return"Input non valido"}}};function qV(){return{localeError:jo()}}var ko=()=>{let $={string:{unit:"\u6587\u5B57",verb:"\u3067\u3042\u308B"},file:{unit:"\u30D0\u30A4\u30C8",verb:"\u3067\u3042\u308B"},array:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"},set:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"NaN":"\u6570\u5024";case"object":{if(Array.isArray(Y))return"\u914D\u5217";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"\u5165\u529B\u5024",email:"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9",url:"URL",emoji:"\u7D75\u6587\u5B57",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u6642",date:"ISO\u65E5\u4ED8",time:"ISO\u6642\u523B",duration:"ISO\u671F\u9593",ipv4:"IPv4\u30A2\u30C9\u30EC\u30B9",ipv6:"IPv6\u30A2\u30C9\u30EC\u30B9",cidrv4:"IPv4\u7BC4\u56F2",cidrv6:"IPv6\u7BC4\u56F2",base64:"base64\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",base64url:"base64url\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",json_string:"JSON\u6587\u5B57\u5217",e164:"E.164\u756A\u53F7",jwt:"JWT",template_literal:"\u5165\u529B\u5024"};return(Y)=>{switch(Y.code){case"invalid_type":return`\u7121\u52B9\u306A\u5165\u529B: ${Y.expected}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F\u304C\u3001${W(Y.input)}\u304C\u5165\u529B\u3055\u308C\u307E\u3057\u305F`;case"invalid_value":if(Y.values.length===1)return`\u7121\u52B9\u306A\u5165\u529B: ${t(Y.values[0])}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F`;return`\u7121\u52B9\u306A\u9078\u629E: ${c(Y.values,"\u3001")}\u306E\u3044\u305A\u308C\u304B\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"too_big":{let U=Y.inclusive?"\u4EE5\u4E0B\u3067\u3042\u308B":"\u3088\u308A\u5C0F\u3055\u3044",Z=J(Y.origin);if(Z)return`\u5927\u304D\u3059\u304E\u308B\u5024: ${Y.origin??"\u5024"}\u306F${Y.maximum.toString()}${Z.unit??"\u8981\u7D20"}${U}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;return`\u5927\u304D\u3059\u304E\u308B\u5024: ${Y.origin??"\u5024"}\u306F${Y.maximum.toString()}${U}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"too_small":{let U=Y.inclusive?"\u4EE5\u4E0A\u3067\u3042\u308B":"\u3088\u308A\u5927\u304D\u3044",Z=J(Y.origin);if(Z)return`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${Y.origin}\u306F${Y.minimum.toString()}${Z.unit}${U}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;return`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${Y.origin}\u306F${Y.minimum.toString()}${U}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${U.prefix}"\u3067\u59CB\u307E\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;if(U.format==="ends_with")return`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${U.suffix}"\u3067\u7D42\u308F\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;if(U.format==="includes")return`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${U.includes}"\u3092\u542B\u3080\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;if(U.format==="regex")return`\u7121\u52B9\u306A\u6587\u5B57\u5217: \u30D1\u30BF\u30FC\u30F3${U.pattern}\u306B\u4E00\u81F4\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;return`\u7121\u52B9\u306A${X[U.format]??Y.format}`}case"not_multiple_of":return`\u7121\u52B9\u306A\u6570\u5024: ${Y.divisor}\u306E\u500D\u6570\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"unrecognized_keys":return`\u8A8D\u8B58\u3055\u308C\u3066\u3044\u306A\u3044\u30AD\u30FC${Y.keys.length>1?"\u7FA4":""}: ${c(Y.keys,"\u3001")}`;case"invalid_key":return`${Y.origin}\u5185\u306E\u7121\u52B9\u306A\u30AD\u30FC`;case"invalid_union":return"\u7121\u52B9\u306A\u5165\u529B";case"invalid_element":return`${Y.origin}\u5185\u306E\u7121\u52B9\u306A\u5024`;default:return"\u7121\u52B9\u306A\u5165\u529B"}}};function hV(){return{localeError:ko()}}var vo=($)=>{let J=typeof $;switch(J){case"number":return Number.isNaN($)?"NaN":"\u10E0\u10D8\u10EA\u10EE\u10D5\u10D8";case"object":{if(Array.isArray($))return"\u10DB\u10D0\u10E1\u10D8\u10D5\u10D8";if($===null)return"null";if(Object.getPrototypeOf($)!==Object.prototype&&$.constructor)return $.constructor.name}}return{string:"\u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",boolean:"\u10D1\u10E3\u10DA\u10D4\u10D0\u10DC\u10D8",undefined:"undefined",bigint:"bigint",symbol:"symbol",function:"\u10E4\u10E3\u10DC\u10E5\u10EA\u10D8\u10D0"}[J]??J},Co=()=>{let $={string:{unit:"\u10E1\u10D8\u10DB\u10D1\u10DD\u10DA\u10DD",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},file:{unit:"\u10D1\u10D0\u10D8\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},array:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},set:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"}};function J(X){return $[X]??null}let W={regex:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0",email:"\u10D4\u10DA-\u10E4\u10DD\u10E1\u10E2\u10D8\u10E1 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",url:"URL",emoji:"\u10D4\u10DB\u10DD\u10EF\u10D8",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8-\u10D3\u10E0\u10DD",date:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8",time:"\u10D3\u10E0\u10DD",duration:"\u10EE\u10D0\u10DC\u10D2\u10E0\u10EB\u10DA\u10D8\u10D5\u10DD\u10D1\u10D0",ipv4:"IPv4 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",ipv6:"IPv6 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",cidrv4:"IPv4 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",cidrv6:"IPv6 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",base64:"base64-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",base64url:"base64url-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",json_string:"JSON \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",e164:"E.164 \u10DC\u10DD\u10DB\u10D4\u10E0\u10D8",jwt:"JWT",template_literal:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"};return(X)=>{switch(X.code){case"invalid_type":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${X.expected}, \u10DB\u10D8\u10E6\u10D4\u10D1\u10E3\u10DA\u10D8 ${vo(X.input)}`;case"invalid_value":if(X.values.length===1)return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${t(X.values[0])}`;return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D5\u10D0\u10E0\u10D8\u10D0\u10DC\u10E2\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8\u10D0 \u10D4\u10E0\u10D7-\u10D4\u10E0\u10D7\u10D8 ${c(X.values,"|")}-\u10D3\u10D0\u10DC`;case"too_big":{let Y=X.inclusive?"<=":"<",U=J(X.origin);if(U)return`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${X.origin??"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} ${U.verb} ${Y}${X.maximum.toString()} ${U.unit}`;return`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${X.origin??"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} \u10D8\u10E7\u10DD\u10E1 ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",U=J(X.origin);if(U)return`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${X.origin} ${U.verb} ${Y}${X.minimum.toString()} ${U.unit}`;return`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${X.origin} \u10D8\u10E7\u10DD\u10E1 ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10EC\u10E7\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${Y.prefix}"-\u10D8\u10D7`;if(Y.format==="ends_with")return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10DB\u10D7\u10D0\u10D5\u10E0\u10D3\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${Y.suffix}"-\u10D8\u10D7`;if(Y.format==="includes")return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1 "${Y.includes}"-\u10E1`;if(Y.format==="regex")return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D4\u10E1\u10D0\u10D1\u10D0\u10DB\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 \u10E8\u10D0\u10D1\u10DA\u10DD\u10DC\u10E1 ${Y.pattern}`;return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 ${W[Y.format]??X.format}`}case"not_multiple_of":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E0\u10D8\u10EA\u10EE\u10D5\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10E7\u10DD\u10E1 ${X.divisor}-\u10D8\u10E1 \u10EF\u10D4\u10E0\u10D0\u10D3\u10D8`;case"unrecognized_keys":return`\u10E3\u10EA\u10DC\u10DD\u10D1\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1${X.keys.length>1?"\u10D4\u10D1\u10D8":"\u10D8"}: ${c(X.keys,", ")}`;case"invalid_key":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1\u10D8 ${X.origin}-\u10E8\u10D8`;case"invalid_union":return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0";case"invalid_element":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0 ${X.origin}-\u10E8\u10D8`;default:return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"}}};function xV(){return{localeError:Co()}}var To=()=>{let $={string:{unit:"\u178F\u17BD\u17A2\u1780\u17D2\u179F\u179A",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},file:{unit:"\u1794\u17C3",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},array:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},set:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"\u1798\u17B7\u1793\u1798\u17C2\u1793\u1787\u17B6\u179B\u17C1\u1781 (NaN)":"\u179B\u17C1\u1781";case"object":{if(Array.isArray(Y))return"\u17A2\u17B6\u179A\u17C1 (Array)";if(Y===null)return"\u1782\u17D2\u1798\u17B6\u1793\u178F\u1798\u17D2\u179B\u17C3 (null)";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B",email:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793\u17A2\u17CA\u17B8\u1798\u17C2\u179B",url:"URL",emoji:"\u179F\u1789\u17D2\u1789\u17B6\u17A2\u17B6\u179A\u1798\u17D2\u1798\u178E\u17CD",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 \u1793\u17B7\u1784\u1798\u17C9\u17C4\u1784 ISO",date:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 ISO",time:"\u1798\u17C9\u17C4\u1784 ISO",duration:"\u179A\u1799\u17C8\u1796\u17C1\u179B ISO",ipv4:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",ipv6:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",cidrv4:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",cidrv6:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",base64:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64",base64url:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64url",json_string:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A JSON",e164:"\u179B\u17C1\u1781 E.164",jwt:"JWT",template_literal:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B"};return(Y)=>{switch(Y.code){case"invalid_type":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${Y.expected} \u1794\u17C9\u17BB\u1793\u17D2\u178F\u17C2\u1791\u1791\u17BD\u179B\u1794\u17B6\u1793 ${W(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${t(Y.values[0])}`;return`\u1787\u1798\u17D2\u179A\u17BE\u179F\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1787\u17B6\u1798\u17BD\u1799\u1780\u17D2\u1793\u17BB\u1784\u1785\u17C6\u178E\u17C4\u1798 ${c(Y.values,"|")}`;case"too_big":{let U=Y.inclusive?"<=":"<",Z=J(Y.origin);if(Z)return`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${Y.origin??"\u178F\u1798\u17D2\u179B\u17C3"} ${U} ${Y.maximum.toString()} ${Z.unit??"\u1792\u17B6\u178F\u17BB"}`;return`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${Y.origin??"\u178F\u1798\u17D2\u179B\u17C3"} ${U} ${Y.maximum.toString()}`}case"too_small":{let U=Y.inclusive?">=":">",Z=J(Y.origin);if(Z)return`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${Y.origin} ${U} ${Y.minimum.toString()} ${Z.unit}`;return`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${Y.origin} ${U} ${Y.minimum.toString()}`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1785\u17B6\u1794\u17CB\u1795\u17D2\u178F\u17BE\u1798\u178A\u17C4\u1799 "${U.prefix}"`;if(U.format==="ends_with")return`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1794\u1789\u17D2\u1785\u1794\u17CB\u178A\u17C4\u1799 "${U.suffix}"`;if(U.format==="includes")return`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1798\u17B6\u1793 "${U.includes}"`;if(U.format==="regex")return`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1795\u17D2\u1782\u17BC\u1795\u17D2\u1782\u1784\u1793\u17B9\u1784\u1791\u1798\u17D2\u179A\u1784\u17CB\u178A\u17C2\u179B\u1794\u17B6\u1793\u1780\u17C6\u178E\u178F\u17CB ${U.pattern}`;return`\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 ${X[U.format]??Y.format}`}case"not_multiple_of":return`\u179B\u17C1\u1781\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1787\u17B6\u1796\u17A0\u17BB\u1782\u17BB\u178E\u1793\u17C3 ${Y.divisor}`;case"unrecognized_keys":return`\u179A\u1780\u1783\u17BE\u1789\u179F\u17C4\u1798\u17B7\u1793\u179F\u17D2\u1782\u17B6\u179B\u17CB\u17D6 ${c(Y.keys,", ")}`;case"invalid_key":return`\u179F\u17C4\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${Y.origin}`;case"invalid_union":return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C";case"invalid_element":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${Y.origin}`;default:return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C"}}};function OU(){return{localeError:To()}}function bV(){return OU()}var qo=()=>{let $={string:{unit:"\uBB38\uC790",verb:"to have"},file:{unit:"\uBC14\uC774\uD2B8",verb:"to have"},array:{unit:"\uAC1C",verb:"to have"},set:{unit:"\uAC1C",verb:"to have"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"NaN":"number";case"object":{if(Array.isArray(Y))return"array";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"\uC785\uB825",email:"\uC774\uBA54\uC77C \uC8FC\uC18C",url:"URL",emoji:"\uC774\uBAA8\uC9C0",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \uB0A0\uC9DC\uC2DC\uAC04",date:"ISO \uB0A0\uC9DC",time:"ISO \uC2DC\uAC04",duration:"ISO \uAE30\uAC04",ipv4:"IPv4 \uC8FC\uC18C",ipv6:"IPv6 \uC8FC\uC18C",cidrv4:"IPv4 \uBC94\uC704",cidrv6:"IPv6 \uBC94\uC704",base64:"base64 \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",base64url:"base64url \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",json_string:"JSON \uBB38\uC790\uC5F4",e164:"E.164 \uBC88\uD638",jwt:"JWT",template_literal:"\uC785\uB825"};return(Y)=>{switch(Y.code){case"invalid_type":return`\uC798\uBABB\uB41C \uC785\uB825: \uC608\uC0C1 \uD0C0\uC785\uC740 ${Y.expected}, \uBC1B\uC740 \uD0C0\uC785\uC740 ${W(Y.input)}\uC785\uB2C8\uB2E4`;case"invalid_value":if(Y.values.length===1)return`\uC798\uBABB\uB41C \uC785\uB825: \uAC12\uC740 ${t(Y.values[0])} \uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4`;return`\uC798\uBABB\uB41C \uC635\uC158: ${c(Y.values,"\uB610\uB294 ")} \uC911 \uD558\uB098\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"too_big":{let U=Y.inclusive?"\uC774\uD558":"\uBBF8\uB9CC",Z=U==="\uBBF8\uB9CC"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",H=J(Y.origin),G=H?.unit??"\uC694\uC18C";if(H)return`${Y.origin??"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${Y.maximum.toString()}${G} ${U}${Z}`;return`${Y.origin??"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${Y.maximum.toString()} ${U}${Z}`}case"too_small":{let U=Y.inclusive?"\uC774\uC0C1":"\uCD08\uACFC",Z=U==="\uC774\uC0C1"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",H=J(Y.origin),G=H?.unit??"\uC694\uC18C";if(H)return`${Y.origin??"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${Y.minimum.toString()}${G} ${U}${Z}`;return`${Y.origin??"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${Y.minimum.toString()} ${U}${Z}`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${U.prefix}"(\uC73C)\uB85C \uC2DC\uC791\uD574\uC57C \uD569\uB2C8\uB2E4`;if(U.format==="ends_with")return`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${U.suffix}"(\uC73C)\uB85C \uB05D\uB098\uC57C \uD569\uB2C8\uB2E4`;if(U.format==="includes")return`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${U.includes}"\uC744(\uB97C) \uD3EC\uD568\uD574\uC57C \uD569\uB2C8\uB2E4`;if(U.format==="regex")return`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: \uC815\uADDC\uC2DD ${U.pattern} \uD328\uD134\uACFC \uC77C\uCE58\uD574\uC57C \uD569\uB2C8\uB2E4`;return`\uC798\uBABB\uB41C ${X[U.format]??Y.format}`}case"not_multiple_of":return`\uC798\uBABB\uB41C \uC22B\uC790: ${Y.divisor}\uC758 \uBC30\uC218\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"unrecognized_keys":return`\uC778\uC2DD\uD560 \uC218 \uC5C6\uB294 \uD0A4: ${c(Y.keys,", ")}`;case"invalid_key":return`\uC798\uBABB\uB41C \uD0A4: ${Y.origin}`;case"invalid_union":return"\uC798\uBABB\uB41C \uC785\uB825";case"invalid_element":return`\uC798\uBABB\uB41C \uAC12: ${Y.origin}`;default:return"\uC798\uBABB\uB41C \uC785\uB825"}}};function gV(){return{localeError:qo()}}var ho=($)=>{return EU(typeof $,$)},EU=($,J=void 0)=>{switch($){case"number":return Number.isNaN(J)?"NaN":"skai\u010Dius";case"bigint":return"sveikasis skai\u010Dius";case"string":return"eilut\u0117";case"boolean":return"login\u0117 reik\u0161m\u0117";case"undefined":case"void":return"neapibr\u0117\u017Eta reik\u0161m\u0117";case"function":return"funkcija";case"symbol":return"simbolis";case"object":{if(J===void 0)return"ne\u017Einomas objektas";if(J===null)return"nulin\u0117 reik\u0161m\u0117";if(Array.isArray(J))return"masyvas";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name;return"objektas"}case"null":return"nulin\u0117 reik\u0161m\u0117"}return $},FU=($)=>{return $.charAt(0).toUpperCase()+$.slice(1)};function oC($){let J=Math.abs($),W=J%10,X=J%100;if(X>=11&&X<=19||W===0)return"many";if(W===1)return"one";return"few"}var xo=()=>{let $={string:{unit:{one:"simbolis",few:"simboliai",many:"simboli\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne ilgesn\u0117 kaip",notInclusive:"turi b\u016Bti trumpesn\u0117 kaip"},bigger:{inclusive:"turi b\u016Bti ne trumpesn\u0117 kaip",notInclusive:"turi b\u016Bti ilgesn\u0117 kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"bait\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne didesnis kaip",notInclusive:"turi b\u016Bti ma\u017Eesnis kaip"},bigger:{inclusive:"turi b\u016Bti ne ma\u017Eesnis kaip",notInclusive:"turi b\u016Bti didesnis kaip"}}},array:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}},set:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}}};function J(X,Y,U,Z){let H=$[X]??null;if(H===null)return H;return{unit:H.unit[Y],verb:H.verb[Z][U?"inclusive":"notInclusive"]}}let W={regex:"\u012Fvestis",email:"el. pa\u0161to adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukm\u0117",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 u\u017Ekoduota eilut\u0117",base64url:"base64url u\u017Ekoduota eilut\u0117",json_string:"JSON eilut\u0117",e164:"E.164 numeris",jwt:"JWT",template_literal:"\u012Fvestis"};return(X)=>{switch(X.code){case"invalid_type":return`Gautas tipas ${ho(X.input)}, o tik\u0117tasi - ${EU(X.expected)}`;case"invalid_value":if(X.values.length===1)return`Privalo b\u016Bti ${t(X.values[0])}`;return`Privalo b\u016Bti vienas i\u0161 ${c(X.values,"|")} pasirinkim\u0173`;case"too_big":{let Y=EU(X.origin),U=J(X.origin,oC(Number(X.maximum)),X.inclusive??!1,"smaller");if(U?.verb)return`${FU(Y??X.origin??"reik\u0161m\u0117")} ${U.verb} ${X.maximum.toString()} ${U.unit??"element\u0173"}`;let Z=X.inclusive?"ne didesnis kaip":"ma\u017Eesnis kaip";return`${FU(Y??X.origin??"reik\u0161m\u0117")} turi b\u016Bti ${Z} ${X.maximum.toString()} ${U?.unit}`}case"too_small":{let Y=EU(X.origin),U=J(X.origin,oC(Number(X.minimum)),X.inclusive??!1,"bigger");if(U?.verb)return`${FU(Y??X.origin??"reik\u0161m\u0117")} ${U.verb} ${X.minimum.toString()} ${U.unit??"element\u0173"}`;let Z=X.inclusive?"ne ma\u017Eesnis kaip":"didesnis kaip";return`${FU(Y??X.origin??"reik\u0161m\u0117")} turi b\u016Bti ${Z} ${X.minimum.toString()} ${U?.unit}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`Eilut\u0117 privalo prasid\u0117ti "${Y.prefix}"`;if(Y.format==="ends_with")return`Eilut\u0117 privalo pasibaigti "${Y.suffix}"`;if(Y.format==="includes")return`Eilut\u0117 privalo \u012Ftraukti "${Y.includes}"`;if(Y.format==="regex")return`Eilut\u0117 privalo atitikti ${Y.pattern}`;return`Neteisingas ${W[Y.format]??X.format}`}case"not_multiple_of":return`Skai\u010Dius privalo b\u016Bti ${X.divisor} kartotinis.`;case"unrecognized_keys":return`Neatpa\u017Eint${X.keys.length>1?"i":"as"} rakt${X.keys.length>1?"ai":"as"}: ${c(X.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":return"Klaidinga \u012Fvestis";case"invalid_element":{let Y=EU(X.origin);return`${FU(Y??X.origin??"reik\u0161m\u0117")} turi klaiding\u0105 \u012Fvest\u012F`}default:return"Klaidinga \u012Fvestis"}}};function fV(){return{localeError:xo()}}var bo=()=>{let $={string:{unit:"\u0437\u043D\u0430\u0446\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},file:{unit:"\u0431\u0430\u0458\u0442\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},array:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},set:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"NaN":"\u0431\u0440\u043E\u0458";case"object":{if(Array.isArray(Y))return"\u043D\u0438\u0437\u0430";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"\u0432\u043D\u0435\u0441",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u043D\u0430 \u0435-\u043F\u043E\u0448\u0442\u0430",url:"URL",emoji:"\u0435\u043C\u043E\u045F\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0443\u043C \u0438 \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0443\u043C",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u0432\u0440\u0435\u043C\u0435\u0442\u0440\u0430\u0435\u045A\u0435",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441\u0430",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441\u0430",cidrv4:"IPv4 \u043E\u043F\u0441\u0435\u0433",cidrv6:"IPv6 \u043E\u043F\u0441\u0435\u0433",base64:"base64-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",base64url:"base64url-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",json_string:"JSON \u043D\u0438\u0437\u0430",e164:"E.164 \u0431\u0440\u043E\u0458",jwt:"JWT",template_literal:"\u0432\u043D\u0435\u0441"};return(Y)=>{switch(Y.code){case"invalid_type":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${Y.expected}, \u043F\u0440\u0438\u043C\u0435\u043D\u043E ${W(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Invalid input: expected ${t(Y.values[0])}`;return`\u0413\u0440\u0435\u0448\u0430\u043D\u0430 \u043E\u043F\u0446\u0438\u0458\u0430: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 \u0435\u0434\u043D\u0430 ${c(Y.values,"|")}`;case"too_big":{let U=Y.inclusive?"<=":"<",Z=J(Y.origin);if(Z)return`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${Y.origin??"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0438\u043C\u0430 ${U}${Y.maximum.toString()} ${Z.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0438"}`;return`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${Y.origin??"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0431\u0438\u0434\u0435 ${U}${Y.maximum.toString()}`}case"too_small":{let U=Y.inclusive?">=":">",Z=J(Y.origin);if(Z)return`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${Y.origin} \u0434\u0430 \u0438\u043C\u0430 ${U}${Y.minimum.toString()} ${Z.unit}`;return`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${Y.origin} \u0434\u0430 \u0431\u0438\u0434\u0435 ${U}${Y.minimum.toString()}`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u043D\u0443\u0432\u0430 \u0441\u043E "${U.prefix}"`;if(U.format==="ends_with")return`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u0432\u0440\u0448\u0443\u0432\u0430 \u0441\u043E "${U.suffix}"`;if(U.format==="includes")return`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0432\u043A\u043B\u0443\u0447\u0443\u0432\u0430 "${U.includes}"`;if(U.format==="regex")return`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u043E\u0434\u0433\u043E\u0430\u0440\u0430 \u043D\u0430 \u043F\u0430\u0442\u0435\u0440\u043D\u043E\u0442 ${U.pattern}`;return`Invalid ${X[U.format]??Y.format}`}case"not_multiple_of":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0431\u0440\u043E\u0458: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0431\u0438\u0434\u0435 \u0434\u0435\u043B\u0438\u0432 \u0441\u043E ${Y.divisor}`;case"unrecognized_keys":return`${Y.keys.length>1?"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D\u0438 \u043A\u043B\u0443\u0447\u0435\u0432\u0438":"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D \u043A\u043B\u0443\u0447"}: ${c(Y.keys,", ")}`;case"invalid_key":return`\u0413\u0440\u0435\u0448\u0435\u043D \u043A\u043B\u0443\u0447 \u0432\u043E ${Y.origin}`;case"invalid_union":return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441";case"invalid_element":return`\u0413\u0440\u0435\u0448\u043D\u0430 \u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442 \u0432\u043E ${Y.origin}`;default:return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441"}}};function mV(){return{localeError:bo()}}var go=()=>{let $={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"NaN":"nombor";case"object":{if(Array.isArray(Y))return"array";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"};return(Y)=>{switch(Y.code){case"invalid_type":return`Input tidak sah: dijangka ${Y.expected}, diterima ${W(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Input tidak sah: dijangka ${t(Y.values[0])}`;return`Pilihan tidak sah: dijangka salah satu daripada ${c(Y.values,"|")}`;case"too_big":{let U=Y.inclusive?"<=":"<",Z=J(Y.origin);if(Z)return`Terlalu besar: dijangka ${Y.origin??"nilai"} ${Z.verb} ${U}${Y.maximum.toString()} ${Z.unit??"elemen"}`;return`Terlalu besar: dijangka ${Y.origin??"nilai"} adalah ${U}${Y.maximum.toString()}`}case"too_small":{let U=Y.inclusive?">=":">",Z=J(Y.origin);if(Z)return`Terlalu kecil: dijangka ${Y.origin} ${Z.verb} ${U}${Y.minimum.toString()} ${Z.unit}`;return`Terlalu kecil: dijangka ${Y.origin} adalah ${U}${Y.minimum.toString()}`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`String tidak sah: mesti bermula dengan "${U.prefix}"`;if(U.format==="ends_with")return`String tidak sah: mesti berakhir dengan "${U.suffix}"`;if(U.format==="includes")return`String tidak sah: mesti mengandungi "${U.includes}"`;if(U.format==="regex")return`String tidak sah: mesti sepadan dengan corak ${U.pattern}`;return`${X[U.format]??Y.format} tidak sah`}case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${Y.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${c(Y.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${Y.origin}`;case"invalid_union":return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${Y.origin}`;default:return"Input tidak sah"}}};function yV(){return{localeError:go()}}var fo=()=>{let $={string:{unit:"tekens"},file:{unit:"bytes"},array:{unit:"elementen"},set:{unit:"elementen"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"NaN":"getal";case"object":{if(Array.isArray(Y))return"array";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"};return(Y)=>{switch(Y.code){case"invalid_type":return`Ongeldige invoer: verwacht ${Y.expected}, ontving ${W(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Ongeldige invoer: verwacht ${t(Y.values[0])}`;return`Ongeldige optie: verwacht \xE9\xE9n van ${c(Y.values,"|")}`;case"too_big":{let U=Y.inclusive?"<=":"<",Z=J(Y.origin);if(Z)return`Te lang: verwacht dat ${Y.origin??"waarde"} ${U}${Y.maximum.toString()} ${Z.unit??"elementen"} bevat`;return`Te lang: verwacht dat ${Y.origin??"waarde"} ${U}${Y.maximum.toString()} is`}case"too_small":{let U=Y.inclusive?">=":">",Z=J(Y.origin);if(Z)return`Te kort: verwacht dat ${Y.origin} ${U}${Y.minimum.toString()} ${Z.unit} bevat`;return`Te kort: verwacht dat ${Y.origin} ${U}${Y.minimum.toString()} is`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`Ongeldige tekst: moet met "${U.prefix}" beginnen`;if(U.format==="ends_with")return`Ongeldige tekst: moet op "${U.suffix}" eindigen`;if(U.format==="includes")return`Ongeldige tekst: moet "${U.includes}" bevatten`;if(U.format==="regex")return`Ongeldige tekst: moet overeenkomen met patroon ${U.pattern}`;return`Ongeldig: ${X[U.format]??Y.format}`}case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${Y.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${Y.keys.length>1?"s":""}: ${c(Y.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${Y.origin}`;case"invalid_union":return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${Y.origin}`;default:return"Ongeldige invoer"}}};function cV(){return{localeError:fo()}}var mo=()=>{let $={string:{unit:"tegn",verb:"\xE5 ha"},file:{unit:"bytes",verb:"\xE5 ha"},array:{unit:"elementer",verb:"\xE5 inneholde"},set:{unit:"elementer",verb:"\xE5 inneholde"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"NaN":"tall";case"object":{if(Array.isArray(Y))return"liste";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return(Y)=>{switch(Y.code){case"invalid_type":return`Ugyldig input: forventet ${Y.expected}, fikk ${W(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Ugyldig verdi: forventet ${t(Y.values[0])}`;return`Ugyldig valg: forventet en av ${c(Y.values,"|")}`;case"too_big":{let U=Y.inclusive?"<=":"<",Z=J(Y.origin);if(Z)return`For stor(t): forventet ${Y.origin??"value"} til \xE5 ha ${U}${Y.maximum.toString()} ${Z.unit??"elementer"}`;return`For stor(t): forventet ${Y.origin??"value"} til \xE5 ha ${U}${Y.maximum.toString()}`}case"too_small":{let U=Y.inclusive?">=":">",Z=J(Y.origin);if(Z)return`For lite(n): forventet ${Y.origin} til \xE5 ha ${U}${Y.minimum.toString()} ${Z.unit}`;return`For lite(n): forventet ${Y.origin} til \xE5 ha ${U}${Y.minimum.toString()}`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`Ugyldig streng: m\xE5 starte med "${U.prefix}"`;if(U.format==="ends_with")return`Ugyldig streng: m\xE5 ende med "${U.suffix}"`;if(U.format==="includes")return`Ugyldig streng: m\xE5 inneholde "${U.includes}"`;if(U.format==="regex")return`Ugyldig streng: m\xE5 matche m\xF8nsteret ${U.pattern}`;return`Ugyldig ${X[U.format]??Y.format}`}case"not_multiple_of":return`Ugyldig tall: m\xE5 v\xE6re et multiplum av ${Y.divisor}`;case"unrecognized_keys":return`${Y.keys.length>1?"Ukjente n\xF8kler":"Ukjent n\xF8kkel"}: ${c(Y.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8kkel i ${Y.origin}`;case"invalid_union":return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${Y.origin}`;default:return"Ugyldig input"}}};function uV(){return{localeError:mo()}}var yo=()=>{let $={string:{unit:"harf",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"unsur",verb:"olmal\u0131d\u0131r"},set:{unit:"unsur",verb:"olmal\u0131d\u0131r"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"NaN":"numara";case"object":{if(Array.isArray(Y))return"saf";if(Y===null)return"gayb";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"giren",email:"epostag\xE2h",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO heng\xE2m\u0131",date:"ISO tarihi",time:"ISO zaman\u0131",duration:"ISO m\xFCddeti",ipv4:"IPv4 ni\u015F\xE2n\u0131",ipv6:"IPv6 ni\u015F\xE2n\u0131",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-\u015Fifreli metin",base64url:"base64url-\u015Fifreli metin",json_string:"JSON metin",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"giren"};return(Y)=>{switch(Y.code){case"invalid_type":return`F\xE2sit giren: umulan ${Y.expected}, al\u0131nan ${W(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`F\xE2sit giren: umulan ${t(Y.values[0])}`;return`F\xE2sit tercih: m\xFBteberler ${c(Y.values,"|")}`;case"too_big":{let U=Y.inclusive?"<=":"<",Z=J(Y.origin);if(Z)return`Fazla b\xFCy\xFCk: ${Y.origin??"value"}, ${U}${Y.maximum.toString()} ${Z.unit??"elements"} sahip olmal\u0131yd\u0131.`;return`Fazla b\xFCy\xFCk: ${Y.origin??"value"}, ${U}${Y.maximum.toString()} olmal\u0131yd\u0131.`}case"too_small":{let U=Y.inclusive?">=":">",Z=J(Y.origin);if(Z)return`Fazla k\xFC\xE7\xFCk: ${Y.origin}, ${U}${Y.minimum.toString()} ${Z.unit} sahip olmal\u0131yd\u0131.`;return`Fazla k\xFC\xE7\xFCk: ${Y.origin}, ${U}${Y.minimum.toString()} olmal\u0131yd\u0131.`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`F\xE2sit metin: "${U.prefix}" ile ba\u015Flamal\u0131.`;if(U.format==="ends_with")return`F\xE2sit metin: "${U.suffix}" ile bitmeli.`;if(U.format==="includes")return`F\xE2sit metin: "${U.includes}" ihtiv\xE2 etmeli.`;if(U.format==="regex")return`F\xE2sit metin: ${U.pattern} nak\u015F\u0131na uymal\u0131.`;return`F\xE2sit ${X[U.format]??Y.format}`}case"not_multiple_of":return`F\xE2sit say\u0131: ${Y.divisor} kat\u0131 olmal\u0131yd\u0131.`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar ${Y.keys.length>1?"s":""}: ${c(Y.keys,", ")}`;case"invalid_key":return`${Y.origin} i\xE7in tan\u0131nmayan anahtar var.`;case"invalid_union":return"Giren tan\u0131namad\u0131.";case"invalid_element":return`${Y.origin} i\xE7in tan\u0131nmayan k\u0131ymet var.`;default:return"K\u0131ymet tan\u0131namad\u0131."}}};function pV(){return{localeError:yo()}}var co=()=>{let $={string:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},file:{unit:"\u0628\u0627\u06CC\u067C\u0633",verb:"\u0648\u0644\u0631\u064A"},array:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},set:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"NaN":"\u0639\u062F\u062F";case"object":{if(Array.isArray(Y))return"\u0627\u0631\u06D0";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"\u0648\u0631\u0648\u062F\u064A",email:"\u0628\u0631\u06CC\u069A\u0646\u0627\u0644\u06CC\u06A9",url:"\u06CC\u0648 \u0622\u0631 \u0627\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0646\u06CC\u067C\u0647 \u0627\u0648 \u0648\u062E\u062A",date:"\u0646\u06D0\u067C\u0647",time:"\u0648\u062E\u062A",duration:"\u0645\u0648\u062F\u0647",ipv4:"\u062F IPv4 \u067E\u062A\u0647",ipv6:"\u062F IPv6 \u067E\u062A\u0647",cidrv4:"\u062F IPv4 \u0633\u0627\u062D\u0647",cidrv6:"\u062F IPv6 \u0633\u0627\u062D\u0647",base64:"base64-encoded \u0645\u062A\u0646",base64url:"base64url-encoded \u0645\u062A\u0646",json_string:"JSON \u0645\u062A\u0646",e164:"\u062F E.164 \u0634\u0645\u06D0\u0631\u0647",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u064A"};return(Y)=>{switch(Y.code){case"invalid_type":return`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${Y.expected} \u0648\u0627\u06CC, \u0645\u06AB\u0631 ${W(Y.input)} \u062A\u0631\u0644\u0627\u0633\u0647 \u0634\u0648`;case"invalid_value":if(Y.values.length===1)return`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${t(Y.values[0])} \u0648\u0627\u06CC`;return`\u0646\u0627\u0633\u0645 \u0627\u0646\u062A\u062E\u0627\u0628: \u0628\u0627\u06CC\u062F \u06CC\u0648 \u0644\u0647 ${c(Y.values,"|")} \u0685\u062E\u0647 \u0648\u0627\u06CC`;case"too_big":{let U=Y.inclusive?"<=":"<",Z=J(Y.origin);if(Z)return`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${Y.origin??"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${U}${Y.maximum.toString()} ${Z.unit??"\u0639\u0646\u0635\u0631\u0648\u0646\u0647"} \u0648\u0644\u0631\u064A`;return`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${Y.origin??"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${U}${Y.maximum.toString()} \u0648\u064A`}case"too_small":{let U=Y.inclusive?">=":">",Z=J(Y.origin);if(Z)return`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${Y.origin} \u0628\u0627\u06CC\u062F ${U}${Y.minimum.toString()} ${Z.unit} \u0648\u0644\u0631\u064A`;return`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${Y.origin} \u0628\u0627\u06CC\u062F ${U}${Y.minimum.toString()} \u0648\u064A`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${U.prefix}" \u0633\u0631\u0647 \u067E\u06CC\u0644 \u0634\u064A`;if(U.format==="ends_with")return`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${U.suffix}" \u0633\u0631\u0647 \u067E\u0627\u06CC \u062A\u0647 \u0648\u0631\u0633\u064A\u0696\u064A`;if(U.format==="includes")return`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F "${U.includes}" \u0648\u0644\u0631\u064A`;if(U.format==="regex")return`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F ${U.pattern} \u0633\u0631\u0647 \u0645\u0637\u0627\u0628\u0642\u062A \u0648\u0644\u0631\u064A`;return`${X[U.format]??Y.format} \u0646\u0627\u0633\u0645 \u062F\u06CC`}case"not_multiple_of":return`\u0646\u0627\u0633\u0645 \u0639\u062F\u062F: \u0628\u0627\u06CC\u062F \u062F ${Y.divisor} \u0645\u0636\u0631\u0628 \u0648\u064A`;case"unrecognized_keys":return`\u0646\u0627\u0633\u0645 ${Y.keys.length>1?"\u06A9\u0644\u06CC\u0689\u0648\u0646\u0647":"\u06A9\u0644\u06CC\u0689"}: ${c(Y.keys,", ")}`;case"invalid_key":return`\u0646\u0627\u0633\u0645 \u06A9\u0644\u06CC\u0689 \u067E\u0647 ${Y.origin} \u06A9\u06D0`;case"invalid_union":return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A";case"invalid_element":return`\u0646\u0627\u0633\u0645 \u0639\u0646\u0635\u0631 \u067E\u0647 ${Y.origin} \u06A9\u06D0`;default:return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A"}}};function dV(){return{localeError:co()}}var uo=()=>{let $={string:{unit:"znak\xF3w",verb:"mie\u0107"},file:{unit:"bajt\xF3w",verb:"mie\u0107"},array:{unit:"element\xF3w",verb:"mie\u0107"},set:{unit:"element\xF3w",verb:"mie\u0107"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"NaN":"liczba";case"object":{if(Array.isArray(Y))return"tablica";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"wyra\u017Cenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"ci\u0105g znak\xF3w zakodowany w formacie base64",base64url:"ci\u0105g znak\xF3w zakodowany w formacie base64url",json_string:"ci\u0105g znak\xF3w w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wej\u015Bcie"};return(Y)=>{switch(Y.code){case"invalid_type":return`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${Y.expected}, otrzymano ${W(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${t(Y.values[0])}`;return`Nieprawid\u0142owa opcja: oczekiwano jednej z warto\u015Bci ${c(Y.values,"|")}`;case"too_big":{let U=Y.inclusive?"<=":"<",Z=J(Y.origin);if(Z)return`Za du\u017Ca warto\u015B\u0107: oczekiwano, \u017Ce ${Y.origin??"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${U}${Y.maximum.toString()} ${Z.unit??"element\xF3w"}`;return`Zbyt du\u017C(y/a/e): oczekiwano, \u017Ce ${Y.origin??"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${U}${Y.maximum.toString()}`}case"too_small":{let U=Y.inclusive?">=":">",Z=J(Y.origin);if(Z)return`Za ma\u0142a warto\u015B\u0107: oczekiwano, \u017Ce ${Y.origin??"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${U}${Y.minimum.toString()} ${Z.unit??"element\xF3w"}`;return`Zbyt ma\u0142(y/a/e): oczekiwano, \u017Ce ${Y.origin??"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${U}${Y.minimum.toString()}`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zaczyna\u0107 si\u0119 od "${U.prefix}"`;if(U.format==="ends_with")return`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi ko\u0144czy\u0107 si\u0119 na "${U.suffix}"`;if(U.format==="includes")return`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zawiera\u0107 "${U.includes}"`;if(U.format==="regex")return`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi odpowiada\u0107 wzorcowi ${U.pattern}`;return`Nieprawid\u0142ow(y/a/e) ${X[U.format]??Y.format}`}case"not_multiple_of":return`Nieprawid\u0142owa liczba: musi by\u0107 wielokrotno\u015Bci\u0105 ${Y.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${Y.keys.length>1?"s":""}: ${c(Y.keys,", ")}`;case"invalid_key":return`Nieprawid\u0142owy klucz w ${Y.origin}`;case"invalid_union":return"Nieprawid\u0142owe dane wej\u015Bciowe";case"invalid_element":return`Nieprawid\u0142owa warto\u015B\u0107 w ${Y.origin}`;default:return"Nieprawid\u0142owe dane wej\u015Bciowe"}}};function lV(){return{localeError:uo()}}var po=()=>{let $={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"NaN":"n\xFAmero";case"object":{if(Array.isArray(Y))return"array";if(Y===null)return"nulo";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"padr\xE3o",email:"endere\xE7o de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"dura\xE7\xE3o ISO",ipv4:"endere\xE7o IPv4",ipv6:"endere\xE7o IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return(Y)=>{switch(Y.code){case"invalid_type":return`Tipo inv\xE1lido: esperado ${Y.expected}, recebido ${W(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Entrada inv\xE1lida: esperado ${t(Y.values[0])}`;return`Op\xE7\xE3o inv\xE1lida: esperada uma das ${c(Y.values,"|")}`;case"too_big":{let U=Y.inclusive?"<=":"<",Z=J(Y.origin);if(Z)return`Muito grande: esperado que ${Y.origin??"valor"} tivesse ${U}${Y.maximum.toString()} ${Z.unit??"elementos"}`;return`Muito grande: esperado que ${Y.origin??"valor"} fosse ${U}${Y.maximum.toString()}`}case"too_small":{let U=Y.inclusive?">=":">",Z=J(Y.origin);if(Z)return`Muito pequeno: esperado que ${Y.origin} tivesse ${U}${Y.minimum.toString()} ${Z.unit}`;return`Muito pequeno: esperado que ${Y.origin} fosse ${U}${Y.minimum.toString()}`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`Texto inv\xE1lido: deve come\xE7ar com "${U.prefix}"`;if(U.format==="ends_with")return`Texto inv\xE1lido: deve terminar com "${U.suffix}"`;if(U.format==="includes")return`Texto inv\xE1lido: deve incluir "${U.includes}"`;if(U.format==="regex")return`Texto inv\xE1lido: deve corresponder ao padr\xE3o ${U.pattern}`;return`${X[U.format]??Y.format} inv\xE1lido`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: deve ser m\xFAltiplo de ${Y.divisor}`;case"unrecognized_keys":return`Chave${Y.keys.length>1?"s":""} desconhecida${Y.keys.length>1?"s":""}: ${c(Y.keys,", ")}`;case"invalid_key":return`Chave inv\xE1lida em ${Y.origin}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido em ${Y.origin}`;default:return"Campo inv\xE1lido"}}};function rV(){return{localeError:po()}}function sC($,J,W,X){let Y=Math.abs($),U=Y%10,Z=Y%100;if(Z>=11&&Z<=19)return X;if(U===1)return J;if(U>=2&&U<=4)return W;return X}var lo=()=>{let $={string:{unit:{one:"\u0441\u0438\u043C\u0432\u043E\u043B",few:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",many:"\u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u0430",many:"\u0431\u0430\u0439\u0442"},verb:"\u0438\u043C\u0435\u0442\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(Y))return"\u043C\u0430\u0441\u0441\u0438\u0432";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"\u0432\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043C\u044F",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u044F",duration:"ISO \u0434\u043B\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64",base64url:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64url",json_string:"JSON \u0441\u0442\u0440\u043E\u043A\u0430",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0432\u043E\u0434"};return(Y)=>{switch(Y.code){case"invalid_type":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${Y.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043E ${W(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${t(Y.values[0])}`;return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0430\u0440\u0438\u0430\u043D\u0442: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0434\u043D\u043E \u0438\u0437 ${c(Y.values,"|")}`;case"too_big":{let U=Y.inclusive?"<=":"<",Z=J(Y.origin);if(Z){let H=Number(Y.maximum),G=sC(H,Z.unit.one,Z.unit.few,Z.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${Y.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${U}${Y.maximum.toString()} ${G}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${Y.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 ${U}${Y.maximum.toString()}`}case"too_small":{let U=Y.inclusive?">=":">",Z=J(Y.origin);if(Z){let H=Number(Y.minimum),G=sC(H,Z.unit.one,Z.unit.few,Z.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${Y.origin} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${U}${Y.minimum.toString()} ${G}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${Y.origin} \u0431\u0443\u0434\u0435\u0442 ${U}${Y.minimum.toString()}`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u043D\u0430\u0447\u0438\u043D\u0430\u0442\u044C\u0441\u044F \u0441 "${U.prefix}"`;if(U.format==="ends_with")return`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0437\u0430\u043A\u0430\u043D\u0447\u0438\u0432\u0430\u0442\u044C\u0441\u044F \u043D\u0430 "${U.suffix}"`;if(U.format==="includes")return`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C "${U.includes}"`;if(U.format==="regex")return`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043E\u0432\u0430\u0442\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${U.pattern}`;return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 ${X[U.format]??Y.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0447\u0438\u0441\u043B\u043E: \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${Y.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u043E\u0437\u043D\u0430\u043D\u043D${Y.keys.length>1?"\u044B\u0435":"\u044B\u0439"} \u043A\u043B\u044E\u0447${Y.keys.length>1?"\u0438":""}: ${c(Y.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043A\u043B\u044E\u0447 \u0432 ${Y.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435";case"invalid_element":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0432 ${Y.origin}`;default:return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435"}}};function nV(){return{localeError:lo()}}var ro=()=>{let $={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"NaN":"\u0161tevilo";case"object":{if(Array.isArray(Y))return"tabela";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"vnos",email:"e-po\u0161tni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in \u010Das",date:"ISO datum",time:"ISO \u010Das",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 \u0161tevilka",jwt:"JWT",template_literal:"vnos"};return(Y)=>{switch(Y.code){case"invalid_type":return`Neveljaven vnos: pri\u010Dakovano ${Y.expected}, prejeto ${W(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Neveljaven vnos: pri\u010Dakovano ${t(Y.values[0])}`;return`Neveljavna mo\u017Enost: pri\u010Dakovano eno izmed ${c(Y.values,"|")}`;case"too_big":{let U=Y.inclusive?"<=":"<",Z=J(Y.origin);if(Z)return`Preveliko: pri\u010Dakovano, da bo ${Y.origin??"vrednost"} imelo ${U}${Y.maximum.toString()} ${Z.unit??"elementov"}`;return`Preveliko: pri\u010Dakovano, da bo ${Y.origin??"vrednost"} ${U}${Y.maximum.toString()}`}case"too_small":{let U=Y.inclusive?">=":">",Z=J(Y.origin);if(Z)return`Premajhno: pri\u010Dakovano, da bo ${Y.origin} imelo ${U}${Y.minimum.toString()} ${Z.unit}`;return`Premajhno: pri\u010Dakovano, da bo ${Y.origin} ${U}${Y.minimum.toString()}`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`Neveljaven niz: mora se za\u010Deti z "${U.prefix}"`;if(U.format==="ends_with")return`Neveljaven niz: mora se kon\u010Dati z "${U.suffix}"`;if(U.format==="includes")return`Neveljaven niz: mora vsebovati "${U.includes}"`;if(U.format==="regex")return`Neveljaven niz: mora ustrezati vzorcu ${U.pattern}`;return`Neveljaven ${X[U.format]??Y.format}`}case"not_multiple_of":return`Neveljavno \u0161tevilo: mora biti ve\u010Dkratnik ${Y.divisor}`;case"unrecognized_keys":return`Neprepoznan${Y.keys.length>1?"i klju\u010Di":" klju\u010D"}: ${c(Y.keys,", ")}`;case"invalid_key":return`Neveljaven klju\u010D v ${Y.origin}`;case"invalid_union":return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${Y.origin}`;default:return"Neveljaven vnos"}}};function iV(){return{localeError:ro()}}var no=()=>{let $={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att inneh\xE5lla"},set:{unit:"objekt",verb:"att inneh\xE5lla"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"NaN":"antal";case"object":{if(Array.isArray(Y))return"lista";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"regulj\xE4rt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad str\xE4ng",base64url:"base64url-kodad str\xE4ng",json_string:"JSON-str\xE4ng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"};return(Y)=>{switch(Y.code){case"invalid_type":return`Ogiltig inmatning: f\xF6rv\xE4ntat ${Y.expected}, fick ${W(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Ogiltig inmatning: f\xF6rv\xE4ntat ${t(Y.values[0])}`;return`Ogiltigt val: f\xF6rv\xE4ntade en av ${c(Y.values,"|")}`;case"too_big":{let U=Y.inclusive?"<=":"<",Z=J(Y.origin);if(Z)return`F\xF6r stor(t): f\xF6rv\xE4ntade ${Y.origin??"v\xE4rdet"} att ha ${U}${Y.maximum.toString()} ${Z.unit??"element"}`;return`F\xF6r stor(t): f\xF6rv\xE4ntat ${Y.origin??"v\xE4rdet"} att ha ${U}${Y.maximum.toString()}`}case"too_small":{let U=Y.inclusive?">=":">",Z=J(Y.origin);if(Z)return`F\xF6r lite(t): f\xF6rv\xE4ntade ${Y.origin??"v\xE4rdet"} att ha ${U}${Y.minimum.toString()} ${Z.unit}`;return`F\xF6r lite(t): f\xF6rv\xE4ntade ${Y.origin??"v\xE4rdet"} att ha ${U}${Y.minimum.toString()}`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`Ogiltig str\xE4ng: m\xE5ste b\xF6rja med "${U.prefix}"`;if(U.format==="ends_with")return`Ogiltig str\xE4ng: m\xE5ste sluta med "${U.suffix}"`;if(U.format==="includes")return`Ogiltig str\xE4ng: m\xE5ste inneh\xE5lla "${U.includes}"`;if(U.format==="regex")return`Ogiltig str\xE4ng: m\xE5ste matcha m\xF6nstret "${U.pattern}"`;return`Ogiltig(t) ${X[U.format]??Y.format}`}case"not_multiple_of":return`Ogiltigt tal: m\xE5ste vara en multipel av ${Y.divisor}`;case"unrecognized_keys":return`${Y.keys.length>1?"Ok\xE4nda nycklar":"Ok\xE4nd nyckel"}: ${c(Y.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${Y.origin??"v\xE4rdet"}`;case"invalid_union":return"Ogiltig input";case"invalid_element":return`Ogiltigt v\xE4rde i ${Y.origin??"v\xE4rdet"}`;default:return"Ogiltig input"}}};function tV(){return{localeError:no()}}var io=()=>{let $={string:{unit:"\u0B8E\u0BB4\u0BC1\u0BA4\u0BCD\u0BA4\u0BC1\u0B95\u0BCD\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},file:{unit:"\u0BAA\u0BC8\u0B9F\u0BCD\u0B9F\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},array:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},set:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"\u0B8E\u0BA3\u0BCD \u0B85\u0BB2\u0BCD\u0BB2\u0BBE\u0BA4\u0BA4\u0BC1":"\u0B8E\u0BA3\u0BCD";case"object":{if(Array.isArray(Y))return"\u0B85\u0BA3\u0BBF";if(Y===null)return"\u0BB5\u0BC6\u0BB1\u0BC1\u0BAE\u0BC8";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"\u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1",email:"\u0BAE\u0BBF\u0BA9\u0BCD\u0BA9\u0B9E\u0BCD\u0B9A\u0BB2\u0BCD \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0BA4\u0BC7\u0BA4\u0BBF \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",date:"ISO \u0BA4\u0BC7\u0BA4\u0BBF",time:"ISO \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",duration:"ISO \u0B95\u0BBE\u0BB2 \u0B85\u0BB3\u0BB5\u0BC1",ipv4:"IPv4 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",ipv6:"IPv6 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",cidrv4:"IPv4 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",cidrv6:"IPv6 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",base64:"base64-encoded \u0B9A\u0BB0\u0BAE\u0BCD",base64url:"base64url-encoded \u0B9A\u0BB0\u0BAE\u0BCD",json_string:"JSON \u0B9A\u0BB0\u0BAE\u0BCD",e164:"E.164 \u0B8E\u0BA3\u0BCD",jwt:"JWT",template_literal:"input"};return(Y)=>{switch(Y.code){case"invalid_type":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${Y.expected}, \u0BAA\u0BC6\u0BB1\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${W(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${t(Y.values[0])}`;return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0BB0\u0BC1\u0BAA\u0BCD\u0BAA\u0BAE\u0BCD: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${c(Y.values,"|")} \u0B87\u0BB2\u0BCD \u0B92\u0BA9\u0BCD\u0BB1\u0BC1`;case"too_big":{let U=Y.inclusive?"<=":"<",Z=J(Y.origin);if(Z)return`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${Y.origin??"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${U}${Y.maximum.toString()} ${Z.unit??"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD"} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;return`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${Y.origin??"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${U}${Y.maximum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"too_small":{let U=Y.inclusive?">=":">",Z=J(Y.origin);if(Z)return`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${Y.origin} ${U}${Y.minimum.toString()} ${Z.unit} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;return`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${Y.origin} ${U}${Y.minimum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${U.prefix}" \u0B87\u0BB2\u0BCD \u0BA4\u0BCA\u0B9F\u0B99\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;if(U.format==="ends_with")return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${U.suffix}" \u0B87\u0BB2\u0BCD \u0BAE\u0BC1\u0B9F\u0BBF\u0BB5\u0B9F\u0BC8\u0BAF \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;if(U.format==="includes")return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${U.includes}" \u0B90 \u0B89\u0BB3\u0BCD\u0BB3\u0B9F\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;if(U.format==="regex")return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: ${U.pattern} \u0BAE\u0BC1\u0BB1\u0BC8\u0BAA\u0BBE\u0B9F\u0BCD\u0B9F\u0BC1\u0B9F\u0BA9\u0BCD \u0BAA\u0BCA\u0BB0\u0BC1\u0BA8\u0BCD\u0BA4 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 ${X[U.format]??Y.format}`}case"not_multiple_of":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B8E\u0BA3\u0BCD: ${Y.divisor} \u0B87\u0BA9\u0BCD \u0BAA\u0BB2\u0BAE\u0BBE\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;case"unrecognized_keys":return`\u0B85\u0B9F\u0BC8\u0BAF\u0BBE\u0BB3\u0BAE\u0BCD \u0BA4\u0BC6\u0BB0\u0BBF\u0BAF\u0BBE\u0BA4 \u0BB5\u0BBF\u0B9A\u0BC8${Y.keys.length>1?"\u0B95\u0BB3\u0BCD":""}: ${c(Y.keys,", ")}`;case"invalid_key":return`${Y.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0B9A\u0BC8`;case"invalid_union":return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1";case"invalid_element":return`${Y.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1`;default:return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1"}}};function aV(){return{localeError:io()}}var to=()=>{let $={string:{unit:"\u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},file:{unit:"\u0E44\u0E1A\u0E15\u0E4C",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},array:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},set:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"\u0E44\u0E21\u0E48\u0E43\u0E0A\u0E48\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02 (NaN)":"\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02";case"object":{if(Array.isArray(Y))return"\u0E2D\u0E32\u0E23\u0E4C\u0E40\u0E23\u0E22\u0E4C (Array)";if(Y===null)return"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E04\u0E48\u0E32 (null)";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19",email:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48\u0E2D\u0E35\u0E40\u0E21\u0E25",url:"URL",emoji:"\u0E2D\u0E34\u0E42\u0E21\u0E08\u0E34",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",date:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E41\u0E1A\u0E1A ISO",time:"\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",duration:"\u0E0A\u0E48\u0E27\u0E07\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",ipv4:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv4",ipv6:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv6",cidrv4:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv4",cidrv6:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv6",base64:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64",base64url:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64 \u0E2A\u0E33\u0E2B\u0E23\u0E31\u0E1A URL",json_string:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A JSON",e164:"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C\u0E23\u0E30\u0E2B\u0E27\u0E48\u0E32\u0E07\u0E1B\u0E23\u0E30\u0E40\u0E17\u0E28 (E.164)",jwt:"\u0E42\u0E17\u0E40\u0E04\u0E19 JWT",template_literal:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19"};return(Y)=>{switch(Y.code){case"invalid_type":return`\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${Y.expected} \u0E41\u0E15\u0E48\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A ${W(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`\u0E04\u0E48\u0E32\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${t(Y.values[0])}`;return`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19\u0E2B\u0E19\u0E36\u0E48\u0E07\u0E43\u0E19 ${c(Y.values,"|")}`;case"too_big":{let U=Y.inclusive?"\u0E44\u0E21\u0E48\u0E40\u0E01\u0E34\u0E19":"\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32",Z=J(Y.origin);if(Z)return`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${Y.origin??"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${U} ${Y.maximum.toString()} ${Z.unit??"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23"}`;return`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${Y.origin??"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${U} ${Y.maximum.toString()}`}case"too_small":{let U=Y.inclusive?"\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E19\u0E49\u0E2D\u0E22":"\u0E21\u0E32\u0E01\u0E01\u0E27\u0E48\u0E32",Z=J(Y.origin);if(Z)return`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${Y.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${U} ${Y.minimum.toString()} ${Z.unit}`;return`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${Y.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${U} ${Y.minimum.toString()}`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E02\u0E36\u0E49\u0E19\u0E15\u0E49\u0E19\u0E14\u0E49\u0E27\u0E22 "${U.prefix}"`;if(U.format==="ends_with")return`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E25\u0E07\u0E17\u0E49\u0E32\u0E22\u0E14\u0E49\u0E27\u0E22 "${U.suffix}"`;if(U.format==="includes")return`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E21\u0E35 "${U.includes}" \u0E2D\u0E22\u0E39\u0E48\u0E43\u0E19\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21`;if(U.format==="regex")return`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14 ${U.pattern}`;return`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: ${X[U.format]??Y.format}`}case"not_multiple_of":return`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E40\u0E1B\u0E47\u0E19\u0E08\u0E33\u0E19\u0E27\u0E19\u0E17\u0E35\u0E48\u0E2B\u0E32\u0E23\u0E14\u0E49\u0E27\u0E22 ${Y.divisor} \u0E44\u0E14\u0E49\u0E25\u0E07\u0E15\u0E31\u0E27`;case"unrecognized_keys":return`\u0E1E\u0E1A\u0E04\u0E35\u0E22\u0E4C\u0E17\u0E35\u0E48\u0E44\u0E21\u0E48\u0E23\u0E39\u0E49\u0E08\u0E31\u0E01: ${c(Y.keys,", ")}`;case"invalid_key":return`\u0E04\u0E35\u0E22\u0E4C\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${Y.origin}`;case"invalid_union":return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E44\u0E21\u0E48\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E22\u0E39\u0E40\u0E19\u0E35\u0E22\u0E19\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14\u0E44\u0E27\u0E49";case"invalid_element":return`\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${Y.origin}`;default:return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"}}};function oV(){return{localeError:to()}}var ao=($)=>{let J=typeof $;switch(J){case"number":return Number.isNaN($)?"NaN":"number";case"object":{if(Array.isArray($))return"array";if($===null)return"null";if(Object.getPrototypeOf($)!==Object.prototype&&$.constructor)return $.constructor.name}}return J},oo=()=>{let $={string:{unit:"karakter",verb:"olmal\u0131"},file:{unit:"bayt",verb:"olmal\u0131"},array:{unit:"\xF6\u011Fe",verb:"olmal\u0131"},set:{unit:"\xF6\u011Fe",verb:"olmal\u0131"}};function J(X){return $[X]??null}let W={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO s\xFCre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aral\u0131\u011F\u0131",cidrv6:"IPv6 aral\u0131\u011F\u0131",base64:"base64 ile \u015Fifrelenmi\u015F metin",base64url:"base64url ile \u015Fifrelenmi\u015F metin",json_string:"JSON dizesi",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"\u015Eablon dizesi"};return(X)=>{switch(X.code){case"invalid_type":return`Ge\xE7ersiz de\u011Fer: beklenen ${X.expected}, al\u0131nan ${ao(X.input)}`;case"invalid_value":if(X.values.length===1)return`Ge\xE7ersiz de\u011Fer: beklenen ${t(X.values[0])}`;return`Ge\xE7ersiz se\xE7enek: a\u015Fa\u011F\u0131dakilerden biri olmal\u0131: ${c(X.values,"|")}`;case"too_big":{let Y=X.inclusive?"<=":"<",U=J(X.origin);if(U)return`\xC7ok b\xFCy\xFCk: beklenen ${X.origin??"de\u011Fer"} ${Y}${X.maximum.toString()} ${U.unit??"\xF6\u011Fe"}`;return`\xC7ok b\xFCy\xFCk: beklenen ${X.origin??"de\u011Fer"} ${Y}${X.maximum.toString()}`}case"too_small":{let Y=X.inclusive?">=":">",U=J(X.origin);if(U)return`\xC7ok k\xFC\xE7\xFCk: beklenen ${X.origin} ${Y}${X.minimum.toString()} ${U.unit}`;return`\xC7ok k\xFC\xE7\xFCk: beklenen ${X.origin} ${Y}${X.minimum.toString()}`}case"invalid_format":{let Y=X;if(Y.format==="starts_with")return`Ge\xE7ersiz metin: "${Y.prefix}" ile ba\u015Flamal\u0131`;if(Y.format==="ends_with")return`Ge\xE7ersiz metin: "${Y.suffix}" ile bitmeli`;if(Y.format==="includes")return`Ge\xE7ersiz metin: "${Y.includes}" i\xE7ermeli`;if(Y.format==="regex")return`Ge\xE7ersiz metin: ${Y.pattern} desenine uymal\u0131`;return`Ge\xE7ersiz ${W[Y.format]??X.format}`}case"not_multiple_of":return`Ge\xE7ersiz say\u0131: ${X.divisor} ile tam b\xF6l\xFCnebilmeli`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar${X.keys.length>1?"lar":""}: ${c(X.keys,", ")}`;case"invalid_key":return`${X.origin} i\xE7inde ge\xE7ersiz anahtar`;case"invalid_union":return"Ge\xE7ersiz de\u011Fer";case"invalid_element":return`${X.origin} i\xE7inde ge\xE7ersiz de\u011Fer`;default:return"Ge\xE7ersiz de\u011Fer"}}};function sV(){return{localeError:oo()}}var so=()=>{let $={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},file:{unit:"\u0431\u0430\u0439\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(Y))return"\u043C\u0430\u0441\u0438\u0432";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u0435\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u043E\u0457 \u043F\u043E\u0448\u0442\u0438",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0434\u0430\u0442\u0430 \u0442\u0430 \u0447\u0430\u0441 ISO",date:"\u0434\u0430\u0442\u0430 ISO",time:"\u0447\u0430\u0441 ISO",duration:"\u0442\u0440\u0438\u0432\u0430\u043B\u0456\u0441\u0442\u044C ISO",ipv4:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv4",ipv6:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv6",cidrv4:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv4",cidrv6:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv6",base64:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64",base64url:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64url",json_string:"\u0440\u044F\u0434\u043E\u043A JSON",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"};return(Y)=>{switch(Y.code){case"invalid_type":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${Y.expected}, \u043E\u0442\u0440\u0438\u043C\u0430\u043D\u043E ${W(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${t(Y.values[0])}`;return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0430 \u043E\u043F\u0446\u0456\u044F: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F \u043E\u0434\u043D\u0435 \u0437 ${c(Y.values,"|")}`;case"too_big":{let U=Y.inclusive?"<=":"<",Z=J(Y.origin);if(Z)return`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${Y.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} ${Z.verb} ${U}${Y.maximum.toString()} ${Z.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432"}`;return`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${Y.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} \u0431\u0443\u0434\u0435 ${U}${Y.maximum.toString()}`}case"too_small":{let U=Y.inclusive?">=":">",Z=J(Y.origin);if(Z)return`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${Y.origin} ${Z.verb} ${U}${Y.minimum.toString()} ${Z.unit}`;return`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${Y.origin} \u0431\u0443\u0434\u0435 ${U}${Y.minimum.toString()}`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043F\u043E\u0447\u0438\u043D\u0430\u0442\u0438\u0441\u044F \u0437 "${U.prefix}"`;if(U.format==="ends_with")return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0437\u0430\u043A\u0456\u043D\u0447\u0443\u0432\u0430\u0442\u0438\u0441\u044F \u043D\u0430 "${U.suffix}"`;if(U.format==="includes")return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043C\u0456\u0441\u0442\u0438\u0442\u0438 "${U.includes}"`;if(U.format==="regex")return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0432\u0456\u0434\u043F\u043E\u0432\u0456\u0434\u0430\u0442\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${U.pattern}`;return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 ${X[U.format]??Y.format}`}case"not_multiple_of":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0447\u0438\u0441\u043B\u043E: \u043F\u043E\u0432\u0438\u043D\u043D\u043E \u0431\u0443\u0442\u0438 \u043A\u0440\u0430\u0442\u043D\u0438\u043C ${Y.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u043E\u0437\u043F\u0456\u0437\u043D\u0430\u043D\u0438\u0439 \u043A\u043B\u044E\u0447${Y.keys.length>1?"\u0456":""}: ${c(Y.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u043A\u043B\u044E\u0447 \u0443 ${Y.origin}`;case"invalid_union":return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456";case"invalid_element":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F \u0443 ${Y.origin}`;default:return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"}}};function MU(){return{localeError:so()}}function eV(){return MU()}var eo=()=>{let $={string:{unit:"\u062D\u0631\u0648\u0641",verb:"\u06C1\u0648\u0646\u0627"},file:{unit:"\u0628\u0627\u0626\u0679\u0633",verb:"\u06C1\u0648\u0646\u0627"},array:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"},set:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"NaN":"\u0646\u0645\u0628\u0631";case"object":{if(Array.isArray(Y))return"\u0622\u0631\u06D2";if(Y===null)return"\u0646\u0644";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"\u0627\u0646 \u067E\u0679",email:"\u0627\u06CC \u0645\u06CC\u0644 \u0627\u06CC\u0688\u0631\u06CC\u0633",url:"\u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",uuidv4:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 4",uuidv6:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 6",nanoid:"\u0646\u06CC\u0646\u0648 \u0622\u0626\u06CC \u0688\u06CC",guid:"\u062C\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid2:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC 2",ulid:"\u06CC\u0648 \u0627\u06CC\u0644 \u0622\u0626\u06CC \u0688\u06CC",xid:"\u0627\u06CC\u06A9\u0633 \u0622\u0626\u06CC \u0688\u06CC",ksuid:"\u06A9\u06D2 \u0627\u06CC\u0633 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",datetime:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0688\u06CC\u0679 \u0679\u0627\u0626\u0645",date:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u062A\u0627\u0631\u06CC\u062E",time:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0648\u0642\u062A",duration:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0645\u062F\u062A",ipv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0627\u06CC\u0688\u0631\u06CC\u0633",ipv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0627\u06CC\u0688\u0631\u06CC\u0633",cidrv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0631\u06CC\u0646\u062C",cidrv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0631\u06CC\u0646\u062C",base64:"\u0628\u06CC\u0633 64 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",base64url:"\u0628\u06CC\u0633 64 \u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",json_string:"\u062C\u06D2 \u0627\u06CC\u0633 \u0627\u0648 \u0627\u06CC\u0646 \u0633\u0679\u0631\u0646\u06AF",e164:"\u0627\u06CC 164 \u0646\u0645\u0628\u0631",jwt:"\u062C\u06D2 \u0688\u0628\u0644\u06CC\u0648 \u0679\u06CC",template_literal:"\u0627\u0646 \u067E\u0679"};return(Y)=>{switch(Y.code){case"invalid_type":return`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${Y.expected} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627\u060C ${W(Y.input)} \u0645\u0648\u0635\u0648\u0644 \u06C1\u0648\u0627`;case"invalid_value":if(Y.values.length===1)return`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${t(Y.values[0])} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`;return`\u063A\u0644\u0637 \u0622\u067E\u0634\u0646: ${c(Y.values,"|")} \u0645\u06CC\u06BA \u0633\u06D2 \u0627\u06CC\u06A9 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`;case"too_big":{let U=Y.inclusive?"<=":"<",Z=J(Y.origin);if(Z)return`\u0628\u06C1\u062A \u0628\u0691\u0627: ${Y.origin??"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u06D2 ${U}${Y.maximum.toString()} ${Z.unit??"\u0639\u0646\u0627\u0635\u0631"} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`;return`\u0628\u06C1\u062A \u0628\u0691\u0627: ${Y.origin??"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u0627 ${U}${Y.maximum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"too_small":{let U=Y.inclusive?">=":">",Z=J(Y.origin);if(Z)return`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${Y.origin} \u06A9\u06D2 ${U}${Y.minimum.toString()} ${Z.unit} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`;return`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${Y.origin} \u06A9\u0627 ${U}${Y.minimum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${U.prefix}" \u0633\u06D2 \u0634\u0631\u0648\u0639 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;if(U.format==="ends_with")return`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${U.suffix}" \u067E\u0631 \u062E\u062A\u0645 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;if(U.format==="includes")return`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${U.includes}" \u0634\u0627\u0645\u0644 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;if(U.format==="regex")return`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: \u067E\u06CC\u0679\u0631\u0646 ${U.pattern} \u0633\u06D2 \u0645\u06CC\u0686 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;return`\u063A\u0644\u0637 ${X[U.format]??Y.format}`}case"not_multiple_of":return`\u063A\u0644\u0637 \u0646\u0645\u0628\u0631: ${Y.divisor} \u06A9\u0627 \u0645\u0636\u0627\u0639\u0641 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;case"unrecognized_keys":return`\u063A\u06CC\u0631 \u062A\u0633\u0644\u06CC\u0645 \u0634\u062F\u06C1 \u06A9\u06CC${Y.keys.length>1?"\u0632":""}: ${c(Y.keys,"\u060C ")}`;case"invalid_key":return`${Y.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u06A9\u06CC`;case"invalid_union":return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679";case"invalid_element":return`${Y.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u0648\u06CC\u0644\u06CC\u0648`;default:return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679"}}};function $Q(){return{localeError:eo()}}var $s=()=>{let $={string:{unit:"k\xFD t\u1EF1",verb:"c\xF3"},file:{unit:"byte",verb:"c\xF3"},array:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"},set:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"NaN":"s\u1ED1";case"object":{if(Array.isArray(Y))return"m\u1EA3ng";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"\u0111\u1EA7u v\xE0o",email:"\u0111\u1ECBa ch\u1EC9 email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ng\xE0y gi\u1EDD ISO",date:"ng\xE0y ISO",time:"gi\u1EDD ISO",duration:"kho\u1EA3ng th\u1EDDi gian ISO",ipv4:"\u0111\u1ECBa ch\u1EC9 IPv4",ipv6:"\u0111\u1ECBa ch\u1EC9 IPv6",cidrv4:"d\u1EA3i IPv4",cidrv6:"d\u1EA3i IPv6",base64:"chu\u1ED7i m\xE3 h\xF3a base64",base64url:"chu\u1ED7i m\xE3 h\xF3a base64url",json_string:"chu\u1ED7i JSON",e164:"s\u1ED1 E.164",jwt:"JWT",template_literal:"\u0111\u1EA7u v\xE0o"};return(Y)=>{switch(Y.code){case"invalid_type":return`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${Y.expected}, nh\u1EADn \u0111\u01B0\u1EE3c ${W(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${t(Y.values[0])}`;return`T\xF9y ch\u1ECDn kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i m\u1ED9t trong c\xE1c gi\xE1 tr\u1ECB ${c(Y.values,"|")}`;case"too_big":{let U=Y.inclusive?"<=":"<",Z=J(Y.origin);if(Z)return`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${Y.origin??"gi\xE1 tr\u1ECB"} ${Z.verb} ${U}${Y.maximum.toString()} ${Z.unit??"ph\u1EA7n t\u1EED"}`;return`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${Y.origin??"gi\xE1 tr\u1ECB"} ${U}${Y.maximum.toString()}`}case"too_small":{let U=Y.inclusive?">=":">",Z=J(Y.origin);if(Z)return`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${Y.origin} ${Z.verb} ${U}${Y.minimum.toString()} ${Z.unit}`;return`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${Y.origin} ${U}${Y.minimum.toString()}`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i b\u1EAFt \u0111\u1EA7u b\u1EB1ng "${U.prefix}"`;if(U.format==="ends_with")return`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i k\u1EBFt th\xFAc b\u1EB1ng "${U.suffix}"`;if(U.format==="includes")return`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i bao g\u1ED3m "${U.includes}"`;if(U.format==="regex")return`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i kh\u1EDBp v\u1EDBi m\u1EABu ${U.pattern}`;return`${X[U.format]??Y.format} kh\xF4ng h\u1EE3p l\u1EC7`}case"not_multiple_of":return`S\u1ED1 kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i l\xE0 b\u1ED9i s\u1ED1 c\u1EE7a ${Y.divisor}`;case"unrecognized_keys":return`Kh\xF3a kh\xF4ng \u0111\u01B0\u1EE3c nh\u1EADn d\u1EA1ng: ${c(Y.keys,", ")}`;case"invalid_key":return`Kh\xF3a kh\xF4ng h\u1EE3p l\u1EC7 trong ${Y.origin}`;case"invalid_union":return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7";case"invalid_element":return`Gi\xE1 tr\u1ECB kh\xF4ng h\u1EE3p l\u1EC7 trong ${Y.origin}`;default:return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7"}}};function JQ(){return{localeError:$s()}}var Js=()=>{let $={string:{unit:"\u5B57\u7B26",verb:"\u5305\u542B"},file:{unit:"\u5B57\u8282",verb:"\u5305\u542B"},array:{unit:"\u9879",verb:"\u5305\u542B"},set:{unit:"\u9879",verb:"\u5305\u542B"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"\u975E\u6570\u5B57(NaN)":"\u6570\u5B57";case"object":{if(Array.isArray(Y))return"\u6570\u7EC4";if(Y===null)return"\u7A7A\u503C(null)";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"\u8F93\u5165",email:"\u7535\u5B50\u90AE\u4EF6",url:"URL",emoji:"\u8868\u60C5\u7B26\u53F7",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u671F\u65F6\u95F4",date:"ISO\u65E5\u671F",time:"ISO\u65F6\u95F4",duration:"ISO\u65F6\u957F",ipv4:"IPv4\u5730\u5740",ipv6:"IPv6\u5730\u5740",cidrv4:"IPv4\u7F51\u6BB5",cidrv6:"IPv6\u7F51\u6BB5",base64:"base64\u7F16\u7801\u5B57\u7B26\u4E32",base64url:"base64url\u7F16\u7801\u5B57\u7B26\u4E32",json_string:"JSON\u5B57\u7B26\u4E32",e164:"E.164\u53F7\u7801",jwt:"JWT",template_literal:"\u8F93\u5165"};return(Y)=>{switch(Y.code){case"invalid_type":return`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${Y.expected}\uFF0C\u5B9E\u9645\u63A5\u6536 ${W(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${t(Y.values[0])}`;return`\u65E0\u6548\u9009\u9879\uFF1A\u671F\u671B\u4EE5\u4E0B\u4E4B\u4E00 ${c(Y.values,"|")}`;case"too_big":{let U=Y.inclusive?"<=":"<",Z=J(Y.origin);if(Z)return`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${Y.origin??"\u503C"} ${U}${Y.maximum.toString()} ${Z.unit??"\u4E2A\u5143\u7D20"}`;return`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${Y.origin??"\u503C"} ${U}${Y.maximum.toString()}`}case"too_small":{let U=Y.inclusive?">=":">",Z=J(Y.origin);if(Z)return`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${Y.origin} ${U}${Y.minimum.toString()} ${Z.unit}`;return`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${Y.origin} ${U}${Y.minimum.toString()}`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${U.prefix}" \u5F00\u5934`;if(U.format==="ends_with")return`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${U.suffix}" \u7ED3\u5C3E`;if(U.format==="includes")return`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u5305\u542B "${U.includes}"`;if(U.format==="regex")return`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u6EE1\u8DB3\u6B63\u5219\u8868\u8FBE\u5F0F ${U.pattern}`;return`\u65E0\u6548${X[U.format]??Y.format}`}case"not_multiple_of":return`\u65E0\u6548\u6570\u5B57\uFF1A\u5FC5\u987B\u662F ${Y.divisor} \u7684\u500D\u6570`;case"unrecognized_keys":return`\u51FA\u73B0\u672A\u77E5\u7684\u952E(key): ${c(Y.keys,", ")}`;case"invalid_key":return`${Y.origin} \u4E2D\u7684\u952E(key)\u65E0\u6548`;case"invalid_union":return"\u65E0\u6548\u8F93\u5165";case"invalid_element":return`${Y.origin} \u4E2D\u5305\u542B\u65E0\u6548\u503C(value)`;default:return"\u65E0\u6548\u8F93\u5165"}}};function WQ(){return{localeError:Js()}}var Ws=()=>{let $={string:{unit:"\u5B57\u5143",verb:"\u64C1\u6709"},file:{unit:"\u4F4D\u5143\u7D44",verb:"\u64C1\u6709"},array:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"},set:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"NaN":"number";case"object":{if(Array.isArray(Y))return"array";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"\u8F38\u5165",email:"\u90F5\u4EF6\u5730\u5740",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u65E5\u671F\u6642\u9593",date:"ISO \u65E5\u671F",time:"ISO \u6642\u9593",duration:"ISO \u671F\u9593",ipv4:"IPv4 \u4F4D\u5740",ipv6:"IPv6 \u4F4D\u5740",cidrv4:"IPv4 \u7BC4\u570D",cidrv6:"IPv6 \u7BC4\u570D",base64:"base64 \u7DE8\u78BC\u5B57\u4E32",base64url:"base64url \u7DE8\u78BC\u5B57\u4E32",json_string:"JSON \u5B57\u4E32",e164:"E.164 \u6578\u503C",jwt:"JWT",template_literal:"\u8F38\u5165"};return(Y)=>{switch(Y.code){case"invalid_type":return`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${Y.expected}\uFF0C\u4F46\u6536\u5230 ${W(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${t(Y.values[0])}`;return`\u7121\u6548\u7684\u9078\u9805\uFF1A\u9810\u671F\u70BA\u4EE5\u4E0B\u5176\u4E2D\u4E4B\u4E00 ${c(Y.values,"|")}`;case"too_big":{let U=Y.inclusive?"<=":"<",Z=J(Y.origin);if(Z)return`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${Y.origin??"\u503C"} \u61C9\u70BA ${U}${Y.maximum.toString()} ${Z.unit??"\u500B\u5143\u7D20"}`;return`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${Y.origin??"\u503C"} \u61C9\u70BA ${U}${Y.maximum.toString()}`}case"too_small":{let U=Y.inclusive?">=":">",Z=J(Y.origin);if(Z)return`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${Y.origin} \u61C9\u70BA ${U}${Y.minimum.toString()} ${Z.unit}`;return`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${Y.origin} \u61C9\u70BA ${U}${Y.minimum.toString()}`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${U.prefix}" \u958B\u982D`;if(U.format==="ends_with")return`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${U.suffix}" \u7D50\u5C3E`;if(U.format==="includes")return`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u5305\u542B "${U.includes}"`;if(U.format==="regex")return`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u7B26\u5408\u683C\u5F0F ${U.pattern}`;return`\u7121\u6548\u7684 ${X[U.format]??Y.format}`}case"not_multiple_of":return`\u7121\u6548\u7684\u6578\u5B57\uFF1A\u5FC5\u9808\u70BA ${Y.divisor} \u7684\u500D\u6578`;case"unrecognized_keys":return`\u7121\u6CD5\u8B58\u5225\u7684\u9375\u503C${Y.keys.length>1?"\u5011":""}\uFF1A${c(Y.keys,"\u3001")}`;case"invalid_key":return`${Y.origin} \u4E2D\u6709\u7121\u6548\u7684\u9375\u503C`;case"invalid_union":return"\u7121\u6548\u7684\u8F38\u5165\u503C";case"invalid_element":return`${Y.origin} \u4E2D\u6709\u7121\u6548\u7684\u503C`;default:return"\u7121\u6548\u7684\u8F38\u5165\u503C"}}};function XQ(){return{localeError:Ws()}}var Xs=()=>{let $={string:{unit:"\xE0mi",verb:"n\xED"},file:{unit:"bytes",verb:"n\xED"},array:{unit:"nkan",verb:"n\xED"},set:{unit:"nkan",verb:"n\xED"}};function J(Y){return $[Y]??null}let W=(Y)=>{let U=typeof Y;switch(U){case"number":return Number.isNaN(Y)?"NaN":"n\u1ECD\u0301mb\xE0";case"object":{if(Array.isArray(Y))return"akop\u1ECD";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return U},X={regex:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9",email:"\xE0d\xEDr\u1EB9\u0301s\xEC \xECm\u1EB9\u0301l\xEC",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\xE0k\xF3k\xF2 ISO",date:"\u1ECDj\u1ECD\u0301 ISO",time:"\xE0k\xF3k\xF2 ISO",duration:"\xE0k\xF3k\xF2 t\xF3 p\xE9 ISO",ipv4:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv4",ipv6:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv6",cidrv4:"\xE0gb\xE8gb\xE8 IPv4",cidrv6:"\xE0gb\xE8gb\xE8 IPv6",base64:"\u1ECD\u0300r\u1ECD\u0300 t\xED a k\u1ECD\u0301 n\xED base64",base64url:"\u1ECD\u0300r\u1ECD\u0300 base64url",json_string:"\u1ECD\u0300r\u1ECD\u0300 JSON",e164:"n\u1ECD\u0301mb\xE0 E.164",jwt:"JWT",template_literal:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9"};return(Y)=>{switch(Y.code){case"invalid_type":return`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${Y.expected}, \xE0m\u1ECD\u0300 a r\xED ${W(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${t(Y.values[0])}`;return`\xC0\u1E63\xE0y\xE0n a\u1E63\xEC\u1E63e: yan \u1ECD\u0300kan l\xE1ra ${c(Y.values,"|")}`;case"too_big":{let U=Y.inclusive?"<=":"<",Z=J(Y.origin);if(Z)return`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${Y.origin??"iye"} ${Z.verb} ${U}${Y.maximum} ${Z.unit}`;return`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 ${U}${Y.maximum}`}case"too_small":{let U=Y.inclusive?">=":">",Z=J(Y.origin);if(Z)return`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${Y.origin} ${Z.verb} ${U}${Y.minimum} ${Z.unit}`;return`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 ${U}${Y.minimum}`}case"invalid_format":{let U=Y;if(U.format==="starts_with")return`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\u1EB9\u0300r\u1EB9\u0300 p\u1EB9\u0300l\xFA "${U.prefix}"`;if(U.format==="ends_with")return`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 par\xED p\u1EB9\u0300l\xFA "${U.suffix}"`;if(U.format==="includes")return`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 n\xED "${U.includes}"`;if(U.format==="regex")return`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\xE1 \xE0p\u1EB9\u1EB9r\u1EB9 mu ${U.pattern}`;return`A\u1E63\xEC\u1E63e: ${X[U.format]??Y.format}`}case"not_multiple_of":return`N\u1ECD\u0301mb\xE0 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 j\u1EB9\u0301 \xE8y\xE0 p\xEDp\xEDn ti ${Y.divisor}`;case"unrecognized_keys":return`B\u1ECDt\xECn\xEC \xE0\xECm\u1ECD\u0300: ${c(Y.keys,", ")}`;case"invalid_key":return`B\u1ECDt\xECn\xEC a\u1E63\xEC\u1E63e n\xEDn\xFA ${Y.origin}`;case"invalid_union":return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e";case"invalid_element":return`Iye a\u1E63\xEC\u1E63e n\xEDn\xFA ${Y.origin}`;default:return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e"}}};function YQ(){return{localeError:Xs()}}var UQ=Symbol("ZodOutput"),ZQ=Symbol("ZodInput");class QU{constructor(){this._map=new WeakMap,this._idmap=new Map}add($,...J){let W=J[0];if(this._map.set($,W),W&&typeof W==="object"&&"id"in W){if(this._idmap.has(W.id))throw Error(`ID ${W.id} already exists in the registry`);this._idmap.set(W.id,$)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove($){let J=this._map.get($);if(J&&typeof J==="object"&&"id"in J)this._idmap.delete(J.id);return this._map.delete($),this}get($){let J=$._zod.parent;if(J){let W={...this.get(J)??{}};delete W.id;let X={...W,...this._map.get($)};return Object.keys(X).length?X:void 0}return this._map.get($)}has($){return this._map.has($)}}function b3(){return new QU}var a8=b3();function HQ($,J){return new $({type:"string",...o(J)})}function GQ($,J){return new $({type:"string",coerce:!0,...o(J)})}function g3($,J){return new $({type:"string",format:"email",check:"string_format",abort:!1,...o(J)})}function AU($,J){return new $({type:"string",format:"guid",check:"string_format",abort:!1,...o(J)})}function f3($,J){return new $({type:"string",format:"uuid",check:"string_format",abort:!1,...o(J)})}function m3($,J){return new $({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...o(J)})}function y3($,J){return new $({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...o(J)})}function c3($,J){return new $({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...o(J)})}function IU($,J){return new $({type:"string",format:"url",check:"string_format",abort:!1,...o(J)})}function u3($,J){return new $({type:"string",format:"emoji",check:"string_format",abort:!1,...o(J)})}function p3($,J){return new $({type:"string",format:"nanoid",check:"string_format",abort:!1,...o(J)})}function d3($,J){return new $({type:"string",format:"cuid",check:"string_format",abort:!1,...o(J)})}function l3($,J){return new $({type:"string",format:"cuid2",check:"string_format",abort:!1,...o(J)})}function r3($,J){return new $({type:"string",format:"ulid",check:"string_format",abort:!1,...o(J)})}function n3($,J){return new $({type:"string",format:"xid",check:"string_format",abort:!1,...o(J)})}function i3($,J){return new $({type:"string",format:"ksuid",check:"string_format",abort:!1,...o(J)})}function t3($,J){return new $({type:"string",format:"ipv4",check:"string_format",abort:!1,...o(J)})}function a3($,J){return new $({type:"string",format:"ipv6",check:"string_format",abort:!1,...o(J)})}function o3($,J){return new $({type:"string",format:"cidrv4",check:"string_format",abort:!1,...o(J)})}function s3($,J){return new $({type:"string",format:"cidrv6",check:"string_format",abort:!1,...o(J)})}function e3($,J){return new $({type:"string",format:"base64",check:"string_format",abort:!1,...o(J)})}function $z($,J){return new $({type:"string",format:"base64url",check:"string_format",abort:!1,...o(J)})}function Jz($,J){return new $({type:"string",format:"e164",check:"string_format",abort:!1,...o(J)})}function Wz($,J){return new $({type:"string",format:"jwt",check:"string_format",abort:!1,...o(J)})}var zQ={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function wQ($,J){return new $({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...o(J)})}function DQ($,J){return new $({type:"string",format:"date",check:"string_format",...o(J)})}function KQ($,J){return new $({type:"string",format:"time",check:"string_format",precision:null,...o(J)})}function OQ($,J){return new $({type:"string",format:"duration",check:"string_format",...o(J)})}function FQ($,J){return new $({type:"number",checks:[],...o(J)})}function EQ($,J){return new $({type:"number",coerce:!0,checks:[],...o(J)})}function MQ($,J){return new $({type:"number",check:"number_format",abort:!1,format:"safeint",...o(J)})}function VQ($,J){return new $({type:"number",check:"number_format",abort:!1,format:"float32",...o(J)})}function QQ($,J){return new $({type:"number",check:"number_format",abort:!1,format:"float64",...o(J)})}function AQ($,J){return new $({type:"number",check:"number_format",abort:!1,format:"int32",...o(J)})}function IQ($,J){return new $({type:"number",check:"number_format",abort:!1,format:"uint32",...o(J)})}function LQ($,J){return new $({type:"boolean",...o(J)})}function PQ($,J){return new $({type:"boolean",coerce:!0,...o(J)})}function _Q($,J){return new $({type:"bigint",...o(J)})}function NQ($,J){return new $({type:"bigint",coerce:!0,...o(J)})}function BQ($,J){return new $({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...o(J)})}function RQ($,J){return new $({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...o(J)})}function SQ($,J){return new $({type:"symbol",...o(J)})}function jQ($,J){return new $({type:"undefined",...o(J)})}function kQ($,J){return new $({type:"null",...o(J)})}function vQ($){return new $({type:"any"})}function CQ($){return new $({type:"unknown"})}function TQ($,J){return new $({type:"never",...o(J)})}function qQ($,J){return new $({type:"void",...o(J)})}function hQ($,J){return new $({type:"date",...o(J)})}function xQ($,J){return new $({type:"date",coerce:!0,...o(J)})}function bQ($,J){return new $({type:"nan",...o(J)})}function j5($,J){return new N3({check:"less_than",...o(J),value:$,inclusive:!1})}function g6($,J){return new N3({check:"less_than",...o(J),value:$,inclusive:!0})}function k5($,J){return new B3({check:"greater_than",...o(J),value:$,inclusive:!1})}function f$($,J){return new B3({check:"greater_than",...o(J),value:$,inclusive:!0})}function gQ($){return k5(0,$)}function fQ($){return j5(0,$)}function mQ($){return g6(0,$)}function yQ($){return f$(0,$)}function N7($,J){return new uE({check:"multiple_of",...o(J),value:$})}function EX($,J){return new lE({check:"max_size",...o(J),maximum:$})}function B7($,J){return new rE({check:"min_size",...o(J),minimum:$})}function LU($,J){return new nE({check:"size_equals",...o(J),size:$})}function MX($,J){return new iE({check:"max_length",...o(J),maximum:$})}function c9($,J){return new tE({check:"min_length",...o(J),minimum:$})}function VX($,J){return new aE({check:"length_equals",...o(J),length:$})}function PU($,J){return new oE({check:"string_format",format:"regex",...o(J),pattern:$})}function _U($){return new sE({check:"string_format",format:"lowercase",...o($)})}function NU($){return new eE({check:"string_format",format:"uppercase",...o($)})}function BU($,J){return new $M({check:"string_format",format:"includes",...o(J),includes:$})}function RU($,J){return new JM({check:"string_format",format:"starts_with",...o(J),prefix:$})}function SU($,J){return new WM({check:"string_format",format:"ends_with",...o(J),suffix:$})}function cQ($,J,W){return new XM({check:"property",property:$,schema:J,...o(W)})}function jU($,J){return new YM({check:"mime_type",mime:$,...o(J)})}function v5($){return new UM({check:"overwrite",tx:$})}function kU($){return v5((J)=>J.normalize($))}function vU(){return v5(($)=>$.trim())}function CU(){return v5(($)=>$.toLowerCase())}function TU(){return v5(($)=>$.toUpperCase())}function uQ($,J,W){return new $({type:"array",element:J,...o(W)})}function Ys($,J,W){return new $({type:"union",options:J,...o(W)})}function Us($,J,W,X){return new $({type:"union",options:W,discriminator:J,...o(X)})}function Zs($,J,W){return new $({type:"intersection",left:J,right:W})}function Hs($,J,W,X){let Y=W instanceof S0;return new $({type:"tuple",items:J,rest:Y?W:null,...o(Y?X:W)})}function Gs($,J,W,X){return new $({type:"record",keyType:J,valueType:W,...o(X)})}function zs($,J,W,X){return new $({type:"map",keyType:J,valueType:W,...o(X)})}function ws($,J,W){return new $({type:"set",valueType:J,...o(W)})}function Ds($,J,W){let X=Array.isArray(J)?Object.fromEntries(J.map((Y)=>[Y,Y])):J;return new $({type:"enum",entries:X,...o(W)})}function Ks($,J,W){return new $({type:"enum",entries:J,...o(W)})}function Os($,J,W){return new $({type:"literal",values:Array.isArray(J)?J:[J],...o(W)})}function pQ($,J){return new $({type:"file",...o(J)})}function Fs($,J){return new $({type:"transform",transform:J})}function Es($,J){return new $({type:"optional",innerType:J})}function Ms($,J){return new $({type:"nullable",innerType:J})}function Vs($,J,W){return new $({type:"default",innerType:J,get defaultValue(){return typeof W==="function"?W():YE(W)}})}function Qs($,J,W){return new $({type:"nonoptional",innerType:J,...o(W)})}function As($,J){return new $({type:"success",innerType:J})}function Is($,J,W){return new $({type:"catch",innerType:J,catchValue:typeof W==="function"?W:()=>W})}function Ls($,J,W){return new $({type:"pipe",in:J,out:W})}function Ps($,J){return new $({type:"readonly",innerType:J})}function _s($,J,W){return new $({type:"template_literal",parts:J,...o(W)})}function Ns($,J){return new $({type:"lazy",getter:J})}function Bs($,J){return new $({type:"promise",innerType:J})}function dQ($,J,W){let X=o(W);return X.abort??(X.abort=!0),new $({type:"custom",check:"custom",fn:J,...X})}function lQ($,J,W){return new $({type:"custom",check:"custom",fn:J,...o(W)})}function rQ($){let J=eC((W)=>{return W.addIssue=(X)=>{if(typeof X==="string")W.issues.push(zX(X,W.value,J._zod.def));else{let Y=X;if(Y.fatal)Y.continue=!1;Y.code??(Y.code="custom"),Y.input??(Y.input=W.value),Y.inst??(Y.inst=J),Y.continue??(Y.continue=!J._zod.def.abort),W.issues.push(zX(Y))}},$(W.value,W)});return J}function eC($,J){let W=new q1({check:"custom",...o(J)});return W._zod.check=$,W}function nQ($,J){let W=o(J),X=W.truthy??["true","1","yes","on","y","enabled"],Y=W.falsy??["false","0","no","off","n","disabled"];if(W.case!=="sensitive")X=X.map((O)=>typeof O==="string"?O.toLowerCase():O),Y=Y.map((O)=>typeof O==="string"?O.toLowerCase():O);let U=new Set(X),Z=new Set(Y),H=$.Codec??DU,G=$.Boolean??wU,w=new($.String??_7)({type:"string",error:W.error}),D=new G({type:"boolean",error:W.error}),K=new H({type:"pipe",in:w,out:D,transform:(O,F)=>{let M=O;if(W.case!=="sensitive")M=M.toLowerCase();if(U.has(M))return!0;else if(Z.has(M))return!1;else return F.issues.push({code:"invalid_value",expected:"stringbool",values:[...U,...Z],input:F.value,inst:K,continue:!1}),{}},reverseTransform:(O,F)=>{if(O===!0)return X[0]||"true";else return Y[0]||"false"},error:W.error});return K}function QX($,J,W,X={}){let Y=o(X),U={...o(X),check:"string_format",type:"string",format:J,fn:typeof W==="function"?W:(H)=>W.test(H),...Y};if(W instanceof RegExp)U.pattern=W;return new $(U)}class Xz{constructor($){this.counter=0,this.metadataRegistry=$?.metadata??a8,this.target=$?.target??"draft-2020-12",this.unrepresentable=$?.unrepresentable??"throw",this.override=$?.override??(()=>{}),this.io=$?.io??"output",this.seen=new Map}process($,J={path:[],schemaPath:[]}){var W;let X=$._zod.def,Y={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},U=this.seen.get($);if(U){if(U.count++,J.schemaPath.includes($))U.cycle=J.path;return U.schema}let Z={schema:{},count:1,cycle:void 0,path:J.path};this.seen.set($,Z);let H=$._zod.toJSONSchema?.();if(H)Z.schema=H;else{let w={...J,schemaPath:[...J.schemaPath,$],path:J.path},D=$._zod.parent;if(D)Z.ref=D,this.process(D,w),this.seen.get(D).isParent=!0;else{let K=Z.schema;switch(X.type){case"string":{let O=K;O.type="string";let{minimum:F,maximum:M,format:A,patterns:I,contentEncoding:P}=$._zod.bag;if(typeof F==="number")O.minLength=F;if(typeof M==="number")O.maxLength=M;if(A){if(O.format=Y[A]??A,O.format==="")delete O.format}if(P)O.contentEncoding=P;if(I&&I.size>0){let Q=[...I];if(Q.length===1)O.pattern=Q[0].source;else if(Q.length>1)Z.schema.allOf=[...Q.map((N)=>({...this.target==="draft-7"||this.target==="draft-4"||this.target==="openapi-3.0"?{type:"string"}:{},pattern:N.source}))]}break}case"number":{let O=K,{minimum:F,maximum:M,format:A,multipleOf:I,exclusiveMaximum:P,exclusiveMinimum:Q}=$._zod.bag;if(typeof A==="string"&&A.includes("int"))O.type="integer";else O.type="number";if(typeof Q==="number")if(this.target==="draft-4"||this.target==="openapi-3.0")O.minimum=Q,O.exclusiveMinimum=!0;else O.exclusiveMinimum=Q;if(typeof F==="number"){if(O.minimum=F,typeof Q==="number"&&this.target!=="draft-4")if(Q>=F)delete O.minimum;else delete O.exclusiveMinimum}if(typeof P==="number")if(this.target==="draft-4"||this.target==="openapi-3.0")O.maximum=P,O.exclusiveMaximum=!0;else O.exclusiveMaximum=P;if(typeof M==="number"){if(O.maximum=M,typeof P==="number"&&this.target!=="draft-4")if(P<=M)delete O.maximum;else delete O.exclusiveMaximum}if(typeof I==="number")O.multipleOf=I;break}case"boolean":{let O=K;O.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw Error("Symbols cannot be represented in JSON Schema");break}case"null":{if(this.target==="openapi-3.0")K.type="string",K.nullable=!0,K.enum=[null];else K.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw Error("Void cannot be represented in JSON Schema");break}case"never":{K.not={};break}case"date":{if(this.unrepresentable==="throw")throw Error("Date cannot be represented in JSON Schema");break}case"array":{let O=K,{minimum:F,maximum:M}=$._zod.bag;if(typeof F==="number")O.minItems=F;if(typeof M==="number")O.maxItems=M;O.type="array",O.items=this.process(X.element,{...w,path:[...w.path,"items"]});break}case"object":{let O=K;O.type="object",O.properties={};let F=X.shape;for(let I in F)O.properties[I]=this.process(F[I],{...w,path:[...w.path,"properties",I]});let M=new Set(Object.keys(F)),A=new Set([...M].filter((I)=>{let P=X.shape[I]._zod;if(this.io==="input")return P.optin===void 0;else return P.optout===void 0}));if(A.size>0)O.required=Array.from(A);if(X.catchall?._zod.def.type==="never")O.additionalProperties=!1;else if(!X.catchall){if(this.io==="output")O.additionalProperties=!1}else if(X.catchall)O.additionalProperties=this.process(X.catchall,{...w,path:[...w.path,"additionalProperties"]});break}case"union":{let O=K,F=X.options.map((M,A)=>this.process(M,{...w,path:[...w.path,"anyOf",A]}));O.anyOf=F;break}case"intersection":{let O=K,F=this.process(X.left,{...w,path:[...w.path,"allOf",0]}),M=this.process(X.right,{...w,path:[...w.path,"allOf",1]}),A=(P)=>("allOf"in P)&&Object.keys(P).length===1,I=[...A(F)?F.allOf:[F],...A(M)?M.allOf:[M]];O.allOf=I;break}case"tuple":{let O=K;O.type="array";let F=this.target==="draft-2020-12"?"prefixItems":"items",M=this.target==="draft-2020-12"?"items":this.target==="openapi-3.0"?"items":"additionalItems",A=X.items.map((N,_)=>this.process(N,{...w,path:[...w.path,F,_]})),I=X.rest?this.process(X.rest,{...w,path:[...w.path,M,...this.target==="openapi-3.0"?[X.items.length]:[]]}):null;if(this.target==="draft-2020-12"){if(O.prefixItems=A,I)O.items=I}else if(this.target==="openapi-3.0"){if(O.items={anyOf:A},I)O.items.anyOf.push(I);if(O.minItems=A.length,!I)O.maxItems=A.length}else if(O.items=A,I)O.additionalItems=I;let{minimum:P,maximum:Q}=$._zod.bag;if(typeof P==="number")O.minItems=P;if(typeof Q==="number")O.maxItems=Q;break}case"record":{let O=K;if(O.type="object",this.target==="draft-7"||this.target==="draft-2020-12")O.propertyNames=this.process(X.keyType,{...w,path:[...w.path,"propertyNames"]});O.additionalProperties=this.process(X.valueType,{...w,path:[...w.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw Error("Set cannot be represented in JSON Schema");break}case"enum":{let O=K,F=$U(X.entries);if(F.every((M)=>typeof M==="number"))O.type="number";if(F.every((M)=>typeof M==="string"))O.type="string";O.enum=F;break}case"literal":{let O=K,F=[];for(let M of X.values)if(M===void 0){if(this.unrepresentable==="throw")throw Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof M==="bigint")if(this.unrepresentable==="throw")throw Error("BigInt literals cannot be represented in JSON Schema");else F.push(Number(M));else F.push(M);if(F.length===0);else if(F.length===1){let M=F[0];if(O.type=M===null?"null":typeof M,this.target==="draft-4"||this.target==="openapi-3.0")O.enum=[M];else O.const=M}else{if(F.every((M)=>typeof M==="number"))O.type="number";if(F.every((M)=>typeof M==="string"))O.type="string";if(F.every((M)=>typeof M==="boolean"))O.type="string";if(F.every((M)=>M===null))O.type="null";O.enum=F}break}case"file":{let O=K,F={type:"string",format:"binary",contentEncoding:"binary"},{minimum:M,maximum:A,mime:I}=$._zod.bag;if(M!==void 0)F.minLength=M;if(A!==void 0)F.maxLength=A;if(I)if(I.length===1)F.contentMediaType=I[0],Object.assign(O,F);else O.anyOf=I.map((P)=>{return{...F,contentMediaType:P}});else Object.assign(O,F);break}case"transform":{if(this.unrepresentable==="throw")throw Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{let O=this.process(X.innerType,w);if(this.target==="openapi-3.0")Z.ref=X.innerType,K.nullable=!0;else K.anyOf=[O,{type:"null"}];break}case"nonoptional":{this.process(X.innerType,w),Z.ref=X.innerType;break}case"success":{let O=K;O.type="boolean";break}case"default":{this.process(X.innerType,w),Z.ref=X.innerType,K.default=JSON.parse(JSON.stringify(X.defaultValue));break}case"prefault":{if(this.process(X.innerType,w),Z.ref=X.innerType,this.io==="input")K._prefault=JSON.parse(JSON.stringify(X.defaultValue));break}case"catch":{this.process(X.innerType,w),Z.ref=X.innerType;let O;try{O=X.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}K.default=O;break}case"nan":{if(this.unrepresentable==="throw")throw Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{let O=K,F=$._zod.pattern;if(!F)throw Error("Pattern not found in template literal");O.type="string",O.pattern=F.source;break}case"pipe":{let O=this.io==="input"?X.in._zod.def.type==="transform"?X.out:X.in:X.out;this.process(O,w),Z.ref=O;break}case"readonly":{this.process(X.innerType,w),Z.ref=X.innerType,K.readOnly=!0;break}case"promise":{this.process(X.innerType,w),Z.ref=X.innerType;break}case"optional":{this.process(X.innerType,w),Z.ref=X.innerType;break}case"lazy":{let O=$._zod.innerType;this.process(O,w),Z.ref=O;break}case"custom":{if(this.unrepresentable==="throw")throw Error("Custom types cannot be represented in JSON Schema");break}case"function":{if(this.unrepresentable==="throw")throw Error("Function types cannot be represented in JSON Schema");break}default:}}}let G=this.metadataRegistry.get($);if(G)Object.assign(Z.schema,G);if(this.io==="input"&&_4($))delete Z.schema.examples,delete Z.schema.default;if(this.io==="input"&&Z.schema._prefault)(W=Z.schema).default??(W.default=Z.schema._prefault);return delete Z.schema._prefault,this.seen.get($).schema}emit($,J){let W={cycles:J?.cycles??"ref",reused:J?.reused??"inline",external:J?.external??void 0},X=this.seen.get($);if(!X)throw Error("Unprocessed schema. This is a bug in Zod.");let Y=(z)=>{let w=this.target==="draft-2020-12"?"$defs":"definitions";if(W.external){let F=W.external.registry.get(z[0])?.id,M=W.external.uri??((I)=>I);if(F)return{ref:M(F)};let A=z[1].defId??z[1].schema.id??`schema${this.counter++}`;return z[1].defId=A,{defId:A,ref:`${M("__shared")}#/${w}/${A}`}}if(z[1]===X)return{ref:"#"};let K=`${"#"}/${w}/`,O=z[1].schema.id??`__schema${this.counter++}`;return{defId:O,ref:K+O}},U=(z)=>{if(z[1].schema.$ref)return;let w=z[1],{ref:D,defId:K}=Y(z);if(w.def={...w.schema},K)w.defId=K;let O=w.schema;for(let F in O)delete O[F];O.$ref=D};if(W.cycles==="throw")for(let z of this.seen.entries()){let w=z[1];if(w.cycle)throw Error(`Cycle detected: #/${w.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let z of this.seen.entries()){let w=z[1];if($===z[0]){U(z);continue}if(W.external){let K=W.external.registry.get(z[0])?.id;if($!==z[0]&&K){U(z);continue}}if(this.metadataRegistry.get(z[0])?.id){U(z);continue}if(w.cycle){U(z);continue}if(w.count>1){if(W.reused==="ref"){U(z);continue}}}let Z=(z,w)=>{let D=this.seen.get(z),K=D.def??D.schema,O={...K};if(D.ref===null)return;let F=D.ref;if(D.ref=null,F){Z(F,w);let M=this.seen.get(F).schema;if(M.$ref&&(w.target==="draft-7"||w.target==="draft-4"||w.target==="openapi-3.0"))K.allOf=K.allOf??[],K.allOf.push(M);else Object.assign(K,M),Object.assign(K,O)}if(!D.isParent)this.override({zodSchema:z,jsonSchema:K,path:D.path??[]})};for(let z of[...this.seen.entries()].reverse())Z(z[0],{target:this.target});let H={};if(this.target==="draft-2020-12")H.$schema="https://json-schema.org/draft/2020-12/schema";else if(this.target==="draft-7")H.$schema="http://json-schema.org/draft-07/schema#";else if(this.target==="draft-4")H.$schema="http://json-schema.org/draft-04/schema#";else if(this.target==="openapi-3.0");else console.warn(`Invalid target: ${this.target}`);if(W.external?.uri){let z=W.external.registry.get($)?.id;if(!z)throw Error("Schema is missing an `id` property");H.$id=W.external.uri(z)}Object.assign(H,X.def);let G=W.external?.defs??{};for(let z of this.seen.entries()){let w=z[1];if(w.def&&w.defId)G[w.defId]=w.def}if(W.external);else if(Object.keys(G).length>0)if(this.target==="draft-2020-12")H.$defs=G;else H.definitions=G;try{return JSON.parse(JSON.stringify(H))}catch(z){throw Error("Error converting schema to JSON.")}}}function iQ($,J){if($ instanceof QU){let X=new Xz(J),Y={};for(let H of $._idmap.entries()){let[G,z]=H;X.process(z)}let U={},Z={registry:$,uri:J?.uri,defs:Y};for(let H of $._idmap.entries()){let[G,z]=H;U[G]=X.emit(z,{...J,external:Z})}if(Object.keys(Y).length>0){let H=X.target==="draft-2020-12"?"$defs":"definitions";U.__shared={[H]:Y}}return{schemas:U}}let W=new Xz(J);return W.process($),W.emit($,J)}function _4($,J){let W=J??{seen:new Set};if(W.seen.has($))return!1;W.seen.add($);let Y=$._zod.def;switch(Y.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return _4(Y.element,W);case"object":{for(let U in Y.shape)if(_4(Y.shape[U],W))return!0;return!1}case"union":{for(let U of Y.options)if(_4(U,W))return!0;return!1}case"intersection":return _4(Y.left,W)||_4(Y.right,W);case"tuple":{for(let U of Y.items)if(_4(U,W))return!0;if(Y.rest&&_4(Y.rest,W))return!0;return!1}case"record":return _4(Y.keyType,W)||_4(Y.valueType,W);case"map":return _4(Y.keyType,W)||_4(Y.valueType,W);case"set":return _4(Y.valueType,W);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return _4(Y.innerType,W);case"lazy":return _4(Y.getter(),W);case"default":return _4(Y.innerType,W);case"prefault":return _4(Y.innerType,W);case"custom":return!1;case"transform":return!0;case"pipe":return _4(Y.in,W)||_4(Y.out,W);case"success":return!1;case"catch":return!1;case"function":return!1;default:}throw Error(`Unknown schema type: ${Y.type}`)}var $T={};var Gz={};x$(Gz,{time:()=>oQ,duration:()=>sQ,datetime:()=>tQ,date:()=>aQ,ZodISOTime:()=>Zz,ZodISODuration:()=>Hz,ZodISODateTime:()=>Yz,ZodISODate:()=>Uz});var Yz=f("ZodISODateTime",($,J)=>{AM.init($,J),C1.init($,J)});function tQ($){return wQ(Yz,$)}var Uz=f("ZodISODate",($,J)=>{IM.init($,J),C1.init($,J)});function aQ($){return DQ(Uz,$)}var Zz=f("ZodISOTime",($,J)=>{LM.init($,J),C1.init($,J)});function oQ($){return KQ(Zz,$)}var Hz=f("ZodISODuration",($,J)=>{PM.init($,J),C1.init($,J)});function sQ($){return OQ(Hz,$)}var WT=($,J)=>{UU.init($,J),$.name="ZodError",Object.defineProperties($,{format:{value:(W)=>HU($,W)},flatten:{value:(W)=>ZU($,W)},addIssue:{value:(W)=>{$.issues.push(W),$.message=JSON.stringify($.issues,HX,2)}},addIssues:{value:(W)=>{$.issues.push(...W),$.message=JSON.stringify($.issues,HX,2)}},isEmpty:{get(){return $.issues.length===0}}})},Ss=f("ZodError",WT),m$=f("ZodError",WT,{Parent:Error});var eQ=wX(m$),$A=DX(m$),JA=KX(m$),WA=OX(m$),XA=E3(m$),YA=M3(m$),UA=V3(m$),ZA=Q3(m$),HA=A3(m$),GA=I3(m$),zA=L3(m$),wA=P3(m$);var b0=f("ZodType",($,J)=>{return S0.init($,J),$.def=J,$.type=J.type,Object.defineProperty($,"_def",{value:J}),$.check=(...W)=>{return $.clone(s.mergeDefs(J,{checks:[...J.checks??[],...W.map((X)=>typeof X==="function"?{_zod:{check:X,def:{check:"custom"},onattach:[]}}:X)]}))},$.clone=(W,X)=>Q$($,W,X),$.brand=()=>$,$.register=(W,X)=>{return W.add($,X),$},$.parse=(W,X)=>eQ($,W,X,{callee:$.parse}),$.safeParse=(W,X)=>JA($,W,X),$.parseAsync=async(W,X)=>$A($,W,X,{callee:$.parseAsync}),$.safeParseAsync=async(W,X)=>WA($,W,X),$.spa=$.safeParseAsync,$.encode=(W,X)=>XA($,W,X),$.decode=(W,X)=>YA($,W,X),$.encodeAsync=async(W,X)=>UA($,W,X),$.decodeAsync=async(W,X)=>ZA($,W,X),$.safeEncode=(W,X)=>HA($,W,X),$.safeDecode=(W,X)=>GA($,W,X),$.safeEncodeAsync=async(W,X)=>zA($,W,X),$.safeDecodeAsync=async(W,X)=>wA($,W,X),$.refine=(W,X)=>$.check(mT(W,X)),$.superRefine=(W)=>$.check(yT(W)),$.overwrite=(W)=>$.check(v5(W)),$.optional=()=>u9($),$.nullable=()=>wz($),$.nullish=()=>u9(wz($)),$.nonoptional=(W)=>ST($,W),$.array=()=>l9($),$.or=(W)=>TA([$,W]),$.and=(W)=>FT($,W),$.transform=(W)=>Dz($,hA(W)),$.default=(W)=>NT($,W),$.prefault=(W)=>RT($,W),$.catch=(W)=>vT($,W),$.pipe=(W)=>Dz($,W),$.readonly=()=>qT($),$.describe=(W)=>{let X=$.clone();return a8.add(X,{description:W}),X},Object.defineProperty($,"description",{get(){return a8.get($)?.description},configurable:!0}),$.meta=(...W)=>{if(W.length===0)return a8.get($);let X=$.clone();return a8.add(X,W[0]),X},$.isOptional=()=>$.safeParse(void 0).success,$.isNullable=()=>$.safeParse(null).success,$}),KA=f("_ZodString",($,J)=>{_7.init($,J),b0.init($,J);let W=$._zod.bag;$.format=W.format??null,$.minLength=W.minimum??null,$.maxLength=W.maximum??null,$.regex=(...X)=>$.check(PU(...X)),$.includes=(...X)=>$.check(BU(...X)),$.startsWith=(...X)=>$.check(RU(...X)),$.endsWith=(...X)=>$.check(SU(...X)),$.min=(...X)=>$.check(c9(...X)),$.max=(...X)=>$.check(MX(...X)),$.length=(...X)=>$.check(VX(...X)),$.nonempty=(...X)=>$.check(c9(1,...X)),$.lowercase=(X)=>$.check(_U(X)),$.uppercase=(X)=>$.check(NU(X)),$.trim=()=>$.check(vU()),$.normalize=(...X)=>$.check(kU(...X)),$.toLowerCase=()=>$.check(CU()),$.toUpperCase=()=>$.check(TU())}),hU=f("ZodString",($,J)=>{_7.init($,J),KA.init($,J),$.email=(W)=>$.check(g3(OA,W)),$.url=(W)=>$.check(IU(Kz,W)),$.jwt=(W)=>$.check(Wz(jA,W)),$.emoji=(W)=>$.check(u3(FA,W)),$.guid=(W)=>$.check(AU(zz,W)),$.uuid=(W)=>$.check(f3(T5,W)),$.uuidv4=(W)=>$.check(m3(T5,W)),$.uuidv6=(W)=>$.check(y3(T5,W)),$.uuidv7=(W)=>$.check(c3(T5,W)),$.nanoid=(W)=>$.check(p3(EA,W)),$.guid=(W)=>$.check(AU(zz,W)),$.cuid=(W)=>$.check(d3(MA,W)),$.cuid2=(W)=>$.check(l3(VA,W)),$.ulid=(W)=>$.check(r3(QA,W)),$.base64=(W)=>$.check(e3(BA,W)),$.base64url=(W)=>$.check($z(RA,W)),$.xid=(W)=>$.check(n3(AA,W)),$.ksuid=(W)=>$.check(i3(IA,W)),$.ipv4=(W)=>$.check(t3(LA,W)),$.ipv6=(W)=>$.check(a3(PA,W)),$.cidrv4=(W)=>$.check(o3(_A,W)),$.cidrv6=(W)=>$.check(s3(NA,W)),$.e164=(W)=>$.check(Jz(SA,W)),$.datetime=(W)=>$.check(tQ(W)),$.date=(W)=>$.check(aQ(W)),$.time=(W)=>$.check(oQ(W)),$.duration=(W)=>$.check(sQ(W))});function a($){return HQ(hU,$)}var C1=f("ZodStringFormat",($,J)=>{P1.init($,J),KA.init($,J)}),OA=f("ZodEmail",($,J)=>{wM.init($,J),C1.init($,J)});function R7($){return g3(OA,$)}var zz=f("ZodGUID",($,J)=>{GM.init($,J),C1.init($,J)});function ks($){return AU(zz,$)}var T5=f("ZodUUID",($,J)=>{zM.init($,J),C1.init($,J)});function vs($){return f3(T5,$)}function Cs($){return m3(T5,$)}function Ts($){return y3(T5,$)}function qs($){return c3(T5,$)}var Kz=f("ZodURL",($,J)=>{DM.init($,J),C1.init($,J)});function hs($){return IU(Kz,$)}function xs($){return IU(Kz,{protocol:/^https?$/,hostname:b6.domain,...s.normalizeParams($)})}var FA=f("ZodEmoji",($,J)=>{KM.init($,J),C1.init($,J)});function bs($){return u3(FA,$)}var EA=f("ZodNanoID",($,J)=>{OM.init($,J),C1.init($,J)});function gs($){return p3(EA,$)}var MA=f("ZodCUID",($,J)=>{FM.init($,J),C1.init($,J)});function fs($){return d3(MA,$)}var VA=f("ZodCUID2",($,J)=>{EM.init($,J),C1.init($,J)});function ms($){return l3(VA,$)}var QA=f("ZodULID",($,J)=>{MM.init($,J),C1.init($,J)});function ys($){return r3(QA,$)}var AA=f("ZodXID",($,J)=>{VM.init($,J),C1.init($,J)});function cs($){return n3(AA,$)}var IA=f("ZodKSUID",($,J)=>{QM.init($,J),C1.init($,J)});function us($){return i3(IA,$)}var LA=f("ZodIPv4",($,J)=>{_M.init($,J),C1.init($,J)});function ps($){return t3(LA,$)}var PA=f("ZodIPv6",($,J)=>{NM.init($,J),C1.init($,J)});function ds($){return a3(PA,$)}var _A=f("ZodCIDRv4",($,J)=>{BM.init($,J),C1.init($,J)});function ls($){return o3(_A,$)}var NA=f("ZodCIDRv6",($,J)=>{RM.init($,J),C1.init($,J)});function rs($){return s3(NA,$)}var BA=f("ZodBase64",($,J)=>{jM.init($,J),C1.init($,J)});function ns($){return e3(BA,$)}var RA=f("ZodBase64URL",($,J)=>{kM.init($,J),C1.init($,J)});function is($){return $z(RA,$)}var SA=f("ZodE164",($,J)=>{vM.init($,J),C1.init($,J)});function ts($){return Jz(SA,$)}var jA=f("ZodJWT",($,J)=>{CM.init($,J),C1.init($,J)});function as($){return Wz(jA,$)}var xU=f("ZodCustomStringFormat",($,J)=>{TM.init($,J),C1.init($,J)});function os($,J,W={}){return QX(xU,$,J,W)}function ss($){return QX(xU,"hostname",b6.hostname,$)}function es($){return QX(xU,"hex",b6.hex,$)}function $e($,J){let W=J?.enc??"hex",X=`${$}_${W}`,Y=b6[X];if(!Y)throw Error(`Unrecognized hash format: ${X}`);return QX(xU,X,Y,J)}var bU=f("ZodNumber",($,J)=>{T3.init($,J),b0.init($,J),$.gt=(X,Y)=>$.check(k5(X,Y)),$.gte=(X,Y)=>$.check(f$(X,Y)),$.min=(X,Y)=>$.check(f$(X,Y)),$.lt=(X,Y)=>$.check(j5(X,Y)),$.lte=(X,Y)=>$.check(g6(X,Y)),$.max=(X,Y)=>$.check(g6(X,Y)),$.int=(X)=>$.check(DA(X)),$.safe=(X)=>$.check(DA(X)),$.positive=(X)=>$.check(k5(0,X)),$.nonnegative=(X)=>$.check(f$(0,X)),$.negative=(X)=>$.check(j5(0,X)),$.nonpositive=(X)=>$.check(g6(0,X)),$.multipleOf=(X,Y)=>$.check(N7(X,Y)),$.step=(X,Y)=>$.check(N7(X,Y)),$.finite=()=>$;let W=$._zod.bag;$.minValue=Math.max(W.minimum??Number.NEGATIVE_INFINITY,W.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,$.maxValue=Math.min(W.maximum??Number.POSITIVE_INFINITY,W.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,$.isInt=(W.format??"").includes("int")||Number.isSafeInteger(W.multipleOf??0.5),$.isFinite=!0,$.format=W.format??null});function p9($){return FQ(bU,$)}var IX=f("ZodNumberFormat",($,J)=>{qM.init($,J),bU.init($,J)});function DA($){return MQ(IX,$)}function Je($){return VQ(IX,$)}function We($){return QQ(IX,$)}function Xe($){return AQ(IX,$)}function Ye($){return IQ(IX,$)}var gU=f("ZodBoolean",($,J)=>{wU.init($,J),b0.init($,J)});function f6($){return LQ(gU,$)}var fU=f("ZodBigInt",($,J)=>{q3.init($,J),b0.init($,J),$.gte=(X,Y)=>$.check(f$(X,Y)),$.min=(X,Y)=>$.check(f$(X,Y)),$.gt=(X,Y)=>$.check(k5(X,Y)),$.gte=(X,Y)=>$.check(f$(X,Y)),$.min=(X,Y)=>$.check(f$(X,Y)),$.lt=(X,Y)=>$.check(j5(X,Y)),$.lte=(X,Y)=>$.check(g6(X,Y)),$.max=(X,Y)=>$.check(g6(X,Y)),$.positive=(X)=>$.check(k5(BigInt(0),X)),$.negative=(X)=>$.check(j5(BigInt(0),X)),$.nonpositive=(X)=>$.check(g6(BigInt(0),X)),$.nonnegative=(X)=>$.check(f$(BigInt(0),X)),$.multipleOf=(X,Y)=>$.check(N7(X,Y));let W=$._zod.bag;$.minValue=W.minimum??null,$.maxValue=W.maximum??null,$.format=W.format??null});function Ue($){return _Q(fU,$)}var kA=f("ZodBigIntFormat",($,J)=>{hM.init($,J),fU.init($,J)});function Ze($){return BQ(kA,$)}function He($){return RQ(kA,$)}var XT=f("ZodSymbol",($,J)=>{xM.init($,J),b0.init($,J)});function Ge($){return SQ(XT,$)}var YT=f("ZodUndefined",($,J)=>{bM.init($,J),b0.init($,J)});function ze($){return jQ(YT,$)}var UT=f("ZodNull",($,J)=>{gM.init($,J),b0.init($,J)});function ZT($){return kQ(UT,$)}var HT=f("ZodAny",($,J)=>{fM.init($,J),b0.init($,J)});function mU(){return vQ(HT)}var GT=f("ZodUnknown",($,J)=>{mM.init($,J),b0.init($,J)});function AX(){return CQ(GT)}var zT=f("ZodNever",($,J)=>{yM.init($,J),b0.init($,J)});function vA($){return TQ(zT,$)}var wT=f("ZodVoid",($,J)=>{cM.init($,J),b0.init($,J)});function we($){return qQ(wT,$)}var Oz=f("ZodDate",($,J)=>{uM.init($,J),b0.init($,J),$.min=(X,Y)=>$.check(f$(X,Y)),$.max=(X,Y)=>$.check(g6(X,Y));let W=$._zod.bag;$.minDate=W.minimum?new Date(W.minimum):null,$.maxDate=W.maximum?new Date(W.maximum):null});function d9($){return hQ(Oz,$)}var DT=f("ZodArray",($,J)=>{pM.init($,J),b0.init($,J),$.element=J.element,$.min=(W,X)=>$.check(c9(W,X)),$.nonempty=(W)=>$.check(c9(1,W)),$.max=(W,X)=>$.check(MX(W,X)),$.length=(W,X)=>$.check(VX(W,X)),$.unwrap=()=>$.element});function l9($,J){return uQ(DT,$,J)}function De($){let J=$._zod.def.shape;return yU(Object.keys(J))}var Fz=f("ZodObject",($,J)=>{dM.init($,J),b0.init($,J),s.defineLazy($,"shape",()=>{return J.shape}),$.keyof=()=>yU(Object.keys($._zod.def.shape)),$.catchall=(W)=>$.clone({...$._zod.def,catchall:W}),$.passthrough=()=>$.clone({...$._zod.def,catchall:AX()}),$.loose=()=>$.clone({...$._zod.def,catchall:AX()}),$.strict=()=>$.clone({...$._zod.def,catchall:vA()}),$.strip=()=>$.clone({...$._zod.def,catchall:void 0}),$.extend=(W)=>{return s.extend($,W)},$.safeExtend=(W)=>{return s.safeExtend($,W)},$.merge=(W)=>s.merge($,W),$.pick=(W)=>s.pick($,W),$.omit=(W)=>s.omit($,W),$.partial=(...W)=>s.partial(xA,$,W[0]),$.required=(...W)=>s.required(bA,$,W[0])});function a0($,J){let W={type:"object",shape:$??{},...s.normalizeParams(J)};return new Fz(W)}function Ke($,J){return new Fz({type:"object",shape:$,catchall:vA(),...s.normalizeParams(J)})}function Oe($,J){return new Fz({type:"object",shape:$,catchall:AX(),...s.normalizeParams(J)})}var CA=f("ZodUnion",($,J)=>{h3.init($,J),b0.init($,J),$.options=J.options});function TA($,J){return new CA({type:"union",options:$,...s.normalizeParams(J)})}var KT=f("ZodDiscriminatedUnion",($,J)=>{CA.init($,J),lM.init($,J)});function Fe($,J,W){return new KT({type:"union",options:J,discriminator:$,...s.normalizeParams(W)})}var OT=f("ZodIntersection",($,J)=>{rM.init($,J),b0.init($,J)});function FT($,J){return new OT({type:"intersection",left:$,right:J})}var ET=f("ZodTuple",($,J)=>{x3.init($,J),b0.init($,J),$.rest=(W)=>$.clone({...$._zod.def,rest:W})});function MT($,J,W){let X=J instanceof S0,Y=X?W:J;return new ET({type:"tuple",items:$,rest:X?J:null,...s.normalizeParams(Y)})}var qA=f("ZodRecord",($,J)=>{nM.init($,J),b0.init($,J),$.keyType=J.keyType,$.valueType=J.valueType});function LX($,J,W){return new qA({type:"record",keyType:$,valueType:J,...s.normalizeParams(W)})}function Ee($,J,W){let X=Q$($);return X._zod.values=void 0,new qA({type:"record",keyType:X,valueType:J,...s.normalizeParams(W)})}var VT=f("ZodMap",($,J)=>{iM.init($,J),b0.init($,J),$.keyType=J.keyType,$.valueType=J.valueType});function Me($,J,W){return new VT({type:"map",keyType:$,valueType:J,...s.normalizeParams(W)})}var QT=f("ZodSet",($,J)=>{tM.init($,J),b0.init($,J),$.min=(...W)=>$.check(B7(...W)),$.nonempty=(W)=>$.check(B7(1,W)),$.max=(...W)=>$.check(EX(...W)),$.size=(...W)=>$.check(LU(...W))});function Ve($,J){return new QT({type:"set",valueType:$,...s.normalizeParams(J)})}var qU=f("ZodEnum",($,J)=>{aM.init($,J),b0.init($,J),$.enum=J.entries,$.options=Object.values(J.entries);let W=new Set(Object.keys(J.entries));$.extract=(X,Y)=>{let U={};for(let Z of X)if(W.has(Z))U[Z]=J.entries[Z];else throw Error(`Key ${Z} not found in enum`);return new qU({...J,checks:[],...s.normalizeParams(Y),entries:U})},$.exclude=(X,Y)=>{let U={...J.entries};for(let Z of X)if(W.has(Z))delete U[Z];else throw Error(`Key ${Z} not found in enum`);return new qU({...J,checks:[],...s.normalizeParams(Y),entries:U})}});function yU($,J){let W=Array.isArray($)?Object.fromEntries($.map((X)=>[X,X])):$;return new qU({type:"enum",entries:W,...s.normalizeParams(J)})}function Qe($,J){return new qU({type:"enum",entries:$,...s.normalizeParams(J)})}var AT=f("ZodLiteral",($,J)=>{oM.init($,J),b0.init($,J),$.values=new Set(J.values),Object.defineProperty($,"value",{get(){if(J.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return J.values[0]}})});function Ae($,J){return new AT({type:"literal",values:Array.isArray($)?$:[$],...s.normalizeParams(J)})}var IT=f("ZodFile",($,J)=>{sM.init($,J),b0.init($,J),$.min=(W,X)=>$.check(B7(W,X)),$.max=(W,X)=>$.check(EX(W,X)),$.mime=(W,X)=>$.check(jU(Array.isArray(W)?W:[W],X))});function Ie($){return pQ(IT,$)}var LT=f("ZodTransform",($,J)=>{eM.init($,J),b0.init($,J),$._zod.parse=(W,X)=>{if(X.direction==="backward")throw new I7($.constructor.name);W.addIssue=(U)=>{if(typeof U==="string")W.issues.push(s.issue(U,W.value,J));else{let Z=U;if(Z.fatal)Z.continue=!1;Z.code??(Z.code="custom"),Z.input??(Z.input=W.value),Z.inst??(Z.inst=$),W.issues.push(s.issue(Z))}};let Y=J.transform(W.value,W);if(Y instanceof Promise)return Y.then((U)=>{return W.value=U,W});return W.value=Y,W}});function hA($){return new LT({type:"transform",transform:$})}var xA=f("ZodOptional",($,J)=>{$V.init($,J),b0.init($,J),$.unwrap=()=>$._zod.def.innerType});function u9($){return new xA({type:"optional",innerType:$})}var PT=f("ZodNullable",($,J)=>{JV.init($,J),b0.init($,J),$.unwrap=()=>$._zod.def.innerType});function wz($){return new PT({type:"nullable",innerType:$})}function Le($){return u9(wz($))}var _T=f("ZodDefault",($,J)=>{WV.init($,J),b0.init($,J),$.unwrap=()=>$._zod.def.innerType,$.removeDefault=$.unwrap});function NT($,J){return new _T({type:"default",innerType:$,get defaultValue(){return typeof J==="function"?J():s.shallowClone(J)}})}var BT=f("ZodPrefault",($,J)=>{XV.init($,J),b0.init($,J),$.unwrap=()=>$._zod.def.innerType});function RT($,J){return new BT({type:"prefault",innerType:$,get defaultValue(){return typeof J==="function"?J():s.shallowClone(J)}})}var bA=f("ZodNonOptional",($,J)=>{YV.init($,J),b0.init($,J),$.unwrap=()=>$._zod.def.innerType});function ST($,J){return new bA({type:"nonoptional",innerType:$,...s.normalizeParams(J)})}var jT=f("ZodSuccess",($,J)=>{UV.init($,J),b0.init($,J),$.unwrap=()=>$._zod.def.innerType});function Pe($){return new jT({type:"success",innerType:$})}var kT=f("ZodCatch",($,J)=>{ZV.init($,J),b0.init($,J),$.unwrap=()=>$._zod.def.innerType,$.removeCatch=$.unwrap});function vT($,J){return new kT({type:"catch",innerType:$,catchValue:typeof J==="function"?J:()=>J})}var CT=f("ZodNaN",($,J)=>{HV.init($,J),b0.init($,J)});function _e($){return bQ(CT,$)}var gA=f("ZodPipe",($,J)=>{GV.init($,J),b0.init($,J),$.in=J.in,$.out=J.out});function Dz($,J){return new gA({type:"pipe",in:$,out:J})}var fA=f("ZodCodec",($,J)=>{gA.init($,J),DU.init($,J)});function Ne($,J,W){return new fA({type:"pipe",in:$,out:J,transform:W.decode,reverseTransform:W.encode})}var TT=f("ZodReadonly",($,J)=>{zV.init($,J),b0.init($,J),$.unwrap=()=>$._zod.def.innerType});function qT($){return new TT({type:"readonly",innerType:$})}var hT=f("ZodTemplateLiteral",($,J)=>{wV.init($,J),b0.init($,J)});function Be($,J){return new hT({type:"template_literal",parts:$,...s.normalizeParams(J)})}var xT=f("ZodLazy",($,J)=>{OV.init($,J),b0.init($,J),$.unwrap=()=>$._zod.def.getter()});function bT($){return new xT({type:"lazy",getter:$})}var gT=f("ZodPromise",($,J)=>{KV.init($,J),b0.init($,J),$.unwrap=()=>$._zod.def.innerType});function Re($){return new gT({type:"promise",innerType:$})}var fT=f("ZodFunction",($,J)=>{DV.init($,J),b0.init($,J)});function Se($){return new fT({type:"function",input:Array.isArray($?.input)?MT($?.input):$?.input??l9(AX()),output:$?.output??AX()})}var Ez=f("ZodCustom",($,J)=>{FV.init($,J),b0.init($,J)});function je($){let J=new q1({check:"custom"});return J._zod.check=$,J}function ke($,J){return dQ(Ez,$??(()=>!0),J)}function mT($,J={}){return lQ(Ez,$,J)}function yT($){return rQ($)}function ve($,J={error:`Input not instance of ${$.name}`}){let W=new Ez({type:"custom",check:"custom",fn:(X)=>X instanceof $,abort:!0,...s.normalizeParams(J)});return W._zod.bag.Class=$,W}var Ce=(...$)=>nQ({Codec:fA,Boolean:gU,String:hU},...$);function Te($){let J=bT(()=>{return TA([a($),p9(),f6(),ZT(),l9(J),LX(a(),J)])});return J}function qe($,J){return Dz(hA($),J)}var he={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function xe($){F4({customError:$})}function be(){return F4().customError}var mA;(function($){})(mA||(mA={}));var Z8={};x$(Z8,{string:()=>ge,number:()=>fe,date:()=>ce,boolean:()=>me,bigint:()=>ye});function ge($){return GQ(hU,$)}function fe($){return EQ(bU,$)}function me($){return PQ(gU,$)}function ye($){return NQ(fU,$)}function ce($){return xQ(Oz,$)}F4(KU());var o8=($,J="ms")=>{return new Date(Date.now()+(J==="sec"?$*1000:$))};var PX={encode:($)=>{if(typeof $==="string")$=new TextEncoder().encode($);if($.byteLength===0)return"";let J=new Uint8Array($),W="";for(let X of J)W+=X.toString(16).padStart(2,"0");return W},decode:($)=>{if(!$)return"";if(typeof $==="string"){if($.length%2!==0)throw Error("Invalid hexadecimal string");if(!new RegExp("^[0123456789abcdef]+$").test($))throw Error("Invalid hexadecimal string");let J=new Uint8Array($.length/2);for(let W=0;W<$.length;W+=2)J[W/2]=parseInt($.slice(W,W+2),16);return new TextDecoder().decode(J)}return new TextDecoder().decode($)}};var Mz=($="SHA-256",J="none")=>{let W={importKey:async(X,Y)=>{return n8().importKey("raw",typeof X==="string"?new TextEncoder().encode(X):X,{name:"HMAC",hash:{name:$}},!1,[Y])},sign:async(X,Y)=>{if(typeof X==="string")X=await W.importKey(X,"sign");let U=await n8().sign("HMAC",X,typeof Y==="string"?new TextEncoder().encode(Y):Y);if(J==="hex")return PX.encode(U);if(J==="base64"||J==="base64url"||J==="base64urlnopad")return d8.encode(U,{padding:J!=="base64urlnopad"});return U},verify:async(X,Y,U)=>{if(typeof X==="string")X=await W.importKey(X,"verify");if(J==="hex")U=PX.decode(U);if(J==="base64"||J==="base64url"||J==="base64urlnopad")U=await $$.decode(U);return n8().verify("HMAC",X,typeof U==="string"?new TextEncoder().encode(U):U,typeof Y==="string"?new TextEncoder().encode(Y):Y)}};return W};function U4($){function J(W,X){if(typeof X==="string"){if(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d+)?Z$/.test(X)){let U=new Date(X);if(!isNaN(U.getTime()))return U}}return X}try{if(typeof $!=="string")return $;return JSON.parse($,J)}catch(W){return _0.error("Error parsing JSON",{error:W}),null}}function ue($){try{return(new URL($).pathname.replace(/\/+$/,"")||"/")!=="/"}catch(J){throw new h0(`Invalid base URL: ${$}. Please provide a valid base URL.`)}}function pU($,J="/api/auth"){if(ue($))return $;let X=$.replace(/\/+$/,"");if(!J||J==="/")return X;return J=J.startsWith("/")?J:`/${J}`,`${X}${J}`}function dU($,J,W,X){if($)return pU($,J);if(X!==!1){let Z=W1.BETTER_AUTH_URL||W1.NEXT_PUBLIC_BETTER_AUTH_URL||W1.PUBLIC_BETTER_AUTH_URL||W1.NUXT_PUBLIC_BETTER_AUTH_URL||W1.NUXT_PUBLIC_AUTH_URL||(W1.BASE_URL!=="/"?W1.BASE_URL:void 0);if(Z)return pU(Z,J)}let Y=W?.headers.get("x-forwarded-host"),U=W?.headers.get("x-forwarded-proto");if(Y&&U)return pU(`${U}://${Y}`,J);if(W){let Z=r9(W.url);if(!Z)throw new h0("Could not get origin from request. Please provide a valid base URL.");return pU(Z,J)}if(typeof window<"u"&&window.location)return pU(window.location.origin,J);return}function r9($){try{return new URL($).origin}catch(J){return null}}function yA($){try{return new URL($).protocol}catch(J){return null}}function cA($){try{return new URL($).host}catch(J){return $}}var uA=new Map,pe=new TextEncoder,pA={decode:($,J="utf-8")=>{if(!uA.has(J))uA.set(J,new TextDecoder(J));return uA.get(J).decode($)},encode:pe.encode};var Vz=1000,Qz=Vz*60,Az=Qz*60,lU=Az*24,dA=lU*7,Iz=lU*365.25,lA=Iz/12;function de($,J){if(typeof $==="string")return le($);else if(typeof $==="number")return ne($);throw Error(`Value provided to ms() must be a string or number. value=${JSON.stringify($)}`)}function le($){if(typeof $!=="string"||$.length===0||$.length>100)throw Error(`Value provided to ms.parse() must be a string with length between 1 and 99. value=${JSON.stringify($)}`);let J=/^(?<value>-?\d*\.?\d+) *(?<unit>milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|months?|mo|years?|yrs?|y)?$/i.exec($);if(!J?.groups)return NaN;let{value:W,unit:X="ms"}=J.groups,Y=parseFloat(W),U=X.toLowerCase();switch(U){case"years":case"year":case"yrs":case"yr":case"y":return Y*Iz;case"months":case"month":case"mo":return Y*lA;case"weeks":case"week":case"w":return Y*dA;case"days":case"day":case"d":return Y*lU;case"hours":case"hour":case"hrs":case"hr":case"h":return Y*Az;case"minutes":case"minute":case"mins":case"min":case"m":return Y*Qz;case"seconds":case"second":case"secs":case"sec":case"s":return Y*Vz;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return Y;default:throw Error(`Unknown unit "${U}" provided to ms.parse(). value=${JSON.stringify($)}`)}}function re($){let J=Math.abs($);if(J>=Iz)return`${Math.round($/Iz)}y`;if(J>=lA)return`${Math.round($/lA)}mo`;if(J>=dA)return`${Math.round($/dA)}w`;if(J>=lU)return`${Math.round($/lU)}d`;if(J>=Az)return`${Math.round($/Az)}h`;if(J>=Qz)return`${Math.round($/Qz)}m`;if(J>=Vz)return`${Math.round($/Vz)}s`;return`${$}ms`}function ne($,J){if(typeof $!=="number"||!Number.isFinite($))throw Error("Value provided to ms.format() must be of type number.");return re($)}function rA($){let W=($.advanced?.useSecureCookies!==void 0?$.advanced?.useSecureCookies:$.baseURL!==void 0?$.baseURL.startsWith("https://")?!0:!1:u2)?"__Secure-":"",X=!!$.advanced?.crossSubDomainCookies?.enabled,Y=X?$.advanced?.crossSubDomainCookies?.domain||($.baseURL?new URL($.baseURL).hostname:void 0):void 0;if(X&&!Y)throw new h0("baseURL is required when crossSubdomainCookies are enabled");function U(Z,H={}){let G=$.advanced?.cookiePrefix||"better-auth",z=$.advanced?.cookies?.[Z]?.name||`${G}.${Z}`,w=$.advanced?.cookies?.[Z]?.attributes;return{name:`${W}${z}`,attributes:{secure:!!W,sameSite:"lax",path:"/",httpOnly:!0,...X?{domain:Y}:{},...$.advanced?.defaultCookieAttributes,...H,...w}}}return U}function cT($){let J=rA($),W=$.session?.expiresIn||de("7d")/1000,X=J("session_token",{maxAge:W}),Y=J("session_data",{maxAge:$.session?.cookieCache?.maxAge||300}),U=J("dont_remember");return{sessionToken:{name:X.name,options:X.attributes},sessionData:{name:Y.name,options:Y.attributes},dontRememberToken:{name:U.name,options:U.attributes}}}async function nA($,J,W){if($.context.options.session?.cookieCache?.enabled){let U={session:Object.entries(J.session).reduce((z,[w,D])=>{let K=$.context.options.session?.additionalFields?.[w];if(!K||K.returned!==!1)z[w]=D;return z},{}),user:J.user},Z={...$.context.authCookies.sessionData.options,maxAge:W?void 0:$.context.authCookies.sessionData.options.maxAge},H=o8(Z.maxAge||60,"sec").getTime(),G=d8.encode(JSON.stringify({session:U,expiresAt:H,signature:await Mz("SHA-256","base64urlnopad").sign($.context.secret,JSON.stringify({...U,expiresAt:H}))}),{padding:!1});if(G.length>4093){$.context?.logger?.error(`Session data exceeds cookie size limit (${G.length} bytes > 4093 bytes). Consider reducing session data size or disabling cookie cache. Session will not be cached in cookie.`);return}$.setCookie($.context.authCookies.sessionData.name,G,Z)}}async function y$($,J,W,X){let Y=await $.getSignedCookie($.context.authCookies.dontRememberToken.name,$.context.secret);W=W!==void 0?W:!!Y;let U=$.context.authCookies.sessionToken.options,Z=W?void 0:$.context.sessionConfig.expiresIn;if(await $.setSignedCookie($.context.authCookies.sessionToken.name,J.session.token,$.context.secret,{...U,maxAge:Z,...X}),W)await $.setSignedCookie($.context.authCookies.dontRememberToken.name,"true",$.context.secret,$.context.authCookies.dontRememberToken.options);if(await nA($,J,W),$.context.setNewSession(J),$.context.options.secondaryStorage)await $.context.secondaryStorage?.set(J.session.token,JSON.stringify({user:J.user,session:J.session}),Math.floor((new Date(J.session.expiresAt).getTime()-Date.now())/1000))}function n9($,J){if($.setCookie($.context.authCookies.sessionToken.name,"",{...$.context.authCookies.sessionToken.options,maxAge:0}),$.setCookie($.context.authCookies.sessionData.name,"",{...$.context.authCookies.sessionData.options,maxAge:0}),!J)$.setCookie($.context.authCookies.dontRememberToken.name,"",{...$.context.authCookies.dontRememberToken.options,maxAge:0})}var iA=V7(async()=>{return{}}),q5=V7.create({use:[iA,V7(async()=>{return{}})]}),l0=a2.create({use:[iA]});function uT($){switch($){case"a-z":return"abcdefghijklmnopqrstuvwxyz";case"A-Z":return"ABCDEFGHIJKLMNOPQRSTUVWXYZ";case"0-9":return"0123456789";case"-_":return"-_";default:throw Error(`Unsupported alphabet: ${$}`)}}function _X(...$){let J=$.map(uT).join("");if(J.length===0)throw Error("No valid characters provided for random string generation.");let W=J.length;return(X,...Y)=>{if(X<=0)throw Error("Length must be a positive integer.");let U=J,Z=W;if(Y.length>0)U=Y.map(uT).join(""),Z=U.length;let H=Math.floor(256/Z)*Z,G=new Uint8Array(X*2),z=G.length,w="",D=z,K;while(w.length<X){if(D>=z)crypto.getRandomValues(G),D=0;if(K=G[D++],K<H)w+=U[K%Z]}return w}}var ie=($)=>{return{id:"apple",name:"Apple",async createAuthorizationURL({state:W,scopes:X,redirectURI:Y}){let U=$.disableDefaultScope?[]:["email","name"];return $.scope&&U.push(...$.scope),X&&U.push(...X),await v1({id:"apple",options:$,authorizationEndpoint:"https://appleid.apple.com/auth/authorize",scopes:U,state:W,redirectURI:Y,responseMode:"form_post",responseType:"code id_token"})},validateAuthorizationCode:async({code:W,codeVerifier:X,redirectURI:Y})=>{return D1({code:W,codeVerifier:X,redirectURI:Y,options:$,tokenEndpoint:"https://appleid.apple.com/auth/token"})},async verifyIdToken(W,X){if($.disableIdTokenSignIn)return!1;if($.verifyIdToken)return $.verifyIdToken(W,X);let Y=sG(W),{kid:U,alg:Z}=Y;if(!U||!Z)return!1;let H=await te(U),{payload:G}=await M7(W,H,{algorithms:[Z],issuer:"https://appleid.apple.com",audience:$.audience&&$.audience.length?$.audience:$.appBundleIdentifier?$.appBundleIdentifier:$.clientId,maxTokenAge:"1h"});if(["email_verified","is_private_email"].forEach((z)=>{if(G[z]!==void 0)G[z]=Boolean(G[z])}),X&&G.nonce!==X)return!1;return!!G},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(W)=>{return E1({refreshToken:W,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://appleid.apple.com/auth/token"})},async getUserInfo(W){if($.getUserInfo)return $.getUserInfo(W);if(!W.idToken)return null;let X=r8(W.idToken);if(!X)return null;let Y=W.user?`${W.user.name?.firstName} ${W.user.name?.lastName}`:X.name||X.email,U=typeof X.email_verified==="boolean"?X.email_verified:X.email_verified==="true",Z={...X,name:Y},H=await $.mapProfileToUser?.(Z);return{user:{id:X.sub,name:Z.name,emailVerified:U,email:X.email,...H},data:Z}},options:$}},te=async($)=>{let{data:X}=await T0("https://appleid.apple.com/auth/keys");if(!X?.keys)throw new p("BAD_REQUEST",{message:"Keys not found"});let Y=X.keys.find((U)=>U.kid===$);if(!Y)throw Error(`JWK with kid ${$} not found`);return await $X(Y,Y.alg)},ae=($)=>{return{id:"atlassian",name:"Atlassian",async createAuthorizationURL({state:J,scopes:W,codeVerifier:X,redirectURI:Y}){if(!$.clientId||!$.clientSecret)throw _0.error("Client Id and Secret are required for Atlassian"),new h0("CLIENT_ID_AND_SECRET_REQUIRED");if(!X)throw new h0("codeVerifier is required for Atlassian");let U=$.disableDefaultScope?[]:["read:jira-user","offline_access"];return $.scope&&U.push(...$.scope),W&&U.push(...W),v1({id:"atlassian",options:$,authorizationEndpoint:"https://auth.atlassian.com/authorize",scopes:U,state:J,codeVerifier:X,redirectURI:Y,additionalParams:{audience:"api.atlassian.com"},prompt:$.prompt})},validateAuthorizationCode:async({code:J,codeVerifier:W,redirectURI:X})=>{return D1({code:J,codeVerifier:W,redirectURI:X,options:$,tokenEndpoint:"https://auth.atlassian.com/oauth/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return E1({refreshToken:J,options:{clientId:$.clientId,clientSecret:$.clientSecret},tokenEndpoint:"https://auth.atlassian.com/oauth/token"})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);if(!J.accessToken)return null;try{let{data:W}=await T0("https://api.atlassian.com/me",{headers:{Authorization:`Bearer ${J.accessToken}`}});if(!W)return null;let X=await $.mapProfileToUser?.(W);return{user:{id:W.account_id,name:W.name,email:W.email,image:W.picture,emailVerified:!1,...X},data:W}}catch(W){return _0.error("Failed to fetch user info from Figma:",W),null}},options:$}},oe=($)=>{if(!$.domain||!$.region||!$.userPoolId)throw _0.error("Domain, region and userPoolId are required for Amazon Cognito. Make sure to provide them in the options."),new h0("DOMAIN_AND_REGION_REQUIRED");let J=$.domain.replace(/^https?:\/\//,""),W=`https://${J}/oauth2/authorize`,X=`https://${J}/oauth2/token`,Y=`https://${J}/oauth2/userinfo`;return{id:"cognito",name:"Cognito",async createAuthorizationURL({state:U,scopes:Z,codeVerifier:H,redirectURI:G}){if(!$.clientId)throw _0.error("ClientId is required for Amazon Cognito. Make sure to provide them in the options."),new h0("CLIENT_ID_AND_SECRET_REQUIRED");if($.requireClientSecret&&!$.clientSecret)throw _0.error("Client Secret is required when requireClientSecret is true. Make sure to provide it in the options."),new h0("CLIENT_SECRET_REQUIRED");let z=$.disableDefaultScope?[]:["openid","profile","email"];return $.scope&&z.push(...$.scope),Z&&z.push(...Z),await v1({id:"cognito",options:{...$},authorizationEndpoint:W,scopes:z,state:U,codeVerifier:H,redirectURI:G,prompt:$.prompt})},validateAuthorizationCode:async({code:U,codeVerifier:Z,redirectURI:H})=>{return D1({code:U,codeVerifier:Z,redirectURI:H,options:$,tokenEndpoint:X})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(U)=>{return E1({refreshToken:U,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:X})},async verifyIdToken(U,Z){if($.disableIdTokenSignIn)return!1;if($.verifyIdToken)return $.verifyIdToken(U,Z);try{let H=sG(U),{kid:G,alg:z}=H;if(!G||!z)return!1;let w=await se(G,$.region,$.userPoolId),D=`https://cognito-idp.${$.region}.amazonaws.com/${$.userPoolId}`,{payload:K}=await M7(U,w,{algorithms:[z],issuer:D,audience:$.clientId,maxTokenAge:"1h"});if(Z&&K.nonce!==Z)return!1;return!0}catch(H){return _0.error("Failed to verify ID token:",H),!1}},async getUserInfo(U){if($.getUserInfo)return $.getUserInfo(U);if(U.idToken)try{let Z=r8(U.idToken);if(!Z)return null;let H=Z.name||Z.given_name||Z.username||Z.email,G={...Z,name:H},z=await $.mapProfileToUser?.(G);return{user:{id:Z.sub,name:G.name,email:Z.email,image:Z.picture,emailVerified:Z.email_verified,...z},data:G}}catch(Z){_0.error("Failed to decode ID token:",Z)}if(U.accessToken)try{let{data:Z}=await T0(Y,{headers:{Authorization:`Bearer ${U.accessToken}`}});if(Z){let H=await $.mapProfileToUser?.(Z);return{user:{id:Z.sub,name:Z.name||Z.given_name||Z.username,email:Z.email,image:Z.picture,emailVerified:Z.email_verified,...H},data:Z}}}catch(Z){_0.error("Failed to fetch user info from Cognito:",Z)}return null},options:$}},se=async($,J,W)=>{let X=`https://cognito-idp.${J}.amazonaws.com/${W}/.well-known/jwks.json`;try{let{data:Y}=await T0(X);if(!Y?.keys)throw new p("BAD_REQUEST",{message:"Keys not found"});let U=Y.keys.find((Z)=>Z.kid===$);if(!U)throw Error(`JWK with kid ${$} not found`);return await $X(U,U.alg)}catch(Y){throw _0.error("Failed to fetch Cognito public key:",Y),Y}},ee=($)=>{return{id:"discord",name:"Discord",createAuthorizationURL({state:J,scopes:W,redirectURI:X}){let Y=$.disableDefaultScope?[]:["identify","email"];W&&Y.push(...W),$.scope&&Y.push(...$.scope);let Z=Y.includes("bot")&&$.permissions!==void 0?`&permissions=${$.permissions}`:"";return new URL(`https://discord.com/api/oauth2/authorize?scope=${Y.join("+")}&response_type=code&client_id=${$.clientId}&redirect_uri=${encodeURIComponent($.redirectURI||X)}&state=${J}&prompt=${$.prompt||"none"}${Z}`)},validateAuthorizationCode:async({code:J,redirectURI:W})=>{return D1({code:J,redirectURI:W,options:$,tokenEndpoint:"https://discord.com/api/oauth2/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return E1({refreshToken:J,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://discord.com/api/oauth2/token"})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);let{data:W,error:X}=await T0("https://discord.com/api/users/@me",{headers:{authorization:`Bearer ${J.accessToken}`}});if(X)return null;if(W.avatar===null){let U=W.discriminator==="0"?Number(BigInt(W.id)>>BigInt(22))%6:parseInt(W.discriminator)%5;W.image_url=`https://cdn.discordapp.com/embed/avatars/${U}.png`}else{let U=W.avatar.startsWith("a_")?"gif":"png";W.image_url=`https://cdn.discordapp.com/avatars/${W.id}/${W.avatar}.${U}`}let Y=await $.mapProfileToUser?.(W);return{user:{id:W.id,name:W.global_name||W.username||"",email:W.email,emailVerified:W.verified,image:W.image_url,...Y},data:W}},options:$}},$00=($)=>{return{id:"facebook",name:"Facebook",async createAuthorizationURL({state:J,scopes:W,redirectURI:X,loginHint:Y}){let U=$.disableDefaultScope?[]:["email","public_profile"];return $.scope&&U.push(...$.scope),W&&U.push(...W),await v1({id:"facebook",options:$,authorizationEndpoint:"https://www.facebook.com/v21.0/dialog/oauth",scopes:U,state:J,redirectURI:X,loginHint:Y,additionalParams:$.configId?{config_id:$.configId}:{}})},validateAuthorizationCode:async({code:J,redirectURI:W})=>{return D1({code:J,redirectURI:W,options:$,tokenEndpoint:"https://graph.facebook.com/oauth/access_token"})},async verifyIdToken(J,W){if($.disableIdTokenSignIn)return!1;if($.verifyIdToken)return $.verifyIdToken(J,W);if(J.split(".").length===3)try{let{payload:X}=await M7(J,gF(new URL("https://limited.facebook.com/.well-known/oauth/openid/jwks/")),{algorithms:["RS256"],audience:$.clientId,issuer:"https://www.facebook.com"});if(W&&X.nonce!==W)return!1;return!!X}catch(X){return!1}return!0},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return E1({refreshToken:J,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://graph.facebook.com/v18.0/oauth/access_token"})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);if(J.idToken&&J.idToken.split(".").length===3){let Z=r8(J.idToken),H={id:Z.sub,name:Z.name,email:Z.email,picture:{data:{url:Z.picture,height:100,width:100,is_silhouette:!1}}},G=await $.mapProfileToUser?.({...H,email_verified:!0});return{user:{...H,emailVerified:!0,...G},data:Z}}let W=["id","name","email","picture",...$?.fields||[]],{data:X,error:Y}=await T0("https://graph.facebook.com/me?fields="+W.join(","),{auth:{type:"Bearer",token:J.accessToken}});if(Y)return null;let U=await $.mapProfileToUser?.(X);return{user:{id:X.id,name:X.name,email:X.email,image:X.picture.data.url,emailVerified:X.email_verified,...U},data:X}},options:$}},J00=($)=>{return{id:"figma",name:"Figma",async createAuthorizationURL({state:J,scopes:W,codeVerifier:X,redirectURI:Y}){if(!$.clientId||!$.clientSecret)throw _0.error("Client Id and Client Secret are required for Figma. Make sure to provide them in the options."),new h0("CLIENT_ID_AND_SECRET_REQUIRED");if(!X)throw new h0("codeVerifier is required for Figma");let U=$.disableDefaultScope?[]:["file_read"];return $.scope&&U.push(...$.scope),W&&U.push(...W),await v1({id:"figma",options:$,authorizationEndpoint:"https://www.figma.com/oauth",scopes:U,state:J,codeVerifier:X,redirectURI:Y})},validateAuthorizationCode:async({code:J,codeVerifier:W,redirectURI:X})=>{return D1({code:J,codeVerifier:W,redirectURI:X,options:$,tokenEndpoint:"https://www.figma.com/api/oauth/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return E1({refreshToken:J,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://www.figma.com/api/oauth/token"})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);try{let{data:W}=await T0("https://api.figma.com/v1/me",{headers:{Authorization:`Bearer ${J.accessToken}`}});if(!W)return _0.error("Failed to fetch user from Figma"),null;let X=await $.mapProfileToUser?.(W);return{user:{id:W.id,name:W.handle,email:W.email,image:W.img_url,emailVerified:!!W.email,...X},data:W}}catch(W){return _0.error("Failed to fetch user info from Figma:",W),null}},options:$}},W00=($)=>{return{id:"github",name:"GitHub",createAuthorizationURL({state:W,scopes:X,loginHint:Y,redirectURI:U}){let Z=$.disableDefaultScope?[]:["read:user","user:email"];return $.scope&&Z.push(...$.scope),X&&Z.push(...X),v1({id:"github",options:$,authorizationEndpoint:"https://github.com/login/oauth/authorize",scopes:Z,state:W,redirectURI:U,loginHint:Y,prompt:$.prompt})},validateAuthorizationCode:async({code:W,redirectURI:X})=>{return D1({code:W,redirectURI:X,options:$,tokenEndpoint:"https://github.com/login/oauth/access_token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(W)=>{return E1({refreshToken:W,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://github.com/login/oauth/access_token"})},async getUserInfo(W){if($.getUserInfo)return $.getUserInfo(W);let{data:X,error:Y}=await T0("https://api.github.com/user",{headers:{"User-Agent":"better-auth",authorization:`Bearer ${W.accessToken}`}});if(Y)return null;let{data:U}=await T0("https://api.github.com/user/emails",{headers:{Authorization:`Bearer ${W.accessToken}`,"User-Agent":"better-auth"}});if(!X.email&&U)X.email=(U.find((G)=>G.primary)??U[0])?.email;let Z=U?.find((G)=>G.email===X.email)?.verified??!1,H=await $.mapProfileToUser?.(X);return{user:{id:X.id,name:X.name||X.login,email:X.email,image:X.avatar_url,emailVerified:Z,...H},data:X}},options:$}},X00=($)=>{return{id:"google",name:"Google",async createAuthorizationURL({state:J,scopes:W,codeVerifier:X,redirectURI:Y,loginHint:U,display:Z}){if(!$.clientId||!$.clientSecret)throw _0.error("Client Id and Client Secret is required for Google. Make sure to provide them in the options."),new h0("CLIENT_ID_AND_SECRET_REQUIRED");if(!X)throw new h0("codeVerifier is required for Google");let H=$.disableDefaultScope?[]:["email","profile","openid"];return $.scope&&H.push(...$.scope),W&&H.push(...W),await v1({id:"google",options:$,authorizationEndpoint:"https://accounts.google.com/o/oauth2/auth",scopes:H,state:J,codeVerifier:X,redirectURI:Y,prompt:$.prompt,accessType:$.accessType,display:Z||$.display,loginHint:U,hd:$.hd,additionalParams:{include_granted_scopes:"true"}})},validateAuthorizationCode:async({code:J,codeVerifier:W,redirectURI:X})=>{return D1({code:J,codeVerifier:W,redirectURI:X,options:$,tokenEndpoint:"https://oauth2.googleapis.com/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return E1({refreshToken:J,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://www.googleapis.com/oauth2/v4/token"})},async verifyIdToken(J,W){if($.disableIdTokenSignIn)return!1;if($.verifyIdToken)return $.verifyIdToken(J,W);let X=`https://www.googleapis.com/oauth2/v3/tokeninfo?id_token=${J}`,{data:Y}=await T0(X);if(!Y)return!1;return Y.aud===$.clientId&&(Y.iss==="https://accounts.google.com"||Y.iss==="accounts.google.com")},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);if(!J.idToken)return null;let W=r8(J.idToken),X=await $.mapProfileToUser?.(W);return{user:{id:W.sub,name:W.name,email:W.email,image:W.picture,emailVerified:W.email_verified,...X},data:W}},options:$}},Y00=($)=>{return{id:"kick",name:"Kick",createAuthorizationURL({state:J,scopes:W,redirectURI:X,codeVerifier:Y}){let U=$.disableDefaultScope?[]:["user:read"];return $.scope&&U.push(...$.scope),W&&U.push(...W),v1({id:"kick",redirectURI:X,options:$,authorizationEndpoint:"https://id.kick.com/oauth/authorize",scopes:U,codeVerifier:Y,state:J})},async validateAuthorizationCode({code:J,redirectURI:W,codeVerifier:X}){return D1({code:J,redirectURI:W,options:$,tokenEndpoint:"https://id.kick.com/oauth/token",codeVerifier:X})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);let{data:W,error:X}=await T0("https://api.kick.com/public/v1/users",{method:"GET",headers:{Authorization:`Bearer ${J.accessToken}`}});if(X)return null;let Y=W.data[0],U=await $.mapProfileToUser?.(Y);return{user:{id:Y.user_id,name:Y.name,email:Y.email,image:Y.profile_picture,emailVerified:!0,...U},data:Y}},options:$}},U00=($)=>{return{id:"huggingface",name:"Hugging Face",createAuthorizationURL({state:J,scopes:W,codeVerifier:X,redirectURI:Y}){let U=$.disableDefaultScope?[]:["openid","profile","email"];return $.scope&&U.push(...$.scope),W&&U.push(...W),v1({id:"huggingface",options:$,authorizationEndpoint:"https://huggingface.co/oauth/authorize",scopes:U,state:J,codeVerifier:X,redirectURI:Y})},validateAuthorizationCode:async({code:J,codeVerifier:W,redirectURI:X})=>{return D1({code:J,codeVerifier:W,redirectURI:X,options:$,tokenEndpoint:"https://huggingface.co/oauth/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return E1({refreshToken:J,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://huggingface.co/oauth/token"})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);let{data:W,error:X}=await T0("https://huggingface.co/oauth/userinfo",{method:"GET",headers:{Authorization:`Bearer ${J.accessToken}`}});if(X)return null;let Y=await $.mapProfileToUser?.(W);return{user:{id:W.sub,name:W.name||W.preferred_username,email:W.email,image:W.picture,emailVerified:W.email_verified??!1,...Y},data:W}},options:$}},Z00=($)=>{let J=$.tenantId||"common",W=$.authority||"https://login.microsoftonline.com",X=`${W}/${J}/oauth2/v2.0/authorize`,Y=`${W}/${J}/oauth2/v2.0/token`;return{id:"microsoft",name:"Microsoft EntraID",createAuthorizationURL(U){let Z=$.disableDefaultScope?[]:["openid","profile","email","User.Read","offline_access"];return $.scope&&Z.push(...$.scope),U.scopes&&Z.push(...U.scopes),v1({id:"microsoft",options:$,authorizationEndpoint:X,state:U.state,codeVerifier:U.codeVerifier,scopes:Z,redirectURI:U.redirectURI,prompt:$.prompt,loginHint:U.loginHint})},validateAuthorizationCode({code:U,codeVerifier:Z,redirectURI:H}){return D1({code:U,codeVerifier:Z,redirectURI:H,options:$,tokenEndpoint:Y})},async getUserInfo(U){if($.getUserInfo)return $.getUserInfo(U);if(!U.idToken)return null;let Z=r8(U.idToken),H=$.profilePhotoSize||48;await T0(`https://graph.microsoft.com/v1.0/me/photos/${H}x${H}/$value`,{headers:{Authorization:`Bearer ${U.accessToken}`},async onResponse(z){if($.disableProfilePhoto||!z.response.ok)return;try{let D=await z.response.clone().arrayBuffer(),K=$$.encode(D);Z.picture=`data:image/jpeg;base64, ${K}`}catch(w){_0.error(w&&typeof w==="object"&&"name"in w?w.name:"",w)}}});let G=await $.mapProfileToUser?.(Z);return{user:{id:Z.sub,name:Z.name,email:Z.email,image:Z.picture,emailVerified:!0,...G},data:Z}},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(U)=>{let Z=$.disableDefaultScope?[]:["openid","profile","email","User.Read","offline_access"];return $.scope&&Z.push(...$.scope),E1({refreshToken:U,options:{clientId:$.clientId,clientSecret:$.clientSecret},extraParams:{scope:Z.join(" ")},tokenEndpoint:Y})},options:$}},H00=($)=>{return{id:"slack",name:"Slack",createAuthorizationURL({state:J,scopes:W,redirectURI:X}){let Y=$.disableDefaultScope?[]:["openid","profile","email"];W&&Y.push(...W),$.scope&&Y.push(...$.scope);let U=new URL("https://slack.com/openid/connect/authorize");return U.searchParams.set("scope",Y.join(" ")),U.searchParams.set("response_type","code"),U.searchParams.set("client_id",$.clientId),U.searchParams.set("redirect_uri",$.redirectURI||X),U.searchParams.set("state",J),U},validateAuthorizationCode:async({code:J,redirectURI:W})=>{return D1({code:J,redirectURI:W,options:$,tokenEndpoint:"https://slack.com/api/openid.connect.token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return E1({refreshToken:J,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://slack.com/api/openid.connect.token"})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);let{data:W,error:X}=await T0("https://slack.com/api/openid.connect.userInfo",{headers:{authorization:`Bearer ${J.accessToken}`}});if(X)return null;let Y=await $.mapProfileToUser?.(W);return{user:{id:W["https://slack.com/user_id"],name:W.name||"",email:W.email,emailVerified:W.email_verified,image:W.picture||W["https://slack.com/user_image_512"],...Y},data:W}},options:$}},G00=($)=>{return{id:"notion",name:"Notion",createAuthorizationURL({state:W,scopes:X,loginHint:Y,redirectURI:U}){let Z=$.disableDefaultScope?[]:[];return $.scope&&Z.push(...$.scope),X&&Z.push(...X),v1({id:"notion",options:$,authorizationEndpoint:"https://api.notion.com/v1/oauth/authorize",scopes:Z,state:W,redirectURI:U,loginHint:Y,additionalParams:{owner:"user"}})},validateAuthorizationCode:async({code:W,redirectURI:X})=>{return D1({code:W,redirectURI:X,options:$,tokenEndpoint:"https://api.notion.com/v1/oauth/token",authentication:"basic"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(W)=>{return E1({refreshToken:W,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://api.notion.com/v1/oauth/token"})},async getUserInfo(W){if($.getUserInfo)return $.getUserInfo(W);let{data:X,error:Y}=await T0("https://api.notion.com/v1/users/me",{headers:{Authorization:`Bearer ${W.accessToken}`,"Notion-Version":"2022-06-28"}});if(Y||!X)return null;let U=X.bot?.owner?.user;if(!U)return null;let Z=await $.mapProfileToUser?.(U);return{user:{id:U.id,name:U.name||"Notion User",email:U.person?.email||null,image:U.avatar_url,emailVerified:!!U.person?.email,...Z},data:U}},options:$}},z00=($)=>{return{id:"spotify",name:"Spotify",createAuthorizationURL({state:J,scopes:W,codeVerifier:X,redirectURI:Y}){let U=$.disableDefaultScope?[]:["user-read-email"];return $.scope&&U.push(...$.scope),W&&U.push(...W),v1({id:"spotify",options:$,authorizationEndpoint:"https://accounts.spotify.com/authorize",scopes:U,state:J,codeVerifier:X,redirectURI:Y})},validateAuthorizationCode:async({code:J,codeVerifier:W,redirectURI:X})=>{return D1({code:J,codeVerifier:W,redirectURI:X,options:$,tokenEndpoint:"https://accounts.spotify.com/api/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return E1({refreshToken:J,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://accounts.spotify.com/api/token"})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);let{data:W,error:X}=await T0("https://api.spotify.com/v1/me",{method:"GET",headers:{Authorization:`Bearer ${J.accessToken}`}});if(X)return null;let Y=await $.mapProfileToUser?.(W);return{user:{id:W.id,name:W.display_name,email:W.email,image:W.images[0]?.url,emailVerified:!1,...Y},data:W}},options:$}},w00=($)=>{return{id:"twitch",name:"Twitch",createAuthorizationURL({state:J,scopes:W,redirectURI:X}){let Y=$.disableDefaultScope?[]:["user:read:email","openid"];return $.scope&&Y.push(...$.scope),W&&Y.push(...W),v1({id:"twitch",redirectURI:X,options:$,authorizationEndpoint:"https://id.twitch.tv/oauth2/authorize",scopes:Y,state:J,claims:$.claims||["email","email_verified","preferred_username","picture"]})},validateAuthorizationCode:async({code:J,redirectURI:W})=>{return D1({code:J,redirectURI:W,options:$,tokenEndpoint:"https://id.twitch.tv/oauth2/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return E1({refreshToken:J,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://id.twitch.tv/oauth2/token"})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);let W=J.idToken;if(!W)return _0.error("No idToken found in token"),null;let X=r8(W),Y=await $.mapProfileToUser?.(X);return{user:{id:X.sub,name:X.preferred_username,email:X.email,image:X.picture,emailVerified:X.email_verified,...Y},data:X}},options:$}},D00=($)=>{return{id:"twitter",name:"Twitter",createAuthorizationURL(J){let W=$.disableDefaultScope?[]:["users.read","tweet.read","offline.access","users.email"];return $.scope&&W.push(...$.scope),J.scopes&&W.push(...J.scopes),v1({id:"twitter",options:$,authorizationEndpoint:"https://x.com/i/oauth2/authorize",scopes:W,state:J.state,codeVerifier:J.codeVerifier,redirectURI:J.redirectURI})},validateAuthorizationCode:async({code:J,codeVerifier:W,redirectURI:X})=>{return D1({code:J,codeVerifier:W,authentication:"basic",redirectURI:X,options:$,tokenEndpoint:"https://api.x.com/2/oauth2/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return E1({refreshToken:J,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},authentication:"basic",tokenEndpoint:"https://api.x.com/2/oauth2/token"})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);let{data:W,error:X}=await T0("https://api.x.com/2/users/me?user.fields=profile_image_url",{method:"GET",headers:{Authorization:`Bearer ${J.accessToken}`}});if(X)return null;let{data:Y,error:U}=await T0("https://api.x.com/2/users/me?user.fields=confirmed_email",{method:"GET",headers:{Authorization:`Bearer ${J.accessToken}`}}),Z=!1;if(!U&&Y?.data?.confirmed_email)W.data.email=Y.data.confirmed_email,Z=!0;let H=await $.mapProfileToUser?.(W);return{user:{id:W.data.id,name:W.data.name,email:W.data.email||W.data.username||null,image:W.data.profile_image_url,emailVerified:Z,...H},data:W}},options:$}},K00=($)=>{return{id:"dropbox",name:"Dropbox",createAuthorizationURL:async({state:W,scopes:X,codeVerifier:Y,redirectURI:U})=>{let Z=$.disableDefaultScope?[]:["account_info.read"];$.scope&&Z.push(...$.scope),X&&Z.push(...X);let H={};if($.accessType)H.token_access_type=$.accessType;return await v1({id:"dropbox",options:$,authorizationEndpoint:"https://www.dropbox.com/oauth2/authorize",scopes:Z,state:W,redirectURI:U,codeVerifier:Y,additionalParams:H})},validateAuthorizationCode:async({code:W,codeVerifier:X,redirectURI:Y})=>{return await D1({code:W,codeVerifier:X,redirectURI:Y,options:$,tokenEndpoint:"https://api.dropboxapi.com/oauth2/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(W)=>{return E1({refreshToken:W,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://api.dropbox.com/oauth2/token"})},async getUserInfo(W){if($.getUserInfo)return $.getUserInfo(W);let{data:X,error:Y}=await T0("https://api.dropboxapi.com/2/users/get_current_account",{method:"POST",headers:{Authorization:`Bearer ${W.accessToken}`}});if(Y)return null;let U=await $.mapProfileToUser?.(X);return{user:{id:X.account_id,name:X.name?.display_name,email:X.email,emailVerified:X.email_verified||!1,image:X.profile_photo_url,...U},data:X}},options:$}},O00=($)=>{return{id:"linear",name:"Linear",createAuthorizationURL({state:W,scopes:X,loginHint:Y,redirectURI:U}){let Z=$.disableDefaultScope?[]:["read"];return $.scope&&Z.push(...$.scope),X&&Z.push(...X),v1({id:"linear",options:$,authorizationEndpoint:"https://linear.app/oauth/authorize",scopes:Z,state:W,redirectURI:U,loginHint:Y})},validateAuthorizationCode:async({code:W,redirectURI:X})=>{return D1({code:W,redirectURI:X,options:$,tokenEndpoint:"https://api.linear.app/oauth/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(W)=>{return E1({refreshToken:W,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://api.linear.app/oauth/token"})},async getUserInfo(W){if($.getUserInfo)return $.getUserInfo(W);let{data:X,error:Y}=await T0("https://api.linear.app/graphql",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${W.accessToken}`},body:JSON.stringify({query:`
							query {
								viewer {
									id
									name
									email
									avatarUrl
									active
									createdAt
									updatedAt
								}
							}
						`})});if(Y||!X?.data?.viewer)return null;let U=X.data.viewer,Z=await $.mapProfileToUser?.(U);return{user:{id:X.data.viewer.id,name:X.data.viewer.name,email:X.data.viewer.email,image:X.data.viewer.avatarUrl,emailVerified:!0,...Z},data:U}},options:$}},F00=($)=>{return{id:"linkedin",name:"Linkedin",createAuthorizationURL:async({state:X,scopes:Y,redirectURI:U,loginHint:Z})=>{let H=$.disableDefaultScope?[]:["profile","email","openid"];return $.scope&&H.push(...$.scope),Y&&H.push(...Y),await v1({id:"linkedin",options:$,authorizationEndpoint:"https://www.linkedin.com/oauth/v2/authorization",scopes:H,state:X,loginHint:Z,redirectURI:U})},validateAuthorizationCode:async({code:X,redirectURI:Y})=>{return await D1({code:X,redirectURI:Y,options:$,tokenEndpoint:"https://www.linkedin.com/oauth/v2/accessToken"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(X)=>{return E1({refreshToken:X,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://www.linkedin.com/oauth/v2/accessToken"})},async getUserInfo(X){if($.getUserInfo)return $.getUserInfo(X);let{data:Y,error:U}=await T0("https://api.linkedin.com/v2/userinfo",{method:"GET",headers:{Authorization:`Bearer ${X.accessToken}`}});if(U)return null;let Z=await $.mapProfileToUser?.(Y);return{user:{id:Y.sub,name:Y.name,email:Y.email,emailVerified:Y.email_verified||!1,image:Y.picture,...Z},data:Y}},options:$}},tA=($="")=>{return $.split("://").map((J)=>J.replace(/\/{2,}/g,"/")).join("://")},E00=($)=>{let J=$||"https://gitlab.com";return{authorizationEndpoint:tA(`${J}/oauth/authorize`),tokenEndpoint:tA(`${J}/oauth/token`),userinfoEndpoint:tA(`${J}/api/v4/user`)}},M00=($)=>{let{authorizationEndpoint:J,tokenEndpoint:W,userinfoEndpoint:X}=E00($.issuer),Y="gitlab",U="Gitlab";return{id:"gitlab",name:"Gitlab",createAuthorizationURL:async({state:Z,scopes:H,codeVerifier:G,loginHint:z,redirectURI:w})=>{let D=$.disableDefaultScope?[]:["read_user"];return $.scope&&D.push(...$.scope),H&&D.push(...H),await v1({id:"gitlab",options:$,authorizationEndpoint:J,scopes:D,state:Z,redirectURI:w,codeVerifier:G,loginHint:z})},validateAuthorizationCode:async({code:Z,redirectURI:H,codeVerifier:G})=>{return D1({code:Z,redirectURI:H,options:$,codeVerifier:G,tokenEndpoint:W})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(Z)=>{return E1({refreshToken:Z,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:W})},async getUserInfo(Z){if($.getUserInfo)return $.getUserInfo(Z);let{data:H,error:G}=await T0(X,{headers:{authorization:`Bearer ${Z.accessToken}`}});if(G||H.state!=="active"||H.locked)return null;let z=await $.mapProfileToUser?.(H);return{user:{id:H.id,name:H.name??H.username,email:H.email,image:H.avatar_url,emailVerified:!0,...z},data:H}},options:$}},V00=($)=>{return{id:"tiktok",name:"TikTok",createAuthorizationURL({state:J,scopes:W,redirectURI:X}){let Y=$.disableDefaultScope?[]:["user.info.profile"];return $.scope&&Y.push(...$.scope),W&&Y.push(...W),new URL(`https://www.tiktok.com/v2/auth/authorize?scope=${Y.join(",")}&response_type=code&client_key=${$.clientKey}&redirect_uri=${encodeURIComponent($.redirectURI||X)}&state=${J}`)},validateAuthorizationCode:async({code:J,redirectURI:W})=>{return D1({code:J,redirectURI:$.redirectURI||W,options:{clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://open.tiktokapis.com/v2/oauth/token/"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return E1({refreshToken:J,options:{clientSecret:$.clientSecret},tokenEndpoint:"https://open.tiktokapis.com/v2/oauth/token/",authentication:"post",extraParams:{client_key:$.clientKey}})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);let W=["open_id","avatar_large_url","display_name","username"],{data:X,error:Y}=await T0(`https://open.tiktokapis.com/v2/user/info/?fields=${W.join(",")}`,{headers:{authorization:`Bearer ${J.accessToken}`}});if(Y)return null;return{user:{email:X.data.user.email||X.data.user.username,id:X.data.user.open_id,name:X.data.user.display_name||X.data.user.username,image:X.data.user.avatar_large_url,emailVerified:X.data.user.email?!0:!1},data:X}},options:$}},Q00=($)=>{return{id:"reddit",name:"Reddit",createAuthorizationURL({state:J,scopes:W,redirectURI:X}){let Y=$.disableDefaultScope?[]:["identity"];return $.scope&&Y.push(...$.scope),W&&Y.push(...W),v1({id:"reddit",options:$,authorizationEndpoint:"https://www.reddit.com/api/v1/authorize",scopes:Y,state:J,redirectURI:X,duration:$.duration})},validateAuthorizationCode:async({code:J,redirectURI:W})=>{let X=new URLSearchParams({grant_type:"authorization_code",code:J,redirect_uri:$.redirectURI||W}),Y={"content-type":"application/x-www-form-urlencoded",accept:"text/plain","user-agent":"better-auth",Authorization:`Basic ${$$.encode(`${$.clientId}:${$.clientSecret}`)}`},{data:U,error:Z}=await T0("https://www.reddit.com/api/v1/access_token",{method:"POST",headers:Y,body:X.toString()});if(Z)throw Z;return fF(U)},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return E1({refreshToken:J,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},authentication:"basic",tokenEndpoint:"https://www.reddit.com/api/v1/access_token"})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);let{data:W,error:X}=await T0("https://oauth.reddit.com/api/v1/me",{headers:{Authorization:`Bearer ${J.accessToken}`,"User-Agent":"better-auth"}});if(X)return null;let Y=await $.mapProfileToUser?.(W);return{user:{id:W.id,name:W.name,email:W.oauth_client_id,emailVerified:W.has_verified_email,image:W.icon_img?.split("?")[0],...Y},data:W}},options:$}},A00=($)=>{return{id:"roblox",name:"Roblox",createAuthorizationURL({state:J,scopes:W,redirectURI:X}){let Y=$.disableDefaultScope?[]:["openid","profile"];return $.scope&&Y.push(...$.scope),W&&Y.push(...W),new URL(`https://apis.roblox.com/oauth/v1/authorize?scope=${Y.join("+")}&response_type=code&client_id=${$.clientId}&redirect_uri=${encodeURIComponent($.redirectURI||X)}&state=${J}&prompt=${$.prompt||"select_account consent"}`)},validateAuthorizationCode:async({code:J,redirectURI:W})=>{return D1({code:J,redirectURI:$.redirectURI||W,options:$,tokenEndpoint:"https://apis.roblox.com/oauth/v1/token",authentication:"post"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return E1({refreshToken:J,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://apis.roblox.com/oauth/v1/token"})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);let{data:W,error:X}=await T0("https://apis.roblox.com/oauth/v1/userinfo",{headers:{authorization:`Bearer ${J.accessToken}`}});if(X)return null;let Y=await $.mapProfileToUser?.(W);return{user:{id:W.sub,name:W.nickname||W.preferred_username||"",image:W.picture,email:W.preferred_username||null,emailVerified:!0,...Y},data:{...W}}},options:$}},I00=($)=>{let W=($.environment??"production")==="sandbox",X=$.loginUrl?`https://${$.loginUrl}/services/oauth2/authorize`:W?"https://test.salesforce.com/services/oauth2/authorize":"https://login.salesforce.com/services/oauth2/authorize",Y=$.loginUrl?`https://${$.loginUrl}/services/oauth2/token`:W?"https://test.salesforce.com/services/oauth2/token":"https://login.salesforce.com/services/oauth2/token",U=$.loginUrl?`https://${$.loginUrl}/services/oauth2/userinfo`:W?"https://test.salesforce.com/services/oauth2/userinfo":"https://login.salesforce.com/services/oauth2/userinfo";return{id:"salesforce",name:"Salesforce",async createAuthorizationURL({state:Z,scopes:H,codeVerifier:G,redirectURI:z}){if(!$.clientId||!$.clientSecret)throw _0.error("Client Id and Client Secret are required for Salesforce. Make sure to provide them in the options."),new h0("CLIENT_ID_AND_SECRET_REQUIRED");if(!G)throw new h0("codeVerifier is required for Salesforce");let w=$.disableDefaultScope?[]:["openid","email","profile"];return $.scope&&w.push(...$.scope),H&&w.push(...H),v1({id:"salesforce",options:$,authorizationEndpoint:X,scopes:w,state:Z,codeVerifier:G,redirectURI:$.redirectURI||z})},validateAuthorizationCode:async({code:Z,codeVerifier:H,redirectURI:G})=>{return D1({code:Z,codeVerifier:H,redirectURI:$.redirectURI||G,options:$,tokenEndpoint:Y})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(Z)=>{return E1({refreshToken:Z,options:{clientId:$.clientId,clientSecret:$.clientSecret},tokenEndpoint:Y})},async getUserInfo(Z){if($.getUserInfo)return $.getUserInfo(Z);try{let{data:H}=await T0(U,{headers:{Authorization:`Bearer ${Z.accessToken}`}});if(!H)return _0.error("Failed to fetch user info from Salesforce"),null;let G=await $.mapProfileToUser?.(H);return{user:{id:H.user_id,name:H.name,email:H.email,image:H.photos?.picture||H.photos?.thumbnail,emailVerified:H.email_verified??!1,...G},data:H}}catch(H){return _0.error("Failed to fetch user info from Salesforce:",H),null}},options:$}},L00=($)=>{return{id:"vk",name:"VK",async createAuthorizationURL({state:J,scopes:W,codeVerifier:X,redirectURI:Y}){let U=$.disableDefaultScope?[]:["email","phone"];return $.scope&&U.push(...$.scope),W&&U.push(...W),v1({id:"vk",options:$,authorizationEndpoint:"https://id.vk.com/authorize",scopes:U,state:J,redirectURI:Y,codeVerifier:X})},validateAuthorizationCode:async({code:J,codeVerifier:W,redirectURI:X,deviceId:Y})=>{return D1({code:J,codeVerifier:W,redirectURI:$.redirectURI||X,options:$,deviceId:Y,tokenEndpoint:"https://id.vk.com/oauth2/auth"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return E1({refreshToken:J,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://id.vk.com/oauth2/auth"})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);if(!J.accessToken)return null;let W=new URLSearchParams({access_token:J.accessToken,client_id:$.clientId}).toString(),{data:X,error:Y}=await T0("https://id.vk.com/oauth2/user_info",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:W});if(Y)return null;if(!X.user.email)return null;let U=await $.mapProfileToUser?.(X);return{user:{id:X.user.user_id,first_name:X.user.first_name,last_name:X.user.last_name,email:X.user.email,image:X.user.avatar,emailVerified:!!X.user.email,birthday:X.user.birthday,sex:X.user.sex,name:`${X.user.first_name} ${X.user.last_name}`,...U},data:X}},options:$}},P00=($)=>{let J={pkce:!0,...$};return{id:"zoom",name:"Zoom",createAuthorizationURL:async({state:W,redirectURI:X,codeVerifier:Y})=>{let U=new URLSearchParams({response_type:"code",redirect_uri:J.redirectURI?J.redirectURI:X,client_id:J.clientId,state:W});if(J.pkce){let H=await mF(Y);U.set("code_challenge_method","S256"),U.set("code_challenge",H)}let Z=new URL("https://zoom.us/oauth/authorize");return Z.search=U.toString(),Z},validateAuthorizationCode:async({code:W,redirectURI:X,codeVerifier:Y})=>{return D1({code:W,redirectURI:J.redirectURI||X,codeVerifier:Y,options:J,tokenEndpoint:"https://zoom.us/oauth/token",authentication:"post"})},async getUserInfo(W){if(J.getUserInfo)return J.getUserInfo(W);let{data:X,error:Y}=await T0("https://api.zoom.us/v2/users/me",{headers:{authorization:`Bearer ${W.accessToken}`}});if(Y)return null;let U=await J.mapProfileToUser?.(X);return{user:{id:X.id,name:X.display_name,image:X.pic_url,email:X.email,emailVerified:Boolean(X.verified),...U},data:{...X}}}}},_00=($)=>{return{id:"kakao",name:"Kakao",createAuthorizationURL({state:J,scopes:W,redirectURI:X}){let Y=$.disableDefaultScope?[]:["account_email","profile_image","profile_nickname"];return $.scope&&Y.push(...$.scope),W&&Y.push(...W),v1({id:"kakao",options:$,authorizationEndpoint:"https://kauth.kakao.com/oauth/authorize",scopes:Y,state:J,redirectURI:X})},validateAuthorizationCode:async({code:J,redirectURI:W})=>{return D1({code:J,redirectURI:W,options:$,tokenEndpoint:"https://kauth.kakao.com/oauth/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return E1({refreshToken:J,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://kauth.kakao.com/oauth/token"})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);let{data:W,error:X}=await T0("https://kapi.kakao.com/v2/user/me",{headers:{Authorization:`Bearer ${J.accessToken}`}});if(X||!W)return null;let Y=await $.mapProfileToUser?.(W),U=W.kakao_account||{},Z=U.profile||{};return{user:{id:String(W.id),name:Z.nickname||U.name||void 0,email:U.email,image:Z.profile_image_url||Z.thumbnail_image_url,emailVerified:!!U.is_email_valid&&!!U.is_email_verified,...Y},data:W}},options:$}},N00=($)=>{return{id:"naver",name:"Naver",createAuthorizationURL({state:J,scopes:W,redirectURI:X}){let Y=$.disableDefaultScope?[]:["profile","email"];return $.scope&&Y.push(...$.scope),W&&Y.push(...W),v1({id:"naver",options:$,authorizationEndpoint:"https://nid.naver.com/oauth2.0/authorize",scopes:Y,state:J,redirectURI:X})},validateAuthorizationCode:async({code:J,redirectURI:W})=>{return D1({code:J,redirectURI:W,options:$,tokenEndpoint:"https://nid.naver.com/oauth2.0/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return E1({refreshToken:J,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://nid.naver.com/oauth2.0/token"})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);let{data:W,error:X}=await T0("https://openapi.naver.com/v1/nid/me",{headers:{Authorization:`Bearer ${J.accessToken}`}});if(X||!W||W.resultcode!=="00")return null;let Y=await $.mapProfileToUser?.(W),U=W.response||{};return{user:{id:U.id,name:U.name||U.nickname,email:U.email,image:U.profile_image,emailVerified:!1,...Y},data:W}},options:$}},B00=($)=>{return{id:"line",name:"LINE",async createAuthorizationURL({state:U,scopes:Z,codeVerifier:H,redirectURI:G,loginHint:z}){let w=$.disableDefaultScope?[]:["openid","profile","email"];return $.scope&&w.push(...$.scope),Z&&w.push(...Z),await v1({id:"line",options:$,authorizationEndpoint:"https://access.line.me/oauth2/v2.1/authorize",scopes:w,state:U,codeVerifier:H,redirectURI:G,loginHint:z})},validateAuthorizationCode:async({code:U,codeVerifier:Z,redirectURI:H})=>{return D1({code:U,codeVerifier:Z,redirectURI:H,options:$,tokenEndpoint:"https://api.line.me/oauth2/v2.1/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(U)=>{return E1({refreshToken:U,options:{clientId:$.clientId,clientSecret:$.clientSecret},tokenEndpoint:"https://api.line.me/oauth2/v2.1/token"})},async verifyIdToken(U,Z){if($.disableIdTokenSignIn)return!1;if($.verifyIdToken)return $.verifyIdToken(U,Z);let H=new URLSearchParams;if(H.set("id_token",U),H.set("client_id",$.clientId),Z)H.set("nonce",Z);let{data:G,error:z}=await T0("https://api.line.me/oauth2/v2.1/verify",{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:H});if(z||!G)return!1;if(G.aud!==$.clientId)return!1;if(Z&&G.nonce&&G.nonce!==Z)return!1;return!0},async getUserInfo(U){if($.getUserInfo)return $.getUserInfo(U);let Z=null;if(U.idToken)try{Z=r8(U.idToken)}catch{}if(!Z){let{data:K}=await T0("https://api.line.me/oauth2/v2.1/userinfo",{headers:{authorization:`Bearer ${U.accessToken}`}});Z=K||null}if(!Z)return null;let H=await $.mapProfileToUser?.(Z),G=Z.sub||Z.userId,z=Z.name||Z.displayName,w=Z.picture||Z.pictureUrl||void 0,D=Z.email;return{user:{id:G,name:z,email:D,image:w,emailVerified:!1,...H},data:Z}},options:$}},R00=($)=>{let W=($.environment||"sandbox")==="sandbox",X=W?"https://www.sandbox.paypal.com/signin/authorize":"https://www.paypal.com/signin/authorize",Y=W?"https://api-m.sandbox.paypal.com/v1/oauth2/token":"https://api-m.paypal.com/v1/oauth2/token",U=W?"https://api-m.sandbox.paypal.com/v1/identity/oauth2/userinfo":"https://api-m.paypal.com/v1/identity/oauth2/userinfo";return{id:"paypal",name:"PayPal",async createAuthorizationURL({state:Z,codeVerifier:H,redirectURI:G}){if(!$.clientId||!$.clientSecret)throw _0.error("Client Id and Client Secret is required for PayPal. Make sure to provide them in the options."),new h0("CLIENT_ID_AND_SECRET_REQUIRED");return await v1({id:"paypal",options:$,authorizationEndpoint:X,scopes:[],state:Z,codeVerifier:H,redirectURI:G,prompt:$.prompt})},validateAuthorizationCode:async({code:Z,redirectURI:H})=>{let G=$$.encode(`${$.clientId}:${$.clientSecret}`);try{let z=await T0(Y,{method:"POST",headers:{Authorization:`Basic ${G}`,Accept:"application/json","Accept-Language":"en_US","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"authorization_code",code:Z,redirect_uri:H}).toString()});if(!z.data)throw new h0("FAILED_TO_GET_ACCESS_TOKEN");let w=z.data;return{accessToken:w.access_token,refreshToken:w.refresh_token,accessTokenExpiresAt:w.expires_in?new Date(Date.now()+w.expires_in*1000):void 0,idToken:w.id_token}}catch(z){throw _0.error("PayPal token exchange failed:",z),new h0("FAILED_TO_GET_ACCESS_TOKEN")}},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(Z)=>{let H=$$.encode(`${$.clientId}:${$.clientSecret}`);try{let G=await T0(Y,{method:"POST",headers:{Authorization:`Basic ${H}`,Accept:"application/json","Accept-Language":"en_US","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:Z}).toString()});if(!G.data)throw new h0("FAILED_TO_REFRESH_ACCESS_TOKEN");let z=G.data;return{accessToken:z.access_token,refreshToken:z.refresh_token,accessTokenExpiresAt:z.expires_in?new Date(Date.now()+z.expires_in*1000):void 0}}catch(G){throw _0.error("PayPal token refresh failed:",G),new h0("FAILED_TO_REFRESH_ACCESS_TOKEN")}},async verifyIdToken(Z,H){if($.disableIdTokenSignIn)return!1;if($.verifyIdToken)return $.verifyIdToken(Z,H);try{return!!r8(Z).sub}catch(G){return _0.error("Failed to verify PayPal ID token:",G),!1}},async getUserInfo(Z){if($.getUserInfo)return $.getUserInfo(Z);if(!Z.accessToken)return _0.error("Access token is required to fetch PayPal user info"),null;try{let H=await T0(`${U}?schema=paypalv1.1`,{headers:{Authorization:`Bearer ${Z.accessToken}`,Accept:"application/json"}});if(!H.data)return _0.error("Failed to fetch user info from PayPal"),null;let G=H.data,z=await $.mapProfileToUser?.(G);return{user:{id:G.user_id,name:G.name,email:G.email,image:G.picture,emailVerified:G.email_verified,...z},data:G}}catch(H){return _0.error("Failed to fetch user info from PayPal:",H),null}},options:$}},aA={apple:ie,atlassian:ae,cognito:oe,discord:ee,facebook:$00,figma:J00,github:W00,microsoft:Z00,google:X00,huggingface:U00,slack:H00,spotify:z00,twitch:w00,twitter:D00,dropbox:K00,kick:Y00,linear:O00,linkedin:F00,gitlab:M00,tiktok:V00,reddit:Q00,roblox:A00,salesforce:I00,vk:L00,zoom:P00,notion:G00,kakao:_00,naver:N00,line:B00,paypal:R00},S00=Object.keys(aA),oA=yU(S00).or(a());var pT=u9(a0({disableCookieCache:Z8.boolean().meta({description:"Disable cookie cache and fetch session from database"}).optional(),disableRefresh:Z8.boolean().meta({description:"Disable session refresh. Useful for checking session status, without updating the session"}).optional()})),sA=()=>l0("/get-session",{method:"GET",query:pT,requireHeaders:!0,metadata:{openapi:{description:"Get the current session",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{session:{$ref:"#/components/schemas/Session"},user:{$ref:"#/components/schemas/User"}},required:["session","user"]}}}}}}}},async($)=>{try{let J=await $.getSignedCookie($.context.authCookies.sessionToken.name,$.context.secret);if(!J)return null;let W=$.getCookie($.context.authCookies.sessionData.name),X=W?U4(pA.decode(d8.decode(W))):null;if(X){if(!await Mz("SHA-256","base64urlnopad").verify($.context.secret,JSON.stringify({...X.session,expiresAt:X.expiresAt}),X.signature)){let D=$.context.authCookies.sessionData.name;return $.setCookie(D,"",{maxAge:0}),$.json(null)}}let Y=await $.getSignedCookie($.context.authCookies.dontRememberToken.name,$.context.secret);if(X?.session&&$.context.options.session?.cookieCache?.enabled&&!$.query?.disableCookieCache){let w=X.session;if(!(X.expiresAt<Date.now()||w.session.expiresAt<new Date))return $.context.session=w,$.json(w);else{let K=$.context.authCookies.sessionData.name;$.setCookie(K,"",{maxAge:0})}}let U=await $.context.internalAdapter.findSession(J);if($.context.session=U,!U||U.session.expiresAt<new Date){if(n9($),U)await $.context.internalAdapter.deleteSession(U.session.token);return $.json(null)}if(Y||$.query?.disableRefresh)return $.json(U);let Z=$.context.sessionConfig.expiresIn,H=$.context.sessionConfig.updateAge;if(U.session.expiresAt.valueOf()-Z*1000+H*1000<=Date.now()&&(!$.query?.disableRefresh||!$.context.options.session?.disableSessionRefresh)){let w=await $.context.internalAdapter.updateSession(U.session.token,{expiresAt:o8($.context.sessionConfig.expiresIn,"sec"),updatedAt:new Date});if(!w)return n9($),$.json(null,{status:401});let D=(w.expiresAt.valueOf()-Date.now())/1000;return await y$($,{session:w,user:U.user},!1,{maxAge:D}),$.json({session:w,user:U.user})}return await nA($,U,!!Y),$.json(U)}catch(J){throw $.context.logger.error("INTERNAL_SERVER_ERROR",J),new p("INTERNAL_SERVER_ERROR",{message:E0.FAILED_TO_GET_SESSION})}}),m6=async($,J)=>{if($.context.session)return $.context.session;let W=await sA()({...$,asResponse:!1,headers:$.headers,returnHeaders:!1,query:{...J,...$.query}}).catch((X)=>{return null});return $.context.session=W,W},S7=q5(async($)=>{let J=await m6($);if(!J?.session)throw new p("UNAUTHORIZED");return{session:J}}),h5=q5(async($)=>{let J=await m6($,{disableCookieCache:!0});if(!J?.session)throw new p("UNAUTHORIZED");return{session:J}}),j00=q5(async($)=>{let J=await m6($);if(!J?.session&&($.request||$.headers))throw new p("UNAUTHORIZED");return{session:J}}),eA=q5(async($)=>{let J=await m6($);if(!J?.session)throw new p("UNAUTHORIZED");if($.context.sessionConfig.freshAge===0)return{session:J};let W=$.context.sessionConfig.freshAge,X=J.session.updatedAt?.valueOf()||J.session.createdAt.valueOf();if(!(Date.now()-X<W*1000))throw new p("FORBIDDEN",{message:"Session is not fresh"});return{session:J}}),dT=()=>l0("/list-sessions",{method:"GET",use:[S7],requireHeaders:!0,metadata:{openapi:{description:"List all active sessions for the user",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"array",items:{$ref:"#/components/schemas/Session"}}}}}}}}},async($)=>{try{let W=(await $.context.internalAdapter.listSessions($.context.session.user.id)).filter((X)=>{return X.expiresAt>new Date});return $.json(W)}catch(J){throw $.context.logger.error(J),$.error("INTERNAL_SERVER_ERROR")}}),lT=l0("/revoke-session",{method:"POST",body:a0({token:a().meta({description:"The token to revoke"})}),use:[h5],requireHeaders:!0,metadata:{openapi:{description:"Revoke a single session",requestBody:{content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",description:"The token to revoke"}},required:["token"]}}}},responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the session was revoked successfully"}},required:["status"]}}}}}}}},async($)=>{let J=$.body.token,W=await $.context.internalAdapter.findSession(J);if(!W)throw new p("BAD_REQUEST",{message:"Session not found"});if(W.session.userId!==$.context.session.user.id)throw new p("UNAUTHORIZED");try{await $.context.internalAdapter.deleteSession(J)}catch(X){throw $.context.logger.error(X&&typeof X==="object"&&"name"in X?X.name:"",X),new p("INTERNAL_SERVER_ERROR")}return $.json({status:!0})}),rT=l0("/revoke-sessions",{method:"POST",use:[h5],requireHeaders:!0,metadata:{openapi:{description:"Revoke all sessions for the user",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if all sessions were revoked successfully"}},required:["status"]}}}}}}}},async($)=>{try{await $.context.internalAdapter.deleteSessions($.context.session.user.id)}catch(J){throw $.context.logger.error(J&&typeof J==="object"&&"name"in J?J.name:"",J),new p("INTERNAL_SERVER_ERROR")}return $.json({status:!0})}),nT=l0("/revoke-other-sessions",{method:"POST",requireHeaders:!0,use:[h5],metadata:{openapi:{description:"Revoke all other sessions for the user except the current one",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if all other sessions were revoked successfully"}},required:["status"]}}}}}}}},async($)=>{let J=$.context.session;if(!J.user)throw new p("UNAUTHORIZED");let Y=(await $.context.internalAdapter.listSessions(J.user.id)).filter((U)=>{return U.expiresAt>new Date}).filter((U)=>U.token!==$.context.session.session.token);return await Promise.all(Y.map((U)=>$.context.internalAdapter.deleteSession(U.token))),$.json({status:!0})});var s8=($)=>{return _X("a-z","A-Z","0-9")($||32)};function rU($,J){return{digest:async(W)=>{let Y=typeof W==="string"?new TextEncoder().encode(W):W,U=await n8().digest($,Y);if(J==="hex")return Array.from(new Uint8Array(U)).map((G)=>G.toString(16).padStart(2,"0")).join("");if(J==="base64"||J==="base64url"||J==="base64urlnopad"){if(J.includes("url"))return d8.encode(U,{padding:J!=="base64urlnopad"});return $$.encode(U)}return U}}}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function k00($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function Lz($){if(typeof $!=="boolean")throw Error(`boolean expected, not ${$}`)}function nU($){if(!Number.isSafeInteger($)||$<0)throw Error("positive integer expected, got "+$)}function X4($,J,W=""){let X=k00($),Y=$?.length,U=J!==void 0;if(!X||U&&Y!==J){let Z=W&&`"${W}" `,H=U?` of length ${J}`:"",G=X?`length=${Y}`:`type=${typeof $}`;throw Error(Z+"expected Uint8Array"+H+", got "+G)}return $}function $I($,J=!0){if($.destroyed)throw Error("Hash instance has been destroyed");if(J&&$.finished)throw Error("Hash#digest() has already been called")}function tT($,J){X4($,void 0,"output");let W=J.outputLen;if($.length<W)throw Error("digestInto() expects output buffer of length at least "+W)}function b5($){return new Uint32Array($.buffer,$.byteOffset,Math.floor($.byteLength/4))}function g5(...$){for(let J=0;J<$.length;J++)$[J].fill(0)}function v00($){return new DataView($.buffer,$.byteOffset,$.byteLength)}var C00=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)(),aT=(()=>typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function")(),T00=Array.from({length:256},($,J)=>J.toString(16).padStart(2,"0"));function JI($){if(X4($),aT)return $.toHex();let J="";for(let W=0;W<$.length;W++)J+=T00[$[W]];return J}var x5={_0:48,_9:57,A:65,F:70,a:97,f:102};function iT($){if($>=x5._0&&$<=x5._9)return $-x5._0;if($>=x5.A&&$<=x5.F)return $-(x5.A-10);if($>=x5.a&&$<=x5.f)return $-(x5.a-10);return}function oT($){if(typeof $!=="string")throw Error("hex string expected, got "+typeof $);if(aT)return Uint8Array.fromHex($);let J=$.length,W=J/2;if(J%2)throw Error("hex string expected, got unpadded hex of length "+J);let X=new Uint8Array(W);for(let Y=0,U=0;Y<W;Y++,U+=2){let Z=iT($.charCodeAt(U)),H=iT($.charCodeAt(U+1));if(Z===void 0||H===void 0){let G=$[U]+$[U+1];throw Error('hex string expected, got non-hex character "'+G+'" at index '+U)}X[Y]=Z*16+H}return X}function sT($){if(typeof $!=="string")throw Error("string expected");return new Uint8Array(new TextEncoder().encode($))}function eT(...$){let J=0;for(let X=0;X<$.length;X++){let Y=$[X];X4(Y),J+=Y.length}let W=new Uint8Array(J);for(let X=0,Y=0;X<$.length;X++){let U=$[X];W.set(U,Y),Y+=U.length}return W}function $q($,J){if(J==null||typeof J!=="object")throw Error("options must be defined");return Object.assign($,J)}function Jq($,J){if($.length!==J.length)return!1;let W=0;for(let X=0;X<$.length;X++)W|=$[X]^J[X];return W===0}var WI=($,J)=>{function W(X,...Y){if(X4(X,void 0,"key"),!C00)throw Error("Non little-endian hardware is not yet supported");if($.nonceLength!==void 0){let w=Y[0];X4(w,$.varSizeNonce?void 0:$.nonceLength,"nonce")}let U=$.tagLength;if(U&&Y[1]!==void 0)X4(Y[1],void 0,"AAD");let Z=J(X,...Y),H=(w,D)=>{if(D!==void 0){if(w!==2)throw Error("cipher output not supported");X4(D,void 0,"output")}},G=!1;return{encrypt(w,D){if(G)throw Error("cannot encrypt() twice with same key + nonce");return G=!0,X4(w),H(Z.encrypt.length,D),Z.encrypt(w,D)},decrypt(w,D){if(X4(w),U&&w.length<U)throw Error('"ciphertext" expected length bigger than tagLength='+U);return H(Z.decrypt.length,D),Z.decrypt(w,D)}}}return Object.assign(W,$),W};function XI($,J,W=!0){if(J===void 0)return new Uint8Array($);if(J.length!==$)throw Error('"output" expected Uint8Array of length '+$+", got: "+J.length);if(W&&!q00(J))throw Error("invalid output, must be aligned");return J}function Wq($,J,W){Lz(W);let X=new Uint8Array(16),Y=v00(X);return Y.setBigUint64(0,BigInt(J),W),Y.setBigUint64(8,BigInt($),W),X}function q00($){return $.byteOffset%4===0}function NX($){return Uint8Array.from($)}function Xq($=32){let J=typeof globalThis==="object"?globalThis.crypto:null;if(typeof J?.getRandomValues!=="function")throw Error("crypto.getRandomValues must be defined");return J.getRandomValues(new Uint8Array($))}function YI($,J=Xq){let{nonceLength:W}=$;nU(W);let X=(Y,U)=>{let Z=eT(Y,U);return U.fill(0),Z};return(Y,...U)=>({encrypt(Z){X4(Z);let H=J(W),G=$(Y,H,...U).encrypt(Z);if(G instanceof Promise)return G.then((z)=>X(H,z));return X(H,G)},decrypt(Z){X4(Z);let H=Z.subarray(0,W),G=Z.subarray(W);return $(Y,H,...U).decrypt(G)}})}var Uq=($)=>Uint8Array.from($.split(""),(J)=>J.charCodeAt(0)),h00=Uq("expand 16-byte k"),x00=Uq("expand 32-byte k"),b00=b5(h00),g00=b5(x00);function H0($,J){return $<<J|$>>>32-J}function UI($){return $.byteOffset%4===0}var Pz=64,f00=16,Zq=4294967295,Yq=Uint32Array.of();function m00($,J,W,X,Y,U,Z,H){let G=Y.length,z=new Uint8Array(Pz),w=b5(z),D=UI(Y)&&UI(U),K=D?b5(Y):Yq,O=D?b5(U):Yq;for(let F=0;F<G;Z++){if($(J,W,X,w,Z,H),Z>=Zq)throw Error("arx: counter overflow");let M=Math.min(Pz,G-F);if(D&&M===Pz){let A=F/4;if(F%4!==0)throw Error("arx: invalid block position");for(let I=0,P;I<f00;I++)P=A+I,O[P]=K[P]^w[I];F+=Pz;continue}for(let A=0,I;A<M;A++)I=F+A,U[I]=Y[I]^z[A];F+=M}}function ZI($,J){let{allowShortKeys:W,extendNonceFn:X,counterLength:Y,counterRight:U,rounds:Z}=$q({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},J);if(typeof $!=="function")throw Error("core must be a function");return nU(Y),nU(Z),Lz(U),Lz(W),(H,G,z,w,D=0)=>{X4(H,void 0,"key"),X4(G,void 0,"nonce"),X4(z,void 0,"data");let K=z.length;if(w===void 0)w=new Uint8Array(K);if(X4(w,void 0,"output"),nU(D),D<0||D>=Zq)throw Error("arx: counter overflow");if(w.length<K)throw Error(`arx: output (${w.length}) is shorter than data (${K})`);let O=[],F=H.length,M,A;if(F===32)O.push(M=NX(H)),A=g00;else if(F===16&&W)M=new Uint8Array(32),M.set(H),M.set(H,16),A=b00,O.push(M);else throw X4(H,32,"arx key"),Error("invalid key size");if(!UI(G))O.push(G=NX(G));let I=b5(M);if(X){if(G.length!==24)throw Error("arx: extended nonce must be 24 bytes");X(A,I,b5(G.subarray(0,16)),I),G=G.subarray(16)}let P=16-Y;if(P!==G.length)throw Error(`arx: nonce must be ${P} or 16 bytes`);if(P!==12){let N=new Uint8Array(12);N.set(G,U?0:12-G.length),G=N,O.push(G)}let Q=b5(G);return m00($,A,I,Q,z,w,D,Z),g5(...O),w}}function u4($,J){return $[J++]&255|($[J++]&255)<<8}class Hq{blockLen=16;outputLen=16;buffer=new Uint8Array(16);r=new Uint16Array(10);h=new Uint16Array(10);pad=new Uint16Array(8);pos=0;finished=!1;constructor($){$=NX(X4($,32,"key"));let J=u4($,0),W=u4($,2),X=u4($,4),Y=u4($,6),U=u4($,8),Z=u4($,10),H=u4($,12),G=u4($,14);this.r[0]=J&8191,this.r[1]=(J>>>13|W<<3)&8191,this.r[2]=(W>>>10|X<<6)&7939,this.r[3]=(X>>>7|Y<<9)&8191,this.r[4]=(Y>>>4|U<<12)&255,this.r[5]=U>>>1&8190,this.r[6]=(U>>>14|Z<<2)&8191,this.r[7]=(Z>>>11|H<<5)&8065,this.r[8]=(H>>>8|G<<8)&8191,this.r[9]=G>>>5&127;for(let z=0;z<8;z++)this.pad[z]=u4($,16+2*z)}process($,J,W=!1){let X=W?0:2048,{h:Y,r:U}=this,Z=U[0],H=U[1],G=U[2],z=U[3],w=U[4],D=U[5],K=U[6],O=U[7],F=U[8],M=U[9],A=u4($,J+0),I=u4($,J+2),P=u4($,J+4),Q=u4($,J+6),N=u4($,J+8),_=u4($,J+10),L=u4($,J+12),R=u4($,J+14),S=Y[0]+(A&8191),k=Y[1]+((A>>>13|I<<3)&8191),T=Y[2]+((I>>>10|P<<6)&8191),q=Y[3]+((P>>>7|Q<<9)&8191),h=Y[4]+((Q>>>4|N<<12)&8191),x=Y[5]+(N>>>1&8191),b=Y[6]+((N>>>14|_<<2)&8191),r=Y[7]+((_>>>11|L<<5)&8191),d=Y[8]+((L>>>8|R<<8)&8191),X0=Y[9]+(R>>>5|X),i=0,K0=i+S*Z+k*(5*M)+T*(5*F)+q*(5*O)+h*(5*K);i=K0>>>13,K0&=8191,K0+=x*(5*D)+b*(5*w)+r*(5*z)+d*(5*G)+X0*(5*H),i+=K0>>>13,K0&=8191;let D0=i+S*H+k*Z+T*(5*M)+q*(5*F)+h*(5*O);i=D0>>>13,D0&=8191,D0+=x*(5*K)+b*(5*D)+r*(5*w)+d*(5*z)+X0*(5*G),i+=D0>>>13,D0&=8191;let U0=i+S*G+k*H+T*Z+q*(5*M)+h*(5*F);i=U0>>>13,U0&=8191,U0+=x*(5*O)+b*(5*K)+r*(5*D)+d*(5*w)+X0*(5*z),i+=U0>>>13,U0&=8191;let B0=i+S*z+k*G+T*H+q*Z+h*(5*M);i=B0>>>13,B0&=8191,B0+=x*(5*F)+b*(5*O)+r*(5*K)+d*(5*D)+X0*(5*w),i+=B0>>>13,B0&=8191;let g0=i+S*w+k*z+T*G+q*H+h*Z;i=g0>>>13,g0&=8191,g0+=x*(5*M)+b*(5*F)+r*(5*O)+d*(5*K)+X0*(5*D),i+=g0>>>13,g0&=8191;let $4=i+S*D+k*w+T*z+q*G+h*H;i=$4>>>13,$4&=8191,$4+=x*Z+b*(5*M)+r*(5*F)+d*(5*O)+X0*(5*K),i+=$4>>>13,$4&=8191;let T1=i+S*K+k*D+T*w+q*z+h*G;i=T1>>>13,T1&=8191,T1+=x*H+b*Z+r*(5*M)+d*(5*F)+X0*(5*O),i+=T1>>>13,T1&=8191;let h$=i+S*O+k*K+T*D+q*w+h*z;i=h$>>>13,h$&=8191,h$+=x*G+b*H+r*Z+d*(5*M)+X0*(5*F),i+=h$>>>13,h$&=8191;let j6=i+S*F+k*O+T*K+q*D+h*w;i=j6>>>13,j6&=8191,j6+=x*z+b*G+r*H+d*Z+X0*(5*M),i+=j6>>>13,j6&=8191;let k6=i+S*M+k*F+T*O+q*K+h*D;i=k6>>>13,k6&=8191,k6+=x*w+b*z+r*G+d*H+X0*Z,i+=k6>>>13,k6&=8191,i=(i<<2)+i|0,i=i+K0|0,K0=i&8191,i=i>>>13,D0+=i,Y[0]=K0,Y[1]=D0,Y[2]=U0,Y[3]=B0,Y[4]=g0,Y[5]=$4,Y[6]=T1,Y[7]=h$,Y[8]=j6,Y[9]=k6}finalize(){let{h:$,pad:J}=this,W=new Uint16Array(10),X=$[1]>>>13;$[1]&=8191;for(let Z=2;Z<10;Z++)$[Z]+=X,X=$[Z]>>>13,$[Z]&=8191;$[0]+=X*5,X=$[0]>>>13,$[0]&=8191,$[1]+=X,X=$[1]>>>13,$[1]&=8191,$[2]+=X,W[0]=$[0]+5,X=W[0]>>>13,W[0]&=8191;for(let Z=1;Z<10;Z++)W[Z]=$[Z]+X,X=W[Z]>>>13,W[Z]&=8191;W[9]-=8192;let Y=(X^1)-1;for(let Z=0;Z<10;Z++)W[Z]&=Y;Y=~Y;for(let Z=0;Z<10;Z++)$[Z]=$[Z]&Y|W[Z];$[0]=($[0]|$[1]<<13)&65535,$[1]=($[1]>>>3|$[2]<<10)&65535,$[2]=($[2]>>>6|$[3]<<7)&65535,$[3]=($[3]>>>9|$[4]<<4)&65535,$[4]=($[4]>>>12|$[5]<<1|$[6]<<14)&65535,$[5]=($[6]>>>2|$[7]<<11)&65535,$[6]=($[7]>>>5|$[8]<<8)&65535,$[7]=($[8]>>>8|$[9]<<5)&65535;let U=$[0]+J[0];$[0]=U&65535;for(let Z=1;Z<8;Z++)U=($[Z]+J[Z]|0)+(U>>>16)|0,$[Z]=U&65535;g5(W)}update($){$I(this),X4($),$=NX($);let{buffer:J,blockLen:W}=this,X=$.length;for(let Y=0;Y<X;){let U=Math.min(W-this.pos,X-Y);if(U===W){for(;W<=X-Y;Y+=W)this.process($,Y);continue}if(J.set($.subarray(Y,Y+U),this.pos),this.pos+=U,Y+=U,this.pos===W)this.process(J,0,!1),this.pos=0}return this}destroy(){g5(this.h,this.r,this.buffer,this.pad)}digestInto($){$I(this),tT($,this),this.finished=!0;let{buffer:J,h:W}=this,{pos:X}=this;if(X){J[X++]=1;for(;X<16;X++)J[X]=0;this.process(J,0,!0)}this.finalize();let Y=0;for(let U=0;U<8;U++)$[Y++]=W[U]>>>0,$[Y++]=W[U]>>>8;return $}digest(){let{buffer:$,outputLen:J}=this;this.digestInto($);let W=$.slice(0,J);return this.destroy(),W}}function y00($){let J=(X,Y)=>$(Y).update(X).digest(),W=$(new Uint8Array(32));return J.outputLen=W.outputLen,J.blockLen=W.blockLen,J.create=(X)=>$(X),J}var Gq=(()=>y00(($)=>new Hq($)))();function Dq($,J,W,X,Y,U=20){let Z=$[0],H=$[1],G=$[2],z=$[3],w=J[0],D=J[1],K=J[2],O=J[3],F=J[4],M=J[5],A=J[6],I=J[7],P=Y,Q=W[0],N=W[1],_=W[2],L=Z,R=H,S=G,k=z,T=w,q=D,h=K,x=O,b=F,r=M,d=A,X0=I,i=P,K0=Q,D0=N,U0=_;for(let g0=0;g0<U;g0+=2)L=L+T|0,i=H0(i^L,16),b=b+i|0,T=H0(T^b,12),L=L+T|0,i=H0(i^L,8),b=b+i|0,T=H0(T^b,7),R=R+q|0,K0=H0(K0^R,16),r=r+K0|0,q=H0(q^r,12),R=R+q|0,K0=H0(K0^R,8),r=r+K0|0,q=H0(q^r,7),S=S+h|0,D0=H0(D0^S,16),d=d+D0|0,h=H0(h^d,12),S=S+h|0,D0=H0(D0^S,8),d=d+D0|0,h=H0(h^d,7),k=k+x|0,U0=H0(U0^k,16),X0=X0+U0|0,x=H0(x^X0,12),k=k+x|0,U0=H0(U0^k,8),X0=X0+U0|0,x=H0(x^X0,7),L=L+q|0,U0=H0(U0^L,16),d=d+U0|0,q=H0(q^d,12),L=L+q|0,U0=H0(U0^L,8),d=d+U0|0,q=H0(q^d,7),R=R+h|0,i=H0(i^R,16),X0=X0+i|0,h=H0(h^X0,12),R=R+h|0,i=H0(i^R,8),X0=X0+i|0,h=H0(h^X0,7),S=S+x|0,K0=H0(K0^S,16),b=b+K0|0,x=H0(x^b,12),S=S+x|0,K0=H0(K0^S,8),b=b+K0|0,x=H0(x^b,7),k=k+T|0,D0=H0(D0^k,16),r=r+D0|0,T=H0(T^r,12),k=k+T|0,D0=H0(D0^k,8),r=r+D0|0,T=H0(T^r,7);let B0=0;X[B0++]=Z+L|0,X[B0++]=H+R|0,X[B0++]=G+S|0,X[B0++]=z+k|0,X[B0++]=w+T|0,X[B0++]=D+q|0,X[B0++]=K+h|0,X[B0++]=O+x|0,X[B0++]=F+b|0,X[B0++]=M+r|0,X[B0++]=A+d|0,X[B0++]=I+X0|0,X[B0++]=P+i|0,X[B0++]=Q+K0|0,X[B0++]=N+D0|0,X[B0++]=_+U0|0}function c00($,J,W,X){let Y=$[0],U=$[1],Z=$[2],H=$[3],G=J[0],z=J[1],w=J[2],D=J[3],K=J[4],O=J[5],F=J[6],M=J[7],A=W[0],I=W[1],P=W[2],Q=W[3];for(let _=0;_<20;_+=2)Y=Y+G|0,A=H0(A^Y,16),K=K+A|0,G=H0(G^K,12),Y=Y+G|0,A=H0(A^Y,8),K=K+A|0,G=H0(G^K,7),U=U+z|0,I=H0(I^U,16),O=O+I|0,z=H0(z^O,12),U=U+z|0,I=H0(I^U,8),O=O+I|0,z=H0(z^O,7),Z=Z+w|0,P=H0(P^Z,16),F=F+P|0,w=H0(w^F,12),Z=Z+w|0,P=H0(P^Z,8),F=F+P|0,w=H0(w^F,7),H=H+D|0,Q=H0(Q^H,16),M=M+Q|0,D=H0(D^M,12),H=H+D|0,Q=H0(Q^H,8),M=M+Q|0,D=H0(D^M,7),Y=Y+z|0,Q=H0(Q^Y,16),F=F+Q|0,z=H0(z^F,12),Y=Y+z|0,Q=H0(Q^Y,8),F=F+Q|0,z=H0(z^F,7),U=U+w|0,A=H0(A^U,16),M=M+A|0,w=H0(w^M,12),U=U+w|0,A=H0(A^U,8),M=M+A|0,w=H0(w^M,7),Z=Z+D|0,I=H0(I^Z,16),K=K+I|0,D=H0(D^K,12),Z=Z+D|0,I=H0(I^Z,8),K=K+I|0,D=H0(D^K,7),H=H+G|0,P=H0(P^H,16),O=O+P|0,G=H0(G^O,12),H=H+G|0,P=H0(P^H,8),O=O+P|0,G=H0(G^O,7);let N=0;X[N++]=Y,X[N++]=U,X[N++]=Z,X[N++]=H,X[N++]=A,X[N++]=I,X[N++]=P,X[N++]=Q}var u00=ZI(Dq,{counterRight:!1,counterLength:4,allowShortKeys:!1}),p00=ZI(Dq,{counterRight:!1,counterLength:8,extendNonceFn:c00,allowShortKeys:!1});var d00=new Uint8Array(16),zq=($,J)=>{$.update(J);let W=J.length%16;if(W)$.update(d00.subarray(W))},l00=new Uint8Array(32);function wq($,J,W,X,Y){if(Y!==void 0)X4(Y,void 0,"AAD");let U=$(J,W,l00),Z=Wq(X.length,Y?Y.length:0,!0),H=Gq.create(U);if(Y)zq(H,Y);zq(H,X),H.update(Z);let G=H.digest();return g5(U,Z),G}var Kq=($)=>(J,W,X)=>{return{encrypt(U,Z){let H=U.length;Z=XI(H+16,Z,!1),Z.set(U);let G=Z.subarray(0,-16);$(J,W,G,G,1);let z=wq($,J,W,G,X);return Z.set(z,H),g5(z),Z},decrypt(U,Z){Z=XI(U.length-16,Z,!1);let H=U.subarray(0,-16),G=U.subarray(-16),z=wq($,J,W,H,X);if(!Jq(G,z))throw Error("invalid tag");return Z.set(U.subarray(0,-16)),$(J,W,Z,Z,1),g5(z),Z}}},QI0=WI({blockSize:64,nonceLength:12,tagLength:16},Kq(u00)),HI=WI({blockSize:64,nonceLength:24,tagLength:16},Kq(p00));/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function r00($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function w6($,J=""){if(!Number.isSafeInteger($)||$<0){let W=J&&`"${J}" `;throw Error(`${W}expected integer >= 0, got ${$}`)}}function j7($,J,W=""){let X=r00($),Y=$?.length,U=J!==void 0;if(!X||U&&Y!==J){let Z=W&&`"${W}" `,H=U?` of length ${J}`:"",G=X?`length=${Y}`:`type=${typeof $}`;throw Error(Z+"expected Uint8Array"+H+", got "+G)}return $}function _z($){if(typeof $!=="function"||typeof $.create!=="function")throw Error("Hash must wrapped by utils.createHasher");w6($.outputLen),w6($.blockLen)}function BX($,J=!0){if($.destroyed)throw Error("Hash instance has been destroyed");if(J&&$.finished)throw Error("Hash#digest() has already been called")}function Fq($,J){j7($,void 0,"digestInto() output");let W=J.outputLen;if($.length<W)throw Error('"digestInto() output" expected to be of length >='+W)}function Nz($){return new Uint32Array($.buffer,$.byteOffset,Math.floor($.byteLength/4))}function D6(...$){for(let J=0;J<$.length;J++)$[J].fill(0)}function RX($){return new DataView($.buffer,$.byteOffset,$.byteLength)}function H8($,J){return $<<32-J|$>>>J}function o0($,J){return $<<J|$>>>32-J>>>0}var n00=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();function i00($){return $<<24&4278190080|$<<8&16711680|$>>>8&65280|$>>>24&255}function t00($){for(let J=0;J<$.length;J++)$[J]=i00($[J]);return $}var GI=n00?($)=>$:t00,a00=(()=>typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function")();var f5={_0:48,_9:57,A:65,F:70,a:97,f:102};function Oq($){if($>=f5._0&&$<=f5._9)return $-f5._0;if($>=f5.A&&$<=f5.F)return $-(f5.A-10);if($>=f5.a&&$<=f5.f)return $-(f5.a-10);return}function Eq($){if(typeof $!=="string")throw Error("hex string expected, got "+typeof $);if(a00)return Uint8Array.fromHex($);let J=$.length,W=J/2;if(J%2)throw Error("hex string expected, got unpadded hex of length "+J);let X=new Uint8Array(W);for(let Y=0,U=0;Y<W;Y++,U+=2){let Z=Oq($.charCodeAt(U)),H=Oq($.charCodeAt(U+1));if(Z===void 0||H===void 0){let G=$[U]+$[U+1];throw Error('hex string expected, got non-hex character "'+G+'" at index '+U)}X[Y]=Z*16+H}return X}var o00=async()=>{};async function Bz($,J,W){let X=Date.now();for(let Y=0;Y<$;Y++){W(Y);let U=Date.now()-X;if(U>=0&&U<J)continue;await o00(),X+=U}}function s00($){if(typeof $!=="string")throw Error("string expected");return new Uint8Array(new TextEncoder().encode($))}function zI($,J=""){if(typeof $==="string")return s00($);return j7($,void 0,J)}function Rz($,J){if(J!==void 0&&{}.toString.call(J)!=="[object Object]")throw Error("options must be object or undefined");return Object.assign($,J)}function Mq($,J={}){let W=(Y,U)=>$(U).update(Y).digest(),X=$(void 0);return W.outputLen=X.outputLen,W.blockLen=X.blockLen,W.create=(Y)=>$(Y),Object.assign(W,J),Object.freeze(W)}var Vq=($)=>({oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,$])});class wI{oHash;iHash;blockLen;outputLen;finished=!1;destroyed=!1;constructor($,J){if(_z($),j7(J,void 0,"key"),this.iHash=$.create(),typeof this.iHash.update!=="function")throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let W=this.blockLen,X=new Uint8Array(W);X.set(J.length>W?$.create().update(J).digest():J);for(let Y=0;Y<X.length;Y++)X[Y]^=54;this.iHash.update(X),this.oHash=$.create();for(let Y=0;Y<X.length;Y++)X[Y]^=106;this.oHash.update(X),D6(X)}update($){return BX(this),this.iHash.update($),this}digestInto($){BX(this),j7($,this.outputLen,"output"),this.finished=!0,this.iHash.digestInto($),this.oHash.update($),this.oHash.digestInto($),this.destroy()}digest(){let $=new Uint8Array(this.oHash.outputLen);return this.digestInto($),$}_cloneInto($){$||=Object.create(Object.getPrototypeOf(this),{});let{oHash:J,iHash:W,finished:X,destroyed:Y,blockLen:U,outputLen:Z}=this;return $=$,$.finished=X,$.destroyed=Y,$.blockLen=U,$.outputLen=Z,$.oHash=J._cloneInto($.oHash),$.iHash=W._cloneInto($.iHash),$}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}var DI=($,J,W)=>new wI($,J).update(W).digest();DI.create=($,J)=>new wI($,J);function e00($,J,W,X){_z($);let Y=Rz({dkLen:32,asyncTick:10},X),{c:U,dkLen:Z,asyncTick:H}=Y;if(w6(U,"c"),w6(Z,"dkLen"),w6(H,"asyncTick"),U<1)throw Error("iterations (c) must be >= 1");let G=zI(J,"password"),z=zI(W,"salt"),w=new Uint8Array(Z),D=DI.create($,G),K=D._cloneInto().update(z);return{c:U,dkLen:Z,asyncTick:H,DK:w,PRF:D,PRFSalt:K}}function $10($,J,W,X,Y){if($.destroy(),J.destroy(),X)X.destroy();return D6(Y),W}function KI($,J,W,X){let{c:Y,dkLen:U,DK:Z,PRF:H,PRFSalt:G}=e00($,J,W,X),z,w=new Uint8Array(4),D=RX(w),K=new Uint8Array(H.outputLen);for(let O=1,F=0;F<U;O++,F+=H.outputLen){let M=Z.subarray(F,F+H.outputLen);D.setInt32(0,O,!1),(z=G._cloneInto(z)).update(w).digestInto(K),M.set(K.subarray(0,M.length));for(let A=1;A<Y;A++){H._cloneInto(z).update(K).digestInto(K);for(let I=0;I<M.length;I++)M[I]^=K[I]}}return $10(H,G,Z,z,K)}function Qq($,J,W){return $&J^~$&W}function Aq($,J,W){return $&J^$&W^J&W}class Sz{blockLen;outputLen;padOffset;isLE;buffer;view;finished=!1;length=0;pos=0;destroyed=!1;constructor($,J,W,X){this.blockLen=$,this.outputLen=J,this.padOffset=W,this.isLE=X,this.buffer=new Uint8Array($),this.view=RX(this.buffer)}update($){BX(this),j7($);let{view:J,buffer:W,blockLen:X}=this,Y=$.length;for(let U=0;U<Y;){let Z=Math.min(X-this.pos,Y-U);if(Z===X){let H=RX($);for(;X<=Y-U;U+=X)this.process(H,U);continue}if(W.set($.subarray(U,U+Z),this.pos),this.pos+=Z,U+=Z,this.pos===X)this.process(J,0),this.pos=0}return this.length+=$.length,this.roundClean(),this}digestInto($){BX(this),Fq($,this),this.finished=!0;let{buffer:J,view:W,blockLen:X,isLE:Y}=this,{pos:U}=this;if(J[U++]=128,D6(this.buffer.subarray(U)),this.padOffset>X-U)this.process(W,0),U=0;for(let w=U;w<X;w++)J[w]=0;W.setBigUint64(X-8,BigInt(this.length*8),Y),this.process(W,0);let Z=RX($),H=this.outputLen;if(H%4)throw Error("_sha2: outputLen must be aligned to 32bit");let G=H/4,z=this.get();if(G>z.length)throw Error("_sha2: outputLen bigger than state");for(let w=0;w<G;w++)Z.setUint32(4*w,z[w],Y)}digest(){let{buffer:$,outputLen:J}=this;this.digestInto($);let W=$.slice(0,J);return this.destroy(),W}_cloneInto($){$||=new this.constructor,$.set(...this.get());let{blockLen:J,buffer:W,length:X,finished:Y,destroyed:U,pos:Z}=this;if($.destroyed=U,$.finished=Y,$.length=X,$.pos=Z,X%J)$.buffer.set(W);return $}clone(){return this._cloneInto()}}var m5=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),y5=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),p4=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),d4=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]);var jz=BigInt(4294967295),Iq=BigInt(32);function J10($,J=!1){if(J)return{h:Number($&jz),l:Number($>>Iq&jz)};return{h:Number($>>Iq&jz)|0,l:Number($&jz)|0}}function Lq($,J=!1){let W=$.length,X=new Uint32Array(W),Y=new Uint32Array(W);for(let U=0;U<W;U++){let{h:Z,l:H}=J10($[U],J);[X[U],Y[U]]=[Z,H]}return[X,Y]}var OI=($,J,W)=>$>>>W,FI=($,J,W)=>$<<32-W|J>>>W,k7=($,J,W)=>$>>>W|J<<32-W,v7=($,J,W)=>$<<32-W|J>>>W,iU=($,J,W)=>$<<64-W|J>>>W-32,tU=($,J,W)=>$>>>W-32|J<<64-W;function e8($,J,W,X){let Y=(J>>>0)+(X>>>0);return{h:$+W+(Y/4294967296|0)|0,l:Y|0}}var Pq=($,J,W)=>($>>>0)+(J>>>0)+(W>>>0),_q=($,J,W,X)=>J+W+X+($/4294967296|0)|0,Nq=($,J,W,X)=>($>>>0)+(J>>>0)+(W>>>0)+(X>>>0),Bq=($,J,W,X,Y)=>J+W+X+Y+($/4294967296|0)|0,Rq=($,J,W,X,Y)=>($>>>0)+(J>>>0)+(W>>>0)+(X>>>0)+(Y>>>0),Sq=($,J,W,X,Y,U)=>J+W+X+Y+U+($/4294967296|0)|0;var X10=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),i9=new Uint32Array(64);class EI extends Sz{constructor($){super(64,$,8,!1)}get(){let{A:$,B:J,C:W,D:X,E:Y,F:U,G:Z,H}=this;return[$,J,W,X,Y,U,Z,H]}set($,J,W,X,Y,U,Z,H){this.A=$|0,this.B=J|0,this.C=W|0,this.D=X|0,this.E=Y|0,this.F=U|0,this.G=Z|0,this.H=H|0}process($,J){for(let w=0;w<16;w++,J+=4)i9[w]=$.getUint32(J,!1);for(let w=16;w<64;w++){let D=i9[w-15],K=i9[w-2],O=H8(D,7)^H8(D,18)^D>>>3,F=H8(K,17)^H8(K,19)^K>>>10;i9[w]=F+i9[w-7]+O+i9[w-16]|0}let{A:W,B:X,C:Y,D:U,E:Z,F:H,G,H:z}=this;for(let w=0;w<64;w++){let D=H8(Z,6)^H8(Z,11)^H8(Z,25),K=z+D+Qq(Z,H,G)+X10[w]+i9[w]|0,F=(H8(W,2)^H8(W,13)^H8(W,22))+Aq(W,X,Y)|0;z=G,G=H,H=Z,Z=U+K|0,U=Y,Y=X,X=W,W=K+F|0}W=W+this.A|0,X=X+this.B|0,Y=Y+this.C|0,U=U+this.D|0,Z=Z+this.E|0,H=H+this.F|0,G=G+this.G|0,z=z+this.H|0,this.set(W,X,Y,U,Z,H,G,z)}roundClean(){D6(i9)}destroy(){this.set(0,0,0,0,0,0,0,0),D6(this.buffer)}}class jq extends EI{A=m5[0]|0;B=m5[1]|0;C=m5[2]|0;D=m5[3]|0;E=m5[4]|0;F=m5[5]|0;G=m5[6]|0;H=m5[7]|0;constructor(){super(32)}}class Y10 extends EI{A=y5[0]|0;B=y5[1]|0;C=y5[2]|0;D=y5[3]|0;E=y5[4]|0;F=y5[5]|0;G=y5[6]|0;H=y5[7]|0;constructor(){super(28)}}var kq=(()=>Lq(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(($)=>BigInt($))))(),U10=(()=>kq[0])(),Z10=(()=>kq[1])(),t9=new Uint32Array(80),a9=new Uint32Array(80);class aU extends Sz{constructor($){super(128,$,16,!1)}get(){let{Ah:$,Al:J,Bh:W,Bl:X,Ch:Y,Cl:U,Dh:Z,Dl:H,Eh:G,El:z,Fh:w,Fl:D,Gh:K,Gl:O,Hh:F,Hl:M}=this;return[$,J,W,X,Y,U,Z,H,G,z,w,D,K,O,F,M]}set($,J,W,X,Y,U,Z,H,G,z,w,D,K,O,F,M){this.Ah=$|0,this.Al=J|0,this.Bh=W|0,this.Bl=X|0,this.Ch=Y|0,this.Cl=U|0,this.Dh=Z|0,this.Dl=H|0,this.Eh=G|0,this.El=z|0,this.Fh=w|0,this.Fl=D|0,this.Gh=K|0,this.Gl=O|0,this.Hh=F|0,this.Hl=M|0}process($,J){for(let P=0;P<16;P++,J+=4)t9[P]=$.getUint32(J),a9[P]=$.getUint32(J+=4);for(let P=16;P<80;P++){let Q=t9[P-15]|0,N=a9[P-15]|0,_=k7(Q,N,1)^k7(Q,N,8)^OI(Q,N,7),L=v7(Q,N,1)^v7(Q,N,8)^FI(Q,N,7),R=t9[P-2]|0,S=a9[P-2]|0,k=k7(R,S,19)^iU(R,S,61)^OI(R,S,6),T=v7(R,S,19)^tU(R,S,61)^FI(R,S,6),q=Nq(L,T,a9[P-7],a9[P-16]),h=Bq(q,_,k,t9[P-7],t9[P-16]);t9[P]=h|0,a9[P]=q|0}let{Ah:W,Al:X,Bh:Y,Bl:U,Ch:Z,Cl:H,Dh:G,Dl:z,Eh:w,El:D,Fh:K,Fl:O,Gh:F,Gl:M,Hh:A,Hl:I}=this;for(let P=0;P<80;P++){let Q=k7(w,D,14)^k7(w,D,18)^iU(w,D,41),N=v7(w,D,14)^v7(w,D,18)^tU(w,D,41),_=w&K^~w&F,L=D&O^~D&M,R=Rq(I,N,L,Z10[P],a9[P]),S=Sq(R,A,Q,_,U10[P],t9[P]),k=R|0,T=k7(W,X,28)^iU(W,X,34)^iU(W,X,39),q=v7(W,X,28)^tU(W,X,34)^tU(W,X,39),h=W&Y^W&Z^Y&Z,x=X&U^X&H^U&H;A=F|0,I=M|0,F=K|0,M=O|0,K=w|0,O=D|0,{h:w,l:D}=e8(G|0,z|0,S|0,k|0),G=Z|0,z=H|0,Z=Y|0,H=U|0,Y=W|0,U=X|0;let b=Pq(k,q,x);W=_q(b,S,T,h),X=b|0}({h:W,l:X}=e8(this.Ah|0,this.Al|0,W|0,X|0)),{h:Y,l:U}=e8(this.Bh|0,this.Bl|0,Y|0,U|0),{h:Z,l:H}=e8(this.Ch|0,this.Cl|0,Z|0,H|0),{h:G,l:z}=e8(this.Dh|0,this.Dl|0,G|0,z|0),{h:w,l:D}=e8(this.Eh|0,this.El|0,w|0,D|0),{h:K,l:O}=e8(this.Fh|0,this.Fl|0,K|0,O|0),{h:F,l:M}=e8(this.Gh|0,this.Gl|0,F|0,M|0),{h:A,l:I}=e8(this.Hh|0,this.Hl|0,A|0,I|0),this.set(W,X,Y,U,Z,H,G,z,w,D,K,O,F,M,A,I)}roundClean(){D6(t9,a9)}destroy(){D6(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class H10 extends aU{Ah=d4[0]|0;Al=d4[1]|0;Bh=d4[2]|0;Bl=d4[3]|0;Ch=d4[4]|0;Cl=d4[5]|0;Dh=d4[6]|0;Dl=d4[7]|0;Eh=d4[8]|0;El=d4[9]|0;Fh=d4[10]|0;Fl=d4[11]|0;Gh=d4[12]|0;Gl=d4[13]|0;Hh=d4[14]|0;Hl=d4[15]|0;constructor(){super(64)}}class G10 extends aU{Ah=p4[0]|0;Al=p4[1]|0;Bh=p4[2]|0;Bl=p4[3]|0;Ch=p4[4]|0;Cl=p4[5]|0;Dh=p4[6]|0;Dl=p4[7]|0;Eh=p4[8]|0;El=p4[9]|0;Fh=p4[10]|0;Fl=p4[11]|0;Gh=p4[12]|0;Gl=p4[13]|0;Hh=p4[14]|0;Hl=p4[15]|0;constructor(){super(48)}}var X$=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),Y$=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class z10 extends aU{Ah=X$[0]|0;Al=X$[1]|0;Bh=X$[2]|0;Bl=X$[3]|0;Ch=X$[4]|0;Cl=X$[5]|0;Dh=X$[6]|0;Dl=X$[7]|0;Eh=X$[8]|0;El=X$[9]|0;Fh=X$[10]|0;Fl=X$[11]|0;Gh=X$[12]|0;Gl=X$[13]|0;Hh=X$[14]|0;Hl=X$[15]|0;constructor(){super(28)}}class w10 extends aU{Ah=Y$[0]|0;Al=Y$[1]|0;Bh=Y$[2]|0;Bl=Y$[3]|0;Ch=Y$[4]|0;Cl=Y$[5]|0;Dh=Y$[6]|0;Dl=Y$[7]|0;Eh=Y$[8]|0;El=Y$[9]|0;Fh=Y$[10]|0;Fl=Y$[11]|0;Gh=Y$[12]|0;Gl=Y$[13]|0;Hh=Y$[14]|0;Hl=Y$[15]|0;constructor(){super(32)}}var MI=Mq(()=>new jq,Vq(1));function vq($,J,W,X,Y,U){let Z=$[J++]^W[X++],H=$[J++]^W[X++],G=$[J++]^W[X++],z=$[J++]^W[X++],w=$[J++]^W[X++],D=$[J++]^W[X++],K=$[J++]^W[X++],O=$[J++]^W[X++],F=$[J++]^W[X++],M=$[J++]^W[X++],A=$[J++]^W[X++],I=$[J++]^W[X++],P=$[J++]^W[X++],Q=$[J++]^W[X++],N=$[J++]^W[X++],_=$[J++]^W[X++],L=Z,R=H,S=G,k=z,T=w,q=D,h=K,x=O,b=F,r=M,d=A,X0=I,i=P,K0=Q,D0=N,U0=_;for(let B0=0;B0<8;B0+=2)T^=o0(L+i|0,7),b^=o0(T+L|0,9),i^=o0(b+T|0,13),L^=o0(i+b|0,18),r^=o0(q+R|0,7),K0^=o0(r+q|0,9),R^=o0(K0+r|0,13),q^=o0(R+K0|0,18),D0^=o0(d+h|0,7),S^=o0(D0+d|0,9),h^=o0(S+D0|0,13),d^=o0(h+S|0,18),k^=o0(U0+X0|0,7),x^=o0(k+U0|0,9),X0^=o0(x+k|0,13),U0^=o0(X0+x|0,18),R^=o0(L+k|0,7),S^=o0(R+L|0,9),k^=o0(S+R|0,13),L^=o0(k+S|0,18),h^=o0(q+T|0,7),x^=o0(h+q|0,9),T^=o0(x+h|0,13),q^=o0(T+x|0,18),X0^=o0(d+r|0,7),b^=o0(X0+d|0,9),r^=o0(b+X0|0,13),d^=o0(r+b|0,18),i^=o0(U0+D0|0,7),K0^=o0(i+U0|0,9),D0^=o0(K0+i|0,13),U0^=o0(D0+K0|0,18);Y[U++]=Z+L|0,Y[U++]=H+R|0,Y[U++]=G+S|0,Y[U++]=z+k|0,Y[U++]=w+T|0,Y[U++]=D+q|0,Y[U++]=K+h|0,Y[U++]=O+x|0,Y[U++]=F+b|0,Y[U++]=M+r|0,Y[U++]=A+d|0,Y[U++]=I+X0|0,Y[U++]=P+i|0,Y[U++]=Q+K0|0,Y[U++]=N+D0|0,Y[U++]=_+U0|0}function VI($,J,W,X,Y){let U=X+0,Z=X+16*Y;for(let H=0;H<16;H++)W[Z+H]=$[J+(2*Y-1)*16+H];for(let H=0;H<Y;H++,U+=16,J+=16){if(vq(W,Z,$,J,W,U),H>0)Z+=16;vq(W,U,$,J+=16,W,Z)}}function D10($,J,W){let X=Rz({dkLen:32,asyncTick:10,maxmem:1073742848},W),{N:Y,r:U,p:Z,dkLen:H,asyncTick:G,maxmem:z,onProgress:w}=X;if(w6(Y,"N"),w6(U,"r"),w6(Z,"p"),w6(H,"dkLen"),w6(G,"asyncTick"),w6(z,"maxmem"),w!==void 0&&typeof w!=="function")throw Error("progressCb must be a function");let D=128*U,K=D/4,O=Math.pow(2,32);if(Y<=1||(Y&Y-1)!==0||Y>O)throw Error('"N" expected a power of 2, and 2^1 <= N <= 2^32');if(Z<1||Z>(O-1)*32/D)throw Error('"p" expected integer 1..((2^32 - 1) * 32) / (128 * r)');if(H<1||H>(O-1)*32)throw Error('"dkLen" expected integer 1..(2^32 - 1) * 32');if(D*(Y+Z)>z)throw Error('"maxmem" limit was hit, expected 128*r*(N+p) <= "maxmem"='+z);let M=KI(MI,$,J,{c:1,dkLen:D*Z}),A=Nz(M),I=Nz(new Uint8Array(D*Y)),P=Nz(new Uint8Array(D)),Q=()=>{};if(w){let N=2*Y*Z,_=Math.max(Math.floor(N/1e4),1),L=0;Q=()=>{if(L++,w&&(!(L%_)||L===N))w(L/N)}}return{N:Y,r:U,p:Z,dkLen:H,blockSize32:K,V:I,B32:A,B:M,tmp:P,blockMixCb:Q,asyncTick:G}}function K10($,J,W,X,Y){let U=KI(MI,$,W,{c:1,dkLen:J});return D6(W,X,Y),U}async function Cq($,J,W){let{N:X,r:Y,p:U,dkLen:Z,blockSize32:H,V:G,B32:z,B:w,tmp:D,blockMixCb:K,asyncTick:O}=D10($,J,W);GI(z);for(let F=0;F<U;F++){let M=H*F;for(let I=0;I<H;I++)G[I]=z[M+I];let A=0;await Bz(X-1,O,()=>{VI(G,A,G,A+=H,Y),K()}),VI(G,(X-1)*H,z,M,Y),K(),await Bz(X,O,()=>{let I=(z[M+H-16]&X-1)>>>0;for(let P=0;P<H;P++)D[P]=z[M+P]^G[I*H+P];VI(D,0,z,M,Y),K()})}return GI(z),K10($,Z,w,G,D)}var oU=_X("a-z","0-9","A-Z","-_");var kz=a0({id:a(),createdAt:d9().default(()=>new Date),updatedAt:d9().default(()=>new Date)}),gI0=kz.extend({email:a().transform(($)=>$.toLowerCase()),emailVerified:f6().default(!1),name:a(),image:a().nullish()}),fI0=kz.extend({providerId:a(),accountId:a(),userId:Z8.string(),accessToken:a().nullish(),refreshToken:a().nullish(),idToken:a().nullish(),accessTokenExpiresAt:d9().nullish(),refreshTokenExpiresAt:d9().nullish(),scope:a().nullish(),password:a().nullish()}),mI0=kz.extend({userId:Z8.string(),expiresAt:d9(),token:a(),ipAddress:a().nullish(),userAgent:a().nullish()}),yI0=kz.extend({value:a(),expiresAt:d9(),identifier:a()}),cI0=a0({key:a(),count:p9(),lastRequest:p9()});function E_($){if($===null||typeof $!=="object")return!1;let J=Object.getPrototypeOf($);if(J!==null&&J!==Object.prototype&&Object.getPrototypeOf(J)!==null)return!1;if(Symbol.iterator in $)return!1;if(Symbol.toStringTag in $)return Object.prototype.toString.call($)==="[object Module]";return!0}function M_($,J,W=".",X){if(!E_(J))return M_($,{},W,X);let Y=Object.assign({},J);for(let U in $){if(U==="__proto__"||U==="constructor")continue;let Z=$[U];if(Z===null||Z===void 0)continue;if(X&&X(Y,U,Z,W))continue;if(Array.isArray(Z)&&Array.isArray(Y[U]))Y[U]=[...Z,...Y[U]];else if(E_(Z)&&E_(Y[U]))Y[U]=M_(Z,Y[U],(W?`${W}.`:"")+U.toString(),X);else Y[U]=Z}return Y}function uZ($){return(...J)=>J.reduce((W,X)=>M_(W,X,"",$),{})}var Xb=uZ(),Kp0=uZ(($,J,W)=>{if($[J]!==void 0&&typeof W==="function")return $[J]=W($[J]),!0}),Op0=uZ(($,J,W)=>{if(Array.isArray($[J])&&typeof W==="function")return $[J]=W($[J]),!0});async function Yb($,J,W=3600){return await new aG($).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime(Math.floor(Date.now()/1000)+W).sign(new TextEncoder().encode(J))}function A40($,J){let W=new Uint8Array($),X=new Uint8Array(J),Y=W.length^X.length,U=Math.max(W.length,X.length);for(let Z=0;Z<U;Z++)Y|=(Z<W.length?W[Z]:0)^(Z<X.length?X[Z]:0);return Y===0}var OY={N:16384,r:16,p:1,dkLen:64};async function Ub($,J){return await Cq($.normalize("NFKC"),J,{N:OY.N,p:OY.p,r:OY.r,dkLen:OY.dkLen,maxmem:128*OY.N*OY.r*2})}var Zb=async($)=>{let J=PX.encode(crypto.getRandomValues(new Uint8Array(16))),W=await Ub($,J);return`${J}:${PX.encode(W)}`},Hb=async({hash:$,password:J})=>{let[W,X]=$.split(":");if(!W||!X)throw new h0("Invalid password hash");let Y=await Ub(J,W);return A40(Y,Eq(X))},Gb=async({key:$,data:J})=>{let W=await rU("SHA-256").digest($),X=sT(J),Y=YI(HI)(new Uint8Array(W));return JI(Y.encrypt(X))},zb=async({key:$,data:J})=>{let W=await rU("SHA-256").digest($),X=oT(J),Y=YI(HI)(new Uint8Array(W));return new TextDecoder().decode(Y.decrypt(X))};function V_($){if($==="-"||$==="^"||$==="$"||$==="+"||$==="."||$==="("||$===")"||$==="|"||$==="["||$==="]"||$==="{"||$==="}"||$==="*"||$==="?"||$==="\\")return`\\${$}`;else return $}function I40($){let J="";for(let W=0;W<$.length;W++)J+=V_($[W]);return J}function Db($,J=!0){if(Array.isArray($))return`(?:${$.map((w)=>`^${Db(w,J)}$`).join("|")})`;let W="",X="",Y=".";if(J===!0)W="/",X="[/\\\\]",Y="[^/\\\\]";else if(J)if(W=J,X=I40(W),X.length>1)X=`(?:${X})`,Y=`((?!${X}).)`;else Y=`[^${X}]`;let U=J?`${X}+?`:"",Z=J?`${X}*?`:"",H=J?$.split(W):[$],G="";for(let z=0;z<H.length;z++){let w=H[z],D=H[z+1],K="";if(!w&&z>0)continue;if(J)if(z===H.length-1)K=Z;else if(D!=="**")K=U;else K="";if(J&&w==="**"){if(K)G+=z===0?"":K,G+=`(?:${Y}*?${K})*?`;continue}for(let O=0;O<w.length;O++){let F=w[O];if(F==="\\"){if(O<w.length-1)G+=V_(w[O+1]),O++}else if(F==="?")G+=Y;else if(F==="*")G+=`${Y}*?`;else G+=V_(F)}G+=K}return G}function L40($,J){if(typeof J!=="string")throw TypeError(`Sample must be a string, but ${typeof J} given`);return $.test(J)}function FY($,J){if(typeof $!=="string"&&!Array.isArray($))throw TypeError(`The first argument must be a single pattern string or an array of patterns, but ${typeof $} given`);if(typeof J==="string"||typeof J==="boolean")J={separator:J};if(arguments.length===2&&!(typeof J>"u"||typeof J==="object"&&J!==null&&!Array.isArray(J)))throw TypeError(`The second argument must be an options object or a string/boolean separator, but ${typeof J} given`);if(J=J||{},J.separator==="\\")throw Error("\\ is not a valid separator because it is used for escaping. Try setting the separator to `true` instead");let W=Db($,J.separator),X=new RegExp(`^${W}$`,J.flags),Y=L40.bind(null,X);return Y.options=J,Y.pattern=$,Y.regexp=X,Y}var Kb=q5(async($)=>{if($.request?.method!=="POST"||!$.request)return;let{body:J,query:W,context:X}=$,Y=$.headers?.get("origin")||$.headers?.get("referer")||"",U=J?.callbackURL||W?.callbackURL,Z=J?.redirectTo,H=J?.errorCallbackURL,G=J?.newUserCallbackURL,z=Array.isArray(X.options.trustedOrigins)?X.trustedOrigins:[...X.trustedOrigins,...await X.options.trustedOrigins?.($.request)||[]],w=$.headers?.has("cookie"),D=(O,F)=>{if(O.startsWith("/"))return!1;if(F.includes("*")){if(F.includes("://"))return FY(F)(r9(O)||O);return FY(F)(cA(O))}let M=yA(O);return M==="http:"||M==="https:"||!M?F===r9(O):O.startsWith(F)},K=(O,F)=>{if(!O)return;if(!z.some((A)=>D(O,A)||O?.startsWith("/")&&F!=="origin"&&/^\/(?!\/|\\|%2f|%5c)[\w\-.\+/@]*(?:\?[\w\-.\+/=&%@]*)?$/.test(O)))throw $.context.logger.error(`Invalid ${F}: ${O}`),$.context.logger.info(`If it's a valid URL, please add ${O} to trustedOrigins in your auth config
`,`Current list of trustedOrigins: ${z}`),new p("FORBIDDEN",{message:`Invalid ${F}`})};if(w&&!$.context.options.advanced?.disableCSRFCheck)K(Y,"origin");U&&K(U,"callbackURL"),Z&&K(Z,"redirectURL"),H&&K(H,"errorCallbackURL"),G&&K(G,"newUserCallbackURL")}),iw=($)=>q5(async(J)=>{if(!J.request)return;let{context:W}=J,X=$(J),Y=Array.isArray(W.options.trustedOrigins)?W.trustedOrigins:[...W.trustedOrigins,...await W.options.trustedOrigins?.(J.request)||[]],U=(G,z)=>{if(G.startsWith("/"))return!1;if(z.includes("*")){if(z.includes("://"))return FY(z)(r9(G)||G);return FY(z)(cA(G))}let w=yA(G);return w==="http:"||w==="https:"||!w?z===r9(G):G.startsWith(z)},Z=(G,z)=>{if(!G)return;if(!Y.some((D)=>U(G,D)||G?.startsWith("/")&&z!=="origin"&&/^\/(?!\/|\\|%2f|%5c)[\w\-.\+/@]*(?:\?[\w\-.\+/=&%@]*)?$/.test(G)))throw J.context.logger.error(`Invalid ${z}: ${G}`),J.context.logger.info(`If it's a valid URL, please add ${G} to trustedOrigins in your auth config
`,`Current list of trustedOrigins: ${Y}`),new p("FORBIDDEN",{message:`Invalid ${z}`})},H=Array.isArray(X)?X:[X];for(let G of H)Z(G,"callbackURL")});async function VJ($,J,W,X=3600){return await Yb({email:J.toLowerCase(),updateTo:W},$,X)}async function Q_($,J){if(!$.context.options.emailVerification?.sendVerificationEmail)throw $.context.logger.error("Verification email isn't enabled."),new p("BAD_REQUEST",{message:"Verification email isn't enabled"});let W=await VJ($.context.secret,J.email,void 0,$.context.options.emailVerification?.expiresIn),X=`${$.context.baseURL}/verify-email?token=${W}&callbackURL=${$.body.callbackURL||"/"}`;await $.context.options.emailVerification.sendVerificationEmail({user:J,url:X,token:W},$.request)}var Ob=l0("/send-verification-email",{method:"POST",body:a0({email:R7().meta({description:"The email to send the verification email to"}),callbackURL:a().meta({description:"The URL to use for email verification callback"}).optional()}),metadata:{openapi:{description:"Send a verification email to the user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{email:{type:"string",description:"The email to send the verification email to",example:"user@example.com"},callbackURL:{type:"string",description:"The URL to use for email verification callback",example:"https://example.com/callback",nullable:!0}},required:["email"]}}}},responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the email was sent successfully",example:!0}}}}}},"400":{description:"Bad Request",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string",description:"Error message",example:"Verification email isn't enabled"}}}}}}}}}},async($)=>{if(!$.context.options.emailVerification?.sendVerificationEmail)throw $.context.logger.error("Verification email isn't enabled."),new p("BAD_REQUEST",{message:"Verification email isn't enabled"});let{email:J}=$.body,W=await m6($);if(!W){let X=await $.context.internalAdapter.findUserByEmail(J);if(!X)return $.json({status:!0});return await Q_($,X.user),$.json({status:!0})}if(W?.user.emailVerified)throw new p("BAD_REQUEST",{message:"You can only send a verification email to an unverified email"});if(W?.user.email!==J)throw new p("BAD_REQUEST",{message:"You can only send a verification email to your own email"});return await Q_($,W.user),$.json({status:!0})}),Fb=l0("/verify-email",{method:"GET",query:a0({token:a().meta({description:"The token to verify the email"}),callbackURL:a().meta({description:"The URL to redirect to after email verification"}).optional()}),use:[iw(($)=>$.query.callbackURL)],metadata:{openapi:{description:"Verify the email of the user",parameters:[{name:"token",in:"query",description:"The token to verify the email",required:!0,schema:{type:"string"}},{name:"callbackURL",in:"query",description:"The URL to redirect to after email verification",required:!1,schema:{type:"string"}}],responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",properties:{id:{type:"string",description:"User ID"},email:{type:"string",description:"User email"},name:{type:"string",description:"User name"},image:{type:"string",description:"User image URL"},emailVerified:{type:"boolean",description:"Indicates if the user email is verified"},createdAt:{type:"string",description:"User creation date"},updatedAt:{type:"string",description:"User update date"}},required:["id","email","name","image","emailVerified","createdAt","updatedAt"]},status:{type:"boolean",description:"Indicates if the email was verified successfully"}},required:["user","status"]}}}}}}}},async($)=>{function J(G){if($.query.callbackURL){if($.query.callbackURL.includes("?"))throw $.redirect(`${$.query.callbackURL}&error=${G}`);throw $.redirect(`${$.query.callbackURL}?error=${G}`)}throw new p("UNAUTHORIZED",{message:G})}let{token:W}=$.query,X;try{X=await M7(W,new TextEncoder().encode($.context.secret),{algorithms:["HS256"]})}catch(G){if(G instanceof oW)return J("token_expired");return J("invalid_token")}let U=a0({email:a().email(),updateTo:a().optional()}).parse(X.payload),Z=await $.context.internalAdapter.findUserByEmail(U.email);if(!Z)return J("user_not_found");if(U.updateTo){let G=await m6($);if(!G){if($.query.callbackURL)throw $.redirect(`${$.query.callbackURL}?error=unauthorized`);return J("unauthorized")}if(G.user.email!==U.email){if($.query.callbackURL)throw $.redirect(`${$.query.callbackURL}?error=unauthorized`);return J("unauthorized")}let z=await $.context.internalAdapter.updateUserByEmail(U.email,{email:U.updateTo,emailVerified:!1},$),w=await VJ($.context.secret,U.updateTo);if(await $.context.options.emailVerification?.sendVerificationEmail?.({user:z,url:`${$.context.baseURL}/verify-email?token=${w}&callbackURL=${$.query.callbackURL||"/"}`,token:w},$.request),await y$($,{session:G.session,user:{...G.user,email:U.updateTo,emailVerified:!1}}),$.query.callbackURL)throw $.redirect($.query.callbackURL);return $.json({status:!0,user:{id:z.id,email:z.email,name:z.name,image:z.image,emailVerified:z.emailVerified,createdAt:z.createdAt,updatedAt:z.updatedAt}})}if($.context.options.emailVerification?.onEmailVerification)await $.context.options.emailVerification.onEmailVerification(Z.user,$.request);let H=await $.context.internalAdapter.updateUserByEmail(U.email,{emailVerified:!0},$);if($.context.options.emailVerification?.afterEmailVerification)await $.context.options.emailVerification.afterEmailVerification(H,$.request);if($.context.options.emailVerification?.autoSignInAfterVerification){let G=await m6($);if(!G||G.user.email!==U.email){let z=await $.context.internalAdapter.createSession(Z.user.id,$);if(!z)throw new p("INTERNAL_SERVER_ERROR",{message:"Failed to create session"});await y$($,{session:z,user:{...Z.user,emailVerified:!0}})}else await y$($,{session:G.session,user:{...G.user,emailVerified:!0}})}if($.query.callbackURL)throw $.redirect($.query.callbackURL);return $.json({status:!0,user:null})}),tw={isAction:!1};async function A_($,J){let W=$.body?.callbackURL||$.context.options.baseURL;if(!W)throw new p("BAD_REQUEST",{message:"callbackURL is required"});let X=oU(128),Y=oU(32),U=$.context.createAuthCookie("state",{maxAge:300000});await $.setSignedCookie(U.name,Y,$.context.secret,U.attributes);let Z=JSON.stringify({callbackURL:W,codeVerifier:X,errorURL:$.body?.errorCallbackURL,newUserURL:$.body?.newUserCallbackURL,link:J,expiresAt:Date.now()+600000,requestSignUp:$.body?.requestSignUp}),H=new Date;H.setMinutes(H.getMinutes()+10);let G=await $.context.internalAdapter.createVerificationValue({value:Z,identifier:Y,expiresAt:H},$);if(!G)throw $.context.logger.error("Unable to create verification. Make sure the database adapter is properly working and there is a verification table in the database"),new p("INTERNAL_SERVER_ERROR",{message:"Unable to create verification"});return{state:G.identifier,codeVerifier:X}}async function Eb($){let J=$.query.state||$.body.state,W=await $.context.internalAdapter.findVerificationValue(J);if(!W){$.context.logger.error("State Mismatch. Verification not found",{state:J});let H=$.context.options.onAPIError?.errorURL||`${$.context.baseURL}/error`;throw $.redirect(`${H}?error=please_restart_the_process`)}let X=a0({callbackURL:a(),codeVerifier:a(),errorURL:a().optional(),newUserURL:a().optional(),expiresAt:p9(),link:a0({email:a(),userId:Z8.string()}).optional(),requestSignUp:f6().optional()}).parse(JSON.parse(W.value));if(!X.errorURL)X.errorURL=`${$.context.baseURL}/error`;let Y=$.context.createAuthCookie("state"),U=await $.getSignedCookie(Y.name,$.context.secret);if(!$.context.oauthConfig?.skipStateCookieCheck&&(!U||U!==J)){let H=$.context.options.onAPIError?.errorURL||`${$.context.baseURL}/error`;throw $.redirect(`${H}?error=state_mismatch`)}if($.setCookie(Y.name,"",{maxAge:0}),X.expiresAt<Date.now()){await $.context.internalAdapter.deleteVerificationValue(W.id);let H=$.context.options.onAPIError?.errorURL||`${$.context.baseURL}/error`;throw $.redirect(`${H}?error=please_restart_the_process`)}return await $.context.internalAdapter.deleteVerificationValue(W.id),X}function P40($,J){if(!$)return $;if(J.options.account?.encryptOAuthTokens)return zb({key:J.secret,data:$});return $}function i$($,J){if(J.options.account?.encryptOAuthTokens&&$)return Gb({key:J.secret,data:$});return $}async function Mb($,{userInfo:J,account:W,callbackURL:X,disableSignUp:Y,overrideUserInfo:U}){let Z=await $.context.internalAdapter.findOAuthUser(J.email.toLowerCase(),W.accountId,W.providerId).catch((w)=>{_0.error(`Better auth was unable to query your database.
Error: `,w);let D=$.context.options.onAPIError?.errorURL||`${$.context.baseURL}/error`;throw $.redirect(`${D}?error=internal_server_error`)}),H=Z?.user,G=!H;if(Z){let w=Z.accounts.find((D)=>D.providerId===W.providerId&&D.accountId===W.accountId);if(!w){if(!$.context.options.account?.accountLinking?.trustedProviders?.includes(W.providerId)&&!J.emailVerified||$.context.options.account?.accountLinking?.enabled===!1){if(aW)_0.warn(`User already exist but account isn't linked to ${W.providerId}. To read more about how account linking works in Better Auth see https://www.better-auth.com/docs/concepts/users-accounts#account-linking.`);return{error:"account not linked",data:null}}try{await $.context.internalAdapter.linkAccount({providerId:W.providerId,accountId:J.id.toString(),userId:Z.user.id,accessToken:await i$(W.accessToken,$.context),refreshToken:await i$(W.refreshToken,$.context),idToken:W.idToken,accessTokenExpiresAt:W.accessTokenExpiresAt,refreshTokenExpiresAt:W.refreshTokenExpiresAt,scope:W.scope},$)}catch(O){return _0.error("Unable to link account",O),{error:"unable to link account",data:null}}if(J.emailVerified&&!Z.user.emailVerified&&J.email.toLowerCase()===Z.user.email)await $.context.internalAdapter.updateUser(Z.user.id,{emailVerified:!0})}else{if($.context.options.account?.updateAccountOnSignIn!==!1){let D=Object.fromEntries(Object.entries({idToken:W.idToken,accessToken:await i$(W.accessToken,$.context),refreshToken:await i$(W.refreshToken,$.context),accessTokenExpiresAt:W.accessTokenExpiresAt,refreshTokenExpiresAt:W.refreshTokenExpiresAt,scope:W.scope}).filter(([K,O])=>O!==void 0));if(Object.keys(D).length>0)await $.context.internalAdapter.updateAccount(w.id,D,$)}if(J.emailVerified&&!Z.user.emailVerified&&J.email.toLowerCase()===Z.user.email)await $.context.internalAdapter.updateUser(Z.user.id,{emailVerified:!0})}if(U){let{id:D,...K}=J;await $.context.internalAdapter.updateUser(Z.user.id,{...K,email:J.email.toLowerCase(),emailVerified:J.email.toLowerCase()===Z.user.email?Z.user.emailVerified||J.emailVerified:J.emailVerified})}}else{if(Y)return{error:"signup disabled",data:null,isRegister:!1};try{let{id:w,...D}=J;if(H=await $.context.internalAdapter.createOAuthUser({...D,email:J.email.toLowerCase()},{accessToken:await i$(W.accessToken,$.context),refreshToken:await i$(W.refreshToken,$.context),idToken:W.idToken,accessTokenExpiresAt:W.accessTokenExpiresAt,refreshTokenExpiresAt:W.refreshTokenExpiresAt,scope:W.scope,providerId:W.providerId,accountId:J.id.toString()},$).then((K)=>K?.user),!J.emailVerified&&H&&$.context.options.emailVerification?.sendOnSignUp){let K=await VJ($.context.secret,H.email,void 0,$.context.options.emailVerification?.expiresIn),O=`${$.context.baseURL}/verify-email?token=${K}&callbackURL=${X}`;await $.context.options.emailVerification?.sendVerificationEmail?.({user:H,url:O,token:K},$.request)}}catch(w){if(_0.error(w),w instanceof p)return{error:w.message,data:null,isRegister:!1};return{error:"unable to create user",data:null,isRegister:!1}}}if(!H)return{error:"unable to create user",data:null,isRegister:!1};let z=await $.context.internalAdapter.createSession(H.id,$);if(!z)return{error:"unable to create session",data:null,isRegister:!1};return{data:{session:z,user:H},error:null,isRegister:G}}var Vb=l0("/sign-in/social",{method:"POST",body:a0({callbackURL:a().meta({description:"Callback URL to redirect to after the user has signed in"}).optional(),newUserCallbackURL:a().optional(),errorCallbackURL:a().meta({description:"Callback URL to redirect to if an error happens"}).optional(),provider:oA,disableRedirect:f6().meta({description:"Disable automatic redirection to the provider. Useful for handling the redirection yourself"}).optional(),idToken:u9(a0({token:a().meta({description:"ID token from the provider"}),nonce:a().meta({description:"Nonce used to generate the token"}).optional(),accessToken:a().meta({description:"Access token from the provider"}).optional(),refreshToken:a().meta({description:"Refresh token from the provider"}).optional(),expiresAt:p9().meta({description:"Expiry date of the token"}).optional()})),scopes:l9(a()).meta({description:"Array of scopes to request from the provider. This will override the default scopes passed."}).optional(),requestSignUp:f6().meta({description:"Explicitly request sign-up. Useful when disableImplicitSignUp is true for this provider"}).optional(),loginHint:a().meta({description:"The login hint to use for the authorization code request"}).optional()}),metadata:{openapi:{description:"Sign in with a social provider",operationId:"socialSignIn",responses:{"200":{description:"Success - Returns either session details or redirect URL",content:{"application/json":{schema:{type:"object",description:"Session response when idToken is provided",properties:{redirect:{type:"boolean",enum:[!1]},token:{type:"string",description:"Session token",url:{type:"null",nullable:!0},user:{type:"object",properties:{id:{type:"string"},email:{type:"string"},name:{type:"string",nullable:!0},image:{type:"string",nullable:!0},emailVerified:{type:"boolean"},createdAt:{type:"string",format:"date-time"},updatedAt:{type:"string",format:"date-time"}},required:["id","email","emailVerified","createdAt","updatedAt"]}}},required:["redirect","token","user"]}}}}}}}},async($)=>{let J=$.context.socialProviders.find((U)=>U.id===$.body.provider);if(!J)throw $.context.logger.error("Provider not found. Make sure to add the provider in your auth config",{provider:$.body.provider}),new p("NOT_FOUND",{message:E0.PROVIDER_NOT_FOUND});if($.body.idToken){if(!J.verifyIdToken)throw $.context.logger.error("Provider does not support id token verification",{provider:$.body.provider}),new p("NOT_FOUND",{message:E0.ID_TOKEN_NOT_SUPPORTED});let{token:U,nonce:Z}=$.body.idToken;if(!await J.verifyIdToken(U,Z))throw $.context.logger.error("Invalid id token",{provider:$.body.provider}),new p("UNAUTHORIZED",{message:E0.INVALID_TOKEN});let G=await J.getUserInfo({idToken:U,accessToken:$.body.idToken.accessToken,refreshToken:$.body.idToken.refreshToken});if(!G||!G?.user)throw $.context.logger.error("Failed to get user info",{provider:$.body.provider}),new p("UNAUTHORIZED",{message:E0.FAILED_TO_GET_USER_INFO});if(!G.user.email)throw $.context.logger.error("User email not found",{provider:$.body.provider}),new p("UNAUTHORIZED",{message:E0.USER_EMAIL_NOT_FOUND});let z=await Mb($,{userInfo:{...G.user,email:G.user.email,id:String(G.user.id),name:G.user.name||"",image:G.user.image,emailVerified:G.user.emailVerified||!1},account:{providerId:J.id,accountId:String(G.user.id),accessToken:$.body.idToken.accessToken},callbackURL:$.body.callbackURL,disableSignUp:J.disableImplicitSignUp&&!$.body.requestSignUp||J.disableSignUp});if(z.error)throw new p("UNAUTHORIZED",{message:z.error});return await y$($,z.data),$.json({redirect:!1,token:z.data.session.token,url:void 0,user:{id:z.data.user.id,email:z.data.user.email,name:z.data.user.name,image:z.data.user.image,emailVerified:z.data.user.emailVerified,createdAt:z.data.user.createdAt,updatedAt:z.data.user.updatedAt}})}let{codeVerifier:W,state:X}=await A_($),Y=await J.createAuthorizationURL({state:X,codeVerifier:W,redirectURI:`${$.context.baseURL}/callback/${J.id}`,scopes:$.body.scopes,loginHint:$.body.loginHint});return $.json({url:Y.toString(),redirect:!$.body.disableRedirect})}),Qb=l0("/sign-in/email",{method:"POST",body:a0({email:a().meta({description:"Email of the user"}),password:a().meta({description:"Password of the user"}),callbackURL:a().meta({description:"Callback URL to use as a redirect for email verification"}).optional(),rememberMe:f6().meta({description:"If this is false, the session will not be remembered. Default is `true`."}).default(!0).optional()}),metadata:{openapi:{description:"Sign in with email and password",responses:{"200":{description:"Success - Returns either session details or redirect URL",content:{"application/json":{schema:{type:"object",description:"Session response when idToken is provided",properties:{redirect:{type:"boolean",enum:[!1]},token:{type:"string",description:"Session token"},url:{type:"null",nullable:!0},user:{type:"object",properties:{id:{type:"string"},email:{type:"string"},name:{type:"string",nullable:!0},image:{type:"string",nullable:!0},emailVerified:{type:"boolean"},createdAt:{type:"string",format:"date-time"},updatedAt:{type:"string",format:"date-time"}},required:["id","email","emailVerified","createdAt","updatedAt"]}},required:["redirect","token","user"]}}}}}}}},async($)=>{if(!$.context.options?.emailAndPassword?.enabled)throw $.context.logger.error("Email and password is not enabled. Make sure to enable it in the options on you `auth.ts` file. Check `https://better-auth.com/docs/authentication/email-password` for more!"),new p("BAD_REQUEST",{message:"Email and password is not enabled"});let{email:J,password:W}=$.body;if(!a().email().safeParse(J).success)throw new p("BAD_REQUEST",{message:E0.INVALID_EMAIL});let Y=await $.context.internalAdapter.findUserByEmail(J,{includeAccounts:!0});if(!Y)throw await $.context.password.hash(W),$.context.logger.error("User not found",{email:J}),new p("UNAUTHORIZED",{message:E0.INVALID_EMAIL_OR_PASSWORD});let U=Y.accounts.find((z)=>z.providerId==="credential");if(!U)throw $.context.logger.error("Credential account not found",{email:J}),new p("UNAUTHORIZED",{message:E0.INVALID_EMAIL_OR_PASSWORD});let Z=U?.password;if(!Z)throw $.context.logger.error("Password not found",{email:J}),new p("UNAUTHORIZED",{message:E0.INVALID_EMAIL_OR_PASSWORD});if(!await $.context.password.verify({hash:Z,password:W}))throw $.context.logger.error("Invalid password"),new p("UNAUTHORIZED",{message:E0.INVALID_EMAIL_OR_PASSWORD});if($.context.options?.emailAndPassword?.requireEmailVerification&&!Y.user.emailVerified){if(!$.context.options?.emailVerification?.sendVerificationEmail)throw new p("FORBIDDEN",{message:E0.EMAIL_NOT_VERIFIED});if($.context.options?.emailVerification?.sendOnSignIn){let z=await VJ($.context.secret,Y.user.email,void 0,$.context.options.emailVerification?.expiresIn),w=`${$.context.baseURL}/verify-email?token=${z}&callbackURL=${$.body.callbackURL||"/"}`;await $.context.options.emailVerification.sendVerificationEmail({user:Y.user,url:w,token:z},$.request)}throw new p("FORBIDDEN",{message:E0.EMAIL_NOT_VERIFIED})}let G=await $.context.internalAdapter.createSession(Y.user.id,$,$.body.rememberMe===!1);if(!G)throw $.context.logger.error("Failed to create session"),new p("UNAUTHORIZED",{message:E0.FAILED_TO_CREATE_SESSION});return await y$($,{session:G,user:Y.user},$.body.rememberMe===!1),$.json({redirect:!!$.body.callbackURL,token:G.token,url:$.body.callbackURL,user:{id:Y.user.id,email:Y.user.email,name:Y.user.name,image:Y.user.image,emailVerified:Y.user.emailVerified,createdAt:Y.user.createdAt,updatedAt:Y.user.updatedAt}})}),nw=a0({code:a().optional(),error:a().optional(),device_id:a().optional(),error_description:a().optional(),state:a().optional(),user:a().optional()}),Ab=l0("/callback/:id",{method:["GET","POST"],body:nw.optional(),query:nw.optional(),metadata:tw},async($)=>{let J,W=$.context.options.onAPIError?.errorURL||`${$.context.baseURL}/error`;try{if($.method==="GET")J=nw.parse($.query);else if($.method==="POST")J=nw.parse($.body);else throw Error("Unsupported method")}catch(L){throw $.context.logger.error("INVALID_CALLBACK_REQUEST",L),$.redirect(`${W}?error=invalid_callback_request`)}let{code:X,error:Y,state:U,error_description:Z,device_id:H}=J;if(!U){$.context.logger.error("State not found",Y);let L=W.includes("?")?"&":"?",R=`${W}${L}state=state_not_found`;throw $.redirect(R)}let{codeVerifier:G,callbackURL:z,link:w,errorURL:D,newUserURL:K,requestSignUp:O}=await Eb($);function F(L,R){let S=D??W,k=new URLSearchParams({error:L});if(R)k.set("error_description",R);let T=S.includes("?")?"&":"?",q=`${S}${T}${k.toString()}`;throw $.redirect(q)}if(Y)F(Y,Z);if(!X)throw $.context.logger.error("Code not found"),F("no_code");let M=$.context.socialProviders.find((L)=>L.id===$.params.id);if(!M)throw $.context.logger.error("Oauth provider with id",$.params.id,"not found"),F("oauth_provider_not_found");let A;try{A=await M.validateAuthorizationCode({code:X,codeVerifier:G,deviceId:H,redirectURI:`${$.context.baseURL}/callback/${M.id}`})}catch(L){throw $.context.logger.error("",L),F("invalid_code")}let I=await M.getUserInfo({...A,user:$.body?.user?U4($.body.user):void 0}).then((L)=>L?.user);if(!I)return $.context.logger.error("Unable to get user info"),F("unable_to_get_user_info");if(!z)throw $.context.logger.error("No callback URL found"),F("no_callback_url");if(w){if(!$.context.options.account?.accountLinking?.trustedProviders?.includes(M.id)&&!I.emailVerified||$.context.options.account?.accountLinking?.enabled===!1)return $.context.logger.error("Unable to link account - untrusted provider"),F("unable_to_link_account");if(I.email!==w.email&&$.context.options.account?.accountLinking?.allowDifferentEmails!==!0)return F("email_doesn't_match");let S=await $.context.internalAdapter.findAccount(String(I.id));if(S){if(S.userId.toString()!==w.userId.toString())return F("account_already_linked_to_different_user");let T=Object.fromEntries(Object.entries({accessToken:await i$(A.accessToken,$.context),refreshToken:await i$(A.refreshToken,$.context),idToken:A.idToken,accessTokenExpiresAt:A.accessTokenExpiresAt,refreshTokenExpiresAt:A.refreshTokenExpiresAt,scope:A.scopes?.join(",")}).filter(([q,h])=>h!==void 0));await $.context.internalAdapter.updateAccount(S.id,T)}else if(!await $.context.internalAdapter.createAccount({userId:w.userId,providerId:M.id,accountId:String(I.id),...A,accessToken:await i$(A.accessToken,$.context),refreshToken:await i$(A.refreshToken,$.context),scope:A.scopes?.join(",")},$))return F("unable_to_link_account");let k;try{k=z.toString()}catch{k=z}throw $.redirect(k)}if(!I.email)return $.context.logger.error("Provider did not return email. This could be due to misconfiguration in the provider settings."),F("email_not_found");let P=await Mb($,{userInfo:{...I,id:String(I.id),email:I.email,name:I.name||I.email},account:{providerId:M.id,accountId:String(I.id),...A,scope:A.scopes?.join(",")},callbackURL:z,disableSignUp:M.disableImplicitSignUp&&!O||M.options?.disableSignUp,overrideUserInfo:M.options?.overrideUserInfoOnSignIn});if(P.error)return $.context.logger.error(P.error.split(" ").join("_")),F(P.error.split(" ").join("_"));let{session:Q,user:N}=P.data;await y$($,{session:Q,user:N});let _;try{_=(P.isRegister?K||z:z).toString()}catch{_=P.isRegister?K||z:z}throw $.redirect(_)}),Ib=l0("/sign-out",{method:"POST",requireHeaders:!0,metadata:{openapi:{description:"Sign out the current user",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},async($)=>{let J=await $.getSignedCookie($.context.authCookies.sessionToken.name,$.context.secret);if(!J)throw n9($),new p("BAD_REQUEST",{message:E0.FAILED_TO_GET_SESSION});return await $.context.internalAdapter.deleteSession(J),n9($),$.json({success:!0})});function wb($,J,W){let X=J?new URL(J,$.baseURL):new URL(`${$.baseURL}/error`);if(W)Object.entries(W).forEach(([Y,U])=>X.searchParams.set(Y,U));return X.href}function _40($,J,W){let X=new URL(J,$.baseURL);if(W)Object.entries(W).forEach(([Y,U])=>X.searchParams.set(Y,U));return X.href}var Lb=l0("/request-password-reset",{method:"POST",body:a0({email:R7().meta({description:"The email address of the user to send a password reset email to"}),redirectTo:a().meta({description:"The URL to redirect the user to reset their password. If the token isn't valid or expired, it'll be redirected with a query parameter `?error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?token=VALID_TOKEN"}).optional()}),metadata:{openapi:{description:"Send a password reset email to the user",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"},message:{type:"string"}}}}}}}}}},async($)=>{if(!$.context.options.emailAndPassword?.sendResetPassword)throw $.context.logger.error("Reset password isn't enabled.Please pass an emailAndPassword.sendResetPassword function in your auth config!"),new p("BAD_REQUEST",{message:"Reset password isn't enabled"});let{email:J,redirectTo:W}=$.body,X=await $.context.internalAdapter.findUserByEmail(J,{includeAccounts:!0});if(!X)return $.context.logger.error("Reset Password: User not found",{email:J}),$.json({status:!0,message:"If this email exists in our system, check your email for the reset link"});let Y=3600,U=o8($.context.options.emailAndPassword.resetPasswordTokenExpiresIn||Y,"sec"),Z=s8(24);await $.context.internalAdapter.createVerificationValue({value:X.user.id,identifier:`reset-password:${Z}`,expiresAt:U},$);let H=W?encodeURIComponent(W):"",G=`${$.context.baseURL}/reset-password/${Z}?callbackURL=${H}`;return await $.context.options.emailAndPassword.sendResetPassword({user:X.user,url:G,token:Z},$.request),$.json({status:!0,message:"If this email exists in our system, check your email for the reset link"})}),Pb=l0("/forget-password",{method:"POST",body:a0({email:a().email().meta({description:"The email address of the user to send a password reset email to"}),redirectTo:a().meta({description:"The URL to redirect the user to reset their password. If the token isn't valid or expired, it'll be redirected with a query parameter `?error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?token=VALID_TOKEN"}).optional()}),metadata:{openapi:{description:"Send a password reset email to the user",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"},message:{type:"string"}}}}}}}}}},async($)=>{if(!$.context.options.emailAndPassword?.sendResetPassword)throw $.context.logger.error("Reset password isn't enabled.Please pass an emailAndPassword.sendResetPassword function in your auth config!"),new p("BAD_REQUEST",{message:"Reset password isn't enabled"});let{email:J,redirectTo:W}=$.body,X=await $.context.internalAdapter.findUserByEmail(J,{includeAccounts:!0});if(!X)return $.context.logger.error("Reset Password: User not found",{email:J}),$.json({status:!0,message:"If this email exists in our system, check your email for the reset link"});let Y=3600,U=o8($.context.options.emailAndPassword.resetPasswordTokenExpiresIn||Y,"sec"),Z=s8(24);await $.context.internalAdapter.createVerificationValue({value:X.user.id,identifier:`reset-password:${Z}`,expiresAt:U},$);let H=W?encodeURIComponent(W):"",G=`${$.context.baseURL}/reset-password/${Z}?callbackURL=${H}`;return await $.context.options.emailAndPassword.sendResetPassword({user:X.user,url:G,token:Z},$.request),$.json({status:!0})}),I_=l0("/reset-password/:token",{method:"GET",query:a0({callbackURL:a().meta({description:"The URL to redirect the user to reset their password"})}),use:[iw(($)=>$.query.callbackURL)],metadata:{openapi:{description:"Redirects the user to the callback URL with the token",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string"}}}}}}}}}},async($)=>{let{token:J}=$.params,{callbackURL:W}=$.query;if(!J||!W)throw $.redirect(wb($.context,W,{error:"INVALID_TOKEN"}));let X=await $.context.internalAdapter.findVerificationValue(`reset-password:${J}`);if(!X||X.expiresAt<new Date)throw $.redirect(wb($.context,W,{error:"INVALID_TOKEN"}));throw $.redirect(_40($.context,W,{token:J}))}),_b=I_,Nb=l0("/reset-password",{method:"POST",query:a0({token:a().optional()}).optional(),body:a0({newPassword:a().meta({description:"The new password to set"}),token:a().meta({description:"The token to reset the password"}).optional()}),metadata:{openapi:{description:"Reset the password for a user",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async($)=>{let J=$.body.token||$.query?.token;if(!J)throw new p("BAD_REQUEST",{message:E0.INVALID_TOKEN});let{newPassword:W}=$.body,X=$.context.password?.config.minPasswordLength,Y=$.context.password?.config.maxPasswordLength;if(W.length<X)throw new p("BAD_REQUEST",{message:E0.PASSWORD_TOO_SHORT});if(W.length>Y)throw new p("BAD_REQUEST",{message:E0.PASSWORD_TOO_LONG});let U=`reset-password:${J}`,Z=await $.context.internalAdapter.findVerificationValue(U);if(!Z||Z.expiresAt<new Date)throw new p("BAD_REQUEST",{message:E0.INVALID_TOKEN});let H=Z.value,G=await $.context.password.hash(W);if(!(await $.context.internalAdapter.findAccounts(H)).find((D)=>D.providerId==="credential"))await $.context.internalAdapter.createAccount({userId:H,providerId:"credential",password:G,accountId:H},$);else await $.context.internalAdapter.updatePassword(H,G,$);if(await $.context.internalAdapter.deleteVerificationValue(Z.id),$.context.options.emailAndPassword?.onPasswordReset){let D=await $.context.internalAdapter.findUserById(H);if(D)await $.context.options.emailAndPassword.onPasswordReset({user:D},$.request)}if($.context.options.emailAndPassword?.revokeSessionsOnPasswordReset)await $.context.internalAdapter.deleteSessions(H);return $.json({status:!0})}),Bb=()=>l0("/update-user",{method:"POST",body:LX(a().meta({description:"Field name must be a string"}),mU()),use:[S7],metadata:{$Infer:{body:{}},openapi:{description:"Update the current user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"The name of the user"},image:{type:"string",description:"The image of the user"}}}}}},responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the update was successful"}}}}}}}}}},async($)=>{let J=$.body;if(J.email)throw new p("BAD_REQUEST",{message:E0.EMAIL_CAN_NOT_BE_UPDATED});let{name:W,image:X,...Y}=J,U=$.context.session;if(X===void 0&&W===void 0&&Object.keys(Y).length===0)return $.json({status:!0});let Z=await $.context.internalAdapter.updateUser(U.user.id,{name:W,image:X,...Y},$);return await y$($,{session:U.session,user:Z}),$.json({status:!0})}),Rb=l0("/change-password",{method:"POST",body:a0({newPassword:a().meta({description:"The new password to set"}),currentPassword:a().meta({description:"The current password is required"}),revokeOtherSessions:f6().meta({description:"Must be a boolean value"}).optional()}),use:[h5],metadata:{openapi:{description:"Change the password of the user",responses:{"200":{description:"Password successfully changed",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",nullable:!0,description:"New session token if other sessions were revoked"},user:{type:"object",properties:{id:{type:"string",description:"The unique identifier of the user"},email:{type:"string",format:"email",description:"The email address of the user"},name:{type:"string",description:"The name of the user"},image:{type:"string",format:"uri",nullable:!0,description:"The profile image URL of the user"},emailVerified:{type:"boolean",description:"Whether the email has been verified"},createdAt:{type:"string",format:"date-time",description:"When the user was created"},updatedAt:{type:"string",format:"date-time",description:"When the user was last updated"}},required:["id","email","name","emailVerified","createdAt","updatedAt"]}},required:["user"]}}}}}}}},async($)=>{let{newPassword:J,currentPassword:W,revokeOtherSessions:X}=$.body,Y=$.context.session,U=$.context.password.config.minPasswordLength;if(J.length<U)throw $.context.logger.error("Password is too short"),new p("BAD_REQUEST",{message:E0.PASSWORD_TOO_SHORT});let Z=$.context.password.config.maxPasswordLength;if(J.length>Z)throw $.context.logger.error("Password is too long"),new p("BAD_REQUEST",{message:E0.PASSWORD_TOO_LONG});let G=(await $.context.internalAdapter.findAccounts(Y.user.id)).find((K)=>K.providerId==="credential"&&K.password);if(!G||!G.password)throw new p("BAD_REQUEST",{message:E0.CREDENTIAL_ACCOUNT_NOT_FOUND});let z=await $.context.password.hash(J);if(!await $.context.password.verify({hash:G.password,password:W}))throw new p("BAD_REQUEST",{message:E0.INVALID_PASSWORD});await $.context.internalAdapter.updateAccount(G.id,{password:z});let D=null;if(X){await $.context.internalAdapter.deleteSessions(Y.user.id);let K=await $.context.internalAdapter.createSession(Y.user.id,$);if(!K)throw new p("INTERNAL_SERVER_ERROR",{message:E0.FAILED_TO_GET_SESSION});await y$($,{session:K,user:Y.user}),D=K.token}return $.json({token:D,user:{id:Y.user.id,email:Y.user.email,name:Y.user.name,image:Y.user.image,emailVerified:Y.user.emailVerified,createdAt:Y.user.createdAt,updatedAt:Y.user.updatedAt}})}),Sb=l0("/set-password",{method:"POST",body:a0({newPassword:a().meta({description:"The new password to set is required"})}),metadata:{SERVER_ONLY:!0},use:[h5]},async($)=>{let{newPassword:J}=$.body,W=$.context.session,X=$.context.password.config.minPasswordLength;if(J.length<X)throw $.context.logger.error("Password is too short"),new p("BAD_REQUEST",{message:E0.PASSWORD_TOO_SHORT});let Y=$.context.password.config.maxPasswordLength;if(J.length>Y)throw $.context.logger.error("Password is too long"),new p("BAD_REQUEST",{message:E0.PASSWORD_TOO_LONG});let Z=(await $.context.internalAdapter.findAccounts(W.user.id)).find((G)=>G.providerId==="credential"&&G.password),H=await $.context.password.hash(J);if(!Z)return await $.context.internalAdapter.linkAccount({userId:W.user.id,providerId:"credential",accountId:W.user.id,password:H},$),$.json({status:!0});throw new p("BAD_REQUEST",{message:"user already has a password"})}),jb=l0("/delete-user",{method:"POST",use:[h5],body:a0({callbackURL:a().meta({description:"The callback URL to redirect to after the user is deleted"}).optional(),password:a().meta({description:"The password of the user is required to delete the user"}).optional(),token:a().meta({description:"The token to delete the user is required"}).optional()}),metadata:{openapi:{description:"Delete the user",responses:{"200":{description:"User deletion processed successfully",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean",description:"Indicates if the operation was successful"},message:{type:"string",enum:["User deleted","Verification email sent"],description:"Status message of the deletion process"}},required:["success","message"]}}}}}}}},async($)=>{if(!$.context.options.user?.deleteUser?.enabled)throw $.context.logger.error("Delete user is disabled. Enable it in the options",{session:$.context.session}),new p("NOT_FOUND");let J=$.context.session;if($.body.password){let U=(await $.context.internalAdapter.findAccounts(J.user.id)).find((H)=>H.providerId==="credential"&&H.password);if(!U||!U.password)throw new p("BAD_REQUEST",{message:E0.CREDENTIAL_ACCOUNT_NOT_FOUND});if(!await $.context.password.verify({hash:U.password,password:$.body.password}))throw new p("BAD_REQUEST",{message:E0.INVALID_PASSWORD})}if($.body.token)return await L_({...$,query:{token:$.body.token}}),$.json({success:!0,message:"User deleted"});if($.context.options.user.deleteUser?.sendDeleteAccountVerification){let Y=oU(32,"0-9","a-z");await $.context.internalAdapter.createVerificationValue({value:J.user.id,identifier:`delete-account-${Y}`,expiresAt:new Date(Date.now()+($.context.options.user.deleteUser?.deleteTokenExpiresIn||86400)*1000)},$);let U=`${$.context.baseURL}/delete-user/callback?token=${Y}&callbackURL=${$.body.callbackURL||"/"}`;return await $.context.options.user.deleteUser.sendDeleteAccountVerification({user:J.user,url:U,token:Y},$.request),$.json({success:!0,message:"Verification email sent"})}if(!$.body.password&&$.context.sessionConfig.freshAge!==0){let Y=new Date(J.session.createdAt).getTime(),U=$.context.sessionConfig.freshAge*1000;if(Date.now()-Y>U*1000)throw new p("BAD_REQUEST",{message:E0.SESSION_EXPIRED})}let W=$.context.options.user.deleteUser?.beforeDelete;if(W)await W(J.user,$.request);await $.context.internalAdapter.deleteUser(J.user.id),await $.context.internalAdapter.deleteSessions(J.user.id),await $.context.internalAdapter.deleteAccounts(J.user.id),n9($);let X=$.context.options.user.deleteUser?.afterDelete;if(X)await X(J.user,$.request);return $.json({success:!0,message:"User deleted"})}),L_=l0("/delete-user/callback",{method:"GET",query:a0({token:a().meta({description:"The token to verify the deletion request"}),callbackURL:a().meta({description:"The URL to redirect to after deletion"}).optional()}),use:[iw(($)=>$.query.callbackURL)],metadata:{openapi:{description:"Callback to complete user deletion with verification token",responses:{"200":{description:"User successfully deleted",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean",description:"Indicates if the deletion was successful"},message:{type:"string",enum:["User deleted"],description:"Confirmation message"}},required:["success","message"]}}}}}}}},async($)=>{if(!$.context.options.user?.deleteUser?.enabled)throw $.context.logger.error("Delete user is disabled. Enable it in the options"),new p("NOT_FOUND");let J=await m6($);if(!J)throw new p("NOT_FOUND",{message:E0.FAILED_TO_GET_USER_INFO});let W=await $.context.internalAdapter.findVerificationValue(`delete-account-${$.query.token}`);if(!W||W.expiresAt<new Date)throw new p("NOT_FOUND",{message:E0.INVALID_TOKEN});if(W.value!==J.user.id)throw new p("NOT_FOUND",{message:E0.INVALID_TOKEN});let X=$.context.options.user.deleteUser?.beforeDelete;if(X)await X(J.user,$.request);await $.context.internalAdapter.deleteUser(J.user.id),await $.context.internalAdapter.deleteSessions(J.user.id),await $.context.internalAdapter.deleteAccounts(J.user.id),await $.context.internalAdapter.deleteVerificationValue(W.id),n9($);let Y=$.context.options.user.deleteUser?.afterDelete;if(Y)await Y(J.user,$.request);if($.query.callbackURL)throw $.redirect($.query.callbackURL||"/");return $.json({success:!0,message:"User deleted"})}),kb=l0("/change-email",{method:"POST",body:a0({newEmail:R7().meta({description:"The new email address to set must be a valid email address"}),callbackURL:a().meta({description:"The URL to redirect to after email verification"}).optional()}),use:[h5],metadata:{openapi:{responses:{"200":{description:"Email change request processed successfully",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the request was successful"},message:{type:"string",enum:["Email updated","Verification email sent"],description:"Status message of the email change process",nullable:!0}},required:["status"]}}}},"422":{description:"Unprocessable Entity. Email already exists",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}}}}}}},async($)=>{if(!$.context.options.user?.changeEmail?.enabled)throw $.context.logger.error("Change email is disabled."),new p("BAD_REQUEST",{message:"Change email is disabled"});let J=$.body.newEmail.toLowerCase();if(J===$.context.session.user.email)throw $.context.logger.error("Email is the same"),new p("BAD_REQUEST",{message:"Email is the same"});if(await $.context.internalAdapter.findUserByEmail(J))throw $.context.logger.error("Email already exists"),new p("BAD_REQUEST",{message:"Couldn't update your email"});if($.context.session.user.emailVerified!==!0){if(await $.context.internalAdapter.findUserByEmail(J))throw new p("UNPROCESSABLE_ENTITY",{message:E0.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL});if(await $.context.internalAdapter.updateUserByEmail($.context.session.user.email,{email:J},$),await y$($,{session:$.context.session.session,user:{...$.context.session.user,email:J}}),$.context.options.emailVerification?.sendVerificationEmail){let Z=await VJ($.context.secret,J,void 0,$.context.options.emailVerification?.expiresIn),H=`${$.context.baseURL}/verify-email?token=${Z}&callbackURL=${$.body.callbackURL||"/"}`;await $.context.options.emailVerification.sendVerificationEmail({user:{...$.context.session.user,email:J},url:H,token:Z},$.request)}return $.json({status:!0})}if(!$.context.options.user.changeEmail.sendChangeEmailVerification)throw $.context.logger.error("Verification email isn't enabled."),new p("BAD_REQUEST",{message:"Verification email isn't enabled"});let X=await VJ($.context.secret,$.context.session.user.email,J,$.context.options.emailVerification?.expiresIn),Y=`${$.context.baseURL}/verify-email?token=${X}&callbackURL=${$.body.callbackURL||"/"}`;return await $.context.options.user.changeEmail.sendChangeEmailVerification({user:$.context.session.user,newEmail:J,url:Y,token:X},$.request),$.json({status:!0})});function N40($){return $.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}var B40=($="Unknown")=>`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Authentication Error</title>
    <style>
        :root {
            --bg-color: #f8f9fa;
            --text-color: #212529;
            --accent-color: #000000;
            --error-color: #dc3545;
            --border-color: #e9ecef;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            line-height: 1.5;
        }
        .error-container {
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            padding: 2.5rem;
            text-align: center;
            max-width: 90%;
            width: 400px;
        }
        h1 {
            color: var(--error-color);
            font-size: 1.75rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }
        p {
            margin-bottom: 1.5rem;
            color: #495057;
        }
        .btn {
            background-color: var(--accent-color);
            color: #ffffff;
            text-decoration: none;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            transition: all 0.3s ease;
            display: inline-block;
            font-weight: 500;
            border: 2px solid var(--accent-color);
        }
        .btn:hover {
            background-color: #131721;
        }
        .error-code {
            font-size: 0.875rem;
            color: #6c757d;
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border-color);
        }
        .icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
    </style>
</head>
<body>
    <div class="error-container">
        <div class="icon">\u26A0\uFE0F</div>
        <h1>Better Auth Error</h1>
        <p>We encountered an issue while processing your request. Please try again or contact the application owner if the problem persists.</p>
        <a href="/" id="returnLink" class="btn">Return to Application</a>
        <div class="error-code">Error Code: <span id="errorCode">${N40($)}</span></div>
    </div>
</body>
</html>`,vb=l0("/error",{method:"GET",metadata:{...tw,openapi:{description:"Displays an error page",responses:{"200":{description:"Success",content:{"text/html":{schema:{type:"string",description:"The HTML content of the error page"}}}}}}}},async($)=>{let J=new URL($.request?.url||"").searchParams.get("error")||"Unknown";return new Response(B40(J),{headers:{"Content-Type":"text/html"}})}),Cb=l0("/ok",{method:"GET",metadata:{...tw,openapi:{description:"Check if the API is working",responses:{"200":{description:"API is working",content:{"application/json":{schema:{type:"object",properties:{ok:{type:"boolean",description:"Indicates if the API is working"}},required:["ok"]}}}}}}}},async($)=>{return $.json({ok:!0})}),Tb=l0("/list-accounts",{method:"GET",use:[S7],metadata:{openapi:{description:"List all accounts linked to the user",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"array",items:{type:"object",properties:{id:{type:"string"},providerId:{type:"string"},createdAt:{type:"string",format:"date-time"},updatedAt:{type:"string",format:"date-time"},accountId:{type:"string"},scopes:{type:"array",items:{type:"string"}}},required:["id","providerId","createdAt","updatedAt","accountId","scopes"]}}}}}}}}},async($)=>{let J=$.context.session,W=await $.context.internalAdapter.findAccounts(J.user.id);return $.json(W.map((X)=>({id:X.id,providerId:X.providerId,createdAt:X.createdAt,updatedAt:X.updatedAt,accountId:X.accountId,scopes:X.scope?.split(",")||[]})))}),qb=l0("/link-social",{method:"POST",requireHeaders:!0,body:a0({callbackURL:a().meta({description:"The URL to redirect to after the user has signed in"}).optional(),provider:oA,idToken:a0({token:a(),nonce:a().optional(),accessToken:a().optional(),refreshToken:a().optional(),scopes:l9(a()).optional()}).optional(),requestSignUp:f6().optional(),scopes:l9(a()).meta({description:"Additional scopes to request from the provider"}).optional(),errorCallbackURL:a().meta({description:"The URL to redirect to if there is an error during the link process"}).optional(),disableRedirect:f6().meta({description:"Disable automatic redirection to the provider. Useful for handling the redirection yourself"}).optional()}),use:[S7],metadata:{openapi:{description:"Link a social account to the user",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{url:{type:"string",description:"The authorization URL to redirect the user to"},redirect:{type:"boolean",description:"Indicates if the user should be redirected to the authorization URL"},status:{type:"boolean"}},required:["redirect"]}}}}}}}},async($)=>{let J=$.context.session,W=$.context.socialProviders.find((U)=>U.id===$.body.provider);if(!W)throw $.context.logger.error("Provider not found. Make sure to add the provider in your auth config",{provider:$.body.provider}),new p("NOT_FOUND",{message:E0.PROVIDER_NOT_FOUND});if($.body.idToken){if(!W.verifyIdToken)throw $.context.logger.error("Provider does not support id token verification",{provider:$.body.provider}),new p("NOT_FOUND",{message:E0.ID_TOKEN_NOT_SUPPORTED});let{token:U,nonce:Z}=$.body.idToken;if(!await W.verifyIdToken(U,Z))throw $.context.logger.error("Invalid id token",{provider:$.body.provider}),new p("UNAUTHORIZED",{message:E0.INVALID_TOKEN});let G=await W.getUserInfo({idToken:U,accessToken:$.body.idToken.accessToken,refreshToken:$.body.idToken.refreshToken});if(!G||!G?.user)throw $.context.logger.error("Failed to get user info",{provider:$.body.provider}),new p("UNAUTHORIZED",{message:E0.FAILED_TO_GET_USER_INFO});let z=String(G.user.id);if(!G.user.email)throw $.context.logger.error("User email not found",{provider:$.body.provider}),new p("UNAUTHORIZED",{message:E0.USER_EMAIL_NOT_FOUND});if((await $.context.internalAdapter.findAccounts(J.user.id)).find((F)=>F.providerId===W.id&&F.accountId===z))return $.json({url:"",status:!0,redirect:!1});if(!$.context.options.account?.accountLinking?.trustedProviders?.includes(W.id)&&!G.user.emailVerified||$.context.options.account?.accountLinking?.enabled===!1)throw new p("UNAUTHORIZED",{message:"Account not linked - linking not allowed"});if(G.user.email!==J.user.email&&$.context.options.account?.accountLinking?.allowDifferentEmails!==!0)throw new p("UNAUTHORIZED",{message:"Account not linked - different emails not allowed"});try{await $.context.internalAdapter.createAccount({userId:J.user.id,providerId:W.id,accountId:z,accessToken:$.body.idToken.accessToken,idToken:U,refreshToken:$.body.idToken.refreshToken,scope:$.body.idToken.scopes?.join(",")},$)}catch(F){throw new p("EXPECTATION_FAILED",{message:"Account not linked - unable to create account"})}if($.context.options.account?.accountLinking?.updateUserInfoOnLink===!0)try{await $.context.internalAdapter.updateUser(J.user.id,{name:G.user?.name,image:G.user?.image})}catch(F){console.warn("Could not update user - "+F.toString())}return $.json({url:"",status:!0,redirect:!1})}let X=await A_($,{userId:J.user.id,email:J.user.email}),Y=await W.createAuthorizationURL({state:X.state,codeVerifier:X.codeVerifier,redirectURI:`${$.context.baseURL}/callback/${W.id}`,scopes:$.body.scopes});return $.json({url:Y.toString(),redirect:!$.body.disableRedirect})}),hb=l0("/unlink-account",{method:"POST",body:a0({providerId:a(),accountId:a().optional()}),use:[eA],metadata:{openapi:{description:"Unlink an account",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async($)=>{let{providerId:J,accountId:W}=$.body,X=await $.context.internalAdapter.findAccounts($.context.session.user.id);if(X.length===1&&!$.context.options.account?.accountLinking?.allowUnlinkingAll)throw new p("BAD_REQUEST",{message:E0.FAILED_TO_UNLINK_LAST_ACCOUNT});let Y=X.find((U)=>W?U.accountId===W&&U.providerId===J:U.providerId===J);if(!Y)throw new p("BAD_REQUEST",{message:E0.ACCOUNT_NOT_FOUND});return await $.context.internalAdapter.deleteAccount(Y.id),$.json({status:!0})}),P_=l0("/get-access-token",{method:"POST",body:a0({providerId:a().meta({description:"The provider ID for the OAuth provider"}),accountId:a().meta({description:"The account ID associated with the refresh token"}).optional(),userId:a().meta({description:"The user ID associated with the account"}).optional()}),metadata:{openapi:{description:"Get a valid access token, doing a refresh if needed",responses:{200:{description:"A Valid access token",content:{"application/json":{schema:{type:"object",properties:{tokenType:{type:"string"},idToken:{type:"string"},accessToken:{type:"string"},refreshToken:{type:"string"},accessTokenExpiresAt:{type:"string",format:"date-time"},refreshTokenExpiresAt:{type:"string",format:"date-time"}}}}}},400:{description:"Invalid refresh token or provider configuration"}}}}},async($)=>{let{providerId:J,accountId:W,userId:X}=$.body,Y=$.request,U=await m6($);if(Y&&!U)throw $.error("UNAUTHORIZED");let Z=U?.user?.id||X;if(!Z)throw new p("BAD_REQUEST",{message:"Either userId or session is required"});if(!$.context.socialProviders.find((w)=>w.id===J))throw new p("BAD_REQUEST",{message:`Provider ${J} is not supported.`});let G=(await $.context.internalAdapter.findAccounts(Z)).find((w)=>W?w.id===W&&w.providerId===J:w.providerId===J);if(!G)throw new p("BAD_REQUEST",{message:"Account not found"});let z=$.context.socialProviders.find((w)=>w.id===J);if(!z)throw new p("BAD_REQUEST",{message:`Provider ${J} not found.`});try{let w=null,D=G.accessTokenExpiresAt&&new Date(G.accessTokenExpiresAt).getTime()-Date.now()<5000;if(G.refreshToken&&D&&z.refreshAccessToken)w=await z.refreshAccessToken(G.refreshToken),await $.context.internalAdapter.updateAccount(G.id,{accessToken:await i$(w.accessToken,$.context),accessTokenExpiresAt:w.accessTokenExpiresAt,refreshToken:await i$(w.refreshToken,$.context),refreshTokenExpiresAt:w.refreshTokenExpiresAt});let K={accessToken:await P40(w?.accessToken??G.accessToken??"",$.context),accessTokenExpiresAt:w?.accessTokenExpiresAt??G.accessTokenExpiresAt??void 0,scopes:G.scope?.split(",")??[],idToken:w?.idToken??G.idToken??void 0};return $.json(K)}catch(w){throw new p("BAD_REQUEST",{message:"Failed to get a valid access token",cause:w})}}),xb=l0("/refresh-token",{method:"POST",body:a0({providerId:a().meta({description:"The provider ID for the OAuth provider"}),accountId:a().meta({description:"The account ID associated with the refresh token"}).optional(),userId:a().meta({description:"The user ID associated with the account"}).optional()}),metadata:{openapi:{description:"Refresh the access token using a refresh token",responses:{200:{description:"Access token refreshed successfully",content:{"application/json":{schema:{type:"object",properties:{tokenType:{type:"string"},idToken:{type:"string"},accessToken:{type:"string"},refreshToken:{type:"string"},accessTokenExpiresAt:{type:"string",format:"date-time"},refreshTokenExpiresAt:{type:"string",format:"date-time"}}}}}},400:{description:"Invalid refresh token or provider configuration"}}}}},async($)=>{let{providerId:J,accountId:W,userId:X}=$.body,Y=$.request,U=await m6($);if(Y&&!U)throw $.error("UNAUTHORIZED");let Z=U?.user?.id||X;if(!Z)throw new p("BAD_REQUEST",{message:"Either userId or session is required"});let G=(await $.context.internalAdapter.findAccounts(Z)).find((w)=>W?w.id===W&&w.providerId===J:w.providerId===J);if(!G)throw new p("BAD_REQUEST",{message:"Account not found"});let z=$.context.socialProviders.find((w)=>w.id===J);if(!z)throw new p("BAD_REQUEST",{message:`Provider ${J} not found.`});if(!z.refreshAccessToken)throw new p("BAD_REQUEST",{message:`Provider ${J} does not support token refreshing.`});try{let w=await z.refreshAccessToken(G.refreshToken);return await $.context.internalAdapter.updateAccount(G.id,{accessToken:await i$(w.accessToken,$.context),refreshToken:await i$(w.refreshToken,$.context),accessTokenExpiresAt:w.accessTokenExpiresAt,refreshTokenExpiresAt:w.refreshTokenExpiresAt}),$.json(w)}catch(w){throw new p("BAD_REQUEST",{message:"Failed to refresh access token",cause:w})}}),bb=l0("/account-info",{method:"POST",use:[S7],metadata:{openapi:{description:"Get the account info provided by the provider",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",properties:{id:{type:"string"},name:{type:"string"},email:{type:"string"},image:{type:"string"},emailVerified:{type:"boolean"}},required:["id","emailVerified"]},data:{type:"object",properties:{},additionalProperties:!0}},required:["user","data"],additionalProperties:!1}}}}}}},body:a0({accountId:a().meta({description:"The provider given account id for which to get the account info"})})},async($)=>{let J=await $.context.internalAdapter.findAccount($.body.accountId);if(!J||J.userId!==$.context.session.user.id)throw new p("BAD_REQUEST",{message:"Account not found"});let W=$.context.socialProviders.find((U)=>U.id===J.providerId);if(!W)throw new p("INTERNAL_SERVER_ERROR",{message:`Provider account provider is ${J.providerId} but it is not configured`});let X=await P_({...$,body:{accountId:J.id,providerId:J.providerId},returnHeaders:!1});if(!X.accessToken)throw new p("BAD_REQUEST",{message:"Access token not found"});let Y=await W.getUserInfo({...X,accessToken:X.accessToken});return $.json(Y)}),gb=uZ(($,J,W)=>{if(Array.isArray($[J])&&Array.isArray(W))return $[J]=W,!0});function fb($,J){let W={};for(let[X,Y]of Object.entries($))W[X]=async(U)=>{let Z=await J,H={...U,context:{...Z,returned:void 0,responseHeaders:void 0,session:null},path:Y.path,headers:U?.headers?new Headers(U?.headers):void 0},{beforeHooks:G,afterHooks:z}=j40(Z),w=await R40(H,G);if("context"in w&&w.context&&typeof w.context==="object"){let{headers:F,...M}=w.context;if(F)F.forEach((A,I)=>{H.headers.set(I,A)});H=gb(M,H)}else if(w)return U?.asResponse?q9(w,{headers:U?.headers}):U?.returnHeaders?{headers:U?.headers,response:w}:w;H.asResponse=!1,H.returnHeaders=!0;let D=await Y(H).catch((F)=>{if(F instanceof p)return{response:F,headers:F.headers?new Headers(F.headers):null};throw F});if(D&&D instanceof Response)return D;H.context.returned=D.response,H.context.responseHeaders=D.headers;let K=await S40(H,z);if(K.response)D.response=K.response;if(D.response instanceof p&&d2(Z.logger.level,"debug"))D.response.stack=D.response.errorStack;if(D.response instanceof p&&!U?.asResponse)throw D.response;return U?.asResponse?q9(D.response,{headers:D.headers}):U?.returnHeaders?{headers:D.headers,response:D.response}:D.response},W[X].path=Y.path,W[X].options=Y.options;return W}async function R40($,J){let W={};for(let X of J)if(X.matcher($)){let Y=await X.handler({...$,returnHeaders:!1}).catch((U)=>{if(U instanceof p&&d2($.context.logger.level,"debug"))U.stack=U.errorStack;throw U});if(Y&&typeof Y==="object"){if("context"in Y&&typeof Y.context==="object"){let{headers:U,...Z}=Y.context;if(U instanceof Headers)if(W.headers)U.forEach((H,G)=>{W.headers?.set(G,H)});else W.headers=U;W=gb(Z,W);continue}return Y}}return{context:W}}async function S40($,J){for(let W of J)if(W.matcher($)){let X=await W.handler($).catch((Y)=>{if(Y instanceof p){if(d2($.context.logger.level,"debug"))Y.stack=Y.errorStack;return{response:Y,headers:Y.headers?new Headers(Y.headers):null}}throw Y});if(X.headers)X.headers.forEach((Y,U)=>{if(!$.context.responseHeaders)$.context.responseHeaders=new Headers({[U]:Y});else if(U.toLowerCase()==="set-cookie")$.context.responseHeaders.append(U,Y);else $.context.responseHeaders.set(U,Y)});if(X.response)$.context.returned=X.response}return{response:$.context.returned,headers:$.context.responseHeaders}}function j40($){let J=$.options.plugins||[],W=[],X=[];if($.options.hooks?.before)W.push({matcher:()=>!0,handler:$.options.hooks.before});if($.options.hooks?.after)X.push({matcher:()=>!0,handler:$.options.hooks.after});let Y=J.map((Z)=>{if(Z.hooks?.before)return Z.hooks.before}).filter((Z)=>Z!==void 0).flat(),U=J.map((Z)=>{if(Z.hooks?.after)return Z.hooks.after}).filter((Z)=>Z!==void 0).flat();return Y.length&&W.push(...Y),U.length&&X.push(...U),{beforeHooks:W,afterHooks:X}}var aw=new WeakMap;function mb($,J){let W=J.fields,X={};for(let Y in $){let U=W[Y];if(!U){X[Y]=$[Y];continue}if(U.returned===!1)continue;X[Y]=$[Y]}return X}function __($,J){if(!aw.has($))aw.set($,new Map);let W=aw.get($);if(W.has(J))return W.get(J);let X={...J==="user"?$.user?.additionalFields:{},...J==="session"?$.session?.additionalFields:{}};for(let Y of $.plugins||[])if(Y.schema&&Y.schema[J])X={...X,...Y.schema[J].fields};return aw.get($).set(J,X),X}function N_($,J){let W=__($,"user");return mb(J,{fields:W})}function ow($,J){let W=__($,"session");return mb(J,{fields:W})}function k40($,J){let W=J.action||"create",X=J.fields,Y=Object.assign(Object.create(null),null);for(let U in X){if(U in $){if(X[U].input===!1){if(X[U].defaultValue!==void 0){Y[U]=X[U].defaultValue;continue}if(Y[U])throw new p("BAD_REQUEST",{message:`${U} is not allowed to be set`});continue}if(X[U].validator?.input&&$[U]!==void 0){Y[U]=X[U].validator.input.parse($[U]);continue}if(X[U].transform?.input&&$[U]!==void 0){Y[U]=X[U].transform?.input($[U]);continue}Y[U]=$[U];continue}if(X[U].defaultValue!==void 0&&W==="create"){Y[U]=X[U].defaultValue;continue}if(X[U].required&&W==="create")throw new p("BAD_REQUEST",{message:`${U} is required`})}return Y}function yb($,J={},W){let X=__($,"user");return k40(J,{fields:X,action:W})}function sw($,J){if(J.advanced?.ipAddress?.disableIpTracking)return null;if(p2())return"127.0.0.1";if(aW)return"127.0.0.1";let W="headers"in $?$.headers:$,X=["x-forwarded-for"],Y=J.advanced?.ipAddress?.ipAddressHeaders||X;for(let U of Y){let Z="get"in W?W.get(U):W[U];if(typeof Z==="string"){let H=Z.split(",")[0].trim();if(v40(H))return H}}return null}function v40($){if(cU.ipv4().safeParse($).success)return!0;if(cU.ipv6().safeParse($).success)return!0;return!1}var C40=()=>l0("/sign-up/email",{method:"POST",body:LX(a(),mU()),metadata:{$Infer:{body:{}},openapi:{description:"Sign up a user using email and password",requestBody:{content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"The name of the user"},email:{type:"string",description:"The email of the user"},password:{type:"string",description:"The password of the user"},image:{type:"string",description:"The profile image URL of the user"},callbackURL:{type:"string",description:"The URL to use for email verification callback"},rememberMe:{type:"boolean",description:"If this is false, the session will not be remembered. Default is `true`."}},required:["name","email","password"]}}}},responses:{"200":{description:"Successfully created user",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",nullable:!0,description:"Authentication token for the session"},user:{type:"object",properties:{id:{type:"string",description:"The unique identifier of the user"},email:{type:"string",format:"email",description:"The email address of the user"},name:{type:"string",description:"The name of the user"},image:{type:"string",format:"uri",nullable:!0,description:"The profile image URL of the user"},emailVerified:{type:"boolean",description:"Whether the email has been verified"},createdAt:{type:"string",format:"date-time",description:"When the user was created"},updatedAt:{type:"string",format:"date-time",description:"When the user was last updated"}},required:["id","email","name","emailVerified","createdAt","updatedAt"]}},required:["user"]}}}},"422":{description:"Unprocessable Entity. User already exists or failed to create user.",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}}}}}}},async($)=>{if(!$.context.options.emailAndPassword?.enabled||$.context.options.emailAndPassword?.disableSignUp)throw new p("BAD_REQUEST",{message:"Email and password sign up is not enabled"});let J=$.body,{name:W,email:X,password:Y,image:U,callbackURL:Z,rememberMe:H,...G}=J;if(!R7().safeParse(X).success)throw new p("BAD_REQUEST",{message:E0.INVALID_EMAIL});let w=$.context.password.config.minPasswordLength;if(Y.length<w)throw $.context.logger.error("Password is too short"),new p("BAD_REQUEST",{message:E0.PASSWORD_TOO_SHORT});let D=$.context.password.config.maxPasswordLength;if(Y.length>D)throw $.context.logger.error("Password is too long"),new p("BAD_REQUEST",{message:E0.PASSWORD_TOO_LONG});if((await $.context.internalAdapter.findUserByEmail(X))?.user)throw $.context.logger.info(`Sign-up attempt for existing email: ${X}`),new p("UNPROCESSABLE_ENTITY",{message:E0.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL});let O=await $.context.password.hash(Y),F;try{let A=yb($.context.options,G,"create");if(F=await $.context.internalAdapter.createUser({email:X.toLowerCase(),name:W,image:U,...A,emailVerified:!1},$),!F)throw new p("BAD_REQUEST",{message:E0.FAILED_TO_CREATE_USER})}catch(A){if(aW)$.context.logger.error("Failed to create user",A);if(A instanceof p)throw A;throw $.context.logger?.error("Failed to create user",A),new p("UNPROCESSABLE_ENTITY",{message:E0.FAILED_TO_CREATE_USER,details:A})}if(!F)throw new p("UNPROCESSABLE_ENTITY",{message:E0.FAILED_TO_CREATE_USER});if(await $.context.internalAdapter.linkAccount({userId:F.id,providerId:"credential",accountId:F.id,password:O},$),$.context.options.emailVerification?.sendOnSignUp||$.context.options.emailAndPassword.requireEmailVerification){let A=await VJ($.context.secret,F.email,void 0,$.context.options.emailVerification?.expiresIn),I=`${$.context.baseURL}/verify-email?token=${A}&callbackURL=${J.callbackURL||"/"}`,P=$.request?[{user:F,url:I,token:A},$.request]:[{user:F,url:I,token:A}];await $.context.options.emailVerification?.sendVerificationEmail?.(...P)}if($.context.options.emailAndPassword.autoSignIn===!1||$.context.options.emailAndPassword.requireEmailVerification)return $.json({token:null,user:{id:F.id,email:F.email,name:F.name,image:F.image,emailVerified:F.emailVerified,createdAt:F.createdAt,updatedAt:F.updatedAt}});let M=await $.context.internalAdapter.createSession(F.id,$,H===!1);if(!M)throw new p("BAD_REQUEST",{message:E0.FAILED_TO_CREATE_SESSION});return await y$($,{session:M,user:F},H===!1),$.json({token:M.token,user:{id:F.id,email:F.email,name:F.name,image:F.image,emailVerified:F.emailVerified,createdAt:F.createdAt,updatedAt:F.updatedAt}})});function T40($,J,W){let X=Date.now(),Y=J*1000;return X-W.lastRequest<Y&&W.count>=$}function q40($){return new Response(JSON.stringify({message:"Too many requests. Please try again later."}),{status:429,statusText:"Too Many Requests",headers:{"X-Retry-After":$.toString()}})}function h40($,J){let W=Date.now(),X=J*1000;return Math.ceil(($+X-W)/1000)}function x40($){let W=$.adapter;return{get:async(X)=>{let U=(await W.findMany({model:"rateLimit",where:[{field:"key",value:X}]}))[0];if(typeof U?.lastRequest==="bigint")U.lastRequest=Number(U.lastRequest);return U},set:async(X,Y,U)=>{try{if(U)await W.updateMany({model:"rateLimit",where:[{field:"key",value:X}],update:{count:Y.count,lastRequest:Y.lastRequest}});else await W.create({model:"rateLimit",data:{key:X,count:Y.count,lastRequest:Y.lastRequest}})}catch(Z){$.logger.error("Error setting rate limit",Z)}}}}var cb=new Map;function b40($,J){if($.options.rateLimit?.customStorage)return $.options.rateLimit.customStorage;let W=$.rateLimit.storage;if(W==="secondary-storage")return{get:async(X)=>{let Y=await $.options.secondaryStorage?.get(X);return Y?U4(Y):void 0},set:async(X,Y,U)=>{let Z=J?.window??$.options.rateLimit?.window??10;await $.options.secondaryStorage?.set?.(X,JSON.stringify(Y),Z)}};else if(W==="memory")return{async get(X){return cb.get(X)},async set(X,Y,U){cb.set(X,Y)}};return x40($)}async function g40($,J){if(!J.rateLimit.enabled)return;let W=new URL($.url).pathname.replace(J.options.basePath||"/api/auth",""),X=J.rateLimit.window,Y=J.rateLimit.max,U=sw($,J.options);if(!U)return;let Z=U+W,G=f40().find((K)=>K.pathMatcher(W));if(G)X=G.window,Y=G.max;for(let K of J.options.plugins||[])if(K.rateLimit){let O=K.rateLimit.find((F)=>F.pathMatcher(W));if(O){X=O.window,Y=O.max;break}}if(J.rateLimit.customRules){let K=Object.keys(J.rateLimit.customRules).find((O)=>{if(O.includes("*"))return FY(O)(W);return O===W});if(K){let O=J.rateLimit.customRules[K],F=typeof O==="function"?await O($):O;if(F)X=F.window,Y=F.max;if(F===!1)return}}let z=b40(J,{window:X}),w=await z.get(Z),D=Date.now();if(!w)await z.set(Z,{key:Z,count:1,lastRequest:D});else{let K=D-w.lastRequest;if(T40(Y,X,w)){let O=h40(w.lastRequest,X);return q40(O)}else if(K>X*1000)await z.set(Z,{...w,count:1,lastRequest:D},!0);else await z.set(Z,{...w,count:w.count+1,lastRequest:D},!0)}}function f40(){return[{pathMatcher(J){return J.startsWith("/sign-in")||J.startsWith("/sign-up")||J.startsWith("/change-password")||J.startsWith("/change-email")},window:10,max:3}]}function ub($,J){let W=new Map;$.plugins?.forEach((Y)=>{if(Y.endpoints){for(let[U,Z]of Object.entries(Y.endpoints))if(Z&&"path"in Z){let H=Z.path,G=[];if(Z.options&&"method"in Z.options){if(Array.isArray(Z.options.method))G=Z.options.method;else if(typeof Z.options.method==="string")G=[Z.options.method]}if(G.length===0)G=["*"];if(!W.has(H))W.set(H,[]);W.get(H).push({pluginId:Y.id,endpointKey:U,methods:G})}}});let X=[];for(let[Y,U]of W.entries())if(U.length>1){let Z=new Map,H=!1;for(let G of U)for(let z of G.methods){if(!Z.has(z))Z.set(z,[]);if(Z.get(z).push(G.pluginId),Z.get(z).length>1)H=!0;if(z==="*"&&U.length>1)H=!0;else if(z!=="*"&&Z.has("*"))H=!0}if(H){let G=[...new Set(U.map((w)=>w.pluginId))],z=[];for(let[w,D]of Z.entries())if(D.length>1||w==="*"&&U.length>1||w!=="*"&&Z.has("*"))z.push(w);X.push({path:Y,plugins:G,conflictingMethods:z})}}if(X.length>0){let Y=X.map((U)=>`  - "${U.path}" [${U.conflictingMethods.join(", ")}] used by plugins: ${U.plugins.join(", ")}`).join(`
`);J.error(`Endpoint path conflicts detected! Multiple plugins are trying to use the same endpoint paths with conflicting HTTP methods:
${Y}

To resolve this, you can:
	1. Use only one of the conflicting plugins
	2. Configure the plugins to use different paths (if supported)
	3. Ensure plugins use different HTTP methods for the same path
`)}}function B_($,J){let W=J.plugins?.reduce((H,G)=>{return{...H,...G.endpoints}},{})??{},X=J.plugins?.map((H)=>H.middlewares?.map((G)=>{let z=async(w)=>{let D=await $;return G.middleware({...w,context:{...D,...w.context}})};return z.options=G.middleware.options,{path:G.path,middleware:z}})).filter((H)=>H!==void 0).flat()||[],U={...{signInSocial:Vb,callbackOAuth:Ab,getSession:sA(),signOut:Ib,signUpEmail:C40(),signInEmail:Qb,forgetPassword:Pb,resetPassword:Nb,verifyEmail:Fb,sendVerificationEmail:Ob,changeEmail:kb,changePassword:Rb,setPassword:Sb,updateUser:Bb(),deleteUser:jb,forgetPasswordCallback:_b,requestPasswordReset:Lb,requestPasswordResetCallback:I_,listSessions:dT(),revokeSession:lT,revokeSessions:rT,revokeOtherSessions:nT,linkSocialAccount:qb,listUserAccounts:Tb,deleteUserCallback:L_,unlinkAccount:hb,refreshToken:xb,getAccessToken:P_,accountInfo:bb},...W,ok:Cb,error:vb};return{api:fb(U,$),middlewares:X}}var pb=($,J)=>{let{api:W,middlewares:X}=B_($,J),Y=new URL($.baseURL).pathname;return PC(W,{routerContext:$,openapi:{disabled:!0},basePath:Y,routerMiddleware:[{path:"/**",middleware:Kb},...X],async onRequest(U){let Z=$.options.disabledPaths||[],H=new URL(U.url).pathname.replace(Y,"");if(Z.includes(H))return new Response("Not Found",{status:404});for(let G of $.options.plugins||[])if(G.onRequest){let z=await G.onRequest(U,$);if(z&&"response"in z)return z.response}return g40(U,$)},async onResponse(U){for(let Z of $.options.plugins||[])if(Z.onResponse){let H=await Z.onResponse(U,$);if(H)return H.response}return U},onError(U){if(U instanceof p&&U.status==="FOUND")return;if(J.onAPIError?.throw)throw U;if(J.onAPIError?.onError){J.onAPIError.onError(U,$);return}let Z=J.logger?.level,H=Z==="error"||Z==="warn"||Z==="debug"?_0:void 0;if(J.logger?.disabled!==!0){if(U&&typeof U==="object"&&"message"in U&&typeof U.message==="string"){if(U.message.includes("no column")||U.message.includes("column")||U.message.includes("relation")||U.message.includes("table")||U.message.includes("does not exist")){$.logger?.error(U.message);return}}if(U instanceof p){if(U.status==="INTERNAL_SERVER_ERROR")$.logger.error(U.status,U);H?.error(U.message)}else $.logger?.error(U&&typeof U==="object"&&"name"in U?U.name:"",U)}}})};var QJ=($)=>{let J=($.plugins??[]).reduce((z,w)=>{let D=w.schema;if(!D)return z;for(let[K,O]of Object.entries(D))z[K]={fields:{...z[K]?.fields,...O.fields},modelName:O.modelName||K};return z},{}),W=$.rateLimit?.storage==="database",X={rateLimit:{modelName:$.rateLimit?.modelName||"rateLimit",fields:{key:{type:"string",fieldName:$.rateLimit?.fields?.key||"key"},count:{type:"number",fieldName:$.rateLimit?.fields?.count||"count"},lastRequest:{type:"number",bigint:!0,fieldName:$.rateLimit?.fields?.lastRequest||"lastRequest"}}}},{user:Y,session:U,account:Z,...H}=J,G={session:{modelName:$.session?.modelName||"session",fields:{expiresAt:{type:"date",required:!0,fieldName:$.session?.fields?.expiresAt||"expiresAt"},token:{type:"string",required:!0,fieldName:$.session?.fields?.token||"token",unique:!0},createdAt:{type:"date",required:!0,fieldName:$.session?.fields?.createdAt||"createdAt",defaultValue:()=>new Date},updatedAt:{type:"date",required:!0,fieldName:$.session?.fields?.updatedAt||"updatedAt",onUpdate:()=>new Date},ipAddress:{type:"string",required:!1,fieldName:$.session?.fields?.ipAddress||"ipAddress"},userAgent:{type:"string",required:!1,fieldName:$.session?.fields?.userAgent||"userAgent"},userId:{type:"string",fieldName:$.session?.fields?.userId||"userId",references:{model:$.user?.modelName||"user",field:"id",onDelete:"cascade"},required:!0},...U?.fields,...$.session?.additionalFields},order:2}};return{user:{modelName:$.user?.modelName||"user",fields:{name:{type:"string",required:!0,fieldName:$.user?.fields?.name||"name",sortable:!0},email:{type:"string",unique:!0,required:!0,fieldName:$.user?.fields?.email||"email",sortable:!0},emailVerified:{type:"boolean",defaultValue:!1,required:!0,fieldName:$.user?.fields?.emailVerified||"emailVerified"},image:{type:"string",required:!1,fieldName:$.user?.fields?.image||"image"},createdAt:{type:"date",defaultValue:()=>new Date,required:!0,fieldName:$.user?.fields?.createdAt||"createdAt"},updatedAt:{type:"date",defaultValue:()=>new Date,onUpdate:()=>new Date,required:!0,fieldName:$.user?.fields?.updatedAt||"updatedAt"},...Y?.fields,...$.user?.additionalFields},order:1},...!$.secondaryStorage||$.session?.storeSessionInDatabase?G:{},account:{modelName:$.account?.modelName||"account",fields:{accountId:{type:"string",required:!0,fieldName:$.account?.fields?.accountId||"accountId"},providerId:{type:"string",required:!0,fieldName:$.account?.fields?.providerId||"providerId"},userId:{type:"string",references:{model:$.user?.modelName||"user",field:"id",onDelete:"cascade"},required:!0,fieldName:$.account?.fields?.userId||"userId"},accessToken:{type:"string",required:!1,fieldName:$.account?.fields?.accessToken||"accessToken"},refreshToken:{type:"string",required:!1,fieldName:$.account?.fields?.refreshToken||"refreshToken"},idToken:{type:"string",required:!1,fieldName:$.account?.fields?.idToken||"idToken"},accessTokenExpiresAt:{type:"date",required:!1,fieldName:$.account?.fields?.accessTokenExpiresAt||"accessTokenExpiresAt"},refreshTokenExpiresAt:{type:"date",required:!1,fieldName:$.account?.fields?.refreshTokenExpiresAt||"refreshTokenExpiresAt"},scope:{type:"string",required:!1,fieldName:$.account?.fields?.scope||"scope"},password:{type:"string",required:!1,fieldName:$.account?.fields?.password||"password"},createdAt:{type:"date",required:!0,fieldName:$.account?.fields?.createdAt||"createdAt",defaultValue:()=>new Date},updatedAt:{type:"date",required:!0,fieldName:$.account?.fields?.updatedAt||"updatedAt",onUpdate:()=>new Date},...Z?.fields,...$.account?.additionalFields},order:3},verification:{modelName:$.verification?.modelName||"verification",fields:{identifier:{type:"string",required:!0,fieldName:$.verification?.fields?.identifier||"identifier"},value:{type:"string",required:!0,fieldName:$.verification?.fields?.value||"value"},expiresAt:{type:"date",required:!0,fieldName:$.verification?.fields?.expiresAt||"expiresAt"},createdAt:{type:"date",required:!0,defaultValue:()=>new Date,fieldName:$.verification?.fields?.createdAt||"createdAt"},updatedAt:{type:"date",required:!0,defaultValue:()=>new Date,onUpdate:()=>new Date,fieldName:$.verification?.fields?.updatedAt||"updatedAt"}},order:4},...H,...W?X:{}}};cZ();function m40($,J,W){if(W==="update"){if($===void 0&&J.onUpdate!==void 0){if(typeof J.onUpdate==="function")return J.onUpdate();return J.onUpdate}return $}if($===void 0||$===null){if(J.defaultValue!==void 0){if(typeof J.defaultValue==="function")return J.defaultValue();return J.defaultValue}}return $}var ew=[],z$=-1,y40=($)=>(J)=>J($),AJ=({adapter:$,config:J})=>(W)=>{let X=Math.random().toString(36).substring(2,15),Y={...J,supportsBooleans:J.supportsBooleans??!0,supportsDates:J.supportsDates??!0,supportsJSON:J.supportsJSON??!1,adapterName:J.adapterName??J.adapterId,supportsNumericIds:J.supportsNumericIds??!0,transaction:J.transaction??!1,disableTransformInput:J.disableTransformInput??!1,disableTransformOutput:J.disableTransformOutput??!1};if(W.advanced?.database?.useNumberId===!0&&Y.supportsNumericIds===!1)throw Error(`[${Y.adapterName}] Your database or database adapter does not support numeric ids. Please disable "useNumberId" in your config.`);let U=QJ(W),Z=({field:Q,model:N})=>{if(Q==="id"||Q==="_id")return"id";let _=H(N),L=U[_]?.fields[Q];if(!L){let R=Object.entries(U[_].fields).find(([S,k])=>k.fieldName===Q);if(R)L=R[1],Q=R[0]}if(!L)throw w(`Field ${Q} not found in model ${_}`),w("Schema:",U),Error(`Field ${Q} not found in model ${_}`);return Q},H=(Q)=>{if(Y.usePlural&&Q.charAt(Q.length-1)==="s"){let _=Q.slice(0,-1),L=U[_]?_:void 0;if(!L)L=Object.entries(U).find(([R,S])=>S.modelName===_)?.[0];if(L)return L}let N=U[Q]?Q:void 0;if(!N)N=Object.entries(U).find(([_,L])=>L.modelName===Q)?.[0];if(!N)throw w(`Model "${Q}" not found in schema`),w("Schema:",U),Error(`Model "${Q}" not found in schema`);return N},G=(Q)=>{let N=H(Q),_=Y&&Y.usePlural;if(U&&U[N]&&U[N].modelName!==Q)return _?`${U[N].modelName}s`:U[N].modelName;return _?`${Q}s`:Q};function z({model:Q,field:N}){let _=H(Q),L=Z({model:_,field:N});return U[_]?.fields[L]?.fieldName||L}let w=(...Q)=>{if(Y.debugLogs===!0||typeof Y.debugLogs==="object"){if(typeof Y.debugLogs==="object"&&"isRunningAdapterTests"in Y.debugLogs){if(Y.debugLogs.isRunningAdapterTests)Q.shift(),ew.push({instance:X,args:Q});return}if(typeof Y.debugLogs==="object"&&Y.debugLogs.logCondition&&!Y.debugLogs.logCondition?.())return;if(typeof Q[0]==="object"&&"method"in Q[0]){let N=Q.shift().method;if(typeof Y.debugLogs==="object"){if(N==="create"&&!Y.debugLogs.create)return;else if(N==="update"&&!Y.debugLogs.update)return;else if(N==="updateMany"&&!Y.debugLogs.updateMany)return;else if(N==="findOne"&&!Y.debugLogs.findOne)return;else if(N==="findMany"&&!Y.debugLogs.findMany)return;else if(N==="delete"&&!Y.debugLogs.delete)return;else if(N==="deleteMany"&&!Y.debugLogs.deleteMany)return;else if(N==="count"&&!Y.debugLogs.count)return}_0.info(`[${Y.adapterName}]`,...Q)}else _0.info(`[${Y.adapterName}]`,...Q)}},D=({customModelName:Q,forceAllowId:N})=>{let _=!Y.disableIdGeneration&&!W.advanced?.database?.useNumberId&&!N,L=H(Q??"id");return{type:W.advanced?.database?.useNumberId?"number":"string",required:_?!0:!1,..._?{defaultValue(){if(Y.disableIdGeneration)return;let R=W.advanced?.database?.useNumberId,S=W.advanced?.database?.generateId;if(W.advanced?.generateId!==void 0)_0.warn("Your Better Auth config includes advanced.generateId which is deprecated. Please use advanced.database.generateId instead. This will be removed in future releases."),S=W.advanced?.generateId;if(S===!1||R)return;if(S)return S({model:L});if(Y.customIdGenerator)return Y.customIdGenerator({model:L});return s8()}}:{}}},K=({model:Q,field:N})=>{let _=H(Q),L=Z({field:N,model:_}),R=U[_].fields;return R.id=D({customModelName:_}),R[L]},O=async(Q,N,_,L)=>{let R={},S=U[N].fields,k=Y.mapKeysTransformInput??{};if(!Y.disableIdGeneration&&!W.advanced?.database?.useNumberId)S.id=D({customModelName:N,forceAllowId:L&&"id"in Q});for(let T in S){let q=Q[T],h=S[T],x=k[T]||S[T].fieldName||T;if(q===void 0&&(h.defaultValue===void 0&&!h.transform?.input&&!(_==="update"&&h.onUpdate)||_==="update"&&!h.onUpdate))continue;let b=m40(q,h,_);if(h.transform?.input)b=await h.transform.input(b);if(h.references?.field==="id"&&W.advanced?.database?.useNumberId)if(Array.isArray(b))b=b.map((r)=>r!==null?Number(r):null);else b=b!==null?Number(b):null;else if(Y.supportsJSON===!1&&typeof b==="object"&&h.type==="json")b=JSON.stringify(b);else if(Y.supportsDates===!1&&b instanceof Date&&h.type==="date")b=b.toISOString();else if(Y.supportsBooleans===!1&&typeof b==="boolean")b=b?1:0;if(Y.customTransformInput)b=Y.customTransformInput({data:b,action:_,field:x,fieldAttributes:h,model:N,schema:U,options:W});if(b!==void 0)R[x]=b}return R},F=async(Q,N,_=[])=>{if(!Q)return null;let L=Y.mapKeysTransformOutput??{},R={},S=U[N].fields,k=Object.entries(L).find(([T,q])=>q==="id")?.[0];S[k??"id"]={type:W.advanced?.database?.useNumberId?"number":"string"};for(let T in S){if(_.length&&!_.includes(T))continue;let q=S[T];if(q){let h=q.fieldName||T,x=Q[Object.entries(L).find(([r,d])=>d===h)?.[0]||h];if(q.transform?.output)x=await q.transform.output(x);let b=L[T]||T;if(h==="id"||q.references?.field==="id"){if(typeof x<"u"&&x!==null)x=String(x)}else if(Y.supportsJSON===!1&&typeof x==="string"&&q.type==="json")x=U4(x);else if(Y.supportsDates===!1&&typeof x==="string"&&q.type==="date")x=new Date(x);else if(Y.supportsBooleans===!1&&typeof x==="number"&&q.type==="boolean")x=x===1;if(Y.customTransformOutput)x=Y.customTransformOutput({data:x,field:b,fieldAttributes:q,select:_,model:N,schema:U,options:W});R[b]=x}}return R},M=({model:Q,where:N})=>{if(!N)return;let _=Y.mapKeysTransformInput??{};return N.map((L)=>{let{field:R,value:S,operator:k="eq",connector:T="AND"}=L;if(k==="in"){if(!Array.isArray(S))throw Error("Value must be an array")}let q=H(Q),h=Z({field:R,model:Q}),x=_[h]||z({field:h,model:q}),b=K({field:h,model:q});if(h==="id"||b.references?.field==="id"){if(W.advanced?.database?.useNumberId){if(Array.isArray(S))return{operator:k,connector:T,field:x,value:S.map(Number)};return{operator:k,connector:T,field:x,value:Number(S)}}}return{operator:k,connector:T,field:x,value:S}})},A=$({options:W,schema:U,debugLog:w,getFieldName:z,getModelName:G,getDefaultModelName:H,getDefaultFieldName:Z,getFieldAttributes:K,transformInput:O,transformOutput:F,transformWhereClause:M}),I=null,P={transaction:async(Q)=>{if(!I)if(!Y.transaction){if(typeof Y.debugLogs==="object"&&"isRunningAdapterTests"in Y.debugLogs&&Y.debugLogs.isRunningAdapterTests);else _0.warn(`[${Y.adapterName}] - Transactions are not supported. Executing operations sequentially.`);I=y40(P)}else _0.debug(`[${Y.adapterName}] - Using provided transaction implementation.`),I=Y.transaction;return I(Q)},create:async({data:Q,model:N,select:_,forceAllowId:L=!1})=>{z$++;let R=z$,S=G(N);if(N=H(N),"id"in Q&&!L){_0.warn(`[${Y.adapterName}] - You are trying to create a record with an id. This is not allowed as we handle id generation for you, unless you pass in the \`forceAllowId\` parameter. The id will be ignored.`);let x=Error().stack?.split(`
`).filter((b,r)=>r!==1).join(`
`).replace("Error:","Create method with `id` being called at:");console.log(x),Q.id=void 0}w({method:"create"},`${p1(R)} ${d1(1,4)}`,`${l1("create")} ${B4("Unsafe Input")}:`,{model:S,data:Q});let k=Q;if(!Y.disableTransformInput)k=await O(Q,N,"create",L);w({method:"create"},`${p1(R)} ${d1(2,4)}`,`${l1("create")} ${B4("Parsed Input")}:`,{model:S,data:k});let T=await A.create({data:k,model:S});w({method:"create"},`${p1(R)} ${d1(3,4)}`,`${l1("create")} ${B4("DB Result")}:`,{model:S,res:T});let q=T;if(!Y.disableTransformOutput)q=await F(T,N,_);return w({method:"create"},`${p1(R)} ${d1(4,4)}`,`${l1("create")} ${B4("Parsed Result")}:`,{model:S,data:q}),q},update:async({model:Q,where:N,update:_})=>{z$++;let L=z$;Q=H(Q);let R=G(Q),S=M({model:Q,where:N});w({method:"update"},`${p1(L)} ${d1(1,4)}`,`${l1("update")} ${B4("Unsafe Input")}:`,{model:R,data:_});let k=_;if(!Y.disableTransformInput)k=await O(_,Q,"update");w({method:"update"},`${p1(L)} ${d1(2,4)}`,`${l1("update")} ${B4("Parsed Input")}:`,{model:R,data:k});let T=await A.update({model:R,where:S,update:k});w({method:"update"},`${p1(L)} ${d1(3,4)}`,`${l1("update")} ${B4("DB Result")}:`,{model:R,data:T});let q=T;if(!Y.disableTransformOutput)q=await F(T,Q);return w({method:"update"},`${p1(L)} ${d1(4,4)}`,`${l1("update")} ${B4("Parsed Result")}:`,{model:R,data:q}),q},updateMany:async({model:Q,where:N,update:_})=>{z$++;let L=z$,R=G(Q),S=M({model:Q,where:N});Q=H(Q),w({method:"updateMany"},`${p1(L)} ${d1(1,4)}`,`${l1("updateMany")} ${B4("Unsafe Input")}:`,{model:R,data:_});let k=_;if(!Y.disableTransformInput)k=await O(_,Q,"update");w({method:"updateMany"},`${p1(L)} ${d1(2,4)}`,`${l1("updateMany")} ${B4("Parsed Input")}:`,{model:R,data:k});let T=await A.updateMany({model:R,where:S,update:k});return w({method:"updateMany"},`${p1(L)} ${d1(3,4)}`,`${l1("updateMany")} ${B4("DB Result")}:`,{model:R,data:T}),w({method:"updateMany"},`${p1(L)} ${d1(4,4)}`,`${l1("updateMany")} ${B4("Parsed Result")}:`,{model:R,data:T}),T},findOne:async({model:Q,where:N,select:_})=>{z$++;let L=z$,R=G(Q),S=M({model:Q,where:N});Q=H(Q),w({method:"findOne"},`${p1(L)} ${d1(1,3)}`,`${l1("findOne")}:`,{model:R,where:S,select:_});let k=await A.findOne({model:R,where:S,select:_});w({method:"findOne"},`${p1(L)} ${d1(2,3)}`,`${l1("findOne")} ${B4("DB Result")}:`,{model:R,data:k});let T=k;if(!Y.disableTransformOutput)T=await F(k,Q,_);return w({method:"findOne"},`${p1(L)} ${d1(3,3)}`,`${l1("findOne")} ${B4("Parsed Result")}:`,{model:R,data:T}),T},findMany:async({model:Q,where:N,limit:_,sortBy:L,offset:R})=>{z$++;let S=z$,k=_??W.advanced?.database?.defaultFindManyLimit??100,T=G(Q),q=M({model:Q,where:N});Q=H(Q),w({method:"findMany"},`${p1(S)} ${d1(1,3)}`,`${l1("findMany")}:`,{model:T,where:q,limit:k,sortBy:L,offset:R});let h=await A.findMany({model:T,where:q,limit:k,sortBy:L,offset:R});w({method:"findMany"},`${p1(S)} ${d1(2,3)}`,`${l1("findMany")} ${B4("DB Result")}:`,{model:T,data:h});let x=h;if(!Y.disableTransformOutput)x=await Promise.all(h.map(async(b)=>await F(b,Q)));return w({method:"findMany"},`${p1(S)} ${d1(3,3)}`,`${l1("findMany")} ${B4("Parsed Result")}:`,{model:T,data:x}),x},delete:async({model:Q,where:N})=>{z$++;let _=z$,L=G(Q),R=M({model:Q,where:N});Q=H(Q),w({method:"delete"},`${p1(_)} ${d1(1,2)}`,`${l1("delete")}:`,{model:L,where:R}),await A.delete({model:L,where:R}),w({method:"delete"},`${p1(_)} ${d1(2,2)}`,`${l1("delete")} ${B4("DB Result")}:`,{model:L})},deleteMany:async({model:Q,where:N})=>{z$++;let _=z$,L=G(Q),R=M({model:Q,where:N});Q=H(Q),w({method:"deleteMany"},`${p1(_)} ${d1(1,2)}`,`${l1("deleteMany")} ${B4("DeleteMany")}:`,{model:L,where:R});let S=await A.deleteMany({model:L,where:R});return w({method:"deleteMany"},`${p1(_)} ${d1(2,2)}`,`${l1("deleteMany")} ${B4("DB Result")}:`,{model:L,data:S}),S},count:async({model:Q,where:N})=>{z$++;let _=z$,L=G(Q),R=M({model:Q,where:N});Q=H(Q),w({method:"count"},`${p1(_)} ${d1(1,2)}`,`${l1("count")}:`,{model:L,where:R});let S=await A.count({model:L,where:R});return w({method:"count"},`${p1(_)} ${d1(2,2)}`,`${l1("count")}:`,{model:L,data:S}),S},createSchema:A.createSchema?async(Q,N)=>{let _=QJ(W);if(W.secondaryStorage&&!W.session?.storeSessionInDatabase)delete _.session;if(W.rateLimit&&W.rateLimit.storage==="database"&&(typeof W.rateLimit.enabled>"u"||W.rateLimit.enabled===!0))_.ratelimit={modelName:W.rateLimit.modelName??"ratelimit",fields:{key:{type:"string",unique:!0,required:!0,fieldName:W.rateLimit.fields?.key??"key"},count:{type:"number",required:!0,fieldName:W.rateLimit.fields?.count??"count"},lastRequest:{type:"number",required:!0,bigint:!0,defaultValue:()=>Date.now(),fieldName:W.rateLimit.fields?.lastRequest??"lastRequest"}}};return A.createSchema({file:N,tables:_})}:void 0,options:{adapterConfig:Y,...A.options??{}},id:Y.adapterId,...Y.debugLogs?.isRunningAdapterTests?{adapterTestDebugLogs:{resetDebugLogs(){ew=ew.filter((Q)=>Q.instance!==X)},printDebugLogs(){let Q="\u2500".repeat(80),N=ew.filter((L)=>L.instance===X);if(N.length===0)return;let _=N.reverse().map((L)=>{return L.args[0]=`
${L.args[0]}`,[...L.args,`
`]}).reduce((L,R)=>{return[...R,...L]},[`
${Q}`]);console.log(..._)}}}:{}};return P};function p1($){if(LF()<8)return`#${$}`;return`${O4.fg.magenta}#${$}${O4.reset}`}function d1($,J){return`${O4.bg.black}${O4.fg.yellow}[${$}/${J}]${O4.reset}`}function l1($){return`${O4.bright}${$}${O4.reset}`}function B4($){return`${O4.dim}(${$})${O4.reset}`}function $D($){if(!$)return null;if("dialect"in $)return $D($.dialect);if("createDriver"in $){if($ instanceof uw)return"sqlite";if($ instanceof dw)return"mysql";if($ instanceof lw)return"postgres";if($ instanceof w_)return"mssql"}if("aggregate"in $)return"sqlite";if("getConnection"in $)return"mysql";if("connect"in $)return"postgres";if("fileControl"in $)return"sqlite";if("open"in $&&"close"in $&&"prepare"in $)return"sqlite";return null}var h_=async($)=>{let J=$.database;if(!J)return{kysely:null,databaseType:null,transaction:void 0};if("db"in J)return{kysely:J.db,databaseType:J.type,transaction:J.transaction};if("dialect"in J)return{kysely:new z5({dialect:J.dialect}),databaseType:J.type,transaction:J.transaction};let W=void 0,X=$D(J);if("createDriver"in J)W=J;if("aggregate"in J&&!("createSession"in J))W=new uw({database:J});if("getConnection"in J)W=new dw(J);if("connect"in J)W=new lw({pool:J});if("fileControl"in J){let{BunSqliteDialect:Y}=await Promise.resolve().then(() => (ib(),nb));W=new Y({database:J})}if("createSession"in J&&typeof window>"u"){let Y=void 0;try{({DatabaseSync:Y}=await import("node:sqlite"))}catch(U){if(U!==null&&typeof U==="object"&&"code"in U&&U.code!=="ERR_UNKNOWN_BUILTIN_MODULE")throw U}if(Y&&J instanceof Y){let{NodeSqliteDialect:U}=await Promise.resolve().then(() => (eb(),sb));W=new U({database:J})}}return{kysely:W?new z5({dialect:W}):null,databaseType:X,transaction:void 0}},$g=($,J)=>{let W=null,X=(Z)=>{return({getFieldName:H,schema:G,getDefaultModelName:z})=>{let w=async(F,M,A,I)=>{let P;if(J?.type==="mysql"){await M.execute();let Q=F.id?"id":I.length>0&&I[0]?.field?I[0].field:"id";if(!F.id&&I.length===0)return P=await Z.selectFrom(A).selectAll().orderBy(H({model:A,field:Q}),"desc").limit(1).executeTakeFirst(),P;let N=F[Q]||I[0]?.value;return P=await Z.selectFrom(A).selectAll().orderBy(H({model:A,field:Q}),"desc").where(H({model:A,field:Q}),"=",N).limit(1).executeTakeFirst(),P}if(J?.type==="mssql")return P=await M.outputAll("inserted").executeTakeFirst(),P;return P=await M.returningAll().executeTakeFirst(),P};function D(F,M,A){if(A==="id")return F;let{type:I="sqlite"}=J||{},P=G[M]?.fields[A];if(!P)P=Object.values(G).find((Q)=>Q.modelName===M);if(P.type==="boolean"&&(I==="sqlite"||I==="mssql")&&F!==null&&F!==void 0)return F?1:0;if(P.type==="date"&&F&&F instanceof Date){if(I==="sqlite")return F.toISOString();return F}return F}function K(F){function M(A){for(let I in A){if(!Object.prototype.hasOwnProperty.call(A,I))continue;let P=A[I];if(P instanceof Date&&J?.type==="mysql");else if(typeof P==="object"&&P!==null)M(P)}}if(Array.isArray(F))for(let A=0;A<F.length;A++){let I=F[A];if(typeof I==="object"&&I!==null)M(I)}else if(typeof F==="object"&&F!==null)M(F);return F}function O(F,M){if(!M)return{and:null,or:null};let A={and:[],or:[]};return M.forEach((I)=>{let{field:P,value:Q,operator:N="=",connector:_="AND"}=I,L=H({model:F,field:P});Q=D(Q,F,P);let R=(S)=>{if(N.toLowerCase()==="in")return S(L,"in",Array.isArray(Q)?Q:[Q]);if(N.toLowerCase()==="not_in")return S(L,"not in",Array.isArray(Q)?Q:[Q]);if(N==="contains")return S(L,"like",`%${Q}%`);if(N==="starts_with")return S(L,"like",`${Q}%`);if(N==="ends_with")return S(L,"like",`%${Q}`);if(N==="eq")return S(L,"=",Q);if(N==="ne")return S(L,"<>",Q);if(N==="gt")return S(L,">",Q);if(N==="gte")return S(L,">=",Q);if(N==="lt")return S(L,"<",Q);if(N==="lte")return S(L,"<=",Q);return S(L,N,Q)};if(_==="OR")A.or.push(R);else A.and.push(R)}),{and:A.and.length?A.and:null,or:A.or.length?A.or:null}}return{async create({data:F,model:M}){let A=Z.insertInto(M).values(F),I=await w(F,A,M,[]);return K(I)},async findOne({model:F,where:M,select:A}){let{and:I,or:P}=O(F,M),Q=Z.selectFrom(F).selectAll();if(I)Q=Q.where((_)=>_.and(I.map((L)=>L(_))));if(P)Q=Q.where((_)=>_.or(P.map((L)=>L(_))));let N=await Q.executeTakeFirst();if(!N)return null;return K(N)},async findMany({model:F,where:M,limit:A,offset:I,sortBy:P}){let{and:Q,or:N}=O(F,M),_=Z.selectFrom(F);if(Q)_=_.where((R)=>R.and(Q.map((S)=>S(R))));if(N)_=_.where((R)=>R.or(N.map((S)=>S(R))));if(J?.type==="mssql"){if(!I)_=_.top(A||100)}else _=_.limit(A||100);if(P)_=_.orderBy(H({model:F,field:P.field}),P.direction);if(I)if(J?.type==="mssql"){if(!P)_=_.orderBy(H({model:F,field:"id"}));_=_.offset(I).fetch(A||100)}else _=_.offset(I);let L=await _.selectAll().execute();if(!L)return[];return K(L)},async update({model:F,where:M,update:A}){let{and:I,or:P}=O(F,M),Q=Z.updateTable(F).set(A);if(I)Q=Q.where((N)=>N.and(I.map((_)=>_(N))));if(P)Q=Q.where((N)=>N.or(P.map((_)=>_(N))));return K(await w(A,Q,F,M))},async updateMany({model:F,where:M,update:A}){let{and:I,or:P}=O(F,M),Q=Z.updateTable(F).set(A);if(I)Q=Q.where((_)=>_.and(I.map((L)=>L(_))));if(P)Q=Q.where((_)=>_.or(P.map((L)=>L(_))));return(await Q.execute()).length},async count({model:F,where:M}){let{and:A,or:I}=O(F,M),P=Z.selectFrom(F).select(Z.fn.count("id").as("count"));if(A)P=P.where((N)=>N.and(A.map((_)=>_(N))));if(I)P=P.where((N)=>N.or(I.map((_)=>_(N))));let Q=await P.execute();if(typeof Q[0].count==="number")return Q[0].count;if(typeof Q[0].count==="bigint")return Number(Q[0].count);return parseInt(Q[0].count)},async delete({model:F,where:M}){let{and:A,or:I}=O(F,M),P=Z.deleteFrom(F);if(A)P=P.where((Q)=>Q.and(A.map((N)=>N(Q))));if(I)P=P.where((Q)=>Q.or(I.map((N)=>N(Q))));await P.execute()},async deleteMany({model:F,where:M}){let{and:A,or:I}=O(F,M),P=Z.deleteFrom(F);if(A)P=P.where((Q)=>Q.and(A.map((N)=>N(Q))));if(I)P=P.where((Q)=>Q.or(I.map((N)=>N(Q))));return(await P.execute()).length},options:J}}},Y=null;Y={config:{adapterId:"kysely",adapterName:"Kysely Adapter",usePlural:J?.usePlural,debugLogs:J?.debugLogs,supportsBooleans:J?.type==="sqlite"||J?.type==="mssql"||J?.type==="mysql"||!J?.type?!1:!0,supportsDates:J?.type==="sqlite"||J?.type==="mssql"||!J?.type?!1:!0,supportsJSON:!1,transaction:J?.transaction??!1?(Z)=>$.transaction().execute((H)=>{let G=AJ({config:Y.config,adapter:X(H)})(W);return Z(G)}):!1},adapter:X($)};let U=AJ(Y);return(Z)=>{return W=Z,U(Z)}};var Jg=($,J)=>{let W=null,X=AJ({config:{adapterId:"memory",adapterName:"Memory Adapter",usePlural:!1,debugLogs:J?.debugLogs||!1,customTransformInput(Y){if(Y.options.advanced?.database?.useNumberId&&Y.field==="id"&&Y.action==="create")return $[Y.model].length+1;return Y.data},transaction:async(Y)=>{let U=structuredClone($);try{return await Y(X(W))}catch(Z){throw Object.keys($).forEach((H)=>{$[H]=U[H]}),Z}}},adapter:({getFieldName:Y,options:U,debugLog:Z})=>{function H(G,z){let w=$[z];if(!w)throw _0.error(`[MemoryAdapter] Model ${z} not found in the DB`,Object.keys($)),Error(`Model ${z} not found`);let D=(K,O)=>{let{field:F,value:M,operator:A}=O;switch(A){case"in":if(!Array.isArray(M))throw Error("Value must be an array");return M.includes(K[F]);case"not_in":if(!Array.isArray(M))throw Error("Value must be an array");return!M.includes(K[F]);case"contains":return K[F].includes(M);case"starts_with":return K[F].startsWith(M);case"ends_with":return K[F].endsWith(M);case"ne":return K[F]!==M;case"gt":return M!=null&&Boolean(K[F]>M);case"gte":return M!=null&&Boolean(K[F]>=M);case"lt":return M!=null&&Boolean(K[F]<M);case"lte":return M!=null&&Boolean(K[F]<=M);default:return K[F]===M}};return w.filter((K)=>{if(!G.length||G.length===0)return!0;let O=D(K,G[0]);for(let F of G){let M=D(K,F);if(F.connector==="OR")O=O||M;else O=O&&M}return O})}return{create:async({model:G,data:z})=>{if(U.advanced?.database?.useNumberId)z.id=$[G].length+1;if(!$[G])$[G]=[];return $[G].push(z),z},findOne:async({model:G,where:z})=>{return H(z,G)[0]||null},findMany:async({model:G,where:z,sortBy:w,limit:D,offset:K})=>{let O=$[G];if(z)O=H(z,G);if(w)O=O.sort((F,M)=>{let A=Y({model:G,field:w.field}),I=F[A],P=M[A],Q=0;if(I==null&&P==null)Q=0;else if(I==null)Q=-1;else if(P==null)Q=1;else if(typeof I==="string"&&typeof P==="string")Q=I.localeCompare(P);else if(I instanceof Date&&P instanceof Date)Q=I.getTime()-P.getTime();else if(typeof I==="number"&&typeof P==="number")Q=I-P;else if(typeof I==="boolean"&&typeof P==="boolean")Q=I===P?0:I?1:-1;else Q=String(I).localeCompare(String(P));return w.direction==="asc"?Q:-Q});if(K!==void 0)O=O.slice(K);if(D!==void 0)O=O.slice(0,D);return O||[]},count:async({model:G,where:z})=>{if(z)return H(z,G).length;return $[G].length},update:async({model:G,where:z,update:w})=>{let D=H(z,G);return D.forEach((K)=>{Object.assign(K,w)}),D[0]||null},delete:async({model:G,where:z})=>{let w=$[G],D=H(z,G);$[G]=w.filter((K)=>!D.includes(K))},deleteMany:async({model:G,where:z})=>{let w=$[G],D=H(z,G),K=0;return $[G]=w.filter((O)=>{if(D.includes(O))return K++,!1;return!D.includes(O)}),K},updateMany({model:G,where:z,update:w}){let D=H(z,G);return D.forEach((K)=>{Object.assign(K,w)}),D[0]||null}}}});return(Y)=>{return W=Y,X(Y)}};cZ();function c40($,J){let W=J.hooks;async function X(Z,H,G,z,w){let D=Z;for(let F of W||[]){let M=F[H]?.create?.before;if(M){let A=await M(D,z);if(A===!1)return null;if(typeof A==="object"&&"data"in A)D={...D,...A.data}}}let K=G?await G.fn(D):null,O=!G||G.executeMainFn?await(w||$).create({model:H,data:D,forceAllowId:!0}):K;for(let F of W||[]){let M=F[H]?.create?.after;if(M)await M(O,z)}return O}async function Y(Z,H,G,z,w,D){let K=Z;for(let M of W||[]){let A=M[G]?.update?.before;if(A){let I=await A(Z,w);if(I===!1)return null;K=typeof I==="object"?I.data:I}}let O=z?await z.fn(K):null,F=!z||z.executeMainFn?await(D||$).update({model:G,update:K,where:H}):O;for(let M of W||[]){let A=M[G]?.update?.after;if(A)await A(F,w)}return F}async function U(Z,H,G,z,w,D){let K=Z;for(let M of W||[]){let A=M[G]?.update?.before;if(A){let I=await A(Z,w);if(I===!1)return null;K=typeof I==="object"?I.data:I}}let O=z?await z.fn(K):null,F=!z||z.executeMainFn?await(D||$).updateMany({model:G,update:K,where:H}):O;for(let M of W||[]){let A=M[G]?.update?.after;if(A)await A(F,w)}return F}return{createWithHooks:X,updateWithHooks:Y,updateManyWithHooks:U}}var x_=($,J)=>{let{logger:W,options:X}=J,Y=X.secondaryStorage,U=X.session?.expiresIn||604800,{createWithHooks:Z,updateWithHooks:H,updateManyWithHooks:G}=c40($,J);async function z(w){if(!Y)return;let D=await Y.get(`active-sessions-${w.id}`);if(!D)return;let K=Date.now(),F=(U4(D)||[]).filter((M)=>M.expiresAt>K);await Promise.all(F.map(async({token:M})=>{let A=await Y.get(M);if(!A)return;let I=U4(A);if(!I)return;let P=Math.max(Math.floor(new Date(I.session.expiresAt).getTime()-K)/1000,0);await Y.set(M,JSON.stringify({session:I.session,user:w}),Math.floor(P))}))}return{createOAuthUser:async(w,D,K)=>{return $.transaction(async(O)=>{let F=await Z({createdAt:new Date,updatedAt:new Date,...w},"user",void 0,K,O),M=await Z({...D,userId:F.id,createdAt:new Date,updatedAt:new Date},"account",void 0,K,O);return{user:F,account:M}})},createUser:async(w,D,K)=>{return await Z({createdAt:new Date,updatedAt:new Date,...w,email:w.email?.toLowerCase()},"user",void 0,D,K)},createAccount:async(w,D,K)=>{return await Z({createdAt:new Date,updatedAt:new Date,...w},"account",void 0,D,K)},listSessions:async(w,D)=>{if(Y){let O=await Y.get(`active-sessions-${w}`);if(!O)return[];let F=U4(O)||[],M=Date.now(),A=F.filter((P)=>P.expiresAt>M),I=[];for(let P of A){let Q=await Y.get(P.token);if(Q){let N=U4(Q);if(!N)return[];let _=ow(J.options,{...N.session,expiresAt:new Date(N.session.expiresAt)});I.push(_)}}return I}return await(D||$).findMany({model:"session",where:[{field:"userId",value:w}]})},listUsers:async(w,D,K,O,F)=>{return await(F||$).findMany({model:"user",limit:w,offset:D,sortBy:K,where:O})},countTotalUsers:async(w,D)=>{let K=await(D||$).count({model:"user",where:w});if(typeof K==="string")return parseInt(K);return K},deleteUser:async(w,D)=>{if(Y)await Y.delete(`active-sessions-${w}`);if(!Y||X.session?.storeSessionInDatabase)await(D||$).deleteMany({model:"session",where:[{field:"userId",value:w}]});await(D||$).deleteMany({model:"account",where:[{field:"userId",value:w}]}),await(D||$).delete({model:"user",where:[{field:"id",value:w}]})},createSession:async(w,D,K,O,F,M)=>{let A=D.headers||D.request?.headers,{id:I,...P}=O||{},Q={ipAddress:D.request||D.headers?sw(D.request||D.headers,D.context.options)||"":"",userAgent:A?.get("user-agent")||"",...P,expiresAt:K?o8(86400,"sec"):o8(U,"sec"),userId:w,token:s8(32),createdAt:new Date,updatedAt:new Date,...F?P:{}};return await Z(Q,"session",Y?{fn:async(_)=>{let L=await Y.get(`active-sessions-${w}`),R=[],S=Date.now();if(L)R=U4(L)||[],R=R.filter((b)=>b.expiresAt>S);let k=R.sort((b,r)=>b.expiresAt-r.expiresAt),T=k.at(-1)?.expiresAt;if(k.push({token:Q.token,expiresAt:Q.expiresAt.getTime()}),!T||T<Q.expiresAt.getTime())T=Q.expiresAt.getTime();let q=Math.max(Math.floor((T-S)/1000),0);if(q>0)await Y.set(`active-sessions-${w}`,JSON.stringify(k),q);let h=await $.findOne({model:"user",where:[{field:"id",value:w}]}),x=Math.max(Math.floor((Q.expiresAt.getTime()-S)/1000),0);if(x>0)await Y.set(Q.token,JSON.stringify({session:_,user:h}),x);return _},executeMainFn:X.session?.storeSessionInDatabase}:void 0,D,M)},findSession:async(w,D)=>{if(Y){let A=await Y.get(w);if(!A&&!X.session?.storeSessionInDatabase)return null;if(A){let I=U4(A);if(!I)return null;let P=ow(J.options,{...I.session,expiresAt:new Date(I.session.expiresAt),createdAt:new Date(I.session.createdAt),updatedAt:new Date(I.session.updatedAt)}),Q=N_(J.options,{...I.user,createdAt:new Date(I.user.createdAt),updatedAt:new Date(I.user.updatedAt)});return{session:P,user:Q}}}let K=await(D||$).findOne({model:"session",where:[{value:w,field:"token"}]});if(!K)return null;let O=await(D||$).findOne({model:"user",where:[{value:K.userId,field:"id"}]});if(!O)return null;let F=ow(J.options,K),M=N_(J.options,O);return{session:F,user:M}},findSessions:async(w,D)=>{if(Y){let M=[];for(let A of w){let I=await Y.get(A);if(I){let P=U4(I);if(!P)return[];let Q={session:{...P.session,expiresAt:new Date(P.session.expiresAt)},user:{...P.user,createdAt:new Date(P.user.createdAt),updatedAt:new Date(P.user.updatedAt)}};M.push(Q)}}return M}let K=await(D||$).findMany({model:"session",where:[{field:"token",value:w,operator:"in"}]}),O=K.map((M)=>{return M.userId});if(!O.length)return[];let F=await(D||$).findMany({model:"user",where:[{field:"id",value:O,operator:"in"}]});return K.map((M)=>{let A=F.find((I)=>I.id===M.userId);if(!A)return null;return{session:M,user:A}})},updateSession:async(w,D,K,O)=>{return await H(D,[{field:"token",value:w}],"session",Y?{async fn(M){let A=await Y.get(w),I=null;if(A){let P=U4(A);if(!P)return null;return I={...P.session,...M},I}else return null},executeMainFn:X.session?.storeSessionInDatabase}:void 0,K,O)},deleteSession:async(w,D)=>{if(Y){let K=await Y.get(w);if(K){let{session:O}=U4(K)??{};if(!O){W.error("Session not found in secondary storage");return}let F=O.userId,M=await Y.get(`active-sessions-${F}`);if(M){let A=U4(M)||[],I=Date.now(),P=A.filter((_)=>_.expiresAt>I&&_.token!==w),N=P.sort((_,L)=>_.expiresAt-L.expiresAt).at(-1)?.expiresAt;if(P.length>0&&N&&N>Date.now())await Y.set(`active-sessions-${F}`,JSON.stringify(P),Math.floor((N-I)/1000));else await Y.delete(`active-sessions-${F}`)}else W.error("Active sessions list not found in secondary storage")}if(await Y.delete(w),!X.session?.storeSessionInDatabase||J.options.session?.preserveSessionInDatabase)return}await(D||$).delete({model:"session",where:[{field:"token",value:w}]})},deleteAccounts:async(w,D)=>{await(D||$).deleteMany({model:"account",where:[{field:"userId",value:w}]})},deleteAccount:async(w,D)=>{await(D||$).delete({model:"account",where:[{field:"id",value:w}]})},deleteSessions:async(w,D)=>{if(Y){if(typeof w==="string"){let K=await Y.get(`active-sessions-${w}`),O=K?U4(K):[];if(!O)return;for(let F of O)await Y.delete(F.token)}else for(let K of w)if(await Y.get(K))await Y.delete(K);if(!X.session?.storeSessionInDatabase||J.options.session?.preserveSessionInDatabase)return}await(D||$).deleteMany({model:"session",where:[{field:Array.isArray(w)?"token":"userId",value:w,operator:Array.isArray(w)?"in":void 0}]})},findOAuthUser:async(w,D,K,O)=>{let F=await(O||$).findMany({model:"account",where:[{value:D,field:"accountId"}]}).then((M)=>{return M.find((A)=>A.providerId===K)});if(F){let M=await(O||$).findOne({model:"user",where:[{value:F.userId,field:"id"}]});if(M)return{user:M,accounts:[F]};else{let A=await(O||$).findOne({model:"user",where:[{value:w.toLowerCase(),field:"email"}]});if(A)return{user:A,accounts:[F]};return null}}else{let M=await(O||$).findOne({model:"user",where:[{value:w.toLowerCase(),field:"email"}]});if(M){let A=await(O||$).findMany({model:"account",where:[{value:M.id,field:"userId"}]});return{user:M,accounts:A||[]}}else return null}},findUserByEmail:async(w,D,K)=>{let O=await(K||$).findOne({model:"user",where:[{value:w.toLowerCase(),field:"email"}]});if(!O)return null;if(D?.includeAccounts){let F=await(K||$).findMany({model:"account",where:[{value:O.id,field:"userId"}]});return{user:O,accounts:F}}return{user:O,accounts:[]}},findUserById:async(w,D)=>{return await(D||$).findOne({model:"user",where:[{field:"id",value:w}]})},linkAccount:async(w,D,K)=>{return await Z({createdAt:new Date,updatedAt:new Date,...w},"account",void 0,D,K)},updateUser:async(w,D,K,O)=>{let F=await H(D,[{field:"id",value:w}],"user",void 0,K,O);return await z(F),await z(F),F},updateUserByEmail:async(w,D,K,O)=>{let F=await H(D,[{field:"email",value:w.toLowerCase()}],"user",void 0,K,O);return await z(F),await z(F),F},updatePassword:async(w,D,K,O)=>{await G({password:D},[{field:"userId",value:w},{field:"providerId",value:"credential"}],"account",void 0,K,O)},findAccounts:async(w,D)=>{return await(D||$).findMany({model:"account",where:[{field:"userId",value:w}]})},findAccount:async(w,D)=>{return await(D||$).findOne({model:"account",where:[{field:"accountId",value:w}]})},findAccountByProviderId:async(w,D,K)=>{return await(K||$).findOne({model:"account",where:[{field:"accountId",value:w},{field:"providerId",value:D}]})},findAccountByUserId:async(w,D)=>{return await(D||$).findMany({model:"account",where:[{field:"userId",value:w}]})},updateAccount:async(w,D,K,O)=>{return await H(D,[{field:"id",value:w}],"account",void 0,K,O)},createVerificationValue:async(w,D,K)=>{return await Z({createdAt:new Date,updatedAt:new Date,...w},"verification",void 0,D,K)},findVerificationValue:async(w,D)=>{let K=await(D||$).findMany({model:"verification",where:[{field:"identifier",value:w}],sortBy:{field:"createdAt",direction:"desc"},limit:1});if(!X.verification?.disableCleanup)await(D||$).deleteMany({model:"verification",where:[{field:"expiresAt",value:new Date,operator:"lt"}]});return K[0]},deleteVerificationValue:async(w,D)=>{await(D||$).delete({model:"verification",where:[{field:"id",value:w}]})},deleteVerificationByIdentifier:async(w,D)=>{await(D||$).delete({model:"verification",where:[{field:"identifier",value:w}]})},updateVerificationValue:async(w,D,K,O)=>{return await H(D,[{field:"id",value:w}],"verification",void 0,K,O)}}};async function Wg($){if(!$.database){let Y=QJ($),U=Object.keys(Y).reduce((Z,H)=>{return Z[H]=[],Z},{});return _0.warn("No database configuration provided. Using memory adapter in development"),Jg(U)($)}if(typeof $.database==="function")return $.database($);let{kysely:J,databaseType:W,transaction:X}=await h_($);if(!J)throw new h0("Failed to initialize database adapter");return $g(J,{type:W||"sqlite",debugLogs:"debugLogs"in $.database?$.database.debugLogs:!1,transaction:X})($)}function u40($){let J=QJ($),W={};for(let X in J){let Y=J[X],U=Y.fields,Z={};if(Object.entries(U).forEach(([H,G])=>{if(Z[G.fieldName||H]=G,G.references){let z=J[G.references.model];if(z)Z[G.fieldName||H].references={...G.references,model:z.modelName,field:G.references.field}}}),W[Y.modelName]){W[Y.modelName].fields={...W[Y.modelName].fields,...Z};continue}W[Y.modelName]={fields:Z,order:Y.order||1/0}}return W}var p40={string:["character varying","varchar","text"],number:["int4","integer","bigint","smallint","numeric","real","double precision"],boolean:["bool","boolean"],date:["timestamptz","timestamp","date"],json:["json","jsonb"]},d40={string:["varchar","text"],number:["integer","int","bigint","smallint","decimal","float","double"],boolean:["boolean","tinyint"],date:["timestamp","datetime","date"],json:["json"]},l40={string:["TEXT"],number:["INTEGER","REAL"],boolean:["INTEGER","BOOLEAN"],date:["DATE","INTEGER"],json:["TEXT"]},r40={string:["varchar","nvarchar"],number:["int","bigint","smallint","decimal","float","double"],boolean:["bit","smallint"],date:["datetime2","date","datetime"],json:["varchar","nvarchar"]},n40={postgres:p40,mysql:d40,sqlite:l40,mssql:r40};function i40($,J,W){function X(Z){return Z.toLowerCase().split("(")[0].trim()}if(J==="string[]"||J==="number[]")return $.toLowerCase().includes("json");let Y=n40[W];return(Array.isArray(J)?Y.string.map((Z)=>Z.toLowerCase()):Y[J].map((Z)=>Z.toLowerCase())).includes(X($))}async function Xg($){let J=u40($),W=l2($.logger),{kysely:X,databaseType:Y}=await h_($);if(!Y)W.warn("Could not determine database type, defaulting to sqlite. Please provide a type in the database options to avoid this."),Y="sqlite";if(!X)W.error("Only kysely adapter is supported for migrations. You can use `generate` command to generate the schema, if you're using a different adapter."),process.exit(1);let U=await X.introspection.getTables(),Z=[],H=[];for(let[K,O]of Object.entries(J)){let F=U.find((A)=>A.name===K);if(!F){let A=Z.findIndex((Q)=>Q.table===K),I={table:K,fields:O.fields,order:O.order||1/0},P=Z.findIndex((Q)=>(Q.order||1/0)>I.order);if(P===-1)if(A===-1)Z.push(I);else Z[A].fields={...Z[A].fields,...O.fields};else Z.splice(P,0,I);continue}let M={};for(let[A,I]of Object.entries(O.fields)){let P=F.columns.find((Q)=>Q.name===A);if(!P){M[A]=I;continue}if(i40(P.dataType,I.type,Y))continue;else W.warn(`Field ${A} in table ${K} has a different type in the database. Expected ${I.type} but got ${P.dataType}.`)}if(Object.keys(M).length>0)H.push({table:K,fields:M,order:O.order||1/0})}let G=[];function z(K,O){let F=K.type,M={string:{sqlite:"text",postgres:"text",mysql:K.unique?"varchar(255)":K.references?"varchar(36)":"text",mssql:K.unique||K.sortable?"varchar(255)":K.references?"varchar(36)":"varchar(8000)"},boolean:{sqlite:"integer",postgres:"boolean",mysql:"boolean",mssql:"smallint"},number:{sqlite:K.bigint?"bigint":"integer",postgres:K.bigint?"bigint":"integer",mysql:K.bigint?"bigint":"integer",mssql:K.bigint?"bigint":"integer"},date:{sqlite:"date",postgres:"timestamptz",mysql:"timestamp(3)",mssql:e0`datetime2(3)`},json:{sqlite:"text",postgres:"jsonb",mysql:"json",mssql:"varchar(8000)"},id:{postgres:$.advanced?.database?.useNumberId?"serial":"text",mysql:$.advanced?.database?.useNumberId?"integer":"varchar(36)",mssql:$.advanced?.database?.useNumberId?"integer":"varchar(36)",sqlite:$.advanced?.database?.useNumberId?"integer":"text"},foreignKeyId:{postgres:$.advanced?.database?.useNumberId?"integer":"text",mysql:$.advanced?.database?.useNumberId?"integer":"varchar(36)",mssql:$.advanced?.database?.useNumberId?"integer":"varchar(36)",sqlite:$.advanced?.database?.useNumberId?"integer":"text"}};if(O==="id"||K.references?.field==="id"){if(O==="id")return M.id[Y];return M.foreignKeyId[Y]}if(Y==="sqlite"&&(F==="string[]"||F==="number[]"))return"text";if(F==="string[]"||F==="number[]")return"jsonb";if(Array.isArray(F))return"text";return M[F][Y||"sqlite"]}if(H.length)for(let K of H)for(let[O,F]of Object.entries(K.fields)){let M=z(F,O),A=X.schema.alterTable(K.table).addColumn(O,M,(I)=>{if(I=F.required!==!1?I.notNull():I,F.references)I=I.references(`${F.references.model}.${F.references.field}`).onDelete(F.references.onDelete||"cascade");if(F.unique)I=I.unique();if(F.type==="date"&&typeof F.defaultValue==="function"&&(Y==="postgres"||Y==="mysql"||Y==="mssql"))if(Y==="mysql")I=I.defaultTo(e0`CURRENT_TIMESTAMP(3)`);else I=I.defaultTo(e0`CURRENT_TIMESTAMP`);return I});G.push(A)}if(Z.length)for(let K of Z){let O=X.schema.createTable(K.table).addColumn("id",$.advanced?.database?.useNumberId?Y==="postgres"?"serial":"integer":Y==="mysql"||Y==="mssql"?"varchar(36)":"text",(F)=>{if($.advanced?.database?.useNumberId){if(Y==="postgres"||Y==="sqlite")return F.primaryKey().notNull();else if(Y==="mssql")return F.identity().primaryKey().notNull();return F.autoIncrement().primaryKey().notNull()}return F.primaryKey().notNull()});for(let[F,M]of Object.entries(K.fields)){let A=z(M,F);O=O.addColumn(F,A,(I)=>{if(I=M.required!==!1?I.notNull():I,M.references)I=I.references(`${M.references.model}.${M.references.field}`).onDelete(M.references.onDelete||"cascade");if(M.unique)I=I.unique();if(M.type==="date"&&typeof M.defaultValue==="function"&&(Y==="postgres"||Y==="mysql"||Y==="mssql"))if(Y==="mysql")I=I.defaultTo(e0`CURRENT_TIMESTAMP(3)`);else I=I.defaultTo(e0`CURRENT_TIMESTAMP`);return I})}G.push(O)}async function w(){for(let K of G)await K.execute()}async function D(){return G.map((O)=>O.compile().sql).join(`;

`)+";"}return{toBeCreated:Z,toBeAdded:H,runMigrations:w,compileMigrations:D}}async function Yg($,J){let X=(await J.context.internalAdapter.findAccounts($))?.find((Z)=>Z.providerId==="credential"),Y=X?.password;if(!X||!Y||!J.body.password)throw new p("BAD_REQUEST",{message:"No password credential found"});if(!await J.context.password.verify({hash:Y,password:J.body.password}))throw new p("BAD_REQUEST",{message:"Invalid password"});return!0}var t40=($)=>{return _X("a-z","A-Z","0-9")($)};async function Ug($){let J=await rU("SHA-256").digest($);return $$.encode(J)}var LJ;async function zg(){if(LJ)return LJ;try{let $=typeof process<"u"&&typeof process.cwd==="function"?process.cwd():"";if(!$)return;let J=(U)=>Function("mm","return import(mm)")(U),[{default:W},{default:X}]=await Promise.all([J("fs/promises"),J("path")]),Y=await W.readFile(X.join($,"package.json"),"utf-8");return LJ=JSON.parse(Y),LJ}catch{}return}async function wg($){if(LJ)return LJ.dependencies?.[$]||LJ.devDependencies?.[$]||LJ.peerDependencies?.[$];try{let W=typeof process<"u"&&typeof process.cwd==="function"?process.cwd():"";if(!W)throw Error("no-cwd");let X=(w)=>Function("mm","return import(mm)")(w),[{default:Y},{default:U}]=await Promise.all([X("fs/promises"),X("path")]),Z=U.join(W,"node_modules",$,"package.json"),H=await Y.readFile(Z,"utf-8");return JSON.parse(H).version||await Zg($)||void 0}catch{}return await Zg($)}async function Zg($){let J=await zg();if(!J)return;return{...J.dependencies,...J.devDependencies,...J.peerDependencies}[$]}async function a40(){return(await zg())?.name}var IJ=null;async function Hg($){if(IJ)return IJ;let J=await a40();if(J)return IJ=await Ug($?$+J:J),IJ;if($)return IJ=await Ug($),IJ;return IJ=t40(32),IJ}var EY=($)=>{return Function("mm","return import(mm)")($)};function i7(){let $=(...J)=>J.some((W)=>Boolean(W1[W]));if($("CF_PAGES","CF_PAGES_URL","CF_ACCOUNT_ID")||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers")return"cloudflare";if($("VERCEL","VERCEL_URL","VERCEL_ENV"))return"vercel";if($("NETLIFY","NETLIFY_URL"))return"netlify";if($("RENDER","RENDER_URL","RENDER_INTERNAL_HOSTNAME","RENDER_SERVICE_ID"))return"render";if($("AWS_LAMBDA_FUNCTION_NAME","AWS_EXECUTION_ENV","LAMBDA_TASK_ROOT"))return"aws";if($("GOOGLE_CLOUD_FUNCTION_NAME","GOOGLE_CLOUD_PROJECT","GCP_PROJECT","K_SERVICE"))return"gcp";if($("AZURE_FUNCTION_NAME","FUNCTIONS_WORKER_RUNTIME","WEBSITE_INSTANCE_ID","WEBSITE_SITE_NAME"))return"azure";if($("DENO_DEPLOYMENT_ID","DENO_REGION"))return"deno-deploy";if($("FLY_APP_NAME","FLY_REGION","FLY_ALLOC_ID"))return"fly-io";if($("RAILWAY_STATIC_URL","RAILWAY_ENVIRONMENT_NAME"))return"railway";if($("DYNO","HEROKU_APP_NAME"))return"heroku";if($("DO_DEPLOYMENT_ID","DO_APP_NAME","DIGITALOCEAN"))return"digitalocean";if($("KOYEB","KOYEB_DEPLOYMENT_ID","KOYEB_APP_NAME"))return"koyeb";return null}async function o40(){try{if(i7()==="cloudflare")return"cloudflare";let $=await EY("os"),J=$.cpus();return{deploymentVendor:i7(),systemPlatform:$.platform(),systemRelease:$.release(),systemArchitecture:$.arch(),cpuCount:J.length,cpuModel:J.length?J[0].model:null,cpuSpeed:J.length?J[0].speed:null,memory:$.totalmem(),isWSL:await $$0(),isDocker:await Dg(),isTTY:typeof process<"u"&&process.stdout?process.stdout.isTTY:null}}catch($){return{systemPlatform:null,systemRelease:null,systemArchitecture:null,cpuCount:null,cpuModel:null,cpuSpeed:null,memory:null,isWSL:null,isDocker:null,isTTY:null}}}var b_;async function s40(){if(i7()==="cloudflare")return!1;try{return(await EY("fs")).statSync("/.dockerenv"),!0}catch{return!1}}async function e40(){if(i7()==="cloudflare")return!1;try{return(await EY("fs")).readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}async function Dg(){if(i7()==="cloudflare")return!1;if(b_===void 0)b_=await s40()||await e40();return b_}async function $$0(){try{if(i7()==="cloudflare")return!1;if(typeof process>"u"||process?.platform!=="linux")return!1;let $=await EY("fs");if((await EY("os")).release().toLowerCase().includes("microsoft")){if(await Gg())return!1;return!0}return $.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!await Gg():!1}catch{return!1}}var g_,J$0=async()=>{if(i7()==="cloudflare")return!1;try{return(await EY("fs")).statSync("/run/.containerenv"),!0}catch{return!1}};async function Gg(){if(g_===void 0)g_=await J$0()||await Dg();return g_}function W$0(){return W1.CI!=="false"&&(("BUILD_ID"in W1)||("BUILD_NUMBER"in W1)||("CI"in W1)||("CI_APP_ID"in W1)||("CI_BUILD_ID"in W1)||("CI_BUILD_NUMBER"in W1)||("CI_NAME"in W1)||("CONTINUOUS_INTEGRATION"in W1)||("RUN_ID"in W1))}function X$0(){if(typeof Deno<"u")return{name:"deno",version:Deno?.version?.deno??null};if(typeof Bun<"u")return{name:"bun",version:Bun?.version??null};if(typeof process<"u"&&process?.versions?.node)return{name:"node",version:process.versions.node??null};return{name:"edge",version:null}}function Y$0(){return z1("NODE_ENV")==="production"?"production":W$0()?"ci":p2()?"test":"development"}var U$0={pg:"postgresql",mysql:"mysql",mariadb:"mariadb",sqlite3:"sqlite","better-sqlite3":"sqlite","@prisma/client":"prisma",mongoose:"mongodb",mongodb:"mongodb","drizzle-orm":"drizzle"};async function Z$0(){for(let[$,J]of Object.entries(U$0)){let W=await wg($);if(W)return{name:J,version:W}}return}var H$0={next:"next",nuxt:"nuxt","@remix-run/server-runtime":"remix",astro:"astro","@sveltejs/kit":"sveltekit","solid-start":"solid-start","tanstack-start":"tanstack-start",hono:"hono",express:"express",elysia:"elysia",expo:"expo"};async function G$0(){for(let[$,J]of Object.entries(H$0)){let W=await wg($);if(W)return{name:J,version:W}}return}function z$0(){let $=W1.npm_config_user_agent;if(!$)return;let J=$.split(" ")[0],W=J.lastIndexOf("/"),X=J.substring(0,W);return{name:X==="npminstall"?"cnpm":X,version:J.substring(W+1)}}function Kg($,J){return{database:J?.database,adapter:J?.adapter,emailVerification:{sendVerificationEmail:!!$.emailVerification?.sendVerificationEmail,sendOnSignUp:!!$.emailVerification?.sendOnSignUp,sendOnSignIn:!!$.emailVerification?.sendOnSignIn,autoSignInAfterVerification:!!$.emailVerification?.autoSignInAfterVerification,expiresIn:$.emailVerification?.expiresIn,onEmailVerification:!!$.emailVerification?.onEmailVerification,afterEmailVerification:!!$.emailVerification?.afterEmailVerification},emailAndPassword:{enabled:!!$.emailAndPassword?.enabled,disableSignUp:!!$.emailAndPassword?.disableSignUp,requireEmailVerification:!!$.emailAndPassword?.requireEmailVerification,maxPasswordLength:$.emailAndPassword?.maxPasswordLength,minPasswordLength:$.emailAndPassword?.minPasswordLength,sendResetPassword:!!$.emailAndPassword?.sendResetPassword,resetPasswordTokenExpiresIn:$.emailAndPassword?.resetPasswordTokenExpiresIn,onPasswordReset:!!$.emailAndPassword?.onPasswordReset,password:{hash:!!$.emailAndPassword?.password?.hash,verify:!!$.emailAndPassword?.password?.verify},autoSignIn:!!$.emailAndPassword?.autoSignIn,revokeSessionsOnPasswordReset:!!$.emailAndPassword?.revokeSessionsOnPasswordReset},socialProviders:Object.keys($.socialProviders||{}).map((W)=>{let X=$.socialProviders?.[W];if(!X)return{};return{id:W,mapProfileToUser:!!X.mapProfileToUser,disableDefaultScope:!!X.disableDefaultScope,disableIdTokenSignIn:!!X.disableIdTokenSignIn,disableImplicitSignUp:X.disableImplicitSignUp,disableSignUp:X.disableSignUp,getUserInfo:!!X.getUserInfo,overrideUserInfoOnSignIn:!!X.overrideUserInfoOnSignIn,prompt:X.prompt,verifyIdToken:!!X.verifyIdToken,scope:X.scope,refreshAccessToken:!!X.refreshAccessToken}}),plugins:$.plugins?.map((W)=>W.id.toString()),user:{modelName:$.user?.modelName,fields:$.user?.fields,additionalFields:$.user?.additionalFields,changeEmail:{enabled:$.user?.changeEmail?.enabled,sendChangeEmailVerification:!!$.user?.changeEmail?.sendChangeEmailVerification}},verification:{modelName:$.verification?.modelName,disableCleanup:$.verification?.disableCleanup,fields:$.verification?.fields},session:{modelName:$.session?.modelName,additionalFields:$.session?.additionalFields,cookieCache:{enabled:$.session?.cookieCache?.enabled,maxAge:$.session?.cookieCache?.maxAge},disableSessionRefresh:$.session?.disableSessionRefresh,expiresIn:$.session?.expiresIn,fields:$.session?.fields,freshAge:$.session?.freshAge,preserveSessionInDatabase:$.session?.preserveSessionInDatabase,storeSessionInDatabase:$.session?.storeSessionInDatabase,updateAge:$.session?.updateAge},account:{modelName:$.account?.modelName,fields:$.account?.fields,encryptOAuthTokens:$.account?.encryptOAuthTokens,updateAccountOnSignIn:$.account?.updateAccountOnSignIn,accountLinking:{enabled:$.account?.accountLinking?.enabled,trustedProviders:$.account?.accountLinking?.trustedProviders,updateUserInfoOnLink:$.account?.accountLinking?.updateUserInfoOnLink,allowUnlinkingAll:$.account?.accountLinking?.allowUnlinkingAll}},hooks:{after:!!$.hooks?.after,before:!!$.hooks?.before},secondaryStorage:!!$.secondaryStorage,advanced:{cookiePrefix:!!$.advanced?.cookiePrefix,cookies:!!$.advanced?.cookies,crossSubDomainCookies:{domain:!!$.advanced?.crossSubDomainCookies?.domain,enabled:$.advanced?.crossSubDomainCookies?.enabled,additionalCookies:$.advanced?.crossSubDomainCookies?.additionalCookies},database:{useNumberId:!!$.advanced?.database?.useNumberId,generateId:$.advanced?.database?.generateId,defaultFindManyLimit:$.advanced?.database?.defaultFindManyLimit},useSecureCookies:$.advanced?.useSecureCookies,ipAddress:{disableIpTracking:$.advanced?.ipAddress?.disableIpTracking,ipAddressHeaders:$.advanced?.ipAddress?.ipAddressHeaders},disableCSRFCheck:$.advanced?.disableCSRFCheck,cookieAttributes:{expires:$.advanced?.defaultCookieAttributes?.expires,secure:$.advanced?.defaultCookieAttributes?.secure,sameSite:$.advanced?.defaultCookieAttributes?.sameSite,domain:!!$.advanced?.defaultCookieAttributes?.domain,path:$.advanced?.defaultCookieAttributes?.path,httpOnly:$.advanced?.defaultCookieAttributes?.httpOnly}},trustedOrigins:$.trustedOrigins?.length,rateLimit:{storage:$.rateLimit?.storage,modelName:$.rateLimit?.modelName,window:$.rateLimit?.window,customStorage:!!$.rateLimit?.customStorage,enabled:$.rateLimit?.enabled,max:$.rateLimit?.max},onAPIError:{errorURL:$.onAPIError?.errorURL,onError:!!$.onAPIError?.onError,throw:$.onAPIError?.throw},logger:{disabled:$.logger?.disabled,level:$.logger?.level,log:!!$.logger?.log},databaseHooks:{user:{create:{after:!!$.databaseHooks?.user?.create?.after,before:!!$.databaseHooks?.user?.create?.before},update:{after:!!$.databaseHooks?.user?.update?.after,before:!!$.databaseHooks?.user?.update?.before}},session:{create:{after:!!$.databaseHooks?.session?.create?.after,before:!!$.databaseHooks?.session?.create?.before},update:{after:!!$.databaseHooks?.session?.update?.after,before:!!$.databaseHooks?.session?.update?.before}},account:{create:{after:!!$.databaseHooks?.account?.create?.after,before:!!$.databaseHooks?.account?.create?.before},update:{after:!!$.databaseHooks?.account?.update?.after,before:!!$.databaseHooks?.account?.update?.before}},verification:{create:{after:!!$.databaseHooks?.verification?.create?.after,before:!!$.databaseHooks?.verification?.create?.before},update:{after:!!$.databaseHooks?.verification?.update?.after,before:!!$.databaseHooks?.verification?.update?.before}}}}}async function f_($,J){let W=$.telemetry?.debug||IF("BETTER_AUTH_TELEMETRY_DEBUG",!1),X=Uv.BETTER_AUTH_TELEMETRY_ENDPOINT,Y=async(G)=>{try{if(J?.customTrack)await J.customTrack(G);else if(W)await Promise.resolve(_0.info("telemetry event",JSON.stringify(G,null,2)));else await T0(X,{method:"POST",body:G})}catch{}},Z=await(async()=>{let G=$.telemetry?.enabled!==void 0?$.telemetry.enabled:!1;return(IF("BETTER_AUTH_TELEMETRY",!1)||G)&&(J?.skipTestCheck||!p2())})(),H;if(Z){H=await Hg($.baseURL);let G={config:Kg($),runtime:X$0(),database:await Z$0(),framework:await G$0(),environment:Y$0(),systemInfo:await o40(),packageManager:z$0()};Y({type:"init",payload:G,anonymousId:H})}return{publish:async(G)=>{if(!Z)return;if(!H)H=await Hg($.baseURL);await Y({type:G.type,payload:G.payload,anonymousId:H})}}}var Og="better-auth-secret-123456789";function Fg($){return!!$&&(typeof $==="object"||typeof $==="function")&&typeof $.then==="function"}var w$0=async($)=>{let J=await Wg($),W=$.plugins||[],X=K$0($),Y=l2($.logger),U=dU($.baseURL,$.basePath),Z=$.secret||W1.BETTER_AUTH_SECRET||W1.AUTH_SECRET||Og;if(Z===Og){if(u2)Y.error("You are using the default secret. Please set `BETTER_AUTH_SECRET` in your environment variables or pass `secret` in your auth config.")}$={...$,secret:Z,baseURL:U?new URL(U).origin:"",basePath:$.basePath||"/api/auth",plugins:W.concat(X)},ub($,Y);let H=cT($),G=QJ($),z=Object.entries($.socialProviders||{}).map(([M,A])=>{if(A==null)return null;if(A.enabled===!1)return null;if(!A.clientId)Y.warn(`Social provider ${M} is missing clientId or clientSecret`);let I=aA[M](A);return I.disableImplicitSignUp=A.disableImplicitSignUp,I}).filter((M)=>M!==null),w=({model:M,size:A})=>{if(typeof $.advanced?.generateId==="function")return $.advanced.generateId({model:M,size:A});if(typeof $?.advanced?.database?.generateId==="function")return $.advanced.database.generateId({model:M,size:A});return s8(A)},{publish:D}=await f_($,{adapter:J.id,database:typeof $.database==="function"?"adapter":$D($.database)||"unknown"}),K={appName:$.appName||"Better Auth",socialProviders:z,options:$,tables:G,trustedOrigins:O$0($),baseURL:U||"",sessionConfig:{updateAge:$.session?.updateAge!==void 0?$.session.updateAge:86400,expiresIn:$.session?.expiresIn||604800,freshAge:$.session?.freshAge===void 0?86400:$.session.freshAge},secret:Z,rateLimit:{...$.rateLimit,enabled:$.rateLimit?.enabled??u2,window:$.rateLimit?.window||10,max:$.rateLimit?.max||100,storage:$.rateLimit?.storage||($.secondaryStorage?"secondary-storage":"memory")},authCookies:H,logger:Y,generateId:w,session:null,secondaryStorage:$.secondaryStorage,password:{hash:$.emailAndPassword?.password?.hash||Zb,verify:$.emailAndPassword?.password?.verify||Hb,config:{minPasswordLength:$.emailAndPassword?.minPasswordLength||8,maxPasswordLength:$.emailAndPassword?.maxPasswordLength||128},checkPassword:Yg},setNewSession(M){this.newSession=M},newSession:null,adapter:J,internalAdapter:x_(J,{options:$,logger:Y,hooks:$.databaseHooks?[$.databaseHooks]:[]}),createAuthCookie:rA($),async runMigrations(){if(!$.database||"updateMany"in $.database)throw new h0("Database is not provided or it's an adapter. Migrations are only supported with a database instance.");let{runMigrations:M}=await Xg($);await M()},publishTelemetry:D},O=D$0(K),F;if(Fg(O))({context:F}=await O);else({context:F}=O);return F};async function D$0($){let J=$.options,W=J.plugins||[],X=$,Y=[];for(let U of W)if(U.init){let Z=U.init(X),H;if(Fg(Z))H=await Z;else H=Z;if(typeof H==="object"){if(H.options){let{databaseHooks:G,...z}=H.options;if(G)Y.push(G);J=Xb(J,z)}if(H.context)X={...X,...H.context}}}return Y.push(J.databaseHooks),X.internalAdapter=x_($.adapter,{options:J,logger:$.logger,hooks:Y.filter((U)=>U!==void 0),generateId:$.generateId}),X.options=J,{context:X}}function K$0($){let J=[];if($.advanced?.crossSubDomainCookies?.enabled);return J}function O$0($){let J=dU($.baseURL,$.basePath);if(!J)return[];let W=[new URL(J).origin];if($.trustedOrigins&&Array.isArray($.trustedOrigins))W.push(...$.trustedOrigins);let X=W1.BETTER_AUTH_TRUSTED_ORIGINS;if(X)W.push(...X.split(","));if(W.filter((Y)=>!Y).length)throw new h0("A provided trusted origin is invalid, make sure your trusted origins list is properly defined.");return W}var m_=($)=>{let J=w$0($),{api:W}=B_(J,$),X=$.plugins?.reduce((Y,U)=>{if(U.$ERROR_CODES)return{...Y,...U.$ERROR_CODES};return Y},{});return{handler:async(Y)=>{let U=await J,Z=U.options.basePath||"/api/auth";if(!U.options.baseURL){let G=dU(void 0,Z,Y);if(G)U.baseURL=G,U.options.baseURL=r9(U.baseURL)||void 0;else throw new h0("Could not get base URL from request. Please provide a valid base URL.")}U.trustedOrigins=[...$.trustedOrigins?Array.isArray($.trustedOrigins)?$.trustedOrigins:await $.trustedOrigins(Y):[],U.options.baseURL];let{handler:H}=pb(U,$);return H(Y)},api:W,options:$,$context:J,$Infer:{},$ERROR_CODES:{...X,...E0}}};var Eg=($,J)=>{let W=null,X=(Z)=>({getFieldName:H,debugLog:G})=>{function z(O){let F=J.schema||Z._.fullSchema;if(!F)throw new h0("Drizzle adapter failed to initialize. Schema not found. Please provide a schema object in the adapter options object.");let M=F[O];if(!M)throw new h0(`[# Drizzle Adapter]: The model "${O}" was not found in the schema object. Please pass the schema directly to the adapter options.`);return M}let w=async(O,F,M,A)=>{if(J.provider!=="mysql")return(await F.returning())[0];await F.execute();let I=z(O),P=F.config?.values;if(A?.length){let Q=A.map((L)=>{if(M[L.field]!==void 0)return{...L,value:M[L.field]};return L}),N=D(Q,O);return(await Z.select().from(I).where(...N))[0]}else if(P&&P[0]?.id?.value){let Q=P[0]?.id?.value;if(!Q)Q=(await Z.select({id:E`LAST_INSERT_ID()`}).from(I).orderBy(P5(I.id)).limit(1))[0].id;return(await Z.select().from(I).where(y1(I.id,Q)).limit(1).execute())[0]}else if(M.id)return(await Z.select().from(I).where(y1(I.id,M.id)).limit(1).execute())[0];else{if(!("id"in I))throw new h0(`The model "${O}" does not have an "id" field. Please use the "id" field as your primary key.`);return(await Z.select().from(I).orderBy(P5(I.id)).limit(1).execute())[0]}};function D(O,F){let M=z(F);if(!O)return[];if(O.length===1){let _=O[0];if(!_)return[];let L=H({model:F,field:_.field});if(!M[L])throw new h0(`The field "${_.field}" does not exist in the schema for the model "${F}". Please update your schema.`);if(_.operator==="in"){if(!Array.isArray(_.value))throw new h0(`The value for the field "${_.field}" must be an array when using the "in" operator.`);return[I5(M[L],_.value)]}if(_.operator==="not_in"){if(!Array.isArray(_.value))throw new h0(`The value for the field "${_.field}" must be an array when using the "not_in" operator.`);return[iJ(M[L],_.value)]}if(_.operator==="contains")return[v9(M[L],`%${_.value}%`)];if(_.operator==="starts_with")return[v9(M[L],`${_.value}%`)];if(_.operator==="ends_with")return[v9(M[L],`%${_.value}`)];if(_.operator==="lt")return[xW(M[L],_.value)];if(_.operator==="lte")return[bW(M[L],_.value)];if(_.operator==="ne")return[CW(M[L],_.value)];if(_.operator==="gt")return[qW(M[L],_.value)];if(_.operator==="gte")return[hW(M[L],_.value)];return[y1(M[L],_.value)]}let A=O.filter((_)=>_.connector==="AND"||!_.connector),I=O.filter((_)=>_.connector==="OR"),P=F1(...A.map((_)=>{let L=H({model:F,field:_.field});if(_.operator==="in"){if(!Array.isArray(_.value))throw new h0(`The value for the field "${_.field}" must be an array when using the "in" operator.`);return I5(M[L],_.value)}if(_.operator==="not_in"){if(!Array.isArray(_.value))throw new h0(`The value for the field "${_.field}" must be an array when using the "not_in" operator.`);return iJ(M[L],_.value)}return y1(M[L],_.value)})),Q=k9(...I.map((_)=>{let L=H({model:F,field:_.field});return y1(M[L],_.value)})),N=[];if(A.length)N.push(P);if(I.length)N.push(Q);return N}function K(O,F,M){if(!O)throw new h0("Drizzle adapter failed to initialize. Schema not found. Please provide a schema object in the adapter options object.");for(let A in M)if(!O[A])throw new h0(`The field "${A}" does not exist in the "${F}" schema. Please update your drizzle schema or re-generate using "npx @better-auth/cli generate".`)}return{async create({model:O,data:F}){let M=z(O);K(M,O,F);let A=Z.insert(M).values(F);return await w(O,A,F)},async findOne({model:O,where:F}){let M=z(O),A=D(F,O),I=await Z.select().from(M).where(...A);if(!I.length)return null;return I[0]},async findMany({model:O,where:F,sortBy:M,limit:A,offset:I}){let P=z(O),Q=F?D(F,O):[],N=M?.direction==="desc"?P5:L5,_=Z.select().from(P).limit(A||100).offset(I||0);if(M?.field)_.orderBy(N(P[H({model:O,field:M?.field})]));return await _.where(...Q)},async count({model:O,where:F}){let M=z(O),A=F?D(F,O):[];return(await Z.select({count:Bk()}).from(M).where(...A))[0].count},async update({model:O,where:F,update:M}){let A=z(O),I=D(F,O),P=Z.update(A).set(M).where(...I);return await w(O,P,M,F)},async updateMany({model:O,where:F,update:M}){let A=z(O),I=D(F,O);return await Z.update(A).set(M).where(...I)},async delete({model:O,where:F}){let M=z(O),A=D(F,O);return await Z.delete(M).where(...A)},async deleteMany({model:O,where:F}){let M=z(O),A=D(F,O);return await Z.delete(M).where(...A)},options:J}},Y=null;Y={config:{adapterId:"drizzle",adapterName:"Drizzle Adapter",usePlural:J.usePlural??!1,debugLogs:J.debugLogs??!1,transaction:J.transaction??!1?(Z)=>$.transaction((H)=>{let G=AJ({config:Y.config,adapter:X(H)})(W);return Z(G)}):!1},adapter:X($)};let U=AJ(Y);return(Z)=>{return W=Z,U(Z)}};var F$0=m_({database:Eg(u8,{provider:"pg",usePlural:!1,schema:Xv}),emailAndPassword:{enabled:!0},baseURL:process.env.BETTER_AUTH_URL||"http://localhost:3001",basePath:"/auth",secret:process.env.BETTER_AUTH_SECRET}),JD=F$0;var y_=($,J,W)=>{return(X,Y)=>{let U=-1;return Z(0);async function Z(H){if(H<=U)throw Error("next() called multiple times");U=H;let G,z=!1,w;if($[H])w=$[H][0][0],X.req.routeIndex=H;else w=H===$.length&&Y||void 0;if(w)try{G=await w(X,()=>Z(H+1))}catch(D){if(D instanceof Error&&J)X.error=D,G=await J(D,X),z=!0;else throw D}else if(X.finalized===!1&&W)G=await W(X);if(G&&(X.finalized===!1||z))X.res=G;return X}}};var Mg=Symbol();var Vg=async($,J=Object.create(null))=>{let{all:W=!1,dot:X=!1}=J,U=($ instanceof WD?$.raw.headers:$.headers).get("Content-Type");if(U?.startsWith("multipart/form-data")||U?.startsWith("application/x-www-form-urlencoded"))return E$0($,{all:W,dot:X});return{}};async function E$0($,J){let W=await $.formData();if(W)return M$0(W,J);return{}}function M$0($,J){let W=Object.create(null);if($.forEach((X,Y)=>{if(!(J.all||Y.endsWith("[]")))W[Y]=X;else V$0(W,Y,X)}),J.dot)Object.entries(W).forEach(([X,Y])=>{if(X.includes("."))Q$0(W,X,Y),delete W[X]});return W}var V$0=($,J,W)=>{if($[J]!==void 0)if(Array.isArray($[J]))$[J].push(W);else $[J]=[$[J],W];else if(!J.endsWith("[]"))$[J]=W;else $[J]=[W]},Q$0=($,J,W)=>{let X=$,Y=J.split(".");Y.forEach((U,Z)=>{if(Z===Y.length-1)X[U]=W;else{if(!X[U]||typeof X[U]!=="object"||Array.isArray(X[U])||X[U]instanceof File)X[U]=Object.create(null);X=X[U]}})};var u_=($)=>{let J=$.split("/");if(J[0]==="")J.shift();return J},Qg=($)=>{let{groups:J,path:W}=A$0($),X=u_(W);return I$0(X,J)},A$0=($)=>{let J=[];return $=$.replace(/\{[^}]+\}/g,(W,X)=>{let Y=`@${X}`;return J.push([Y,W]),Y}),{groups:J,path:$}},I$0=($,J)=>{for(let W=J.length-1;W>=0;W--){let[X]=J[W];for(let Y=$.length-1;Y>=0;Y--)if($[Y].includes(X)){$[Y]=$[Y].replace(X,J[W][1]);break}}return $},XD={},Ag=($,J)=>{if($==="*")return"*";let W=$.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if(W){let X=`${$}#${J}`;if(!XD[X])if(W[2])XD[X]=J&&J[0]!==":"&&J[0]!=="*"?[X,W[1],new RegExp(`^${W[2]}(?=/${J})`)]:[$,W[1],new RegExp(`^${W[2]}$`)];else XD[X]=[$,W[1],!0];return XD[X]}return null},YD=($,J)=>{try{return J($)}catch{return $.replace(/(?:%[0-9A-Fa-f]{2})+/g,(W)=>{try{return J(W)}catch{return W}})}},L$0=($)=>YD($,decodeURI),p_=($)=>{let J=$.url,W=J.indexOf("/",J.indexOf(":")+4),X=W;for(;X<J.length;X++){let Y=J.charCodeAt(X);if(Y===37){let U=J.indexOf("?",X),Z=J.slice(W,U===-1?void 0:U);return L$0(Z.includes("%25")?Z.replace(/%25/g,"%2525"):Z)}else if(Y===63)break}return J.slice(W,X)};var Ig=($)=>{let J=p_($);return J.length>1&&J.at(-1)==="/"?J.slice(0,-1):J},t7=($,J,...W)=>{if(W.length)J=t7(J,...W);return`${$?.[0]==="/"?"":"/"}${$}${J==="/"?"":`${$?.at(-1)==="/"?"":"/"}${J?.[0]==="/"?J.slice(1):J}`}`},UD=($)=>{if($.charCodeAt($.length-1)!==63||!$.includes(":"))return null;let J=$.split("/"),W=[],X="";return J.forEach((Y)=>{if(Y!==""&&!/\:/.test(Y))X+="/"+Y;else if(/\:/.test(Y))if(/\?/.test(Y)){if(W.length===0&&X==="")W.push("/");else W.push(X);let U=Y.replace("?","");X+="/"+U,W.push(X)}else X+="/"+Y}),W.filter((Y,U,Z)=>Z.indexOf(Y)===U)},c_=($)=>{if(!/[%+]/.test($))return $;if($.indexOf("+")!==-1)$=$.replace(/\+/g," ");return $.indexOf("%")!==-1?YD($,d_):$},Lg=($,J,W)=>{let X;if(!W&&J&&!/[%+]/.test(J)){let Z=$.indexOf(`?${J}`,8);if(Z===-1)Z=$.indexOf(`&${J}`,8);while(Z!==-1){let H=$.charCodeAt(Z+J.length+1);if(H===61){let G=Z+J.length+2,z=$.indexOf("&",G);return c_($.slice(G,z===-1?void 0:z))}else if(H==38||isNaN(H))return"";Z=$.indexOf(`&${J}`,Z+1)}if(X=/[%+]/.test($),!X)return}let Y={};X??=/[%+]/.test($);let U=$.indexOf("?",8);while(U!==-1){let Z=$.indexOf("&",U+1),H=$.indexOf("=",U);if(H>Z&&Z!==-1)H=-1;let G=$.slice(U+1,H===-1?Z===-1?void 0:Z:H);if(X)G=c_(G);if(U=Z,G==="")continue;let z;if(H===-1)z="";else if(z=$.slice(H+1,Z===-1?void 0:Z),X)z=c_(z);if(W){if(!(Y[G]&&Array.isArray(Y[G])))Y[G]=[];Y[G].push(z)}else Y[G]??=z}return J?Y[J]:Y},Pg=Lg,_g=($,J)=>{return Lg($,J,!0)},d_=decodeURIComponent;var Ng=($)=>YD($,d_),WD=class{raw;#$;#J;routeIndex=0;path;bodyCache={};constructor($,J="/",W=[[]]){this.raw=$,this.path=J,this.#J=W,this.#$={}}param($){return $?this.#W($):this.#X()}#W($){let J=this.#J[0][this.routeIndex][1][$],W=this.#Y(J);return W&&/\%/.test(W)?Ng(W):W}#X(){let $={},J=Object.keys(this.#J[0][this.routeIndex][1]);for(let W of J){let X=this.#Y(this.#J[0][this.routeIndex][1][W]);if(X!==void 0)$[W]=/\%/.test(X)?Ng(X):X}return $}#Y($){return this.#J[1]?this.#J[1][$]:$}query($){return Pg(this.url,$)}queries($){return _g(this.url,$)}header($){if($)return this.raw.headers.get($)??void 0;let J={};return this.raw.headers.forEach((W,X)=>{J[X]=W}),J}async parseBody($){return this.bodyCache.parsedBody??=await Vg(this,$)}#Z=($)=>{let{bodyCache:J,raw:W}=this,X=J[$];if(X)return X;let Y=Object.keys(J)[0];if(Y)return J[Y].then((U)=>{if(Y==="json")U=JSON.stringify(U);return new Response(U)[$]()});return J[$]=W[$]()};json(){return this.#Z("text").then(($)=>JSON.parse($))}text(){return this.#Z("text")}arrayBuffer(){return this.#Z("arrayBuffer")}blob(){return this.#Z("blob")}formData(){return this.#Z("formData")}addValidatedData($,J){this.#$[$]=J}valid($){return this.#$[$]}get url(){return this.raw.url}get method(){return this.raw.method}get[Mg](){return this.#J}get matchedRoutes(){return this.#J[0].map(([[,$]])=>$)}get routePath(){return this.#J[0].map(([[,$]])=>$)[this.routeIndex].path}};var Bg={Stringify:1,BeforeStream:2,Stream:3},P$0=($,J)=>{let W=new String($);return W.isEscaped=!0,W.callbacks=J,W};var l_=async($,J,W,X,Y)=>{if(typeof $==="object"&&!($ instanceof String)){if(!($ instanceof Promise))$=$.toString();if($ instanceof Promise)$=await $}let U=$.callbacks;if(!U?.length)return Promise.resolve($);if(Y)Y[0]+=$;else Y=[$];let Z=Promise.all(U.map((H)=>H({phase:J,buffer:Y,context:X}))).then((H)=>Promise.all(H.filter(Boolean).map((G)=>l_(G,J,!1,X,Y))).then(()=>Y[0]));if(W)return P$0(await Z,U);else return Z};var _$0="text/plain; charset=UTF-8",r_=($,J)=>{return{"Content-Type":$,...J}},Rg=class{#$;#J;env={};#W;finalized=!1;error;#X;#Y;#Z;#H;#w;#z;#G;#U;#Q;constructor($,J){if(this.#$=$,J)this.#Y=J.executionCtx,this.env=J.env,this.#z=J.notFoundHandler,this.#Q=J.path,this.#U=J.matchResult}get req(){return this.#J??=new WD(this.#$,this.#Q,this.#U),this.#J}get event(){if(this.#Y&&"respondWith"in this.#Y)return this.#Y;else throw Error("This context has no FetchEvent")}get executionCtx(){if(this.#Y)return this.#Y;else throw Error("This context has no ExecutionContext")}get res(){return this.#Z||=new Response(null,{headers:this.#G??=new Headers})}set res($){if(this.#Z&&$){$=new Response($.body,$);for(let[J,W]of this.#Z.headers.entries()){if(J==="content-type")continue;if(J==="set-cookie"){let X=this.#Z.headers.getSetCookie();$.headers.delete("set-cookie");for(let Y of X)$.headers.append("set-cookie",Y)}else $.headers.set(J,W)}}this.#Z=$,this.finalized=!0}render=(...$)=>{return this.#w??=(J)=>this.html(J),this.#w(...$)};setLayout=($)=>this.#H=$;getLayout=()=>this.#H;setRenderer=($)=>{this.#w=$};header=($,J,W)=>{if(this.finalized)this.#Z=new Response(this.#Z.body,this.#Z);let X=this.#Z?this.#Z.headers:this.#G??=new Headers;if(J===void 0)X.delete($);else if(W?.append)X.append($,J);else X.set($,J)};status=($)=>{this.#X=$};set=($,J)=>{this.#W??=new Map,this.#W.set($,J)};get=($)=>{return this.#W?this.#W.get($):void 0};get var(){if(!this.#W)return{};return Object.fromEntries(this.#W)}#O($,J,W){let X=this.#Z?new Headers(this.#Z.headers):this.#G??new Headers;if(typeof J==="object"&&"headers"in J){let U=J.headers instanceof Headers?J.headers:new Headers(J.headers);for(let[Z,H]of U)if(Z.toLowerCase()==="set-cookie")X.append(Z,H);else X.set(Z,H)}if(W)for(let[U,Z]of Object.entries(W))if(typeof Z==="string")X.set(U,Z);else{X.delete(U);for(let H of Z)X.append(U,H)}let Y=typeof J==="number"?J:J?.status??this.#X;return new Response($,{status:Y,headers:X})}newResponse=(...$)=>this.#O(...$);body=($,J,W)=>this.#O($,J,W);text=($,J,W)=>{return!this.#G&&!this.#X&&!J&&!W&&!this.finalized?new Response($):this.#O($,J,r_(_$0,W))};json=($,J,W)=>{return this.#O(JSON.stringify($),J,r_("application/json",W))};html=($,J,W)=>{let X=(Y)=>this.#O(Y,J,r_("text/html; charset=UTF-8",W));return typeof $==="object"?l_($,Bg.Stringify,!1,{}).then(X):X($)};redirect=($,J)=>{let W=String($);return this.header("Location",!/[^\x00-\xFF]/.test(W)?W:encodeURI(W)),this.newResponse(null,J??302)};notFound=()=>{return this.#z??=()=>new Response,this.#z(this)}};var S1="ALL",Sg="all",jg=["get","post","put","delete","options","patch"],ZD="Can not add a route since the matcher is already built.",HD=class extends Error{};var kg="__COMPOSED_HANDLER";var N$0=($)=>{return $.text("404 Not Found",404)},vg=($,J)=>{if("getResponse"in $){let W=$.getResponse();return J.newResponse(W.body,W)}return console.error($),J.text("Internal Server Error",500)},n_=class{get;post;put;delete;options;patch;all;on;use;router;getPath;_basePath="/";#$="/";routes=[];constructor($={}){[...jg,Sg].forEach((Y)=>{this[Y]=(U,...Z)=>{if(typeof U==="string")this.#$=U;else this.#X(Y,this.#$,U);return Z.forEach((H)=>{this.#X(Y,this.#$,H)}),this}}),this.on=(Y,U,...Z)=>{for(let H of[U].flat()){this.#$=H;for(let G of[Y].flat())Z.map((z)=>{this.#X(G.toUpperCase(),this.#$,z)})}return this},this.use=(Y,...U)=>{if(typeof Y==="string")this.#$=Y;else this.#$="*",U.unshift(Y);return U.forEach((Z)=>{this.#X(S1,this.#$,Z)}),this};let{strict:W,...X}=$;Object.assign(this,X),this.getPath=W??!0?$.getPath??p_:Ig}#J(){let $=new n_({router:this.router,getPath:this.getPath});return $.errorHandler=this.errorHandler,$.#W=this.#W,$.routes=this.routes,$}#W=N$0;errorHandler=vg;route($,J){let W=this.basePath($);return J.routes.map((X)=>{let Y;if(J.errorHandler===vg)Y=X.handler;else Y=async(U,Z)=>(await y_([],J.errorHandler)(U,()=>X.handler(U,Z))).res,Y[kg]=X.handler;W.#X(X.method,X.path,Y)}),this}basePath($){let J=this.#J();return J._basePath=t7(this._basePath,$),J}onError=($)=>{return this.errorHandler=$,this};notFound=($)=>{return this.#W=$,this};mount($,J,W){let X,Y;if(W)if(typeof W==="function")Y=W;else if(Y=W.optionHandler,W.replaceRequest===!1)X=(H)=>H;else X=W.replaceRequest;let U=Y?(H)=>{let G=Y(H);return Array.isArray(G)?G:[G]}:(H)=>{let G=void 0;try{G=H.executionCtx}catch{}return[H.env,G]};X||=(()=>{let H=t7(this._basePath,$),G=H==="/"?0:H.length;return(z)=>{let w=new URL(z.url);return w.pathname=w.pathname.slice(G)||"/",new Request(w,z)}})();let Z=async(H,G)=>{let z=await J(X(H.req.raw),...U(H));if(z)return z;await G()};return this.#X(S1,t7($,"*"),Z),this}#X($,J,W){$=$.toUpperCase(),J=t7(this._basePath,J);let X={basePath:this._basePath,path:J,method:$,handler:W};this.router.add($,J,[W,X]),this.routes.push(X)}#Y($,J){if($ instanceof Error)return this.errorHandler($,J);throw $}#Z($,J,W,X){if(X==="HEAD")return(async()=>new Response(null,await this.#Z($,J,W,"GET")))();let Y=this.getPath($,{env:W}),U=this.router.match(X,Y),Z=new Rg($,{path:Y,matchResult:U,env:W,executionCtx:J,notFoundHandler:this.#W});if(U[0].length===1){let G;try{G=U[0][0][0][0](Z,async()=>{Z.res=await this.#W(Z)})}catch(z){return this.#Y(z,Z)}return G instanceof Promise?G.then((z)=>z||(Z.finalized?Z.res:this.#W(Z))).catch((z)=>this.#Y(z,Z)):G??this.#W(Z)}let H=y_(U[0],this.errorHandler,this.#W);return(async()=>{try{let G=await H(Z);if(!G.finalized)throw Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return G.res}catch(G){return this.#Y(G,Z)}})()}fetch=($,...J)=>{return this.#Z($,J[1],J[0],$.method)};request=($,J,W,X)=>{if($ instanceof Request)return this.fetch(J?new Request($,J):$,W,X);return $=$.toString(),this.fetch(new Request(/^https?:\/\//.test($)?$:`http://localhost${t7("/",$)}`,J),W,X)};fire=()=>{addEventListener("fetch",($)=>{$.respondWith(this.#Z($.request,$,void 0,$.request.method))})}};var pZ=[];function GD($,J){let W=this.buildAllMatchers(),X=(Y,U)=>{let Z=W[Y]||W[S1],H=Z[2][U];if(H)return H;let G=U.match(Z[0]);if(!G)return[[],pZ];let z=G.indexOf("",1);return[Z[1][z],G]};return this.match=X,X($,J)}var zD="[^/]+",dZ=".*",lZ="(?:|/.*)",a7=Symbol(),B$0=new Set(".\\+*[^]$()");function R$0($,J){if($.length===1)return J.length===1?$<J?-1:1:-1;if(J.length===1)return 1;if($===dZ||$===lZ)return 1;else if(J===dZ||J===lZ)return-1;if($===zD)return 1;else if(J===zD)return-1;return $.length===J.length?$<J?-1:1:J.length-$.length}var wD=class{#$;#J;#W=Object.create(null);insert($,J,W,X,Y){if($.length===0){if(this.#$!==void 0)throw a7;if(Y)return;this.#$=J;return}let[U,...Z]=$,H=U==="*"?Z.length===0?["","",dZ]:["","",zD]:U==="/*"?["","",lZ]:U.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/),G;if(H){let z=H[1],w=H[2]||zD;if(z&&H[2]){if(w===".*")throw a7;if(w=w.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(w))throw a7}if(G=this.#W[w],!G){if(Object.keys(this.#W).some((D)=>D!==dZ&&D!==lZ))throw a7;if(Y)return;if(G=this.#W[w]=new wD,z!=="")G.#J=X.varIndex++}if(!Y&&z!=="")W.push([z,G.#J])}else if(G=this.#W[U],!G){if(Object.keys(this.#W).some((z)=>z.length>1&&z!==dZ&&z!==lZ))throw a7;if(Y)return;G=this.#W[U]=new wD}G.insert(Z,J,W,X,Y)}buildRegExpStr(){let J=Object.keys(this.#W).sort(R$0).map((W)=>{let X=this.#W[W];return(typeof X.#J==="number"?`(${W})@${X.#J}`:B$0.has(W)?`\\${W}`:W)+X.buildRegExpStr()});if(typeof this.#$==="number")J.unshift(`#${this.#$}`);if(J.length===0)return"";if(J.length===1)return J[0];return"(?:"+J.join("|")+")"}};var Cg=class{#$={varIndex:0};#J=new wD;insert($,J,W){let X=[],Y=[];for(let Z=0;;){let H=!1;if($=$.replace(/\{[^}]+\}/g,(G)=>{let z=`@\\${Z}`;return Y[Z]=[z,G],Z++,H=!0,z}),!H)break}let U=$.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let Z=Y.length-1;Z>=0;Z--){let[H]=Y[Z];for(let G=U.length-1;G>=0;G--)if(U[G].indexOf(H)!==-1){U[G]=U[G].replace(H,Y[Z][1]);break}}return this.#J.insert(U,J,X,this.#$,W),X}buildRegExp(){let $=this.#J.buildRegExpStr();if($==="")return[/^$/,[],[]];let J=0,W=[],X=[];return $=$.replace(/#(\d+)|@(\d+)|\.\*\$/g,(Y,U,Z)=>{if(U!==void 0)return W[++J]=Number(U),"$()";if(Z!==void 0)return X[Number(Z)]=++J,"";return""}),[new RegExp(`^${$}`),W,X]}};var S$0=[/^$/,[],Object.create(null)],Tg=Object.create(null);function qg($){return Tg[$]??=new RegExp($==="*"?"":`^${$.replace(/\/\*$|([.\\+*[^\]$()])/g,(J,W)=>W?`\\${W}`:"(?:|/.*)")}$`)}function j$0(){Tg=Object.create(null)}function k$0($){let J=new Cg,W=[];if($.length===0)return S$0;let X=$.map((z)=>[!/\*|\/:/.test(z[0]),...z]).sort(([z,w],[D,K])=>z?1:D?-1:w.length-K.length),Y=Object.create(null);for(let z=0,w=-1,D=X.length;z<D;z++){let[K,O,F]=X[z];if(K)Y[O]=[F.map(([A])=>[A,Object.create(null)]),pZ];else w++;let M;try{M=J.insert(O,w,K)}catch(A){throw A===a7?new HD(O):A}if(K)continue;W[w]=F.map(([A,I])=>{let P=Object.create(null);I-=1;for(;I>=0;I--){let[Q,N]=M[I];P[Q]=N}return[A,P]})}let[U,Z,H]=J.buildRegExp();for(let z=0,w=W.length;z<w;z++)for(let D=0,K=W[z].length;D<K;D++){let O=W[z][D]?.[1];if(!O)continue;let F=Object.keys(O);for(let M=0,A=F.length;M<A;M++)O[F[M]]=H[O[F[M]]]}let G=[];for(let z in Z)G[z]=W[Z[z]];return[U,G,Y]}function MY($,J){if(!$)return;for(let W of Object.keys($).sort((X,Y)=>Y.length-X.length))if(qg(W).test(J))return[...$[W]];return}var DD=class{name="RegExpRouter";#$;#J;constructor(){this.#$={[S1]:Object.create(null)},this.#J={[S1]:Object.create(null)}}add($,J,W){let X=this.#$,Y=this.#J;if(!X||!Y)throw Error(ZD);if(!X[$])[X,Y].forEach((H)=>{H[$]=Object.create(null),Object.keys(H[S1]).forEach((G)=>{H[$][G]=[...H[S1][G]]})});if(J==="/*")J="*";let U=(J.match(/\/:/g)||[]).length;if(/\*$/.test(J)){let H=qg(J);if($===S1)Object.keys(X).forEach((G)=>{X[G][J]||=MY(X[G],J)||MY(X[S1],J)||[]});else X[$][J]||=MY(X[$],J)||MY(X[S1],J)||[];Object.keys(X).forEach((G)=>{if($===S1||$===G)Object.keys(X[G]).forEach((z)=>{H.test(z)&&X[G][z].push([W,U])})}),Object.keys(Y).forEach((G)=>{if($===S1||$===G)Object.keys(Y[G]).forEach((z)=>H.test(z)&&Y[G][z].push([W,U]))});return}let Z=UD(J)||[J];for(let H=0,G=Z.length;H<G;H++){let z=Z[H];Object.keys(Y).forEach((w)=>{if($===S1||$===w)Y[w][z]||=[...MY(X[w],z)||MY(X[S1],z)||[]],Y[w][z].push([W,U-G+H+1])})}}match=GD;buildAllMatchers(){let $=Object.create(null);return Object.keys(this.#J).concat(Object.keys(this.#$)).forEach((J)=>{$[J]||=this.#W(J)}),this.#$=this.#J=void 0,j$0(),$}#W($){let J=[],W=$===S1;if([this.#$,this.#J].forEach((X)=>{let Y=X[$]?Object.keys(X[$]).map((U)=>[U,X[$][U]]):[];if(Y.length!==0)W||=!0,J.push(...Y);else if($!==S1)J.push(...Object.keys(X[S1]).map((U)=>[U,X[S1][U]]))}),!W)return null;else return k$0(J)}};var v$0=class{name="PreparedRegExpRouter";#$;#J;constructor($,J){this.#$=$,this.#J=J}#W($,J){let W=this.#$[$];W[1].forEach((X)=>X&&X.push(J)),Object.values(W[2]).forEach((X)=>X[0].push(J))}#X($,J,W,X,Y){let U=this.#$[$];if(!Y)U[2][J][0].push([W,{}]);else X.forEach((Z)=>{if(typeof Z==="number")U[1][Z].push([W,Y]);else U[2][Z||J][0].push([W,Y])})}add($,J,W){if(!this.#$[$]){let Y=this.#$[S1],U={};for(let Z in Y[2])U[Z]=[Y[2][Z][0].slice(),pZ];this.#$[$]=[Y[0],Y[1].map((Z)=>Array.isArray(Z)?Z.slice():0),U]}if(J==="/*"||J==="*"){let Y=[W,{}];if($===S1)for(let U in this.#$)this.#W(U,Y);else this.#W($,Y);return}let X=this.#J[J];if(!X)throw Error(`Path ${J} is not registered`);for(let[Y,U]of X)if($===S1)for(let Z in this.#$)this.#X(Z,J,W,Y,U);else this.#X($,J,W,Y,U)}buildAllMatchers(){return this.#$}match=GD};var i_=class{name="SmartRouter";#$=[];#J=[];constructor($){this.#$=$.routers}add($,J,W){if(!this.#J)throw Error(ZD);this.#J.push([$,J,W])}match($,J){if(!this.#J)throw Error("Fatal error");let W=this.#$,X=this.#J,Y=W.length,U=0,Z;for(;U<Y;U++){let H=W[U];try{for(let G=0,z=X.length;G<z;G++)H.add(...X[G]);Z=H.match($,J)}catch(G){if(G instanceof HD)continue;throw G}this.match=H.match.bind(H),this.#$=[H],this.#J=void 0;break}if(U===Y)throw Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,Z}get activeRouter(){if(this.#J||this.#$.length!==1)throw Error("No active router has been determined yet.");return this.#$[0]}};var rZ=Object.create(null),t_=class{#$;#J;#W;#X=0;#Y=rZ;constructor($,J,W){if(this.#J=W||Object.create(null),this.#$=[],$&&J){let X=Object.create(null);X[$]={handler:J,possibleKeys:[],score:0},this.#$=[X]}this.#W=[]}insert($,J,W){this.#X=++this.#X;let X=this,Y=Qg(J),U=[];for(let Z=0,H=Y.length;Z<H;Z++){let G=Y[Z],z=Y[Z+1],w=Ag(G,z),D=Array.isArray(w)?w[0]:G;if(D in X.#J){if(X=X.#J[D],w)U.push(w[1]);continue}if(X.#J[D]=new t_,w)X.#W.push(w),U.push(w[1]);X=X.#J[D]}return X.#$.push({[$]:{handler:W,possibleKeys:U.filter((Z,H,G)=>G.indexOf(Z)===H),score:this.#X}}),X}#Z($,J,W,X){let Y=[];for(let U=0,Z=$.#$.length;U<Z;U++){let H=$.#$[U],G=H[J]||H[S1],z={};if(G!==void 0){if(G.params=Object.create(null),Y.push(G),W!==rZ||X&&X!==rZ)for(let w=0,D=G.possibleKeys.length;w<D;w++){let K=G.possibleKeys[w],O=z[G.score];G.params[K]=X?.[K]&&!O?X[K]:W[K]??X?.[K],z[G.score]=!0}}}return Y}search($,J){let W=[];this.#Y=rZ;let Y=[this],U=u_(J),Z=[];for(let H=0,G=U.length;H<G;H++){let z=U[H],w=H===G-1,D=[];for(let K=0,O=Y.length;K<O;K++){let F=Y[K],M=F.#J[z];if(M)if(M.#Y=F.#Y,w){if(M.#J["*"])W.push(...this.#Z(M.#J["*"],$,F.#Y));W.push(...this.#Z(M,$,F.#Y))}else D.push(M);for(let A=0,I=F.#W.length;A<I;A++){let P=F.#W[A],Q=F.#Y===rZ?{}:{...F.#Y};if(P==="*"){let k=F.#J["*"];if(k)W.push(...this.#Z(k,$,F.#Y)),k.#Y=Q,D.push(k);continue}let[N,_,L]=P;if(!z&&!(L instanceof RegExp))continue;let R=F.#J[N],S=U.slice(H).join("/");if(L instanceof RegExp){let k=L.exec(S);if(k){if(Q[_]=k[0],W.push(...this.#Z(R,$,F.#Y,Q)),Object.keys(R.#J).length){R.#Y=Q;let T=k[0].match(/\//)?.length??0;(Z[T]||=[]).push(R)}continue}}if(L===!0||L.test(z))if(Q[_]=z,w){if(W.push(...this.#Z(R,$,Q,F.#Y)),R.#J["*"])W.push(...this.#Z(R.#J["*"],$,Q,F.#Y))}else R.#Y=Q,D.push(R)}}Y=D.concat(Z.shift()??[])}if(W.length>1)W.sort((H,G)=>{return H.score-G.score});return[W.map(({handler:H,params:G})=>[H,G])]}};var a_=class{name="TrieRouter";#$;constructor(){this.#$=new t_}add($,J,W){let X=UD(J);if(X){for(let Y=0,U=X.length;Y<U;Y++)this.#$.insert($,X[Y],W);return}this.#$.insert($,J,W)}match($,J){return this.#$.search($,J)}};var nZ=class extends n_{constructor($={}){super($);this.router=$.router??new i_({routers:[new DD,new a_]})}};var o_=new nZ;o_.all("/auth/*",async($)=>{let J=await $.req.json();console.log("parsing body",J);let W=await JD.api.signUpEmail({body:{email:J.email,password:J.password,name:J.name}});return $.json(W.user.name)});var iZ=Object.freeze({major:16,minor:11,patch:0,preReleaseTag:null});function f0($,J){if(!Boolean($))throw Error(J)}function hg($){return typeof($===null||$===void 0?void 0:$.then)==="function"}function h4($){return typeof $=="object"&&$!==null}function H4($,J){if(!Boolean($))throw Error(J!=null?J:"Unexpected invariant triggered.")}var C$0=/\r\n|[\n\r]/g;function VY($,J){let W=0,X=1;for(let Y of $.body.matchAll(C$0)){if(typeof Y.index==="number"||H4(!1),Y.index>=J)break;W=Y.index+Y[0].length,X+=1}return{line:X,column:J+1-W}}function s_($){return KD($.source,VY($.source,$.start))}function KD($,J){let W=$.locationOffset.column-1,X="".padStart(W)+$.body,Y=J.line-1,U=$.locationOffset.line-1,Z=J.line+U,H=J.line===1?W:0,G=J.column+H,z=`${$.name}:${Z}:${G}
`,w=X.split(/\r\n|[\n\r]/g),D=w[Y];if(D.length>120){let K=Math.floor(G/80),O=G%80,F=[];for(let M=0;M<D.length;M+=80)F.push(D.slice(M,M+80));return z+xg([[`${Z} |`,F[0]],...F.slice(1,K+1).map((M)=>["|",M]),["|","^".padStart(O)],["|",F[K+1]]])}return z+xg([[`${Z-1} |`,w[Y-1]],[`${Z} |`,D],["|","^".padStart(G)],[`${Z+1} |`,w[Y+1]]])}function xg($){let J=$.filter(([X,Y])=>Y!==void 0),W=Math.max(...J.map(([X])=>X.length));return J.map(([X,Y])=>X.padStart(W)+(Y?" "+Y:"")).join(`
`)}function T$0($){let J=$[0];if(J==null||"kind"in J||"length"in J)return{nodes:J,source:$[1],positions:$[2],path:$[3],originalError:$[4],extensions:$[5]};return J}class m extends Error{constructor($,...J){var W,X,Y;let{nodes:U,source:Z,positions:H,path:G,originalError:z,extensions:w}=T$0(J);super($);this.name="GraphQLError",this.path=G!==null&&G!==void 0?G:void 0,this.originalError=z!==null&&z!==void 0?z:void 0,this.nodes=bg(Array.isArray(U)?U:U?[U]:void 0);let D=bg((W=this.nodes)===null||W===void 0?void 0:W.map((O)=>O.loc).filter((O)=>O!=null));this.source=Z!==null&&Z!==void 0?Z:D===null||D===void 0?void 0:(X=D[0])===null||X===void 0?void 0:X.source,this.positions=H!==null&&H!==void 0?H:D===null||D===void 0?void 0:D.map((O)=>O.start),this.locations=H&&Z?H.map((O)=>VY(Z,O)):D===null||D===void 0?void 0:D.map((O)=>VY(O.source,O.start));let K=h4(z===null||z===void 0?void 0:z.extensions)?z===null||z===void 0?void 0:z.extensions:void 0;if(this.extensions=(Y=w!==null&&w!==void 0?w:K)!==null&&Y!==void 0?Y:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),z!==null&&z!==void 0&&z.stack)Object.defineProperty(this,"stack",{value:z.stack,writable:!0,configurable:!0});else if(Error.captureStackTrace)Error.captureStackTrace(this,m);else Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let $=this.message;if(this.nodes){for(let J of this.nodes)if(J.loc)$+=`

`+s_(J.loc)}else if(this.source&&this.locations)for(let J of this.locations)$+=`

`+KD(this.source,J);return $}toJSON(){let $={message:this.message};if(this.locations!=null)$.locations=this.locations;if(this.path!=null)$.path=this.path;if(this.extensions!=null&&Object.keys(this.extensions).length>0)$.extensions=this.extensions;return $}}function bg($){return $===void 0||$.length===0?void 0:$}function G4($,J,W){return new m(`Syntax Error: ${W}`,{source:$,positions:[J]})}class OD{constructor($,J,W){this.start=$.start,this.end=J.end,this.startToken=$,this.endToken=J,this.source=W}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class tZ{constructor($,J,W,X,Y,U){this.kind=$,this.start=J,this.end=W,this.line=X,this.column=Y,this.value=U,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}var e_={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},q$0=new Set(Object.keys(e_));function aZ($){let J=$===null||$===void 0?void 0:$.kind;return typeof J==="string"&&q$0.has(J)}var E4;(function($){$.QUERY="query",$.MUTATION="mutation",$.SUBSCRIPTION="subscription"})(E4||(E4={}));var z0;(function($){$.QUERY="QUERY",$.MUTATION="MUTATION",$.SUBSCRIPTION="SUBSCRIPTION",$.FIELD="FIELD",$.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",$.FRAGMENT_SPREAD="FRAGMENT_SPREAD",$.INLINE_FRAGMENT="INLINE_FRAGMENT",$.VARIABLE_DEFINITION="VARIABLE_DEFINITION",$.SCHEMA="SCHEMA",$.SCALAR="SCALAR",$.OBJECT="OBJECT",$.FIELD_DEFINITION="FIELD_DEFINITION",$.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",$.INTERFACE="INTERFACE",$.UNION="UNION",$.ENUM="ENUM",$.ENUM_VALUE="ENUM_VALUE",$.INPUT_OBJECT="INPUT_OBJECT",$.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"})(z0||(z0={}));var v;(function($){$.NAME="Name",$.DOCUMENT="Document",$.OPERATION_DEFINITION="OperationDefinition",$.VARIABLE_DEFINITION="VariableDefinition",$.SELECTION_SET="SelectionSet",$.FIELD="Field",$.ARGUMENT="Argument",$.FRAGMENT_SPREAD="FragmentSpread",$.INLINE_FRAGMENT="InlineFragment",$.FRAGMENT_DEFINITION="FragmentDefinition",$.VARIABLE="Variable",$.INT="IntValue",$.FLOAT="FloatValue",$.STRING="StringValue",$.BOOLEAN="BooleanValue",$.NULL="NullValue",$.ENUM="EnumValue",$.LIST="ListValue",$.OBJECT="ObjectValue",$.OBJECT_FIELD="ObjectField",$.DIRECTIVE="Directive",$.NAMED_TYPE="NamedType",$.LIST_TYPE="ListType",$.NON_NULL_TYPE="NonNullType",$.SCHEMA_DEFINITION="SchemaDefinition",$.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",$.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",$.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",$.FIELD_DEFINITION="FieldDefinition",$.INPUT_VALUE_DEFINITION="InputValueDefinition",$.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",$.UNION_TYPE_DEFINITION="UnionTypeDefinition",$.ENUM_TYPE_DEFINITION="EnumTypeDefinition",$.ENUM_VALUE_DEFINITION="EnumValueDefinition",$.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",$.DIRECTIVE_DEFINITION="DirectiveDefinition",$.SCHEMA_EXTENSION="SchemaExtension",$.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",$.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",$.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",$.UNION_TYPE_EXTENSION="UnionTypeExtension",$.ENUM_TYPE_EXTENSION="EnumTypeExtension",$.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(v||(v={}));function FD($){return $===9||$===32}function QY($){return $>=48&&$<=57}function gg($){return $>=97&&$<=122||$>=65&&$<=90}function oZ($){return gg($)||$===95}function ED($){return gg($)||QY($)||$===95}function fg($){var J;let W=Number.MAX_SAFE_INTEGER,X=null,Y=-1;for(let Z=0;Z<$.length;++Z){var U;let H=$[Z],G=h$0(H);if(G===H.length)continue;if(X=(U=X)!==null&&U!==void 0?U:Z,Y=Z,Z!==0&&G<W)W=G}return $.map((Z,H)=>H===0?Z:Z.slice(W)).slice((J=X)!==null&&J!==void 0?J:0,Y+1)}function h$0($){let J=0;while(J<$.length&&FD($.charCodeAt(J)))++J;return J}function mg($,J){let W=$.replace(/"""/g,'\\"""'),X=W.split(/\r\n|[\n\r]/g),Y=X.length===1,U=X.length>1&&X.slice(1).every((O)=>O.length===0||FD(O.charCodeAt(0))),Z=W.endsWith('\\"""'),H=$.endsWith('"')&&!Z,G=$.endsWith("\\"),z=H||G,w=!(J!==null&&J!==void 0&&J.minimize)&&(!Y||$.length>70||z||U||Z),D="",K=Y&&FD($.charCodeAt(0));if(w&&!K||U)D+=`
`;if(D+=W,w||z)D+=`
`;return'"""'+D+'"""'}var l;(function($){$.SOF="<SOF>",$.EOF="<EOF>",$.BANG="!",$.DOLLAR="$",$.AMP="&",$.PAREN_L="(",$.PAREN_R=")",$.SPREAD="...",$.COLON=":",$.EQUALS="=",$.AT="@",$.BRACKET_L="[",$.BRACKET_R="]",$.BRACE_L="{",$.PIPE="|",$.BRACE_R="}",$.NAME="Name",$.INT="Int",$.FLOAT="Float",$.STRING="String",$.BLOCK_STRING="BlockString",$.COMMENT="Comment"})(l||(l={}));class MD{constructor($){let J=new tZ(l.SOF,0,0,0,0);this.source=$,this.lastToken=J,this.token=J,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let $=this.token;if($.kind!==l.EOF)do if($.next)$=$.next;else{let J=x$0(this,$.end);$.next=J,J.prev=$,$=J}while($.kind===l.COMMENT);return $}}function cg($){return $===l.BANG||$===l.DOLLAR||$===l.AMP||$===l.PAREN_L||$===l.PAREN_R||$===l.SPREAD||$===l.COLON||$===l.EQUALS||$===l.AT||$===l.BRACKET_L||$===l.BRACKET_R||$===l.BRACE_L||$===l.PIPE||$===l.BRACE_R}function AY($){return $>=0&&$<=55295||$>=57344&&$<=1114111}function VD($,J){return ug($.charCodeAt(J))&&pg($.charCodeAt(J+1))}function ug($){return $>=55296&&$<=56319}function pg($){return $>=56320&&$<=57343}function o7($,J){let W=$.source.body.codePointAt(J);if(W===void 0)return l.EOF;else if(W>=32&&W<=126){let X=String.fromCodePoint(W);return X==='"'?`'"'`:`"${X}"`}return"U+"+W.toString(16).toUpperCase().padStart(4,"0")}function M4($,J,W,X,Y){let U=$.line,Z=1+W-$.lineStart;return new tZ(J,W,X,U,Z,Y)}function x$0($,J){let W=$.source.body,X=W.length,Y=J;while(Y<X){let U=W.charCodeAt(Y);switch(U){case 65279:case 9:case 32:case 44:++Y;continue;case 10:++Y,++$.line,$.lineStart=Y;continue;case 13:if(W.charCodeAt(Y+1)===10)Y+=2;else++Y;++$.line,$.lineStart=Y;continue;case 35:return b$0($,Y);case 33:return M4($,l.BANG,Y,Y+1);case 36:return M4($,l.DOLLAR,Y,Y+1);case 38:return M4($,l.AMP,Y,Y+1);case 40:return M4($,l.PAREN_L,Y,Y+1);case 41:return M4($,l.PAREN_R,Y,Y+1);case 46:if(W.charCodeAt(Y+1)===46&&W.charCodeAt(Y+2)===46)return M4($,l.SPREAD,Y,Y+3);break;case 58:return M4($,l.COLON,Y,Y+1);case 61:return M4($,l.EQUALS,Y,Y+1);case 64:return M4($,l.AT,Y,Y+1);case 91:return M4($,l.BRACKET_L,Y,Y+1);case 93:return M4($,l.BRACKET_R,Y,Y+1);case 123:return M4($,l.BRACE_L,Y,Y+1);case 124:return M4($,l.PIPE,Y,Y+1);case 125:return M4($,l.BRACE_R,Y,Y+1);case 34:if(W.charCodeAt(Y+1)===34&&W.charCodeAt(Y+2)===34)return u$0($,Y);return f$0($,Y)}if(QY(U)||U===45)return g$0($,Y,U);if(oZ(U))return p$0($,Y);throw G4($.source,Y,U===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:AY(U)||VD(W,Y)?`Unexpected character: ${o7($,Y)}.`:`Invalid character: ${o7($,Y)}.`)}return M4($,l.EOF,X,X)}function b$0($,J){let W=$.source.body,X=W.length,Y=J+1;while(Y<X){let U=W.charCodeAt(Y);if(U===10||U===13)break;if(AY(U))++Y;else if(VD(W,Y))Y+=2;else break}return M4($,l.COMMENT,J,Y,W.slice(J+1,Y))}function g$0($,J,W){let X=$.source.body,Y=J,U=W,Z=!1;if(U===45)U=X.charCodeAt(++Y);if(U===48){if(U=X.charCodeAt(++Y),QY(U))throw G4($.source,Y,`Invalid number, unexpected digit after 0: ${o7($,Y)}.`)}else Y=$N($,Y,U),U=X.charCodeAt(Y);if(U===46)Z=!0,U=X.charCodeAt(++Y),Y=$N($,Y,U),U=X.charCodeAt(Y);if(U===69||U===101){if(Z=!0,U=X.charCodeAt(++Y),U===43||U===45)U=X.charCodeAt(++Y);Y=$N($,Y,U),U=X.charCodeAt(Y)}if(U===46||oZ(U))throw G4($.source,Y,`Invalid number, expected digit but got: ${o7($,Y)}.`);return M4($,Z?l.FLOAT:l.INT,J,Y,X.slice(J,Y))}function $N($,J,W){if(!QY(W))throw G4($.source,J,`Invalid number, expected digit but got: ${o7($,J)}.`);let X=$.source.body,Y=J+1;while(QY(X.charCodeAt(Y)))++Y;return Y}function f$0($,J){let W=$.source.body,X=W.length,Y=J+1,U=Y,Z="";while(Y<X){let H=W.charCodeAt(Y);if(H===34)return Z+=W.slice(U,Y),M4($,l.STRING,J,Y+1,Z);if(H===92){Z+=W.slice(U,Y);let G=W.charCodeAt(Y+1)===117?W.charCodeAt(Y+2)===123?m$0($,Y):y$0($,Y):c$0($,Y);Z+=G.value,Y+=G.size,U=Y;continue}if(H===10||H===13)break;if(AY(H))++Y;else if(VD(W,Y))Y+=2;else throw G4($.source,Y,`Invalid character within String: ${o7($,Y)}.`)}throw G4($.source,Y,"Unterminated string.")}function m$0($,J){let W=$.source.body,X=0,Y=3;while(Y<12){let U=W.charCodeAt(J+Y++);if(U===125){if(Y<5||!AY(X))break;return{value:String.fromCodePoint(X),size:Y}}if(X=X<<4|sZ(U),X<0)break}throw G4($.source,J,`Invalid Unicode escape sequence: "${W.slice(J,J+Y)}".`)}function y$0($,J){let W=$.source.body,X=yg(W,J+2);if(AY(X))return{value:String.fromCodePoint(X),size:6};if(ug(X)){if(W.charCodeAt(J+6)===92&&W.charCodeAt(J+7)===117){let Y=yg(W,J+8);if(pg(Y))return{value:String.fromCodePoint(X,Y),size:12}}}throw G4($.source,J,`Invalid Unicode escape sequence: "${W.slice(J,J+6)}".`)}function yg($,J){return sZ($.charCodeAt(J))<<12|sZ($.charCodeAt(J+1))<<8|sZ($.charCodeAt(J+2))<<4|sZ($.charCodeAt(J+3))}function sZ($){return $>=48&&$<=57?$-48:$>=65&&$<=70?$-55:$>=97&&$<=102?$-87:-1}function c$0($,J){let W=$.source.body;switch(W.charCodeAt(J+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"\t",size:2}}throw G4($.source,J,`Invalid character escape sequence: "${W.slice(J,J+2)}".`)}function u$0($,J){let W=$.source.body,X=W.length,Y=$.lineStart,U=J+3,Z=U,H="",G=[];while(U<X){let z=W.charCodeAt(U);if(z===34&&W.charCodeAt(U+1)===34&&W.charCodeAt(U+2)===34){H+=W.slice(Z,U),G.push(H);let w=M4($,l.BLOCK_STRING,J,U+3,fg(G).join(`
`));return $.line+=G.length-1,$.lineStart=Y,w}if(z===92&&W.charCodeAt(U+1)===34&&W.charCodeAt(U+2)===34&&W.charCodeAt(U+3)===34){H+=W.slice(Z,U),Z=U+1,U+=4;continue}if(z===10||z===13){if(H+=W.slice(Z,U),G.push(H),z===13&&W.charCodeAt(U+1)===10)U+=2;else++U;H="",Z=U,Y=U;continue}if(AY(z))++U;else if(VD(W,U))U+=2;else throw G4($.source,U,`Invalid character within String: ${o7($,U)}.`)}throw G4($.source,U,"Unterminated string.")}function p$0($,J){let W=$.source.body,X=W.length,Y=J+1;while(Y<X){let U=W.charCodeAt(Y);if(ED(U))++Y;else break}return M4($,l.NAME,J,Y,W.slice(J,Y))}function n($){return QD($,[])}function QD($,J){switch(typeof $){case"string":return JSON.stringify($);case"function":return $.name?`[function ${$.name}]`:"[function]";case"object":return d$0($,J);default:return String($)}}function d$0($,J){if($===null)return"null";if(J.includes($))return"[Circular]";let W=[...J,$];if(l$0($)){let X=$.toJSON();if(X!==$)return typeof X==="string"?X:QD(X,W)}else if(Array.isArray($))return n$0($,W);return r$0($,W)}function l$0($){return typeof $.toJSON==="function"}function r$0($,J){let W=Object.entries($);if(W.length===0)return"{}";if(J.length>2)return"["+i$0($)+"]";return"{ "+W.map(([Y,U])=>Y+": "+QD(U,J)).join(", ")+" }"}function n$0($,J){if($.length===0)return"[]";if(J.length>2)return"[Array]";let W=Math.min(10,$.length),X=$.length-W,Y=[];for(let U=0;U<W;++U)Y.push(QD($[U],J));if(X===1)Y.push("... 1 more item");else if(X>1)Y.push(`... ${X} more items`);return"["+Y.join(", ")+"]"}function i$0($){let J=Object.prototype.toString.call($).replace(/^\[object /,"").replace(/]$/,"");if(J==="Object"&&typeof $.constructor==="function"){let W=$.constructor.name;if(typeof W==="string"&&W!=="")return W}return J}var t$0=globalThis.process&&!1,_$=t$0?function(J,W){return J instanceof W}:function(J,W){if(J instanceof W)return!0;if(typeof J==="object"&&J!==null){var X;let Y=W.prototype[Symbol.toStringTag],U=Symbol.toStringTag in J?J[Symbol.toStringTag]:(X=J.constructor)===null||X===void 0?void 0:X.name;if(Y===U){let Z=n(J);throw Error(`Cannot use ${Y} "${Z}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`)}}return!1};class eZ{constructor($,J="GraphQL request",W={line:1,column:1}){typeof $==="string"||f0(!1,`Body must be a string. Received: ${n($)}.`),this.body=$,this.name=J,this.locationOffset=W,this.locationOffset.line>0||f0(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||f0(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function dg($){return _$($,eZ)}function ID($,J){let W=new lg($,J),X=W.parseDocument();return Object.defineProperty(X,"tokenCount",{enumerable:!1,value:W.tokenCount}),X}class lg{constructor($,J={}){let W=dg($)?$:new eZ($);this._lexer=new MD(W),this._options=J,this._tokenCounter=0}get tokenCount(){return this._tokenCounter}parseName(){let $=this.expectToken(l.NAME);return this.node($,{kind:v.NAME,value:$.value})}parseDocument(){return this.node(this._lexer.token,{kind:v.DOCUMENT,definitions:this.many(l.SOF,this.parseDefinition,l.EOF)})}parseDefinition(){if(this.peek(l.BRACE_L))return this.parseOperationDefinition();let $=this.peekDescription(),J=$?this._lexer.lookahead():this._lexer.token;if(J.kind===l.NAME){switch(J.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if($)throw G4(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(J.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(J)}parseOperationDefinition(){let $=this._lexer.token;if(this.peek(l.BRACE_L))return this.node($,{kind:v.OPERATION_DEFINITION,operation:E4.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});let J=this.parseOperationType(),W;if(this.peek(l.NAME))W=this.parseName();return this.node($,{kind:v.OPERATION_DEFINITION,operation:J,name:W,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){let $=this.expectToken(l.NAME);switch($.value){case"query":return E4.QUERY;case"mutation":return E4.MUTATION;case"subscription":return E4.SUBSCRIPTION}throw this.unexpected($)}parseVariableDefinitions(){return this.optionalMany(l.PAREN_L,this.parseVariableDefinition,l.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:v.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(l.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(l.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){let $=this._lexer.token;return this.expectToken(l.DOLLAR),this.node($,{kind:v.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:v.SELECTION_SET,selections:this.many(l.BRACE_L,this.parseSelection,l.BRACE_R)})}parseSelection(){return this.peek(l.SPREAD)?this.parseFragment():this.parseField()}parseField(){let $=this._lexer.token,J=this.parseName(),W,X;if(this.expectOptionalToken(l.COLON))W=J,X=this.parseName();else X=J;return this.node($,{kind:v.FIELD,alias:W,name:X,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(l.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments($){let J=$?this.parseConstArgument:this.parseArgument;return this.optionalMany(l.PAREN_L,J,l.PAREN_R)}parseArgument($=!1){let J=this._lexer.token,W=this.parseName();return this.expectToken(l.COLON),this.node(J,{kind:v.ARGUMENT,name:W,value:this.parseValueLiteral($)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){let $=this._lexer.token;this.expectToken(l.SPREAD);let J=this.expectOptionalKeyword("on");if(!J&&this.peek(l.NAME))return this.node($,{kind:v.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)});return this.node($,{kind:v.INLINE_FRAGMENT,typeCondition:J?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){let $=this._lexer.token;if(this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0)return this.node($,{kind:v.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()});return this.node($,{kind:v.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral($){let J=this._lexer.token;switch(J.kind){case l.BRACKET_L:return this.parseList($);case l.BRACE_L:return this.parseObject($);case l.INT:return this.advanceLexer(),this.node(J,{kind:v.INT,value:J.value});case l.FLOAT:return this.advanceLexer(),this.node(J,{kind:v.FLOAT,value:J.value});case l.STRING:case l.BLOCK_STRING:return this.parseStringLiteral();case l.NAME:switch(this.advanceLexer(),J.value){case"true":return this.node(J,{kind:v.BOOLEAN,value:!0});case"false":return this.node(J,{kind:v.BOOLEAN,value:!1});case"null":return this.node(J,{kind:v.NULL});default:return this.node(J,{kind:v.ENUM,value:J.value})}case l.DOLLAR:if($)if(this.expectToken(l.DOLLAR),this._lexer.token.kind===l.NAME){let W=this._lexer.token.value;throw G4(this._lexer.source,J.start,`Unexpected variable "$${W}" in constant value.`)}else throw this.unexpected(J);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){let $=this._lexer.token;return this.advanceLexer(),this.node($,{kind:v.STRING,value:$.value,block:$.kind===l.BLOCK_STRING})}parseList($){let J=()=>this.parseValueLiteral($);return this.node(this._lexer.token,{kind:v.LIST,values:this.any(l.BRACKET_L,J,l.BRACKET_R)})}parseObject($){let J=()=>this.parseObjectField($);return this.node(this._lexer.token,{kind:v.OBJECT,fields:this.any(l.BRACE_L,J,l.BRACE_R)})}parseObjectField($){let J=this._lexer.token,W=this.parseName();return this.expectToken(l.COLON),this.node(J,{kind:v.OBJECT_FIELD,name:W,value:this.parseValueLiteral($)})}parseDirectives($){let J=[];while(this.peek(l.AT))J.push(this.parseDirective($));return J}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective($){let J=this._lexer.token;return this.expectToken(l.AT),this.node(J,{kind:v.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments($)})}parseTypeReference(){let $=this._lexer.token,J;if(this.expectOptionalToken(l.BRACKET_L)){let W=this.parseTypeReference();this.expectToken(l.BRACKET_R),J=this.node($,{kind:v.LIST_TYPE,type:W})}else J=this.parseNamedType();if(this.expectOptionalToken(l.BANG))return this.node($,{kind:v.NON_NULL_TYPE,type:J});return J}parseNamedType(){return this.node(this._lexer.token,{kind:v.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(l.STRING)||this.peek(l.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){let $=this._lexer.token,J=this.parseDescription();this.expectKeyword("schema");let W=this.parseConstDirectives(),X=this.many(l.BRACE_L,this.parseOperationTypeDefinition,l.BRACE_R);return this.node($,{kind:v.SCHEMA_DEFINITION,description:J,directives:W,operationTypes:X})}parseOperationTypeDefinition(){let $=this._lexer.token,J=this.parseOperationType();this.expectToken(l.COLON);let W=this.parseNamedType();return this.node($,{kind:v.OPERATION_TYPE_DEFINITION,operation:J,type:W})}parseScalarTypeDefinition(){let $=this._lexer.token,J=this.parseDescription();this.expectKeyword("scalar");let W=this.parseName(),X=this.parseConstDirectives();return this.node($,{kind:v.SCALAR_TYPE_DEFINITION,description:J,name:W,directives:X})}parseObjectTypeDefinition(){let $=this._lexer.token,J=this.parseDescription();this.expectKeyword("type");let W=this.parseName(),X=this.parseImplementsInterfaces(),Y=this.parseConstDirectives(),U=this.parseFieldsDefinition();return this.node($,{kind:v.OBJECT_TYPE_DEFINITION,description:J,name:W,interfaces:X,directives:Y,fields:U})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(l.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(l.BRACE_L,this.parseFieldDefinition,l.BRACE_R)}parseFieldDefinition(){let $=this._lexer.token,J=this.parseDescription(),W=this.parseName(),X=this.parseArgumentDefs();this.expectToken(l.COLON);let Y=this.parseTypeReference(),U=this.parseConstDirectives();return this.node($,{kind:v.FIELD_DEFINITION,description:J,name:W,arguments:X,type:Y,directives:U})}parseArgumentDefs(){return this.optionalMany(l.PAREN_L,this.parseInputValueDef,l.PAREN_R)}parseInputValueDef(){let $=this._lexer.token,J=this.parseDescription(),W=this.parseName();this.expectToken(l.COLON);let X=this.parseTypeReference(),Y;if(this.expectOptionalToken(l.EQUALS))Y=this.parseConstValueLiteral();let U=this.parseConstDirectives();return this.node($,{kind:v.INPUT_VALUE_DEFINITION,description:J,name:W,type:X,defaultValue:Y,directives:U})}parseInterfaceTypeDefinition(){let $=this._lexer.token,J=this.parseDescription();this.expectKeyword("interface");let W=this.parseName(),X=this.parseImplementsInterfaces(),Y=this.parseConstDirectives(),U=this.parseFieldsDefinition();return this.node($,{kind:v.INTERFACE_TYPE_DEFINITION,description:J,name:W,interfaces:X,directives:Y,fields:U})}parseUnionTypeDefinition(){let $=this._lexer.token,J=this.parseDescription();this.expectKeyword("union");let W=this.parseName(),X=this.parseConstDirectives(),Y=this.parseUnionMemberTypes();return this.node($,{kind:v.UNION_TYPE_DEFINITION,description:J,name:W,directives:X,types:Y})}parseUnionMemberTypes(){return this.expectOptionalToken(l.EQUALS)?this.delimitedMany(l.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){let $=this._lexer.token,J=this.parseDescription();this.expectKeyword("enum");let W=this.parseName(),X=this.parseConstDirectives(),Y=this.parseEnumValuesDefinition();return this.node($,{kind:v.ENUM_TYPE_DEFINITION,description:J,name:W,directives:X,values:Y})}parseEnumValuesDefinition(){return this.optionalMany(l.BRACE_L,this.parseEnumValueDefinition,l.BRACE_R)}parseEnumValueDefinition(){let $=this._lexer.token,J=this.parseDescription(),W=this.parseEnumValueName(),X=this.parseConstDirectives();return this.node($,{kind:v.ENUM_VALUE_DEFINITION,description:J,name:W,directives:X})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw G4(this._lexer.source,this._lexer.token.start,`${AD(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){let $=this._lexer.token,J=this.parseDescription();this.expectKeyword("input");let W=this.parseName(),X=this.parseConstDirectives(),Y=this.parseInputFieldsDefinition();return this.node($,{kind:v.INPUT_OBJECT_TYPE_DEFINITION,description:J,name:W,directives:X,fields:Y})}parseInputFieldsDefinition(){return this.optionalMany(l.BRACE_L,this.parseInputValueDef,l.BRACE_R)}parseTypeSystemExtension(){let $=this._lexer.lookahead();if($.kind===l.NAME)switch($.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected($)}parseSchemaExtension(){let $=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");let J=this.parseConstDirectives(),W=this.optionalMany(l.BRACE_L,this.parseOperationTypeDefinition,l.BRACE_R);if(J.length===0&&W.length===0)throw this.unexpected();return this.node($,{kind:v.SCHEMA_EXTENSION,directives:J,operationTypes:W})}parseScalarTypeExtension(){let $=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");let J=this.parseName(),W=this.parseConstDirectives();if(W.length===0)throw this.unexpected();return this.node($,{kind:v.SCALAR_TYPE_EXTENSION,name:J,directives:W})}parseObjectTypeExtension(){let $=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");let J=this.parseName(),W=this.parseImplementsInterfaces(),X=this.parseConstDirectives(),Y=this.parseFieldsDefinition();if(W.length===0&&X.length===0&&Y.length===0)throw this.unexpected();return this.node($,{kind:v.OBJECT_TYPE_EXTENSION,name:J,interfaces:W,directives:X,fields:Y})}parseInterfaceTypeExtension(){let $=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");let J=this.parseName(),W=this.parseImplementsInterfaces(),X=this.parseConstDirectives(),Y=this.parseFieldsDefinition();if(W.length===0&&X.length===0&&Y.length===0)throw this.unexpected();return this.node($,{kind:v.INTERFACE_TYPE_EXTENSION,name:J,interfaces:W,directives:X,fields:Y})}parseUnionTypeExtension(){let $=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");let J=this.parseName(),W=this.parseConstDirectives(),X=this.parseUnionMemberTypes();if(W.length===0&&X.length===0)throw this.unexpected();return this.node($,{kind:v.UNION_TYPE_EXTENSION,name:J,directives:W,types:X})}parseEnumTypeExtension(){let $=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");let J=this.parseName(),W=this.parseConstDirectives(),X=this.parseEnumValuesDefinition();if(W.length===0&&X.length===0)throw this.unexpected();return this.node($,{kind:v.ENUM_TYPE_EXTENSION,name:J,directives:W,values:X})}parseInputObjectTypeExtension(){let $=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");let J=this.parseName(),W=this.parseConstDirectives(),X=this.parseInputFieldsDefinition();if(W.length===0&&X.length===0)throw this.unexpected();return this.node($,{kind:v.INPUT_OBJECT_TYPE_EXTENSION,name:J,directives:W,fields:X})}parseDirectiveDefinition(){let $=this._lexer.token,J=this.parseDescription();this.expectKeyword("directive"),this.expectToken(l.AT);let W=this.parseName(),X=this.parseArgumentDefs(),Y=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");let U=this.parseDirectiveLocations();return this.node($,{kind:v.DIRECTIVE_DEFINITION,description:J,name:W,arguments:X,repeatable:Y,locations:U})}parseDirectiveLocations(){return this.delimitedMany(l.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){let $=this._lexer.token,J=this.parseName();if(Object.prototype.hasOwnProperty.call(z0,J.value))return J;throw this.unexpected($)}node($,J){if(this._options.noLocation!==!0)J.loc=new OD($,this._lexer.lastToken,this._lexer.source);return J}peek($){return this._lexer.token.kind===$}expectToken($){let J=this._lexer.token;if(J.kind===$)return this.advanceLexer(),J;throw G4(this._lexer.source,J.start,`Expected ${rg($)}, found ${AD(J)}.`)}expectOptionalToken($){if(this._lexer.token.kind===$)return this.advanceLexer(),!0;return!1}expectKeyword($){let J=this._lexer.token;if(J.kind===l.NAME&&J.value===$)this.advanceLexer();else throw G4(this._lexer.source,J.start,`Expected "${$}", found ${AD(J)}.`)}expectOptionalKeyword($){let J=this._lexer.token;if(J.kind===l.NAME&&J.value===$)return this.advanceLexer(),!0;return!1}unexpected($){let J=$!==null&&$!==void 0?$:this._lexer.token;return G4(this._lexer.source,J.start,`Unexpected ${AD(J)}.`)}any($,J,W){this.expectToken($);let X=[];while(!this.expectOptionalToken(W))X.push(J.call(this));return X}optionalMany($,J,W){if(this.expectOptionalToken($)){let X=[];do X.push(J.call(this));while(!this.expectOptionalToken(W));return X}return[]}many($,J,W){this.expectToken($);let X=[];do X.push(J.call(this));while(!this.expectOptionalToken(W));return X}delimitedMany($,J){this.expectOptionalToken($);let W=[];do W.push(J.call(this));while(this.expectOptionalToken($));return W}advanceLexer(){let{maxTokens:$}=this._options,J=this._lexer.advance();if(J.kind!==l.EOF){if(++this._tokenCounter,$!==void 0&&this._tokenCounter>$)throw G4(this._lexer.source,J.start,`Document contains more that ${$} tokens. Parsing aborted.`)}}}function AD($){let J=$.value;return rg($.kind)+(J!=null?` "${J}"`:"")}function rg($){return cg($)?`"${$}"`:$}function w$($,J){let[W,X]=J?[$,J]:[void 0,$],Y=" Did you mean ";if(W)Y+=W+" ";let U=X.map((G)=>`"${G}"`);switch(U.length){case 0:return"";case 1:return Y+U[0]+"?";case 2:return Y+U[0]+" or "+U[1]+"?"}let Z=U.slice(0,5),H=Z.pop();return Y+Z.join(", ")+", or "+H+"?"}function JN($){return $}function S8($,J){let W=Object.create(null);for(let X of $)W[J(X)]=X;return W}function s7($,J,W){let X=Object.create(null);for(let Y of $)X[J(Y)]=W(Y);return X}function $H($,J){let W=Object.create(null);for(let X of Object.keys($))W[X]=J($[X],X);return W}function W9($,J){let W=0,X=0;while(W<$.length&&X<J.length){let Y=$.charCodeAt(W),U=J.charCodeAt(X);if(LD(Y)&&LD(U)){let Z=0;do++W,Z=Z*10+Y-WN,Y=$.charCodeAt(W);while(LD(Y)&&Z>0);let H=0;do++X,H=H*10+U-WN,U=J.charCodeAt(X);while(LD(U)&&H>0);if(Z<H)return-1;if(Z>H)return 1}else{if(Y<U)return-1;if(Y>U)return 1;++W,++X}}return $.length-J.length}var WN=48,a$0=57;function LD($){return!isNaN($)&&WN<=$&&$<=a$0}function N$($,J){let W=Object.create(null),X=new ig($),Y=Math.floor($.length*0.4)+1;for(let U of J){let Z=X.measure(U,Y);if(Z!==void 0)W[U]=Z}return Object.keys(W).sort((U,Z)=>{let H=W[U]-W[Z];return H!==0?H:W9(U,Z)})}class ig{constructor($){this._input=$,this._inputLowerCase=$.toLowerCase(),this._inputArray=ng(this._inputLowerCase),this._rows=[Array($.length+1).fill(0),Array($.length+1).fill(0),Array($.length+1).fill(0)]}measure($,J){if(this._input===$)return 0;let W=$.toLowerCase();if(this._inputLowerCase===W)return 1;let X=ng(W),Y=this._inputArray;if(X.length<Y.length){let z=X;X=Y,Y=z}let U=X.length,Z=Y.length;if(U-Z>J)return;let H=this._rows;for(let z=0;z<=Z;z++)H[0][z]=z;for(let z=1;z<=U;z++){let w=H[(z-1)%3],D=H[z%3],K=D[0]=z;for(let O=1;O<=Z;O++){let F=X[z-1]===Y[O-1]?0:1,M=Math.min(w[O]+1,D[O-1]+1,w[O-1]+F);if(z>1&&O>1&&X[z-1]===Y[O-2]&&X[z-2]===Y[O-1]){let A=H[(z-2)%3][O-2];M=Math.min(M,A+1)}if(M<K)K=M;D[O]=M}if(K>J)return}let G=H[U%3][Z];return G<=J?G:void 0}}function ng($){let J=$.length,W=Array(J);for(let X=0;X<J;++X)W[X]=$.charCodeAt(X);return W}function B$($){if($==null)return Object.create(null);if(Object.getPrototypeOf($)===null)return $;let J=Object.create(null);for(let[W,X]of Object.entries($))J[W]=X;return J}function tg($){return`"${$.replace(o$0,s$0)}"`}var o$0=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function s$0($){return e$0[$.charCodeAt(0)]}var e$0=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","","\\\"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"];var IY=Object.freeze({});function e7($,J,W=e_){let X=new Map;for(let I of Object.values(v))X.set(I,LY(J,I));let Y=void 0,U=Array.isArray($),Z=[$],H=-1,G=[],z=$,w=void 0,D=void 0,K=[],O=[];do{H++;let I=H===Z.length,P=I&&G.length!==0;if(I){if(w=O.length===0?void 0:K[K.length-1],z=D,D=O.pop(),P)if(U){z=z.slice();let N=0;for(let[_,L]of G){let R=_-N;if(L===null)z.splice(R,1),N++;else z[R]=L}}else{z={...z};for(let[N,_]of G)z[N]=_}H=Y.index,Z=Y.keys,G=Y.edits,U=Y.inArray,Y=Y.prev}else if(D){if(w=U?H:Z[H],z=D[w],z===null||z===void 0)continue;K.push(w)}let Q;if(!Array.isArray(z)){var F,M;aZ(z)||f0(!1,`Invalid AST Node: ${n(z)}.`);let N=I?(F=X.get(z.kind))===null||F===void 0?void 0:F.leave:(M=X.get(z.kind))===null||M===void 0?void 0:M.enter;if(Q=N===null||N===void 0?void 0:N.call(J,z,w,D,K,O),Q===IY)break;if(Q===!1){if(!I){K.pop();continue}}else if(Q!==void 0){if(G.push([w,Q]),!I)if(aZ(Q))z=Q;else{K.pop();continue}}}if(Q===void 0&&P)G.push([w,z]);if(I)K.pop();else{var A;if(Y={inArray:U,index:H,keys:Z,edits:G,prev:Y},U=Array.isArray(z),Z=U?z:(A=W[z.kind])!==null&&A!==void 0?A:[],H=-1,G=[],D)O.push(D);D=z}}while(Y!==void 0);if(G.length!==0)return G[G.length-1][1];return $}function XN($){let J=Array($.length).fill(null),W=Object.create(null);for(let X of Object.values(v)){let Y=!1,U=Array($.length).fill(void 0),Z=Array($.length).fill(void 0);for(let G=0;G<$.length;++G){let{enter:z,leave:w}=LY($[G],X);Y||(Y=z!=null||w!=null),U[G]=z,Z[G]=w}if(!Y)continue;let H={enter(...G){let z=G[0];for(let D=0;D<$.length;D++)if(J[D]===null){var w;let K=(w=U[D])===null||w===void 0?void 0:w.apply($[D],G);if(K===!1)J[D]=z;else if(K===IY)J[D]=IY;else if(K!==void 0)return K}},leave(...G){let z=G[0];for(let D=0;D<$.length;D++)if(J[D]===null){var w;let K=(w=Z[D])===null||w===void 0?void 0:w.apply($[D],G);if(K===IY)J[D]=IY;else if(K!==void 0&&K!==!1)return K}else if(J[D]===z)J[D]=null}};W[X]=H}return W}function LY($,J){let W=$[J];if(typeof W==="object")return W;else if(typeof W==="function")return{enter:W,leave:void 0};return{enter:$.enter,leave:$.leave}}function $1($){return e7($,J60)}var $60=80,J60={Name:{leave:($)=>$.value},Variable:{leave:($)=>"$"+$.name},Document:{leave:($)=>w0($.definitions,`

`)},OperationDefinition:{leave($){let J=u0("(",w0($.variableDefinitions,", "),")"),W=w0([$.operation,w0([$.name,J]),w0($.directives," ")]," ");return(W==="query"?"":W+" ")+$.selectionSet}},VariableDefinition:{leave:({variable:$,type:J,defaultValue:W,directives:X})=>$+": "+J+u0(" = ",W)+u0(" ",w0(X," "))},SelectionSet:{leave:({selections:$})=>j8($)},Field:{leave({alias:$,name:J,arguments:W,directives:X,selectionSet:Y}){let U=u0("",$,": ")+J,Z=U+u0("(",w0(W,", "),")");if(Z.length>$60)Z=U+u0(`(
`,PD(w0(W,`
`)),`
)`);return w0([Z,w0(X," "),Y]," ")}},Argument:{leave:({name:$,value:J})=>$+": "+J},FragmentSpread:{leave:({name:$,directives:J})=>"..."+$+u0(" ",w0(J," "))},InlineFragment:{leave:({typeCondition:$,directives:J,selectionSet:W})=>w0(["...",u0("on ",$),w0(J," "),W]," ")},FragmentDefinition:{leave:({name:$,typeCondition:J,variableDefinitions:W,directives:X,selectionSet:Y})=>`fragment ${$}${u0("(",w0(W,", "),")")} on ${J} ${u0("",w0(X," ")," ")}`+Y},IntValue:{leave:({value:$})=>$},FloatValue:{leave:({value:$})=>$},StringValue:{leave:({value:$,block:J})=>J?mg($):tg($)},BooleanValue:{leave:({value:$})=>$?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:$})=>$},ListValue:{leave:({values:$})=>"["+w0($,", ")+"]"},ObjectValue:{leave:({fields:$})=>"{"+w0($,", ")+"}"},ObjectField:{leave:({name:$,value:J})=>$+": "+J},Directive:{leave:({name:$,arguments:J})=>"@"+$+u0("(",w0(J,", "),")")},NamedType:{leave:({name:$})=>$},ListType:{leave:({type:$})=>"["+$+"]"},NonNullType:{leave:({type:$})=>$+"!"},SchemaDefinition:{leave:({description:$,directives:J,operationTypes:W})=>u0("",$,`
`)+w0(["schema",w0(J," "),j8(W)]," ")},OperationTypeDefinition:{leave:({operation:$,type:J})=>$+": "+J},ScalarTypeDefinition:{leave:({description:$,name:J,directives:W})=>u0("",$,`
`)+w0(["scalar",J,w0(W," ")]," ")},ObjectTypeDefinition:{leave:({description:$,name:J,interfaces:W,directives:X,fields:Y})=>u0("",$,`
`)+w0(["type",J,u0("implements ",w0(W," & ")),w0(X," "),j8(Y)]," ")},FieldDefinition:{leave:({description:$,name:J,arguments:W,type:X,directives:Y})=>u0("",$,`
`)+J+(ag(W)?u0(`(
`,PD(w0(W,`
`)),`
)`):u0("(",w0(W,", "),")"))+": "+X+u0(" ",w0(Y," "))},InputValueDefinition:{leave:({description:$,name:J,type:W,defaultValue:X,directives:Y})=>u0("",$,`
`)+w0([J+": "+W,u0("= ",X),w0(Y," ")]," ")},InterfaceTypeDefinition:{leave:({description:$,name:J,interfaces:W,directives:X,fields:Y})=>u0("",$,`
`)+w0(["interface",J,u0("implements ",w0(W," & ")),w0(X," "),j8(Y)]," ")},UnionTypeDefinition:{leave:({description:$,name:J,directives:W,types:X})=>u0("",$,`
`)+w0(["union",J,w0(W," "),u0("= ",w0(X," | "))]," ")},EnumTypeDefinition:{leave:({description:$,name:J,directives:W,values:X})=>u0("",$,`
`)+w0(["enum",J,w0(W," "),j8(X)]," ")},EnumValueDefinition:{leave:({description:$,name:J,directives:W})=>u0("",$,`
`)+w0([J,w0(W," ")]," ")},InputObjectTypeDefinition:{leave:({description:$,name:J,directives:W,fields:X})=>u0("",$,`
`)+w0(["input",J,w0(W," "),j8(X)]," ")},DirectiveDefinition:{leave:({description:$,name:J,arguments:W,repeatable:X,locations:Y})=>u0("",$,`
`)+"directive @"+J+(ag(W)?u0(`(
`,PD(w0(W,`
`)),`
)`):u0("(",w0(W,", "),")"))+(X?" repeatable":"")+" on "+w0(Y," | ")},SchemaExtension:{leave:({directives:$,operationTypes:J})=>w0(["extend schema",w0($," "),j8(J)]," ")},ScalarTypeExtension:{leave:({name:$,directives:J})=>w0(["extend scalar",$,w0(J," ")]," ")},ObjectTypeExtension:{leave:({name:$,interfaces:J,directives:W,fields:X})=>w0(["extend type",$,u0("implements ",w0(J," & ")),w0(W," "),j8(X)]," ")},InterfaceTypeExtension:{leave:({name:$,interfaces:J,directives:W,fields:X})=>w0(["extend interface",$,u0("implements ",w0(J," & ")),w0(W," "),j8(X)]," ")},UnionTypeExtension:{leave:({name:$,directives:J,types:W})=>w0(["extend union",$,w0(J," "),u0("= ",w0(W," | "))]," ")},EnumTypeExtension:{leave:({name:$,directives:J,values:W})=>w0(["extend enum",$,w0(J," "),j8(W)]," ")},InputObjectTypeExtension:{leave:({name:$,directives:J,fields:W})=>w0(["extend input",$,w0(J," "),j8(W)]," ")}};function w0($,J=""){var W;return(W=$===null||$===void 0?void 0:$.filter((X)=>X).join(J))!==null&&W!==void 0?W:""}function j8($){return u0(`{
`,PD(w0($,`
`)),`
}`)}function u0($,J,W=""){return J!=null&&J!==""?$+J+W:""}function PD($){return u0("  ",$.replace(/\n/g,`
  `))}function ag($){var J;return(J=$===null||$===void 0?void 0:$.some((W)=>W.includes(`
`)))!==null&&J!==void 0?J:!1}function JH($,J){switch($.kind){case v.NULL:return null;case v.INT:return parseInt($.value,10);case v.FLOAT:return parseFloat($.value);case v.STRING:case v.ENUM:case v.BOOLEAN:return $.value;case v.LIST:return $.values.map((W)=>JH(W,J));case v.OBJECT:return s7($.fields,(W)=>W.name.value,(W)=>JH(W.value,J));case v.VARIABLE:return J===null||J===void 0?void 0:J[$.name.value]}}function t$($){if($!=null||f0(!1,"Must provide name."),typeof $==="string"||f0(!1,"Expected name to be a string."),$.length===0)throw new m("Expected name to be a non-empty string.");for(let J=1;J<$.length;++J)if(!ED($.charCodeAt(J)))throw new m(`Names must only contain [_a-zA-Z0-9] but "${$}" does not.`);if(!oZ($.charCodeAt(0)))throw new m(`Names must start with [_a-zA-Z] but "${$}" does not.`);return $}function YN($){if($==="true"||$==="false"||$==="null")throw new m(`Enum values cannot be named: ${$}`);return t$($)}function _Y($){return L6($)||N0($)||x0($)||R4($)||Y4($)||J1($)||w1($)||M0($)}function L6($){return _$($,a$)}function N0($){return _$($,V4)}function x0($){return _$($,n6)}function R4($){return _$($,k8)}function Y4($){return _$($,i6)}function J1($){return _$($,w5)}function w1($){return _$($,r1)}function M0($){return _$($,L0)}function x4($){return L6($)||Y4($)||J1($)||WH($)&&x4($.ofType)}function X9($){return L6($)||N0($)||x0($)||R4($)||Y4($)||WH($)&&X9($.ofType)}function t4($){return L6($)||Y4($)}function P6($){return N0($)||x0($)||R4($)}function a4($){return x0($)||R4($)}class r1{constructor($){_Y($)||f0(!1,`Expected ${n($)} to be a GraphQL type.`),this.ofType=$}get[Symbol.toStringTag](){return"GraphQLList"}toString(){return"["+String(this.ofType)+"]"}toJSON(){return this.toString()}}class L0{constructor($){XH($)||f0(!1,`Expected ${n($)} to be a GraphQL nullable type.`),this.ofType=$}get[Symbol.toStringTag](){return"GraphQLNonNull"}toString(){return String(this.ofType)+"!"}toJSON(){return this.toString()}}function WH($){return w1($)||M0($)}function XH($){return _Y($)&&!M0($)}function NY($){if($)return M0($)?$.ofType:$}function ND($){return L6($)||N0($)||x0($)||R4($)||Y4($)||J1($)}function b1($){if($){let J=$;while(WH(J))J=J.ofType;return J}}function BD($){return typeof $==="function"?$():$}function RD($){return typeof $==="function"?$():$}class a${constructor($){var J,W,X,Y;let U=(J=$.parseValue)!==null&&J!==void 0?J:JN;if(this.name=t$($.name),this.description=$.description,this.specifiedByURL=$.specifiedByURL,this.serialize=(W=$.serialize)!==null&&W!==void 0?W:JN,this.parseValue=U,this.parseLiteral=(X=$.parseLiteral)!==null&&X!==void 0?X:(Z,H)=>U(JH(Z,H)),this.extensions=B$($.extensions),this.astNode=$.astNode,this.extensionASTNodes=(Y=$.extensionASTNodes)!==null&&Y!==void 0?Y:[],$.specifiedByURL==null||typeof $.specifiedByURL==="string"||f0(!1,`${this.name} must provide "specifiedByURL" as a string, but got: ${n($.specifiedByURL)}.`),$.serialize==null||typeof $.serialize==="function"||f0(!1,`${this.name} must provide "serialize" function. If this custom Scalar is also used as an input type, ensure "parseValue" and "parseLiteral" functions are also provided.`),$.parseLiteral)typeof $.parseValue==="function"&&typeof $.parseLiteral==="function"||f0(!1,`${this.name} must provide both "parseValue" and "parseLiteral" functions.`)}get[Symbol.toStringTag](){return"GraphQLScalarType"}toConfig(){return{name:this.name,description:this.description,specifiedByURL:this.specifiedByURL,serialize:this.serialize,parseValue:this.parseValue,parseLiteral:this.parseLiteral,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes}}toString(){return this.name}toJSON(){return this.toString()}}class V4{constructor($){var J;this.name=t$($.name),this.description=$.description,this.isTypeOf=$.isTypeOf,this.extensions=B$($.extensions),this.astNode=$.astNode,this.extensionASTNodes=(J=$.extensionASTNodes)!==null&&J!==void 0?J:[],this._fields=()=>eg($),this._interfaces=()=>sg($),$.isTypeOf==null||typeof $.isTypeOf==="function"||f0(!1,`${this.name} must provide "isTypeOf" as a function, but got: ${n($.isTypeOf)}.`)}get[Symbol.toStringTag](){return"GraphQLObjectType"}getFields(){if(typeof this._fields==="function")this._fields=this._fields();return this._fields}getInterfaces(){if(typeof this._interfaces==="function")this._interfaces=this._interfaces();return this._interfaces}toConfig(){return{name:this.name,description:this.description,interfaces:this.getInterfaces(),fields:$f(this.getFields()),isTypeOf:this.isTypeOf,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes}}toString(){return this.name}toJSON(){return this.toString()}}function sg($){var J;let W=BD((J=$.interfaces)!==null&&J!==void 0?J:[]);return Array.isArray(W)||f0(!1,`${$.name} interfaces must be an Array or a function which returns an Array.`),W}function eg($){let J=RD($.fields);return PY(J)||f0(!1,`${$.name} fields must be an object with field names as keys or a function which returns such an object.`),$H(J,(W,X)=>{var Y;PY(W)||f0(!1,`${$.name}.${X} field config must be an object.`),W.resolve==null||typeof W.resolve==="function"||f0(!1,`${$.name}.${X} field resolver must be a function if provided, but got: ${n(W.resolve)}.`);let U=(Y=W.args)!==null&&Y!==void 0?Y:{};return PY(U)||f0(!1,`${$.name}.${X} args must be an object with argument names as keys.`),{name:t$(X),description:W.description,type:W.type,args:UN(U),resolve:W.resolve,subscribe:W.subscribe,deprecationReason:W.deprecationReason,extensions:B$(W.extensions),astNode:W.astNode}})}function UN($){return Object.entries($).map(([J,W])=>({name:t$(J),description:W.description,type:W.type,defaultValue:W.defaultValue,deprecationReason:W.deprecationReason,extensions:B$(W.extensions),astNode:W.astNode}))}function PY($){return h4($)&&!Array.isArray($)}function $f($){return $H($,(J)=>({description:J.description,type:J.type,args:ZN(J.args),resolve:J.resolve,subscribe:J.subscribe,deprecationReason:J.deprecationReason,extensions:J.extensions,astNode:J.astNode}))}function ZN($){return s7($,(J)=>J.name,(J)=>({description:J.description,type:J.type,defaultValue:J.defaultValue,deprecationReason:J.deprecationReason,extensions:J.extensions,astNode:J.astNode}))}function Y9($){return M0($.type)&&$.defaultValue===void 0}class n6{constructor($){var J;this.name=t$($.name),this.description=$.description,this.resolveType=$.resolveType,this.extensions=B$($.extensions),this.astNode=$.astNode,this.extensionASTNodes=(J=$.extensionASTNodes)!==null&&J!==void 0?J:[],this._fields=eg.bind(void 0,$),this._interfaces=sg.bind(void 0,$),$.resolveType==null||typeof $.resolveType==="function"||f0(!1,`${this.name} must provide "resolveType" as a function, but got: ${n($.resolveType)}.`)}get[Symbol.toStringTag](){return"GraphQLInterfaceType"}getFields(){if(typeof this._fields==="function")this._fields=this._fields();return this._fields}getInterfaces(){if(typeof this._interfaces==="function")this._interfaces=this._interfaces();return this._interfaces}toConfig(){return{name:this.name,description:this.description,interfaces:this.getInterfaces(),fields:$f(this.getFields()),resolveType:this.resolveType,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes}}toString(){return this.name}toJSON(){return this.toString()}}class k8{constructor($){var J;this.name=t$($.name),this.description=$.description,this.resolveType=$.resolveType,this.extensions=B$($.extensions),this.astNode=$.astNode,this.extensionASTNodes=(J=$.extensionASTNodes)!==null&&J!==void 0?J:[],this._types=W60.bind(void 0,$),$.resolveType==null||typeof $.resolveType==="function"||f0(!1,`${this.name} must provide "resolveType" as a function, but got: ${n($.resolveType)}.`)}get[Symbol.toStringTag](){return"GraphQLUnionType"}getTypes(){if(typeof this._types==="function")this._types=this._types();return this._types}toConfig(){return{name:this.name,description:this.description,types:this.getTypes(),resolveType:this.resolveType,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes}}toString(){return this.name}toJSON(){return this.toString()}}function W60($){let J=BD($.types);return Array.isArray(J)||f0(!1,`Must provide Array of types or a function which returns such an array for Union ${$.name}.`),J}class i6{constructor($){var J;this.name=t$($.name),this.description=$.description,this.extensions=B$($.extensions),this.astNode=$.astNode,this.extensionASTNodes=(J=$.extensionASTNodes)!==null&&J!==void 0?J:[],this._values=typeof $.values==="function"?$.values:og(this.name,$.values),this._valueLookup=null,this._nameLookup=null}get[Symbol.toStringTag](){return"GraphQLEnumType"}getValues(){if(typeof this._values==="function")this._values=og(this.name,this._values());return this._values}getValue($){if(this._nameLookup===null)this._nameLookup=S8(this.getValues(),(J)=>J.name);return this._nameLookup[$]}serialize($){if(this._valueLookup===null)this._valueLookup=new Map(this.getValues().map((W)=>[W.value,W]));let J=this._valueLookup.get($);if(J===void 0)throw new m(`Enum "${this.name}" cannot represent value: ${n($)}`);return J.name}parseValue($){if(typeof $!=="string"){let W=n($);throw new m(`Enum "${this.name}" cannot represent non-string value: ${W}.`+_D(this,W))}let J=this.getValue($);if(J==null)throw new m(`Value "${$}" does not exist in "${this.name}" enum.`+_D(this,$));return J.value}parseLiteral($,J){if($.kind!==v.ENUM){let X=$1($);throw new m(`Enum "${this.name}" cannot represent non-enum value: ${X}.`+_D(this,X),{nodes:$})}let W=this.getValue($.value);if(W==null){let X=$1($);throw new m(`Value "${X}" does not exist in "${this.name}" enum.`+_D(this,X),{nodes:$})}return W.value}toConfig(){let $=s7(this.getValues(),(J)=>J.name,(J)=>({description:J.description,value:J.value,deprecationReason:J.deprecationReason,extensions:J.extensions,astNode:J.astNode}));return{name:this.name,description:this.description,values:$,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes}}toString(){return this.name}toJSON(){return this.toString()}}function _D($,J){let W=$.getValues().map((Y)=>Y.name),X=N$(J,W);return w$("the enum value",X)}function og($,J){return PY(J)||f0(!1,`${$} values must be an object with value names as keys.`),Object.entries(J).map(([W,X])=>{return PY(X)||f0(!1,`${$}.${W} must refer to an object with a "value" key representing an internal value but got: ${n(X)}.`),{name:YN(W),description:X.description,value:X.value!==void 0?X.value:W,deprecationReason:X.deprecationReason,extensions:B$(X.extensions),astNode:X.astNode}})}class w5{constructor($){var J,W;this.name=t$($.name),this.description=$.description,this.extensions=B$($.extensions),this.astNode=$.astNode,this.extensionASTNodes=(J=$.extensionASTNodes)!==null&&J!==void 0?J:[],this.isOneOf=(W=$.isOneOf)!==null&&W!==void 0?W:!1,this._fields=X60.bind(void 0,$)}get[Symbol.toStringTag](){return"GraphQLInputObjectType"}getFields(){if(typeof this._fields==="function")this._fields=this._fields();return this._fields}toConfig(){let $=$H(this.getFields(),(J)=>({description:J.description,type:J.type,defaultValue:J.defaultValue,deprecationReason:J.deprecationReason,extensions:J.extensions,astNode:J.astNode}));return{name:this.name,description:this.description,fields:$,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes,isOneOf:this.isOneOf}}toString(){return this.name}toJSON(){return this.toString()}}function X60($){let J=RD($.fields);return PY(J)||f0(!1,`${$.name} fields must be an object with field names as keys or a function which returns such an object.`),$H(J,(W,X)=>{return!("resolve"in W)||f0(!1,`${$.name}.${X} field has a resolve property, but Input Types cannot define resolvers.`),{name:t$(X),description:W.description,type:W.type,defaultValue:W.defaultValue,deprecationReason:W.deprecationReason,extensions:B$(W.extensions),astNode:W.astNode}})}function BY($){return M0($.type)&&$.defaultValue===void 0}function YH($,J){if($===J)return!0;if(M0($)&&M0(J))return YH($.ofType,J.ofType);if(w1($)&&w1(J))return YH($.ofType,J.ofType);return!1}function U9($,J,W){if(J===W)return!0;if(M0(W)){if(M0(J))return U9($,J.ofType,W.ofType);return!1}if(M0(J))return U9($,J.ofType,W);if(w1(W)){if(w1(J))return U9($,J.ofType,W.ofType);return!1}if(w1(J))return!1;return a4(W)&&(x0(J)||N0(J))&&$.isSubType(W,J)}function SD($,J,W){if(J===W)return!0;if(a4(J)){if(a4(W))return $.getPossibleTypes(J).some((X)=>$.isSubType(W,X));return $.isSubType(J,W)}if(a4(W))return $.isSubType(W,J);return!1}var UH=2147483647,ZH=-2147483648,Z9=new a$({name:"Int",description:"The `Int` scalar type represents non-fractional signed whole numeric values. Int can represent values between -(2^31) and 2^31 - 1.",serialize($){let J=HH($);if(typeof J==="boolean")return J?1:0;let W=J;if(typeof J==="string"&&J!=="")W=Number(J);if(typeof W!=="number"||!Number.isInteger(W))throw new m(`Int cannot represent non-integer value: ${n(J)}`);if(W>UH||W<ZH)throw new m("Int cannot represent non 32-bit signed integer value: "+n(J));return W},parseValue($){if(typeof $!=="number"||!Number.isInteger($))throw new m(`Int cannot represent non-integer value: ${n($)}`);if($>UH||$<ZH)throw new m(`Int cannot represent non 32-bit signed integer value: ${$}`);return $},parseLiteral($){if($.kind!==v.INT)throw new m(`Int cannot represent non-integer value: ${$1($)}`,{nodes:$});let J=parseInt($.value,10);if(J>UH||J<ZH)throw new m(`Int cannot represent non 32-bit signed integer value: ${$.value}`,{nodes:$});return J}}),$W=new a$({name:"Float",description:"The `Float` scalar type represents signed double-precision fractional values as specified by [IEEE 754](https://en.wikipedia.org/wiki/IEEE_floating_point).",serialize($){let J=HH($);if(typeof J==="boolean")return J?1:0;let W=J;if(typeof J==="string"&&J!=="")W=Number(J);if(typeof W!=="number"||!Number.isFinite(W))throw new m(`Float cannot represent non numeric value: ${n(J)}`);return W},parseValue($){if(typeof $!=="number"||!Number.isFinite($))throw new m(`Float cannot represent non numeric value: ${n($)}`);return $},parseLiteral($){if($.kind!==v.FLOAT&&$.kind!==v.INT)throw new m(`Float cannot represent non numeric value: ${$1($)}`,$);return parseFloat($.value)}}),Z1=new a$({name:"String",description:"The `String` scalar type represents textual data, represented as UTF-8 character sequences. The String type is most often used by GraphQL to represent free-form human-readable text.",serialize($){let J=HH($);if(typeof J==="string")return J;if(typeof J==="boolean")return J?"true":"false";if(typeof J==="number"&&Number.isFinite(J))return J.toString();throw new m(`String cannot represent value: ${n($)}`)},parseValue($){if(typeof $!=="string")throw new m(`String cannot represent a non string value: ${n($)}`);return $},parseLiteral($){if($.kind!==v.STRING)throw new m(`String cannot represent a non string value: ${$1($)}`,{nodes:$});return $.value}}),n1=new a$({name:"Boolean",description:"The `Boolean` scalar type represents `true` or `false`.",serialize($){let J=HH($);if(typeof J==="boolean")return J;if(Number.isFinite(J))return J!==0;throw new m(`Boolean cannot represent a non boolean value: ${n(J)}`)},parseValue($){if(typeof $!=="boolean")throw new m(`Boolean cannot represent a non boolean value: ${n($)}`);return $},parseLiteral($){if($.kind!==v.BOOLEAN)throw new m(`Boolean cannot represent a non boolean value: ${$1($)}`,{nodes:$});return $.value}}),H9=new a$({name:"ID",description:'The `ID` scalar type represents a unique identifier, often used to refetch an object or as key for a cache. The ID type appears in a JSON response as a String; however, it is not intended to be human-readable. When expected as an input type, any string (such as `"4"`) or integer (such as `4`) input value will be accepted as an ID.',serialize($){let J=HH($);if(typeof J==="string")return J;if(Number.isInteger(J))return String(J);throw new m(`ID cannot represent value: ${n($)}`)},parseValue($){if(typeof $==="string")return $;if(typeof $==="number"&&Number.isInteger($))return $.toString();throw new m(`ID cannot represent value: ${n($)}`)},parseLiteral($){if($.kind!==v.STRING&&$.kind!==v.INT)throw new m("ID cannot represent a non-string and non-integer value: "+$1($),{nodes:$});return $.value}}),jD=Object.freeze([Z1,Z9,$W,n1,H9]);function HH($){if(h4($)){if(typeof $.valueOf==="function"){let J=$.valueOf();if(!h4(J))return J}if(typeof $.toJSON==="function")return $.toJSON()}return $}function RY($){return _$($,o$)}class o${constructor($){var J,W;this.name=t$($.name),this.description=$.description,this.locations=$.locations,this.isRepeatable=(J=$.isRepeatable)!==null&&J!==void 0?J:!1,this.extensions=B$($.extensions),this.astNode=$.astNode,Array.isArray($.locations)||f0(!1,`@${$.name} locations must be an Array.`);let X=(W=$.args)!==null&&W!==void 0?W:{};h4(X)&&!Array.isArray(X)||f0(!1,`@${$.name} args must be an object with argument names as keys.`),this.args=UN(X)}get[Symbol.toStringTag](){return"GraphQLDirective"}toConfig(){return{name:this.name,description:this.description,locations:this.locations,args:ZN(this.args),isRepeatable:this.isRepeatable,extensions:this.extensions,astNode:this.astNode}}toString(){return"@"+this.name}toJSON(){return this.toString()}}var G9=new o$({name:"include",description:"Directs the executor to include this field or fragment only when the `if` argument is true.",locations:[z0.FIELD,z0.FRAGMENT_SPREAD,z0.INLINE_FRAGMENT],args:{if:{type:new L0(n1),description:"Included when true."}}}),z9=new o$({name:"skip",description:"Directs the executor to skip this field or fragment when the `if` argument is true.",locations:[z0.FIELD,z0.FRAGMENT_SPREAD,z0.INLINE_FRAGMENT],args:{if:{type:new L0(n1),description:"Skipped when true."}}}),HN="No longer supported",GH=new o$({name:"deprecated",description:"Marks an element of a GraphQL schema as no longer supported.",locations:[z0.FIELD_DEFINITION,z0.ARGUMENT_DEFINITION,z0.INPUT_FIELD_DEFINITION,z0.ENUM_VALUE],args:{reason:{type:Z1,description:"Explains why this element was deprecated, usually also including a suggestion for how to access supported similar data. Formatted using the Markdown syntax, as specified by [CommonMark](https://commonmark.org/).",defaultValue:HN}}}),GN=new o$({name:"specifiedBy",description:"Exposes a URL that specifies the behavior of this scalar.",locations:[z0.SCALAR],args:{url:{type:new L0(Z1),description:"The URL that specifies the behavior of this scalar."}}}),zN=new o$({name:"oneOf",description:"Indicates exactly one field must be supplied and this field must not be `null`.",locations:[z0.INPUT_OBJECT],args:{}}),t6=Object.freeze([G9,z9,GH,GN,zN]);function kD($){return typeof $==="object"&&typeof($===null||$===void 0?void 0:$[Symbol.iterator])==="function"}function JW($,J){if(M0(J)){let W=JW($,J.ofType);if((W===null||W===void 0?void 0:W.kind)===v.NULL)return null;return W}if($===null)return{kind:v.NULL};if($===void 0)return null;if(w1(J)){let W=J.ofType;if(kD($)){let X=[];for(let Y of $){let U=JW(Y,W);if(U!=null)X.push(U)}return{kind:v.LIST,values:X}}return JW($,W)}if(J1(J)){if(!h4($))return null;let W=[];for(let X of Object.values(J.getFields())){let Y=JW($[X.name],X.type);if(Y)W.push({kind:v.OBJECT_FIELD,name:{kind:v.NAME,value:X.name},value:Y})}return{kind:v.OBJECT,fields:W}}if(t4(J)){let W=J.serialize($);if(W==null)return null;if(typeof W==="boolean")return{kind:v.BOOLEAN,value:W};if(typeof W==="number"&&Number.isFinite(W)){let X=String(W);return Jf.test(X)?{kind:v.INT,value:X}:{kind:v.FLOAT,value:X}}if(typeof W==="string"){if(Y4(J))return{kind:v.ENUM,value:W};if(J===H9&&Jf.test(W))return{kind:v.INT,value:W};return{kind:v.STRING,value:W}}throw TypeError(`Cannot convert value to AST: ${n(W)}.`)}H4(!1,"Unexpected input type: "+n(J))}var Jf=/^-?(?:0|[1-9][0-9]*)$/;var SY=new V4({name:"__Schema",description:"A GraphQL Schema defines the capabilities of a GraphQL server. It exposes all available types and directives on the server, as well as the entry points for query, mutation, and subscription operations.",fields:()=>({description:{type:Z1,resolve:($)=>$.description},types:{description:"A list of all types supported by this server.",type:new L0(new r1(new L0(_6))),resolve($){return Object.values($.getTypeMap())}},queryType:{description:"The type that query operations will be rooted at.",type:new L0(_6),resolve:($)=>$.getQueryType()},mutationType:{description:"If this server supports mutation, the type that mutation operations will be rooted at.",type:_6,resolve:($)=>$.getMutationType()},subscriptionType:{description:"If this server support subscription, the type that subscription operations will be rooted at.",type:_6,resolve:($)=>$.getSubscriptionType()},directives:{description:"A list of all directives supported by this server.",type:new L0(new r1(new L0(vD))),resolve:($)=>$.getDirectives()}})}),vD=new V4({name:"__Directive",description:`A Directive provides a way to describe alternate runtime execution and type validation behavior in a GraphQL document.

In some cases, you need to provide options to alter GraphQL's execution behavior in ways field arguments will not suffice, such as conditionally including or skipping a field. Directives provide this by describing additional information to the executor.`,fields:()=>({name:{type:new L0(Z1),resolve:($)=>$.name},description:{type:Z1,resolve:($)=>$.description},isRepeatable:{type:new L0(n1),resolve:($)=>$.isRepeatable},locations:{type:new L0(new r1(new L0(CD))),resolve:($)=>$.locations},args:{type:new L0(new r1(new L0(jY))),args:{includeDeprecated:{type:n1,defaultValue:!1}},resolve($,{includeDeprecated:J}){return J?$.args:$.args.filter((W)=>W.deprecationReason==null)}}})}),CD=new i6({name:"__DirectiveLocation",description:"A Directive can be adjacent to many parts of the GraphQL language, a __DirectiveLocation describes one such possible adjacencies.",values:{QUERY:{value:z0.QUERY,description:"Location adjacent to a query operation."},MUTATION:{value:z0.MUTATION,description:"Location adjacent to a mutation operation."},SUBSCRIPTION:{value:z0.SUBSCRIPTION,description:"Location adjacent to a subscription operation."},FIELD:{value:z0.FIELD,description:"Location adjacent to a field."},FRAGMENT_DEFINITION:{value:z0.FRAGMENT_DEFINITION,description:"Location adjacent to a fragment definition."},FRAGMENT_SPREAD:{value:z0.FRAGMENT_SPREAD,description:"Location adjacent to a fragment spread."},INLINE_FRAGMENT:{value:z0.INLINE_FRAGMENT,description:"Location adjacent to an inline fragment."},VARIABLE_DEFINITION:{value:z0.VARIABLE_DEFINITION,description:"Location adjacent to a variable definition."},SCHEMA:{value:z0.SCHEMA,description:"Location adjacent to a schema definition."},SCALAR:{value:z0.SCALAR,description:"Location adjacent to a scalar definition."},OBJECT:{value:z0.OBJECT,description:"Location adjacent to an object type definition."},FIELD_DEFINITION:{value:z0.FIELD_DEFINITION,description:"Location adjacent to a field definition."},ARGUMENT_DEFINITION:{value:z0.ARGUMENT_DEFINITION,description:"Location adjacent to an argument definition."},INTERFACE:{value:z0.INTERFACE,description:"Location adjacent to an interface definition."},UNION:{value:z0.UNION,description:"Location adjacent to a union definition."},ENUM:{value:z0.ENUM,description:"Location adjacent to an enum definition."},ENUM_VALUE:{value:z0.ENUM_VALUE,description:"Location adjacent to an enum value definition."},INPUT_OBJECT:{value:z0.INPUT_OBJECT,description:"Location adjacent to an input object type definition."},INPUT_FIELD_DEFINITION:{value:z0.INPUT_FIELD_DEFINITION,description:"Location adjacent to an input object field definition."}}}),_6=new V4({name:"__Type",description:"The fundamental unit of any GraphQL Schema is the type. There are many kinds of types in GraphQL as represented by the `__TypeKind` enum.\n\nDepending on the kind of a type, certain fields describe information about that type. Scalar types provide no information beyond a name, description and optional `specifiedByURL`, while Enum types provide their values. Object and Interface types provide the fields they describe. Abstract types, Union and Interface, provide the Object types possible at runtime. List and NonNull types compose other types.",fields:()=>({kind:{type:new L0(hD),resolve($){if(L6($))return Q4.SCALAR;if(N0($))return Q4.OBJECT;if(x0($))return Q4.INTERFACE;if(R4($))return Q4.UNION;if(Y4($))return Q4.ENUM;if(J1($))return Q4.INPUT_OBJECT;if(w1($))return Q4.LIST;if(M0($))return Q4.NON_NULL;H4(!1,`Unexpected type: "${n($)}".`)}},name:{type:Z1,resolve:($)=>("name"in $)?$.name:void 0},description:{type:Z1,resolve:($)=>("description"in $)?$.description:void 0},specifiedByURL:{type:Z1,resolve:($)=>("specifiedByURL"in $)?$.specifiedByURL:void 0},fields:{type:new r1(new L0(TD)),args:{includeDeprecated:{type:n1,defaultValue:!1}},resolve($,{includeDeprecated:J}){if(N0($)||x0($)){let W=Object.values($.getFields());return J?W:W.filter((X)=>X.deprecationReason==null)}}},interfaces:{type:new r1(new L0(_6)),resolve($){if(N0($)||x0($))return $.getInterfaces()}},possibleTypes:{type:new r1(new L0(_6)),resolve($,J,W,{schema:X}){if(a4($))return X.getPossibleTypes($)}},enumValues:{type:new r1(new L0(qD)),args:{includeDeprecated:{type:n1,defaultValue:!1}},resolve($,{includeDeprecated:J}){if(Y4($)){let W=$.getValues();return J?W:W.filter((X)=>X.deprecationReason==null)}}},inputFields:{type:new r1(new L0(jY)),args:{includeDeprecated:{type:n1,defaultValue:!1}},resolve($,{includeDeprecated:J}){if(J1($)){let W=Object.values($.getFields());return J?W:W.filter((X)=>X.deprecationReason==null)}}},ofType:{type:_6,resolve:($)=>("ofType"in $)?$.ofType:void 0},isOneOf:{type:n1,resolve:($)=>{if(J1($))return $.isOneOf}}})}),TD=new V4({name:"__Field",description:"Object and Interface types are described by a list of Fields, each of which has a name, potentially a list of arguments, and a return type.",fields:()=>({name:{type:new L0(Z1),resolve:($)=>$.name},description:{type:Z1,resolve:($)=>$.description},args:{type:new L0(new r1(new L0(jY))),args:{includeDeprecated:{type:n1,defaultValue:!1}},resolve($,{includeDeprecated:J}){return J?$.args:$.args.filter((W)=>W.deprecationReason==null)}},type:{type:new L0(_6),resolve:($)=>$.type},isDeprecated:{type:new L0(n1),resolve:($)=>$.deprecationReason!=null},deprecationReason:{type:Z1,resolve:($)=>$.deprecationReason}})}),jY=new V4({name:"__InputValue",description:"Arguments provided to Fields or Directives and the input fields of an InputObject are represented as Input Values which describe their type and optionally a default value.",fields:()=>({name:{type:new L0(Z1),resolve:($)=>$.name},description:{type:Z1,resolve:($)=>$.description},type:{type:new L0(_6),resolve:($)=>$.type},defaultValue:{type:Z1,description:"A GraphQL-formatted string representing the default value for this input value.",resolve($){let{type:J,defaultValue:W}=$,X=JW(W,J);return X?$1(X):null}},isDeprecated:{type:new L0(n1),resolve:($)=>$.deprecationReason!=null},deprecationReason:{type:Z1,resolve:($)=>$.deprecationReason}})}),qD=new V4({name:"__EnumValue",description:"One possible value for a given Enum. Enum values are unique values, not a placeholder for a string or numeric value. However an Enum value is returned in a JSON response as a string.",fields:()=>({name:{type:new L0(Z1),resolve:($)=>$.name},description:{type:Z1,resolve:($)=>$.description},isDeprecated:{type:new L0(n1),resolve:($)=>$.deprecationReason!=null},deprecationReason:{type:Z1,resolve:($)=>$.deprecationReason}})}),Q4;(function($){$.SCALAR="SCALAR",$.OBJECT="OBJECT",$.INTERFACE="INTERFACE",$.UNION="UNION",$.ENUM="ENUM",$.INPUT_OBJECT="INPUT_OBJECT",$.LIST="LIST",$.NON_NULL="NON_NULL"})(Q4||(Q4={}));var hD=new i6({name:"__TypeKind",description:"An enum describing what kind of type a given `__Type` is.",values:{SCALAR:{value:Q4.SCALAR,description:"Indicates this type is a scalar."},OBJECT:{value:Q4.OBJECT,description:"Indicates this type is an object. `fields` and `interfaces` are valid fields."},INTERFACE:{value:Q4.INTERFACE,description:"Indicates this type is an interface. `fields`, `interfaces`, and `possibleTypes` are valid fields."},UNION:{value:Q4.UNION,description:"Indicates this type is a union. `possibleTypes` is a valid field."},ENUM:{value:Q4.ENUM,description:"Indicates this type is an enum. `enumValues` is a valid field."},INPUT_OBJECT:{value:Q4.INPUT_OBJECT,description:"Indicates this type is an input object. `inputFields` is a valid field."},LIST:{value:Q4.LIST,description:"Indicates this type is a list. `ofType` is a valid field."},NON_NULL:{value:Q4.NON_NULL,description:"Indicates this type is a non-null. `ofType` is a valid field."}}}),PJ={name:"__schema",type:new L0(SY),description:"Access the current type schema of this server.",args:[],resolve:($,J,W,{schema:X})=>X,deprecationReason:void 0,extensions:Object.create(null),astNode:void 0},_J={name:"__type",type:_6,description:"Request the type information of a single type.",args:[{name:"name",description:void 0,type:new L0(Z1),defaultValue:void 0,deprecationReason:void 0,extensions:Object.create(null),astNode:void 0}],resolve:($,{name:J},W,{schema:X})=>X.getType(J),deprecationReason:void 0,extensions:Object.create(null),astNode:void 0},NJ={name:"__typename",type:new L0(Z1),description:"The name of the current Object type at runtime.",args:[],resolve:($,J,W,{parentType:X})=>X.name,deprecationReason:void 0,extensions:Object.create(null),astNode:void 0},zH=Object.freeze([SY,vD,CD,_6,TD,jY,qD,hD]);function kY($){return zH.some(({name:J})=>$.name===J)}function wH($){return _$($,BJ)}function xD($){if(!wH($))throw Error(`Expected ${n($)} to be a GraphQL schema.`);return $}class BJ{constructor($){var J,W;this.__validationErrors=$.assumeValid===!0?[]:void 0,h4($)||f0(!1,"Must provide configuration object."),!$.types||Array.isArray($.types)||f0(!1,`"types" must be Array if provided but got: ${n($.types)}.`),!$.directives||Array.isArray($.directives)||f0(!1,`"directives" must be Array if provided but got: ${n($.directives)}.`),this.description=$.description,this.extensions=B$($.extensions),this.astNode=$.astNode,this.extensionASTNodes=(J=$.extensionASTNodes)!==null&&J!==void 0?J:[],this._queryType=$.query,this._mutationType=$.mutation,this._subscriptionType=$.subscription,this._directives=(W=$.directives)!==null&&W!==void 0?W:t6;let X=new Set($.types);if($.types!=null)for(let Y of $.types)X.delete(Y),v8(Y,X);if(this._queryType!=null)v8(this._queryType,X);if(this._mutationType!=null)v8(this._mutationType,X);if(this._subscriptionType!=null)v8(this._subscriptionType,X);for(let Y of this._directives)if(RY(Y))for(let U of Y.args)v8(U.type,X);v8(SY,X),this._typeMap=Object.create(null),this._subTypeMap=Object.create(null),this._implementationsMap=Object.create(null);for(let Y of X){if(Y==null)continue;let U=Y.name;if(U||f0(!1,"One of the provided types for building the Schema is missing a name."),this._typeMap[U]!==void 0)throw Error(`Schema must contain uniquely named types but contains multiple types named "${U}".`);if(this._typeMap[U]=Y,x0(Y)){for(let Z of Y.getInterfaces())if(x0(Z)){let H=this._implementationsMap[Z.name];if(H===void 0)H=this._implementationsMap[Z.name]={objects:[],interfaces:[]};H.interfaces.push(Y)}}else if(N0(Y)){for(let Z of Y.getInterfaces())if(x0(Z)){let H=this._implementationsMap[Z.name];if(H===void 0)H=this._implementationsMap[Z.name]={objects:[],interfaces:[]};H.objects.push(Y)}}}}get[Symbol.toStringTag](){return"GraphQLSchema"}getQueryType(){return this._queryType}getMutationType(){return this._mutationType}getSubscriptionType(){return this._subscriptionType}getRootType($){switch($){case E4.QUERY:return this.getQueryType();case E4.MUTATION:return this.getMutationType();case E4.SUBSCRIPTION:return this.getSubscriptionType()}}getTypeMap(){return this._typeMap}getType($){return this.getTypeMap()[$]}getPossibleTypes($){return R4($)?$.getTypes():this.getImplementations($).objects}getImplementations($){let J=this._implementationsMap[$.name];return J!==null&&J!==void 0?J:{objects:[],interfaces:[]}}isSubType($,J){let W=this._subTypeMap[$.name];if(W===void 0){if(W=Object.create(null),R4($))for(let X of $.getTypes())W[X.name]=!0;else{let X=this.getImplementations($);for(let Y of X.objects)W[Y.name]=!0;for(let Y of X.interfaces)W[Y.name]=!0}this._subTypeMap[$.name]=W}return W[J.name]!==void 0}getDirectives(){return this._directives}getDirective($){return this.getDirectives().find((J)=>J.name===$)}toConfig(){return{description:this.description,query:this.getQueryType(),mutation:this.getMutationType(),subscription:this.getSubscriptionType(),types:Object.values(this.getTypeMap()),directives:this.getDirectives(),extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes,assumeValid:this.__validationErrors!==void 0}}}function v8($,J){let W=b1($);if(!J.has(W)){if(J.add(W),R4(W))for(let X of W.getTypes())v8(X,J);else if(N0(W)||x0(W)){for(let X of W.getInterfaces())v8(X,J);for(let X of Object.values(W.getFields())){v8(X.type,J);for(let Y of X.args)v8(Y.type,J)}}else if(J1(W))for(let X of Object.values(W.getFields()))v8(X.type,J)}return J}function DN($){if(xD($),$.__validationErrors)return $.__validationErrors;let J=new Uf($);Y60(J),U60(J),Z60(J);let W=J.getErrors();return $.__validationErrors=W,W}function vY($){let J=DN($);if(J.length!==0)throw Error(J.map((W)=>W.message).join(`

`))}class Uf{constructor($){this._errors=[],this.schema=$}reportError($,J){let W=Array.isArray(J)?J.filter(Boolean):J;this._errors.push(new m($,{nodes:W}))}getErrors(){return this._errors}}function Y60($){let J=$.schema,W=J.getQueryType();if(!W)$.reportError("Query root type must be provided.",J.astNode);else if(!N0(W)){var X;$.reportError(`Query root type must be Object type, it cannot be ${n(W)}.`,(X=wN(J,E4.QUERY))!==null&&X!==void 0?X:W.astNode)}let Y=J.getMutationType();if(Y&&!N0(Y)){var U;$.reportError(`Mutation root type must be Object type if provided, it cannot be ${n(Y)}.`,(U=wN(J,E4.MUTATION))!==null&&U!==void 0?U:Y.astNode)}let Z=J.getSubscriptionType();if(Z&&!N0(Z)){var H;$.reportError(`Subscription root type must be Object type if provided, it cannot be ${n(Z)}.`,(H=wN(J,E4.SUBSCRIPTION))!==null&&H!==void 0?H:Z.astNode)}}function wN($,J){var W;return(W=[$.astNode,...$.extensionASTNodes].flatMap((X)=>{var Y;return(Y=X===null||X===void 0?void 0:X.operationTypes)!==null&&Y!==void 0?Y:[]}).find((X)=>X.operation===J))===null||W===void 0?void 0:W.type}function U60($){for(let W of $.schema.getDirectives()){if(!RY(W)){$.reportError(`Expected directive but got: ${n(W)}.`,W===null||W===void 0?void 0:W.astNode);continue}if(WW($,W),W.locations.length===0)$.reportError(`Directive @${W.name} must include 1 or more locations.`,W.astNode);for(let X of W.args){if(WW($,X),!x4(X.type))$.reportError(`The type of @${W.name}(${X.name}:) must be Input Type but got: ${n(X.type)}.`,X.astNode);if(Y9(X)&&X.deprecationReason!=null){var J;$.reportError(`Required argument @${W.name}(${X.name}:) cannot be deprecated.`,[KN(X.astNode),(J=X.astNode)===null||J===void 0?void 0:J.type])}}}}function WW($,J){if(J.name.startsWith("__"))$.reportError(`Name "${J.name}" must not begin with "__", which is reserved by GraphQL introspection.`,J.astNode)}function Z60($){let J=O60($),W=$.schema.getTypeMap();for(let X of Object.values(W)){if(!ND(X)){$.reportError(`Expected GraphQL named type but got: ${n(X)}.`,X.astNode);continue}if(!kY(X))WW($,X);if(N0(X))Wf($,X),Xf($,X);else if(x0(X))Wf($,X),Xf($,X);else if(R4(X))z60($,X);else if(Y4(X))w60($,X);else if(J1(X))D60($,X),J(X)}}function Wf($,J){let W=Object.values(J.getFields());if(W.length===0)$.reportError(`Type ${J.name} must define one or more fields.`,[J.astNode,...J.extensionASTNodes]);for(let Z of W){if(WW($,Z),!X9(Z.type)){var X;$.reportError(`The type of ${J.name}.${Z.name} must be Output Type but got: ${n(Z.type)}.`,(X=Z.astNode)===null||X===void 0?void 0:X.type)}for(let H of Z.args){let G=H.name;if(WW($,H),!x4(H.type)){var Y;$.reportError(`The type of ${J.name}.${Z.name}(${G}:) must be Input Type but got: ${n(H.type)}.`,(Y=H.astNode)===null||Y===void 0?void 0:Y.type)}if(Y9(H)&&H.deprecationReason!=null){var U;$.reportError(`Required argument ${J.name}.${Z.name}(${G}:) cannot be deprecated.`,[KN(H.astNode),(U=H.astNode)===null||U===void 0?void 0:U.type])}}}}function Xf($,J){let W=Object.create(null);for(let X of J.getInterfaces()){if(!x0(X)){$.reportError(`Type ${n(J)} must only implement Interface types, it cannot implement ${n(X)}.`,DH(J,X));continue}if(J===X){$.reportError(`Type ${J.name} cannot implement itself because it would create a circular reference.`,DH(J,X));continue}if(W[X.name]){$.reportError(`Type ${J.name} can only implement ${X.name} once.`,DH(J,X));continue}W[X.name]=!0,G60($,J,X),H60($,J,X)}}function H60($,J,W){let X=J.getFields();for(let G of Object.values(W.getFields())){let z=G.name,w=X[z];if(!w){$.reportError(`Interface field ${W.name}.${z} expected but ${J.name} does not provide it.`,[G.astNode,J.astNode,...J.extensionASTNodes]);continue}if(!U9($.schema,w.type,G.type)){var Y,U;$.reportError(`Interface field ${W.name}.${z} expects type ${n(G.type)} but ${J.name}.${z} is type ${n(w.type)}.`,[(Y=G.astNode)===null||Y===void 0?void 0:Y.type,(U=w.astNode)===null||U===void 0?void 0:U.type])}for(let D of G.args){let K=D.name,O=w.args.find((F)=>F.name===K);if(!O){$.reportError(`Interface field argument ${W.name}.${z}(${K}:) expected but ${J.name}.${z} does not provide it.`,[D.astNode,w.astNode]);continue}if(!YH(D.type,O.type)){var Z,H;$.reportError(`Interface field argument ${W.name}.${z}(${K}:) expects type ${n(D.type)} but ${J.name}.${z}(${K}:) is type ${n(O.type)}.`,[(Z=D.astNode)===null||Z===void 0?void 0:Z.type,(H=O.astNode)===null||H===void 0?void 0:H.type])}}for(let D of w.args){let K=D.name;if(!G.args.find((F)=>F.name===K)&&Y9(D))$.reportError(`Object field ${J.name}.${z} includes required argument ${K} that is missing from the Interface field ${W.name}.${z}.`,[D.astNode,G.astNode])}}}function G60($,J,W){let X=J.getInterfaces();for(let Y of W.getInterfaces())if(!X.includes(Y))$.reportError(Y===J?`Type ${J.name} cannot implement ${W.name} because it would create a circular reference.`:`Type ${J.name} must implement ${Y.name} because it is implemented by ${W.name}.`,[...DH(W,Y),...DH(J,W)])}function z60($,J){let W=J.getTypes();if(W.length===0)$.reportError(`Union type ${J.name} must define one or more member types.`,[J.astNode,...J.extensionASTNodes]);let X=Object.create(null);for(let Y of W){if(X[Y.name]){$.reportError(`Union type ${J.name} can only include type ${Y.name} once.`,Yf(J,Y.name));continue}if(X[Y.name]=!0,!N0(Y))$.reportError(`Union type ${J.name} can only include Object types, it cannot include ${n(Y)}.`,Yf(J,String(Y)))}}function w60($,J){let W=J.getValues();if(W.length===0)$.reportError(`Enum type ${J.name} must define one or more values.`,[J.astNode,...J.extensionASTNodes]);for(let X of W)WW($,X)}function D60($,J){let W=Object.values(J.getFields());if(W.length===0)$.reportError(`Input Object type ${J.name} must define one or more fields.`,[J.astNode,...J.extensionASTNodes]);for(let U of W){if(WW($,U),!x4(U.type)){var X;$.reportError(`The type of ${J.name}.${U.name} must be Input Type but got: ${n(U.type)}.`,(X=U.astNode)===null||X===void 0?void 0:X.type)}if(BY(U)&&U.deprecationReason!=null){var Y;$.reportError(`Required input field ${J.name}.${U.name} cannot be deprecated.`,[KN(U.astNode),(Y=U.astNode)===null||Y===void 0?void 0:Y.type])}if(J.isOneOf)K60(J,U,$)}}function K60($,J,W){if(M0(J.type)){var X;W.reportError(`OneOf input field ${$.name}.${J.name} must be nullable.`,(X=J.astNode)===null||X===void 0?void 0:X.type)}if(J.defaultValue!==void 0)W.reportError(`OneOf input field ${$.name}.${J.name} cannot have a default value.`,J.astNode)}function O60($){let J=Object.create(null),W=[],X=Object.create(null);return Y;function Y(U){if(J[U.name])return;J[U.name]=!0,X[U.name]=W.length;let Z=Object.values(U.getFields());for(let H of Z)if(M0(H.type)&&J1(H.type.ofType)){let G=H.type.ofType,z=X[G.name];if(W.push(H),z===void 0)Y(G);else{let w=W.slice(z),D=w.map((K)=>K.name).join(".");$.reportError(`Cannot reference Input Object "${G.name}" within itself through a series of non-null fields: "${D}".`,w.map((K)=>K.astNode))}W.pop()}X[U.name]=void 0}}function DH($,J){let{astNode:W,extensionASTNodes:X}=$;return(W!=null?[W,...X]:X).flatMap((U)=>{var Z;return(Z=U.interfaces)!==null&&Z!==void 0?Z:[]}).filter((U)=>U.name.value===J.name)}function Yf($,J){let{astNode:W,extensionASTNodes:X}=$;return(W!=null?[W,...X]:X).flatMap((U)=>{var Z;return(Z=U.types)!==null&&Z!==void 0?Z:[]}).filter((U)=>U.name.value===J)}function KN($){var J;return $===null||$===void 0?void 0:(J=$.directives)===null||J===void 0?void 0:J.find((W)=>W.name.value===GH.name)}function g1($,J){switch(J.kind){case v.LIST_TYPE:{let W=g1($,J.type);return W&&new r1(W)}case v.NON_NULL_TYPE:{let W=g1($,J.type);return W&&new L0(W)}case v.NAMED_TYPE:return $.getType(J.name.value)}}class CY{constructor($,J,W){if(this._schema=$,this._typeStack=[],this._parentTypeStack=[],this._inputTypeStack=[],this._fieldDefStack=[],this._defaultValueStack=[],this._directive=null,this._argument=null,this._enumValue=null,this._getFieldDef=W!==null&&W!==void 0?W:F60,J){if(x4(J))this._inputTypeStack.push(J);if(P6(J))this._parentTypeStack.push(J);if(X9(J))this._typeStack.push(J)}}get[Symbol.toStringTag](){return"TypeInfo"}getType(){if(this._typeStack.length>0)return this._typeStack[this._typeStack.length-1]}getParentType(){if(this._parentTypeStack.length>0)return this._parentTypeStack[this._parentTypeStack.length-1]}getInputType(){if(this._inputTypeStack.length>0)return this._inputTypeStack[this._inputTypeStack.length-1]}getParentInputType(){if(this._inputTypeStack.length>1)return this._inputTypeStack[this._inputTypeStack.length-2]}getFieldDef(){if(this._fieldDefStack.length>0)return this._fieldDefStack[this._fieldDefStack.length-1]}getDefaultValue(){if(this._defaultValueStack.length>0)return this._defaultValueStack[this._defaultValueStack.length-1]}getDirective(){return this._directive}getArgument(){return this._argument}getEnumValue(){return this._enumValue}enter($){let J=this._schema;switch($.kind){case v.SELECTION_SET:{let X=b1(this.getType());this._parentTypeStack.push(P6(X)?X:void 0);break}case v.FIELD:{let X=this.getParentType(),Y,U;if(X){if(Y=this._getFieldDef(J,X,$),Y)U=Y.type}this._fieldDefStack.push(Y),this._typeStack.push(X9(U)?U:void 0);break}case v.DIRECTIVE:this._directive=J.getDirective($.name.value);break;case v.OPERATION_DEFINITION:{let X=J.getRootType($.operation);this._typeStack.push(N0(X)?X:void 0);break}case v.INLINE_FRAGMENT:case v.FRAGMENT_DEFINITION:{let X=$.typeCondition,Y=X?g1(J,X):b1(this.getType());this._typeStack.push(X9(Y)?Y:void 0);break}case v.VARIABLE_DEFINITION:{let X=g1(J,$.type);this._inputTypeStack.push(x4(X)?X:void 0);break}case v.ARGUMENT:{var W;let X,Y,U=(W=this.getDirective())!==null&&W!==void 0?W:this.getFieldDef();if(U){if(X=U.args.find((Z)=>Z.name===$.name.value),X)Y=X.type}this._argument=X,this._defaultValueStack.push(X?X.defaultValue:void 0),this._inputTypeStack.push(x4(Y)?Y:void 0);break}case v.LIST:{let X=NY(this.getInputType()),Y=w1(X)?X.ofType:X;this._defaultValueStack.push(void 0),this._inputTypeStack.push(x4(Y)?Y:void 0);break}case v.OBJECT_FIELD:{let X=b1(this.getInputType()),Y,U;if(J1(X)){if(U=X.getFields()[$.name.value],U)Y=U.type}this._defaultValueStack.push(U?U.defaultValue:void 0),this._inputTypeStack.push(x4(Y)?Y:void 0);break}case v.ENUM:{let X=b1(this.getInputType()),Y;if(Y4(X))Y=X.getValue($.value);this._enumValue=Y;break}default:}}leave($){switch($.kind){case v.SELECTION_SET:this._parentTypeStack.pop();break;case v.FIELD:this._fieldDefStack.pop(),this._typeStack.pop();break;case v.DIRECTIVE:this._directive=null;break;case v.OPERATION_DEFINITION:case v.INLINE_FRAGMENT:case v.FRAGMENT_DEFINITION:this._typeStack.pop();break;case v.VARIABLE_DEFINITION:this._inputTypeStack.pop();break;case v.ARGUMENT:this._argument=null,this._defaultValueStack.pop(),this._inputTypeStack.pop();break;case v.LIST:case v.OBJECT_FIELD:this._defaultValueStack.pop(),this._inputTypeStack.pop();break;case v.ENUM:this._enumValue=null;break;default:}}}function F60($,J,W){let X=W.name.value;if(X===PJ.name&&$.getQueryType()===J)return PJ;if(X===_J.name&&$.getQueryType()===J)return _J;if(X===NJ.name&&P6(J))return NJ;if(N0(J)||x0(J))return J.getFields()[X]}function KH($,J){return{enter(...W){let X=W[0];$.enter(X);let Y=LY(J,X.kind).enter;if(Y){let U=Y.apply(J,W);if(U!==void 0){if($.leave(X),aZ(U))$.enter(U)}return U}},leave(...W){let X=W[0],Y=LY(J,X.kind).leave,U;if(Y)U=Y.apply(J,W);return $.leave(X),U}}}function ON($){return $.kind===v.OPERATION_DEFINITION||$.kind===v.FRAGMENT_DEFINITION}function FN($){return $.kind===v.SCHEMA_DEFINITION||RJ($)||$.kind===v.DIRECTIVE_DEFINITION}function RJ($){return $.kind===v.SCALAR_TYPE_DEFINITION||$.kind===v.OBJECT_TYPE_DEFINITION||$.kind===v.INTERFACE_TYPE_DEFINITION||$.kind===v.UNION_TYPE_DEFINITION||$.kind===v.ENUM_TYPE_DEFINITION||$.kind===v.INPUT_OBJECT_TYPE_DEFINITION}function EN($){return $.kind===v.SCHEMA_EXTENSION||bD($)}function bD($){return $.kind===v.SCALAR_TYPE_EXTENSION||$.kind===v.OBJECT_TYPE_EXTENSION||$.kind===v.INTERFACE_TYPE_EXTENSION||$.kind===v.UNION_TYPE_EXTENSION||$.kind===v.ENUM_TYPE_EXTENSION||$.kind===v.INPUT_OBJECT_TYPE_EXTENSION}function MN($){return{Document(J){for(let W of J.definitions)if(!ON(W)){let X=W.kind===v.SCHEMA_DEFINITION||W.kind===v.SCHEMA_EXTENSION?"schema":'"'+W.name.value+'"';$.reportError(new m(`The ${X} definition is not executable.`,{nodes:W}))}return!1}}}function VN($){return{Field(J){let W=$.getParentType();if(W){if(!$.getFieldDef()){let Y=$.getSchema(),U=J.name.value,Z=w$("to use an inline fragment on",E60(Y,W,U));if(Z==="")Z=w$(M60(W,U));$.reportError(new m(`Cannot query field "${U}" on type "${W.name}".`+Z,{nodes:J}))}}}}}function E60($,J,W){if(!a4(J))return[];let X=new Set,Y=Object.create(null);for(let Z of $.getPossibleTypes(J)){if(!Z.getFields()[W])continue;X.add(Z),Y[Z.name]=1;for(let H of Z.getInterfaces()){var U;if(!H.getFields()[W])continue;X.add(H),Y[H.name]=((U=Y[H.name])!==null&&U!==void 0?U:0)+1}}return[...X].sort((Z,H)=>{let G=Y[H.name]-Y[Z.name];if(G!==0)return G;if(x0(Z)&&$.isSubType(Z,H))return-1;if(x0(H)&&$.isSubType(H,Z))return 1;return W9(Z.name,H.name)}).map((Z)=>Z.name)}function M60($,J){if(N0($)||x0($)){let W=Object.keys($.getFields());return N$(J,W)}return[]}function QN($){return{InlineFragment(J){let W=J.typeCondition;if(W){let X=g1($.getSchema(),W);if(X&&!P6(X)){let Y=$1(W);$.reportError(new m(`Fragment cannot condition on non composite type "${Y}".`,{nodes:W}))}}},FragmentDefinition(J){let W=g1($.getSchema(),J.typeCondition);if(W&&!P6(W)){let X=$1(J.typeCondition);$.reportError(new m(`Fragment "${J.name.value}" cannot condition on non composite type "${X}".`,{nodes:J.typeCondition}))}}}}function AN($){return{...IN($),Argument(J){let W=$.getArgument(),X=$.getFieldDef(),Y=$.getParentType();if(!W&&X&&Y){let U=J.name.value,Z=X.args.map((G)=>G.name),H=N$(U,Z);$.reportError(new m(`Unknown argument "${U}" on field "${Y.name}.${X.name}".`+w$(H),{nodes:J}))}}}}function IN($){let J=Object.create(null),W=$.getSchema(),X=W?W.getDirectives():t6;for(let Z of X)J[Z.name]=Z.args.map((H)=>H.name);let Y=$.getDocument().definitions;for(let Z of Y)if(Z.kind===v.DIRECTIVE_DEFINITION){var U;let H=(U=Z.arguments)!==null&&U!==void 0?U:[];J[Z.name.value]=H.map((G)=>G.name.value)}return{Directive(Z){let H=Z.name.value,G=J[H];if(Z.arguments&&G)for(let z of Z.arguments){let w=z.name.value;if(!G.includes(w)){let D=N$(w,G);$.reportError(new m(`Unknown argument "${w}" on directive "@${H}".`+w$(D),{nodes:z}))}}return!1}}}function gD($){let J=Object.create(null),W=$.getSchema(),X=W?W.getDirectives():t6;for(let U of X)J[U.name]=U.locations;let Y=$.getDocument().definitions;for(let U of Y)if(U.kind===v.DIRECTIVE_DEFINITION)J[U.name.value]=U.locations.map((Z)=>Z.value);return{Directive(U,Z,H,G,z){let w=U.name.value,D=J[w];if(!D){$.reportError(new m(`Unknown directive "@${w}".`,{nodes:U}));return}let K=V60(z);if(K&&!D.includes(K))$.reportError(new m(`Directive "@${w}" may not be used on ${K}.`,{nodes:U}))}}}function V60($){let J=$[$.length-1];switch("kind"in J||H4(!1),J.kind){case v.OPERATION_DEFINITION:return Q60(J.operation);case v.FIELD:return z0.FIELD;case v.FRAGMENT_SPREAD:return z0.FRAGMENT_SPREAD;case v.INLINE_FRAGMENT:return z0.INLINE_FRAGMENT;case v.FRAGMENT_DEFINITION:return z0.FRAGMENT_DEFINITION;case v.VARIABLE_DEFINITION:return z0.VARIABLE_DEFINITION;case v.SCHEMA_DEFINITION:case v.SCHEMA_EXTENSION:return z0.SCHEMA;case v.SCALAR_TYPE_DEFINITION:case v.SCALAR_TYPE_EXTENSION:return z0.SCALAR;case v.OBJECT_TYPE_DEFINITION:case v.OBJECT_TYPE_EXTENSION:return z0.OBJECT;case v.FIELD_DEFINITION:return z0.FIELD_DEFINITION;case v.INTERFACE_TYPE_DEFINITION:case v.INTERFACE_TYPE_EXTENSION:return z0.INTERFACE;case v.UNION_TYPE_DEFINITION:case v.UNION_TYPE_EXTENSION:return z0.UNION;case v.ENUM_TYPE_DEFINITION:case v.ENUM_TYPE_EXTENSION:return z0.ENUM;case v.ENUM_VALUE_DEFINITION:return z0.ENUM_VALUE;case v.INPUT_OBJECT_TYPE_DEFINITION:case v.INPUT_OBJECT_TYPE_EXTENSION:return z0.INPUT_OBJECT;case v.INPUT_VALUE_DEFINITION:{let W=$[$.length-3];return"kind"in W||H4(!1),W.kind===v.INPUT_OBJECT_TYPE_DEFINITION?z0.INPUT_FIELD_DEFINITION:z0.ARGUMENT_DEFINITION}default:H4(!1,"Unexpected kind: "+n(J.kind))}}function Q60($){switch($){case E4.QUERY:return z0.QUERY;case E4.MUTATION:return z0.MUTATION;case E4.SUBSCRIPTION:return z0.SUBSCRIPTION}}function LN($){return{FragmentSpread(J){let W=J.name.value;if(!$.getFragment(W))$.reportError(new m(`Unknown fragment "${W}".`,{nodes:J.name}))}}}function fD($){let J=$.getSchema(),W=J?J.getTypeMap():Object.create(null),X=Object.create(null);for(let U of $.getDocument().definitions)if(RJ(U))X[U.name.value]=!0;let Y=[...Object.keys(W),...Object.keys(X)];return{NamedType(U,Z,H,G,z){let w=U.name.value;if(!W[w]&&!X[w]){var D;let K=(D=z[2])!==null&&D!==void 0?D:H,O=K!=null&&A60(K);if(O&&Zf.includes(w))return;let F=N$(w,O?Zf.concat(Y):Y);$.reportError(new m(`Unknown type "${w}".`+w$(F),{nodes:U}))}}}}var Zf=[...jD,...zH].map(($)=>$.name);function A60($){return"kind"in $&&(FN($)||EN($))}function PN($){let J=0;return{Document(W){J=W.definitions.filter((X)=>X.kind===v.OPERATION_DEFINITION).length},OperationDefinition(W){if(!W.name&&J>1)$.reportError(new m("This anonymous operation must be the only defined operation.",{nodes:W}))}}}function _N($){var J,W,X;let Y=$.getSchema(),U=(J=(W=(X=Y===null||Y===void 0?void 0:Y.astNode)!==null&&X!==void 0?X:Y===null||Y===void 0?void 0:Y.getQueryType())!==null&&W!==void 0?W:Y===null||Y===void 0?void 0:Y.getMutationType())!==null&&J!==void 0?J:Y===null||Y===void 0?void 0:Y.getSubscriptionType(),Z=0;return{SchemaDefinition(H){if(U){$.reportError(new m("Cannot define a new schema within a schema extension.",{nodes:H}));return}if(Z>0)$.reportError(new m("Must provide only one schema definition.",{nodes:H}));++Z}}}var I60=3;function NN($){function J(W,X=Object.create(null),Y=0){if(W.kind===v.FRAGMENT_SPREAD){let U=W.name.value;if(X[U]===!0)return!1;let Z=$.getFragment(U);if(!Z)return!1;try{return X[U]=!0,J(Z,X,Y)}finally{X[U]=void 0}}if(W.kind===v.FIELD&&(W.name.value==="fields"||W.name.value==="interfaces"||W.name.value==="possibleTypes"||W.name.value==="inputFields")){if(Y++,Y>=I60)return!0}if("selectionSet"in W&&W.selectionSet){for(let U of W.selectionSet.selections)if(J(U,X,Y))return!0}return!1}return{Field(W){if(W.name.value==="__schema"||W.name.value==="__type"){if(J(W))return $.reportError(new m("Maximum introspection depth exceeded",{nodes:[W]})),!1}}}}function BN($){let J=Object.create(null),W=[],X=Object.create(null);return{OperationDefinition:()=>!1,FragmentDefinition(U){return Y(U),!1}};function Y(U){if(J[U.name.value])return;let Z=U.name.value;J[Z]=!0;let H=$.getFragmentSpreads(U.selectionSet);if(H.length===0)return;X[Z]=W.length;for(let G of H){let z=G.name.value,w=X[z];if(W.push(G),w===void 0){let D=$.getFragment(z);if(D)Y(D)}else{let D=W.slice(w),K=D.slice(0,-1).map((O)=>'"'+O.name.value+'"').join(", ");$.reportError(new m(`Cannot spread fragment "${z}" within itself`+(K!==""?` via ${K}.`:"."),{nodes:D}))}W.pop()}X[Z]=void 0}}function RN($){let J=Object.create(null);return{OperationDefinition:{enter(){J=Object.create(null)},leave(W){let X=$.getRecursiveVariableUsages(W);for(let{node:Y}of X){let U=Y.name.value;if(J[U]!==!0)$.reportError(new m(W.name?`Variable "$${U}" is not defined by operation "${W.name.value}".`:`Variable "$${U}" is not defined.`,{nodes:[Y,W]}))}}},VariableDefinition(W){J[W.variable.name.value]=!0}}}function SN($){let J=[],W=[];return{OperationDefinition(X){return J.push(X),!1},FragmentDefinition(X){return W.push(X),!1},Document:{leave(){let X=Object.create(null);for(let Y of J)for(let U of $.getRecursivelyReferencedFragments(Y))X[U.name.value]=!0;for(let Y of W){let U=Y.name.value;if(X[U]!==!0)$.reportError(new m(`Fragment "${U}" is never used.`,{nodes:Y}))}}}}}function jN($){let J=[];return{OperationDefinition:{enter(){J=[]},leave(W){let X=Object.create(null),Y=$.getRecursiveVariableUsages(W);for(let{node:U}of Y)X[U.name.value]=!0;for(let U of J){let Z=U.variable.name.value;if(X[Z]!==!0)$.reportError(new m(W.name?`Variable "$${Z}" is never used in operation "${W.name.value}".`:`Variable "$${Z}" is never used.`,{nodes:U}))}}},VariableDefinition(W){J.push(W)}}}function mD($){switch($.kind){case v.OBJECT:return{...$,fields:L60($.fields)};case v.LIST:return{...$,values:$.values.map(mD)};case v.INT:case v.FLOAT:case v.STRING:case v.BOOLEAN:case v.NULL:case v.ENUM:case v.VARIABLE:return $}}function L60($){return $.map((J)=>({...J,value:mD(J.value)})).sort((J,W)=>W9(J.name.value,W.name.value))}function Gf($){if(Array.isArray($))return $.map(([J,W])=>`subfields "${J}" conflict because `+Gf(W)).join(" and ");return $}function CN($){let J=new qN,W=new Df,X=new Map;return{SelectionSet(Y){let U=P60($,X,J,W,$.getParentType(),Y);for(let[[Z,H],G,z]of U){let w=Gf(H);$.reportError(new m(`Fields "${Z}" conflict because ${w}. Use different aliases on the fields to fetch both if this was intentional.`,{nodes:G.concat(z)}))}}}}function P60($,J,W,X,Y,U){let Z=[],[H,G]=uD($,J,Y,U);if(N60($,Z,J,W,X,H),G.length!==0)for(let z=0;z<G.length;z++){yD($,Z,J,W,X,!1,H,G[z]);for(let w=z+1;w<G.length;w++)cD($,Z,J,W,X,!1,G[z],G[w])}return Z}function yD($,J,W,X,Y,U,Z,H){if(X.has(Z,H,U))return;X.add(Z,H,U);let G=$.getFragment(H);if(!G)return;let[z,w]=vN($,W,G);if(Z===z)return;TN($,J,W,X,Y,U,Z,z);for(let D of w)yD($,J,W,X,Y,U,Z,D)}function cD($,J,W,X,Y,U,Z,H){if(Z===H)return;if(Y.has(Z,H,U))return;Y.add(Z,H,U);let G=$.getFragment(Z),z=$.getFragment(H);if(!G||!z)return;let[w,D]=vN($,W,G),[K,O]=vN($,W,z);TN($,J,W,X,Y,U,w,K);for(let F of O)cD($,J,W,X,Y,U,Z,F);for(let F of D)cD($,J,W,X,Y,U,F,H)}function _60($,J,W,X,Y,U,Z,H,G){let z=[],[w,D]=uD($,J,U,Z),[K,O]=uD($,J,H,G);TN($,z,J,W,X,Y,w,K);for(let F of O)yD($,z,J,W,X,Y,w,F);for(let F of D)yD($,z,J,W,X,Y,K,F);for(let F of D)for(let M of O)cD($,z,J,W,X,Y,F,M);return z}function N60($,J,W,X,Y,U){for(let[Z,H]of Object.entries(U))if(H.length>1)for(let G=0;G<H.length;G++)for(let z=G+1;z<H.length;z++){let w=zf($,W,X,Y,!1,Z,H[G],H[z]);if(w)J.push(w)}}function TN($,J,W,X,Y,U,Z,H){for(let[G,z]of Object.entries(Z)){let w=H[G];if(w)for(let D of z)for(let K of w){let O=zf($,W,X,Y,U,G,D,K);if(O)J.push(O)}}}function zf($,J,W,X,Y,U,Z,H){let[G,z,w]=Z,[D,K,O]=H,F=Y||G!==D&&N0(G)&&N0(D);if(!F){let Q=z.name.value,N=K.name.value;if(Q!==N)return[[U,`"${Q}" and "${N}" are different fields`],[z],[K]];if(!B60(z,K))return[[U,"they have differing arguments"],[z],[K]]}let M=w===null||w===void 0?void 0:w.type,A=O===null||O===void 0?void 0:O.type;if(M&&A&&kN(M,A))return[[U,`they return conflicting types "${n(M)}" and "${n(A)}"`],[z],[K]];let I=z.selectionSet,P=K.selectionSet;if(I&&P){let Q=_60($,J,W,X,F,b1(M),I,b1(A),P);return R60(Q,U,z,K)}}function B60($,J){let W=$.arguments,X=J.arguments;if(W===void 0||W.length===0)return X===void 0||X.length===0;if(X===void 0||X.length===0)return!1;if(W.length!==X.length)return!1;let Y=new Map(X.map(({name:U,value:Z})=>[U.value,Z]));return W.every((U)=>{let Z=U.value,H=Y.get(U.name.value);if(H===void 0)return!1;return Hf(Z)===Hf(H)})}function Hf($){return $1(mD($))}function kN($,J){if(w1($))return w1(J)?kN($.ofType,J.ofType):!0;if(w1(J))return!0;if(M0($))return M0(J)?kN($.ofType,J.ofType):!0;if(M0(J))return!0;if(t4($)||t4(J))return $!==J;return!1}function uD($,J,W,X){let Y=J.get(X);if(Y)return Y;let U=Object.create(null),Z=Object.create(null);wf($,W,X,U,Z);let H=[U,Object.keys(Z)];return J.set(X,H),H}function vN($,J,W){let X=J.get(W.selectionSet);if(X)return X;let Y=g1($.getSchema(),W.typeCondition);return uD($,J,Y,W.selectionSet)}function wf($,J,W,X,Y){for(let U of W.selections)switch(U.kind){case v.FIELD:{let Z=U.name.value,H;if(N0(J)||x0(J))H=J.getFields()[Z];let G=U.alias?U.alias.value:Z;if(!X[G])X[G]=[];X[G].push([J,U,H]);break}case v.FRAGMENT_SPREAD:Y[U.name.value]=!0;break;case v.INLINE_FRAGMENT:{let Z=U.typeCondition,H=Z?g1($.getSchema(),Z):J;wf($,H,U.selectionSet,X,Y);break}}}function R60($,J,W,X){if($.length>0)return[[J,$.map(([Y])=>Y)],[W,...$.map(([,Y])=>Y).flat()],[X,...$.map(([,,Y])=>Y).flat()]]}class qN{constructor(){this._data=new Map}has($,J,W){var X;let Y=(X=this._data.get($))===null||X===void 0?void 0:X.get(J);if(Y===void 0)return!1;return W?!0:W===Y}add($,J,W){let X=this._data.get($);if(X===void 0)this._data.set($,new Map([[J,W]]));else X.set(J,W)}}class Df{constructor(){this._orderedPairSet=new qN}has($,J,W){return $<J?this._orderedPairSet.has($,J,W):this._orderedPairSet.has(J,$,W)}add($,J,W){if($<J)this._orderedPairSet.add($,J,W);else this._orderedPairSet.add(J,$,W)}}function hN($){return{InlineFragment(J){let W=$.getType(),X=$.getParentType();if(P6(W)&&P6(X)&&!SD($.getSchema(),W,X)){let Y=n(X),U=n(W);$.reportError(new m(`Fragment cannot be spread here as objects of type "${Y}" can never be of type "${U}".`,{nodes:J}))}},FragmentSpread(J){let W=J.name.value,X=S60($,W),Y=$.getParentType();if(X&&Y&&!SD($.getSchema(),X,Y)){let U=n(Y),Z=n(X);$.reportError(new m(`Fragment "${W}" cannot be spread here as objects of type "${U}" can never be of type "${Z}".`,{nodes:J}))}}}}function S60($,J){let W=$.getFragment(J);if(W){let X=g1($.getSchema(),W.typeCondition);if(P6(X))return X}}function xN($){let J=$.getSchema(),W=Object.create(null);for(let Y of $.getDocument().definitions)if(RJ(Y))W[Y.name.value]=Y;return{ScalarTypeExtension:X,ObjectTypeExtension:X,InterfaceTypeExtension:X,UnionTypeExtension:X,EnumTypeExtension:X,InputObjectTypeExtension:X};function X(Y){let U=Y.name.value,Z=W[U],H=J===null||J===void 0?void 0:J.getType(U),G;if(Z)G=j60[Z.kind];else if(H)G=k60(H);if(G){if(G!==Y.kind){let z=v60(Y.kind);$.reportError(new m(`Cannot extend non-${z} type "${U}".`,{nodes:Z?[Z,Y]:Y}))}}else{let z=Object.keys({...W,...J===null||J===void 0?void 0:J.getTypeMap()}),w=N$(U,z);$.reportError(new m(`Cannot extend type "${U}" because it is not defined.`+w$(w),{nodes:Y.name}))}}}var j60={[v.SCALAR_TYPE_DEFINITION]:v.SCALAR_TYPE_EXTENSION,[v.OBJECT_TYPE_DEFINITION]:v.OBJECT_TYPE_EXTENSION,[v.INTERFACE_TYPE_DEFINITION]:v.INTERFACE_TYPE_EXTENSION,[v.UNION_TYPE_DEFINITION]:v.UNION_TYPE_EXTENSION,[v.ENUM_TYPE_DEFINITION]:v.ENUM_TYPE_EXTENSION,[v.INPUT_OBJECT_TYPE_DEFINITION]:v.INPUT_OBJECT_TYPE_EXTENSION};function k60($){if(L6($))return v.SCALAR_TYPE_EXTENSION;if(N0($))return v.OBJECT_TYPE_EXTENSION;if(x0($))return v.INTERFACE_TYPE_EXTENSION;if(R4($))return v.UNION_TYPE_EXTENSION;if(Y4($))return v.ENUM_TYPE_EXTENSION;if(J1($))return v.INPUT_OBJECT_TYPE_EXTENSION;H4(!1,"Unexpected type: "+n($))}function v60($){switch($){case v.SCALAR_TYPE_EXTENSION:return"scalar";case v.OBJECT_TYPE_EXTENSION:return"object";case v.INTERFACE_TYPE_EXTENSION:return"interface";case v.UNION_TYPE_EXTENSION:return"union";case v.ENUM_TYPE_EXTENSION:return"enum";case v.INPUT_OBJECT_TYPE_EXTENSION:return"input object";default:H4(!1,"Unexpected kind: "+n($))}}function bN($){return{...gN($),Field:{leave(J){var W;let X=$.getFieldDef();if(!X)return!1;let Y=new Set((W=J.arguments)===null||W===void 0?void 0:W.map((U)=>U.name.value));for(let U of X.args)if(!Y.has(U.name)&&Y9(U)){let Z=n(U.type);$.reportError(new m(`Field "${X.name}" argument "${U.name}" of type "${Z}" is required, but it was not provided.`,{nodes:J}))}}}}}function gN($){var J;let W=Object.create(null),X=$.getSchema(),Y=(J=X===null||X===void 0?void 0:X.getDirectives())!==null&&J!==void 0?J:t6;for(let H of Y)W[H.name]=S8(H.args.filter(Y9),(G)=>G.name);let U=$.getDocument().definitions;for(let H of U)if(H.kind===v.DIRECTIVE_DEFINITION){var Z;let G=(Z=H.arguments)!==null&&Z!==void 0?Z:[];W[H.name.value]=S8(G.filter(C60),(z)=>z.name.value)}return{Directive:{leave(H){let G=H.name.value,z=W[G];if(z){var w;let D=(w=H.arguments)!==null&&w!==void 0?w:[],K=new Set(D.map((O)=>O.name.value));for(let[O,F]of Object.entries(z))if(!K.has(O)){let M=_Y(F.type)?n(F.type):$1(F.type);$.reportError(new m(`Directive "@${G}" argument "${O}" of type "${M}" is required, but it was not provided.`,{nodes:H}))}}}}}}function C60($){return $.type.kind===v.NON_NULL_TYPE&&$.defaultValue==null}function fN($){return{Field(J){let W=$.getType(),X=J.selectionSet;if(W){if(t4(b1(W))){if(X){let Y=J.name.value,U=n(W);$.reportError(new m(`Field "${Y}" must not have a selection since type "${U}" has no subfields.`,{nodes:X}))}}else if(!X){let Y=J.name.value,U=n(W);$.reportError(new m(`Field "${Y}" of type "${U}" must have a selection of subfields. Did you mean "${Y} { ... }"?`,{nodes:J}))}else if(X.selections.length===0){let Y=J.name.value,U=n(W);$.reportError(new m(`Field "${Y}" of type "${U}" must have at least one field selected.`,{nodes:J}))}}}}}function Kf($){return $.map((J)=>typeof J==="number"?"["+J.toString()+"]":"."+J).join("")}function mN($,J,W){return{prev:$,key:J,typename:W}}function C8($){let J=[],W=$;while(W)J.push(W.key),W=W.prev;return J.reverse()}function pD($,J,W=T60){return OH($,J,W,void 0)}function T60($,J,W){let X="Invalid value "+n(J);if($.length>0)X+=` at "value${Kf($)}"`;throw W.message=X+": "+W.message,W}function OH($,J,W,X){if(M0(J)){if($!=null)return OH($,J.ofType,W,X);W(C8(X),$,new m(`Expected non-nullable type "${n(J)}" not to be null.`));return}if($==null)return null;if(w1(J)){let Y=J.ofType;if(kD($))return Array.from($,(U,Z)=>{let H=mN(X,Z,void 0);return OH(U,Y,W,H)});return[OH($,Y,W,X)]}if(J1(J)){if(!h4($)||Array.isArray($)){W(C8(X),$,new m(`Expected type "${J.name}" to be an object.`));return}let Y={},U=J.getFields();for(let Z of Object.values(U)){let H=$[Z.name];if(H===void 0){if(Z.defaultValue!==void 0)Y[Z.name]=Z.defaultValue;else if(M0(Z.type)){let G=n(Z.type);W(C8(X),$,new m(`Field "${Z.name}" of required type "${G}" was not provided.`))}continue}Y[Z.name]=OH(H,Z.type,W,mN(X,Z.name,J.name))}for(let Z of Object.keys($))if(!U[Z]){let H=N$(Z,Object.keys(J.getFields()));W(C8(X),$,new m(`Field "${Z}" is not defined by type "${J.name}".`+w$(H)))}if(J.isOneOf){let Z=Object.keys(Y);if(Z.length!==1)W(C8(X),$,new m(`Exactly one key must be specified for OneOf type "${J.name}".`));let H=Z[0],G=Y[H];if(G===null)W(C8(X).concat(H),G,new m(`Field "${H}" must be non-null.`))}return Y}if(t4(J)){let Y;try{Y=J.parseValue($)}catch(U){if(U instanceof m)W(C8(X),$,U);else W(C8(X),$,new m(`Expected type "${J.name}". `+U.message,{originalError:U}));return}if(Y===void 0)W(C8(X),$,new m(`Expected type "${J.name}".`));return Y}H4(!1,"Unexpected input type: "+n(J))}function a6($,J,W){if(!$)return;if($.kind===v.VARIABLE){let X=$.name.value;if(W==null||W[X]===void 0)return;let Y=W[X];if(Y===null&&M0(J))return;return Y}if(M0(J)){if($.kind===v.NULL)return;return a6($,J.ofType,W)}if($.kind===v.NULL)return null;if(w1(J)){let X=J.ofType;if($.kind===v.LIST){let U=[];for(let Z of $.values)if(Of(Z,W)){if(M0(X))return;U.push(null)}else{let H=a6(Z,X,W);if(H===void 0)return;U.push(H)}return U}let Y=a6($,X,W);if(Y===void 0)return;return[Y]}if(J1(J)){if($.kind!==v.OBJECT)return;let X=Object.create(null),Y=S8($.fields,(U)=>U.name.value);for(let U of Object.values(J.getFields())){let Z=Y[U.name];if(!Z||Of(Z.value,W)){if(U.defaultValue!==void 0)X[U.name]=U.defaultValue;else if(M0(U.type))return;continue}let H=a6(Z.value,U.type,W);if(H===void 0)return;X[U.name]=H}if(J.isOneOf){let U=Object.keys(X);if(U.length!==1)return;if(X[U[0]]===null)return}return X}if(t4(J)){let X;try{X=J.parseLiteral($,W)}catch(Y){return}if(X===void 0)return;return X}H4(!1,"Unexpected input type: "+n(J))}function Of($,J){return $.kind===v.VARIABLE&&(J==null||J[$.name.value]===void 0)}function FH($,J,W){var X;let Y={},U=(X=J.arguments)!==null&&X!==void 0?X:[],Z=S8(U,(H)=>H.name.value);for(let H of $.args){let{name:G,type:z}=H,w=Z[G];if(!w){if(H.defaultValue!==void 0)Y[G]=H.defaultValue;else if(M0(z))throw new m(`Argument "${G}" of required type "${n(z)}" was not provided.`,{nodes:J});continue}let D=w.value,K=D.kind===v.NULL;if(D.kind===v.VARIABLE){let F=D.name.value;if(W==null||!q60(W,F)){if(H.defaultValue!==void 0)Y[G]=H.defaultValue;else if(M0(z))throw new m(`Argument "${G}" of required type "${n(z)}" was provided the variable "$${F}" which was not provided a runtime value.`,{nodes:D});continue}K=W[F]==null}if(K&&M0(z))throw new m(`Argument "${G}" of non-null type "${n(z)}" must not be null.`,{nodes:D});let O=a6(D,z,W);if(O===void 0)throw new m(`Argument "${G}" has invalid value ${$1(D)}.`,{nodes:D});Y[G]=O}return Y}function R$($,J,W){var X;let Y=(X=J.directives)===null||X===void 0?void 0:X.find((U)=>U.name.value===$.name);if(Y)return FH($,Y,W)}function q60($,J){return Object.prototype.hasOwnProperty.call($,J)}function cN($,J,W,X,Y){let U=new Map;return dD($,J,W,X,Y,U,new Set),U}function Ef($,J,W,X,Y){let U=new Map,Z=new Set;for(let H of Y)if(H.selectionSet)dD($,J,W,X,H.selectionSet,U,Z);return U}function dD($,J,W,X,Y,U,Z){for(let H of Y.selections)switch(H.kind){case v.FIELD:{if(!yN(W,H))continue;let G=h60(H),z=U.get(G);if(z!==void 0)z.push(H);else U.set(G,[H]);break}case v.INLINE_FRAGMENT:{if(!yN(W,H)||!Ff($,H,X))continue;dD($,J,W,X,H.selectionSet,U,Z);break}case v.FRAGMENT_SPREAD:{let G=H.name.value;if(Z.has(G)||!yN(W,H))continue;Z.add(G);let z=J[G];if(!z||!Ff($,z,X))continue;dD($,J,W,X,z.selectionSet,U,Z);break}}}function yN($,J){let W=R$(z9,J,$);if((W===null||W===void 0?void 0:W.if)===!0)return!1;let X=R$(G9,J,$);if((X===null||X===void 0?void 0:X.if)===!1)return!1;return!0}function Ff($,J,W){let X=J.typeCondition;if(!X)return!0;let Y=g1($,X);if(Y===W)return!0;if(a4(Y))return $.isSubType(Y,W);return!1}function h60($){return $.alias?$.alias.value:$.name.value}function uN($){return{OperationDefinition(J){if(J.operation==="subscription"){let W=$.getSchema(),X=W.getSubscriptionType();if(X){let Y=J.name?J.name.value:null,U=Object.create(null),Z=$.getDocument(),H=Object.create(null);for(let z of Z.definitions)if(z.kind===v.FRAGMENT_DEFINITION)H[z.name.value]=z;let G=cN(W,H,U,X,J.selectionSet);if(G.size>1){let D=[...G.values()].slice(1).flat();$.reportError(new m(Y!=null?`Subscription "${Y}" must select only one top level field.`:"Anonymous Subscription must select only one top level field.",{nodes:D}))}for(let z of G.values())if(z[0].name.value.startsWith("__"))$.reportError(new m(Y!=null?`Subscription "${Y}" must not select an introspection top level field.`:"Anonymous Subscription must not select an introspection top level field.",{nodes:z}))}}}}}function TY($,J){let W=new Map;for(let X of $){let Y=J(X),U=W.get(Y);if(U===void 0)W.set(Y,[X]);else U.push(X)}return W}function pN($){return{DirectiveDefinition(X){var Y;let U=(Y=X.arguments)!==null&&Y!==void 0?Y:[];return W(`@${X.name.value}`,U)},InterfaceTypeDefinition:J,InterfaceTypeExtension:J,ObjectTypeDefinition:J,ObjectTypeExtension:J};function J(X){var Y;let U=X.name.value,Z=(Y=X.fields)!==null&&Y!==void 0?Y:[];for(let G of Z){var H;let z=G.name.value,w=(H=G.arguments)!==null&&H!==void 0?H:[];W(`${U}.${z}`,w)}return!1}function W(X,Y){let U=TY(Y,(Z)=>Z.name.value);for(let[Z,H]of U)if(H.length>1)$.reportError(new m(`Argument "${X}(${Z}:)" can only be defined once.`,{nodes:H.map((G)=>G.name)}));return!1}}function lD($){return{Field:J,Directive:J};function J(W){var X;let Y=(X=W.arguments)!==null&&X!==void 0?X:[],U=TY(Y,(Z)=>Z.name.value);for(let[Z,H]of U)if(H.length>1)$.reportError(new m(`There can be only one argument named "${Z}".`,{nodes:H.map((G)=>G.name)}))}}function dN($){let J=Object.create(null),W=$.getSchema();return{DirectiveDefinition(X){let Y=X.name.value;if(W!==null&&W!==void 0&&W.getDirective(Y)){$.reportError(new m(`Directive "@${Y}" already exists in the schema. It cannot be redefined.`,{nodes:X.name}));return}if(J[Y])$.reportError(new m(`There can be only one directive named "@${Y}".`,{nodes:[J[Y],X.name]}));else J[Y]=X.name;return!1}}}function rD($){let J=Object.create(null),W=$.getSchema(),X=W?W.getDirectives():t6;for(let H of X)J[H.name]=!H.isRepeatable;let Y=$.getDocument().definitions;for(let H of Y)if(H.kind===v.DIRECTIVE_DEFINITION)J[H.name.value]=!H.repeatable;let U=Object.create(null),Z=Object.create(null);return{enter(H){if(!("directives"in H)||!H.directives)return;let G;if(H.kind===v.SCHEMA_DEFINITION||H.kind===v.SCHEMA_EXTENSION)G=U;else if(RJ(H)||bD(H)){let z=H.name.value;if(G=Z[z],G===void 0)Z[z]=G=Object.create(null)}else G=Object.create(null);for(let z of H.directives){let w=z.name.value;if(J[w])if(G[w])$.reportError(new m(`The directive "@${w}" can only be used once at this location.`,{nodes:[G[w],z]}));else G[w]=z}}}}function lN($){let J=$.getSchema(),W=J?J.getTypeMap():Object.create(null),X=Object.create(null);return{EnumTypeDefinition:Y,EnumTypeExtension:Y};function Y(U){var Z;let H=U.name.value;if(!X[H])X[H]=Object.create(null);let G=(Z=U.values)!==null&&Z!==void 0?Z:[],z=X[H];for(let w of G){let D=w.name.value,K=W[H];if(Y4(K)&&K.getValue(D))$.reportError(new m(`Enum value "${H}.${D}" already exists in the schema. It cannot also be defined in this type extension.`,{nodes:w.name}));else if(z[D])$.reportError(new m(`Enum value "${H}.${D}" can only be defined once.`,{nodes:[z[D],w.name]}));else z[D]=w.name}return!1}}function rN($){let J=$.getSchema(),W=J?J.getTypeMap():Object.create(null),X=Object.create(null);return{InputObjectTypeDefinition:Y,InputObjectTypeExtension:Y,InterfaceTypeDefinition:Y,InterfaceTypeExtension:Y,ObjectTypeDefinition:Y,ObjectTypeExtension:Y};function Y(U){var Z;let H=U.name.value;if(!X[H])X[H]=Object.create(null);let G=(Z=U.fields)!==null&&Z!==void 0?Z:[],z=X[H];for(let w of G){let D=w.name.value;if(x60(W[H],D))$.reportError(new m(`Field "${H}.${D}" already exists in the schema. It cannot also be defined in this type extension.`,{nodes:w.name}));else if(z[D])$.reportError(new m(`Field "${H}.${D}" can only be defined once.`,{nodes:[z[D],w.name]}));else z[D]=w.name}return!1}}function x60($,J){if(N0($)||x0($)||J1($))return $.getFields()[J]!=null;return!1}function nN($){let J=Object.create(null);return{OperationDefinition:()=>!1,FragmentDefinition(W){let X=W.name.value;if(J[X])$.reportError(new m(`There can be only one fragment named "${X}".`,{nodes:[J[X],W.name]}));else J[X]=W.name;return!1}}}function nD($){let J=[],W=Object.create(null);return{ObjectValue:{enter(){J.push(W),W=Object.create(null)},leave(){let X=J.pop();X||H4(!1),W=X}},ObjectField(X){let Y=X.name.value;if(W[Y])$.reportError(new m(`There can be only one input field named "${Y}".`,{nodes:[W[Y],X.name]}));else W[Y]=X.name}}}function iN($){let J=Object.create(null);return{OperationDefinition(W){let X=W.name;if(X)if(J[X.value])$.reportError(new m(`There can be only one operation named "${X.value}".`,{nodes:[J[X.value],X]}));else J[X.value]=X;return!1},FragmentDefinition:()=>!1}}function tN($){let J=$.getSchema(),W=Object.create(null),X=J?{query:J.getQueryType(),mutation:J.getMutationType(),subscription:J.getSubscriptionType()}:{};return{SchemaDefinition:Y,SchemaExtension:Y};function Y(U){var Z;let H=(Z=U.operationTypes)!==null&&Z!==void 0?Z:[];for(let G of H){let z=G.operation,w=W[z];if(X[z])$.reportError(new m(`Type for ${z} already defined in the schema. It cannot be redefined.`,{nodes:G}));else if(w)$.reportError(new m(`There can be only one ${z} type in schema.`,{nodes:[w,G]}));else W[z]=G}return!1}}function aN($){let J=Object.create(null),W=$.getSchema();return{ScalarTypeDefinition:X,ObjectTypeDefinition:X,InterfaceTypeDefinition:X,UnionTypeDefinition:X,EnumTypeDefinition:X,InputObjectTypeDefinition:X};function X(Y){let U=Y.name.value;if(W!==null&&W!==void 0&&W.getType(U)){$.reportError(new m(`Type "${U}" already exists in the schema. It cannot also be defined in this type definition.`,{nodes:Y.name}));return}if(J[U])$.reportError(new m(`There can be only one type named "${U}".`,{nodes:[J[U],Y.name]}));else J[U]=Y.name;return!1}}function oN($){return{OperationDefinition(J){var W;let X=(W=J.variableDefinitions)!==null&&W!==void 0?W:[],Y=TY(X,(U)=>U.variable.name.value);for(let[U,Z]of Y)if(Z.length>1)$.reportError(new m(`There can be only one variable named "$${U}".`,{nodes:Z.map((H)=>H.variable.name)}))}}}function sN($){let J={};return{OperationDefinition:{enter(){J={}}},VariableDefinition(W){J[W.variable.name.value]=W},ListValue(W){let X=NY($.getParentInputType());if(!w1(X))return XW($,W),!1},ObjectValue(W){let X=b1($.getInputType());if(!J1(X))return XW($,W),!1;let Y=S8(W.fields,(U)=>U.name.value);for(let U of Object.values(X.getFields()))if(!Y[U.name]&&BY(U)){let H=n(U.type);$.reportError(new m(`Field "${X.name}.${U.name}" of required type "${H}" was not provided.`,{nodes:W}))}if(X.isOneOf)b60($,W,X,Y,J)},ObjectField(W){let X=b1($.getParentInputType());if(!$.getInputType()&&J1(X)){let U=N$(W.name.value,Object.keys(X.getFields()));$.reportError(new m(`Field "${W.name.value}" is not defined by type "${X.name}".`+w$(U),{nodes:W}))}},NullValue(W){let X=$.getInputType();if(M0(X))$.reportError(new m(`Expected value of type "${n(X)}", found ${$1(W)}.`,{nodes:W}))},EnumValue:(W)=>XW($,W),IntValue:(W)=>XW($,W),FloatValue:(W)=>XW($,W),StringValue:(W)=>XW($,W),BooleanValue:(W)=>XW($,W)}}function XW($,J){let W=$.getInputType();if(!W)return;let X=b1(W);if(!t4(X)){let Y=n(W);$.reportError(new m(`Expected value of type "${Y}", found ${$1(J)}.`,{nodes:J}));return}try{if(X.parseLiteral(J,void 0)===void 0){let U=n(W);$.reportError(new m(`Expected value of type "${U}", found ${$1(J)}.`,{nodes:J}))}}catch(Y){let U=n(W);if(Y instanceof m)$.reportError(Y);else $.reportError(new m(`Expected value of type "${U}", found ${$1(J)}; `+Y.message,{nodes:J,originalError:Y}))}}function b60($,J,W,X,Y){var U;let Z=Object.keys(X);if(Z.length!==1){$.reportError(new m(`OneOf Input Object "${W.name}" must specify exactly one key.`,{nodes:[J]}));return}let G=(U=X[Z[0]])===null||U===void 0?void 0:U.value,z=!G||G.kind===v.NULL,w=(G===null||G===void 0?void 0:G.kind)===v.VARIABLE;if(z){$.reportError(new m(`Field "${W.name}.${Z[0]}" must be non-null.`,{nodes:[J]}));return}if(w){let D=G.name.value;if(Y[D].type.kind!==v.NON_NULL_TYPE)$.reportError(new m(`Variable "${D}" must be non-nullable to be used for OneOf Input Object "${W.name}".`,{nodes:[J]}))}}function eN($){return{VariableDefinition(J){let W=g1($.getSchema(),J.type);if(W!==void 0&&!x4(W)){let X=J.variable.name.value,Y=$1(J.type);$.reportError(new m(`Variable "$${X}" cannot be non-input type "${Y}".`,{nodes:J.type}))}}}}function $B($){let J=Object.create(null);return{OperationDefinition:{enter(){J=Object.create(null)},leave(W){let X=$.getRecursiveVariableUsages(W);for(let{node:Y,type:U,defaultValue:Z,parentType:H}of X){let G=Y.name.value,z=J[G];if(z&&U){let w=$.getSchema(),D=g1(w,z.type);if(D&&!g60(w,D,z.defaultValue,U,Z)){let K=n(D),O=n(U);$.reportError(new m(`Variable "$${G}" of type "${K}" used in position expecting type "${O}".`,{nodes:[z,Y]}))}if(J1(H)&&H.isOneOf&&XH(D))$.reportError(new m(`Variable "$${G}" is of type "${D}" but must be non-nullable to be used for OneOf Input Object "${H}".`,{nodes:[z,Y]}))}}}},VariableDefinition(W){J[W.variable.name.value]=W}}}function g60($,J,W,X,Y){if(M0(X)&&!M0(J)){if(!(W!=null&&W.kind!==v.NULL)&&Y===void 0)return!1;let H=X.ofType;return U9($,J,H)}return U9($,J,X)}var JB=Object.freeze([NN]),qY=Object.freeze([MN,iN,PN,uN,fD,QN,eN,fN,VN,nN,LN,SN,hN,BN,oN,RN,jN,gD,rD,AN,lD,sN,bN,$B,CN,nD,...JB]),f60=Object.freeze([_N,tN,aN,lN,rN,pN,dN,fD,gD,rD,xN,IN,lD,nD,gN]);class Mf{constructor($,J){this._ast=$,this._fragments=void 0,this._fragmentSpreads=new Map,this._recursivelyReferencedFragments=new Map,this._onError=J}get[Symbol.toStringTag](){return"ASTValidationContext"}reportError($){this._onError($)}getDocument(){return this._ast}getFragment($){let J;if(this._fragments)J=this._fragments;else{J=Object.create(null);for(let W of this.getDocument().definitions)if(W.kind===v.FRAGMENT_DEFINITION)J[W.name.value]=W;this._fragments=J}return J[$]}getFragmentSpreads($){let J=this._fragmentSpreads.get($);if(!J){J=[];let W=[$],X;while(X=W.pop())for(let Y of X.selections)if(Y.kind===v.FRAGMENT_SPREAD)J.push(Y);else if(Y.selectionSet)W.push(Y.selectionSet);this._fragmentSpreads.set($,J)}return J}getRecursivelyReferencedFragments($){let J=this._recursivelyReferencedFragments.get($);if(!J){J=[];let W=Object.create(null),X=[$.selectionSet],Y;while(Y=X.pop())for(let U of this.getFragmentSpreads(Y)){let Z=U.name.value;if(W[Z]!==!0){W[Z]=!0;let H=this.getFragment(Z);if(H)J.push(H),X.push(H.selectionSet)}}this._recursivelyReferencedFragments.set($,J)}return J}}class iD extends Mf{constructor($,J,W,X){super(J,X);this._schema=$,this._typeInfo=W,this._variableUsages=new Map,this._recursiveVariableUsages=new Map}get[Symbol.toStringTag](){return"ValidationContext"}getSchema(){return this._schema}getVariableUsages($){let J=this._variableUsages.get($);if(!J){let W=[],X=new CY(this._schema);e7($,KH(X,{VariableDefinition:()=>!1,Variable(Y){W.push({node:Y,type:X.getInputType(),defaultValue:X.getDefaultValue(),parentType:X.getParentInputType()})}})),J=W,this._variableUsages.set($,J)}return J}getRecursiveVariableUsages($){let J=this._recursiveVariableUsages.get($);if(!J){J=this.getVariableUsages($);for(let W of this.getRecursivelyReferencedFragments($))J=J.concat(this.getVariableUsages(W));this._recursiveVariableUsages.set($,J)}return J}getType(){return this._typeInfo.getType()}getParentType(){return this._typeInfo.getParentType()}getInputType(){return this._typeInfo.getInputType()}getParentInputType(){return this._typeInfo.getParentInputType()}getFieldDef(){return this._typeInfo.getFieldDef()}getDirective(){return this._typeInfo.getDirective()}getArgument(){return this._typeInfo.getArgument()}getEnumValue(){return this._typeInfo.getEnumValue()}}function tD($,J,W=qY,X,Y=new CY($)){var U;let Z=(U=X===null||X===void 0?void 0:X.maxErrors)!==null&&U!==void 0?U:100;J||f0(!1,"Must provide document."),vY($);let H=Object.freeze({}),G=[],z=new iD($,J,Y,(D)=>{if(G.length>=Z)throw G.push(new m("Too many validation errors, error limit reached. Validation aborted.")),H;G.push(D)}),w=XN(W.map((D)=>D(z)));try{e7(J,KH(Y,w))}catch(D){if(D!==H)throw D}return G}function Vf($){let J;return function(X,Y,U){if(J===void 0)J=new WeakMap;let Z=J.get(X);if(Z===void 0)Z=new WeakMap,J.set(X,Z);let H=Z.get(Y);if(H===void 0)H=new WeakMap,Z.set(Y,H);let G=H.get(U);if(G===void 0)G=$(X,Y,U),H.set(U,G);return G}}function Qf($){return $ instanceof Error?$:new Af($)}class Af extends Error{constructor($){super("Unexpected error value: "+n($));this.name="NonErrorThrown",this.thrownValue=$}}function o4($,J,W){var X;let Y=Qf($);if(m60(Y))return Y;return new m(Y.message,{nodes:(X=Y.nodes)!==null&&X!==void 0?X:J,source:Y.source,positions:Y.positions,path:W,originalError:Y})}function m60($){return Array.isArray($.path)}var y11=Vf(($,J,W)=>Ef($.schema,$.fragments,$.variableValues,J,W));var SJ=function($,J,W,X){if(h4($)&&typeof $.__typename==="string")return $.__typename;let Y=W.schema.getPossibleTypes(X),U=[];for(let Z=0;Z<Y.length;Z++){let H=Y[Z];if(H.isTypeOf){let G=H.isTypeOf($,J,W);if(hg(G))U[Z]=G;else if(G)return H.name}}if(U.length)return Promise.all(U).then((Z)=>{for(let H=0;H<Z.length;H++)if(Z[H])return Y[H].name})},jJ=function($,J,W,X){if(h4($)||typeof $==="function"){let Y=$[X.fieldName];if(typeof Y==="function")return $[X.fieldName](J,W,X);return Y}};function kJ($,J){let W=null;for(let Y of $.definitions)if(Y.kind===v.OPERATION_DEFINITION){var X;if(J==null){if(W)return null;W=Y}else if(((X=Y.name)===null||X===void 0?void 0:X.value)===J)return Y}return W}function oD($){let J=$.toConfig(),W=s7(WB(J.types),(K)=>K.name,D);return new BJ({...J,types:Object.values(W),directives:WB(J.directives).map(Z),query:U(J.query),mutation:U(J.mutation),subscription:U(J.subscription)});function X(K){if(w1(K))return new r1(X(K.ofType));else if(M0(K))return new L0(X(K.ofType));return Y(K)}function Y(K){return W[K.name]}function U(K){return K&&Y(K)}function Z(K){let O=K.toConfig();return new o$({...O,locations:If(O.locations,(F)=>F),args:H(O.args)})}function H(K){return aD(K,(O)=>({...O,type:X(O.type)}))}function G(K){return aD(K,(O)=>({...O,type:X(O.type),args:O.args&&H(O.args)}))}function z(K){return aD(K,(O)=>({...O,type:X(O.type)}))}function w(K){return WB(K).map(Y)}function D(K){if(L6(K)||kY(K))return K;if(N0(K)){let O=K.toConfig();return new V4({...O,interfaces:()=>w(O.interfaces),fields:()=>G(O.fields)})}if(x0(K)){let O=K.toConfig();return new n6({...O,interfaces:()=>w(O.interfaces),fields:()=>G(O.fields)})}if(R4(K)){let O=K.toConfig();return new k8({...O,types:()=>w(O.types)})}if(Y4(K)){let O=K.toConfig();return new i6({...O,values:aD(O.values,(F)=>F)})}if(J1(K)){let O=K.toConfig();return new w5({...O,fields:()=>z(O.fields)})}H4(!1,"Unexpected type: "+n(K))}}function aD($,J){let W=Object.create(null);for(let X of Object.keys($).sort(W9))W[X]=J($[X]);return W}function WB($){return If($,(J)=>J.name)}function If($,J){return $.slice().sort((W,X)=>{let Y=J(W),U=J(X);return W9(Y,U)})}class T8 extends m{constructor($,J){super($,J);this.name="PothosError"}}class v0 extends T8{constructor($,J){super($,J);this.name="PothosSchemaError"}}class V0 extends T8{constructor($,J){super($,J);this.name="PothosValidationError"}}var N6=Symbol.for("Pothos.outputShapeKey"),q8=Symbol.for("Pothos.parentShapeKey"),Lf=Symbol.for("Pothos.abstractReturnShapeKey"),w9=Symbol.for("Pothos.inputShapeKey"),sD=Symbol.for("Pothos.inputFieldShapeKey"),Pf=Symbol.for("Pothos.outputFieldShapeKey"),D5=Symbol.for("Pothos.typeBrandKey");function hY($,J,W){if(J in $)Object.defineProperty($,J,{value:W,enumerable:!0,configurable:!0,writable:!0});else $[J]=W;return $}class H1{toString(){return`${this.kind}Ref<${this.name}>`}associate($){if(this.association&&typeof this.associate!=="string")throw new v0(`${this} is already associated with ${this.association}`);this.association=$}onConfig($){if(this.configCallbacks.add($),this.currentConfig)$(this.currentConfig)}updateConfig($){if(typeof $==="function"){this.onceOnConfig((J)=>{this.updateConfig($(J))});return}this.currentConfig=$;for(let J of this.configCallbacks){if(this.currentConfig!==$)break;J($)}}prepareForBuild(){this.preparedForBuild=!0}onceOnConfig($){let J=(W)=>{this.configCallbacks.delete(J),$(W)};this.onConfig(J)}constructor($,J,W){hY(this,"kind",void 0),hY(this,"name",void 0),hY(this,"association",null),hY(this,"configCallbacks",new Set),hY(this,"preparedForBuild",!1),hY(this,"currentConfig",void 0),this.kind=$,this.name=J,this.currentConfig=W!==null&&W!==void 0?W:null}}function EH($,J,W){if(J in $)Object.defineProperty($,J,{value:W,enumerable:!0,configurable:!0,writable:!0});else $[J]=W;return $}var F80=w9;class YW extends H1{constructor($,J){super("InputList",`InputList<${String($)}>`),EH(this,"kind","InputList"),EH(this,F80,void 0),EH(this,"$inferInput",void 0),EH(this,"listType",void 0),EH(this,"required",void 0),this.listType=$,this.required=J}}function xY($,J,W){if(J in $)Object.defineProperty($,J,{value:W,enumerable:!0,configurable:!0,writable:!0});else $[J]=W;return $}var E80=N6,M80=q8;class UW extends H1{constructor($,J){super("List",`List<${String($)}>`),xY(this,"kind","List"),xY(this,"$inferType",void 0),xY(this,E80,void 0),xY(this,M80,void 0),xY(this,"listType",void 0),xY(this,"nullable",void 0),this.listType=$,this.nullable=J}}var _f=()=>{if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;return null};function MH($){let J=_f();if(typeof J.Buffer==="function")return J.Buffer.from($).toString("base64");if(typeof J.btoa==="function")return J.btoa($);throw Error("Unable to locate global `Buffer` or `btoa`")}var V80=/^(?:[\d+/A-Za-z]{4})*(?:[\d+/A-Za-z]{2}==|[\d+/A-Za-z]{3}=)?$/;function VH($){if(!V80.test($))throw new V0("Invalid base64 string");let J=_f();if(typeof J.Buffer==="function")return J.Buffer.from($,"base64").toString();if(typeof J.atob==="function")return J.atob($);throw Error("Unable to locate global `Buffer` or `atob`")}var Nf=Symbol.for("Pothos.contextCache");function S$($){let J=new WeakMap,W=(X,...Y)=>{let U=X[Nf]||X;if(J.has(U))return J.get(U);let Z=$(X,...Y);return J.set(U,Z),Z};return W.delete=(X)=>{let Y=X[Nf]||X;J.delete(Y)},W}function Bf($){let J={};if(Array.isArray($))for(let W of $)J[String(W)]={pothosOptions:{}};else for(let[W,X]of Object.entries($))if(X&&typeof X==="object")J[W]={...X,pothosOptions:X};else if(typeof X==="string")J[X]={pothosOptions:{}};return J}function Rf($,J){let W={};for(let X of Object.keys($).filter((Y)=>typeof $[$[Y]]!=="number"))W[X]={value:$[X],pothosOptions:{},...J===null||J===void 0?void 0:J[X]};return W}function eD($,J,W){let X=typeof W==="object"?W.items:!1,Y=typeof W==="object"?W.list:!!W;if(Array.isArray($))return{kind:"List",type:eD($[0],J,X),nullable:Y};if($ instanceof UW)return{kind:"List",type:eD($.listType,J,$.nullable),nullable:Y};let U=J.getOutputTypeRef($),Z=U instanceof H1?U.kind:J.getTypeConfig(U).graphqlKind,H=U instanceof H1?U.name:J.getTypeConfig(U).name;if(Z!=="InputObject"&&Z!=="List"&&Z!=="InputList")return{kind:Z,ref:U,nullable:Y};throw new v0(`Expected input param ${H} to be an output type but got ${Z}`)}function XB($){if($.kind==="List")return XB($.type);return $.ref}function QH($,J,W){let X=typeof W==="object"?W.items:!0,Y=typeof W==="object"?W.list:!!W;if(Array.isArray($))return{kind:"List",type:QH($[0],J,X),required:Y};if($ instanceof YW)return{kind:"List",type:QH($.listType,J,$.required),required:Y};let U=J.getInputTypeRef($),Z=U instanceof H1?U.kind:J.getTypeConfig(U).graphqlKind,H=U instanceof H1?U.name:J.getTypeConfig(U).name;if(Z==="InputObject"||Z==="Enum"||Z==="Scalar")return{kind:Z,ref:U,required:Y};throw new v0(`Expected input param ${H} to be an InputObject, Enum, or Scalar but got ${Z}`)}function jf($,J){if($.kind==="List")return jf($.type,J);let W=J.getTypeConfig($.ref);if(W.kind==="Enum"||W.kind==="Scalar"||W.kind==="InputObject")return W;throw new v0(`Unexpected config type ${W.kind} for input ref ${String($.ref)}`)}function kf($,J,W,X=new Map){let Y=new Map,U=new Map;return Z(vf($,J,W,X));function Z(G){if(Y.has(G))return Y.get(G);let z=new Map;return Y.set(G,z),G.forEach((w,D)=>{if(w.kind==="Enum"||w.kind==="Scalar"){z.set(D,w);return}let K=w.fields.map?H(w.fields.map,U):!1;if(w.value!==null||K){let O=w.fields.map?Z(w.fields.map):null,F={...w,fields:{configs:w.fields.configs,map:O}};z.set(D,F)}}),z.size>0?z:null}function H(G,z){if(z.has(G))return z.get(G);z.set(G,!1);let w=!1;for(let D of G.values())if(D.value!==null)w=!0;else if(D.kind==="InputObject"&&D.fields.map&&H(D.fields.map,z))w=!0;return z.set(G,w),w}}function vf($,J,W,X){let Y=new Map;for(let[U,Z]of Object.entries($)){let H=jf(Z.type,J),G=W(Z);if(H.kind==="Enum"||H.kind==="Scalar"){if(G!==null)Y.set(U,{kind:H.kind,isList:Z.type.kind==="List",listDepth:Sf(Z.type),config:Z,value:G});continue}let z=J.getInputTypeFieldConfigs(XB(Z.type));if(!X.has(H.name)){let D={configs:z,map:new Map};X.set(H.name,D),D.map=vf(z,J,W,X)}let w=X.get(H.name);Y.set(U,{kind:H.kind,isList:Z.type.kind==="List",listDepth:Sf(Z.type),config:Z,value:G,fields:w})}return Y}function Cf($,J){return function W(X,Y=$,...U){let Z={...X};return Y.forEach((H,G)=>{let z=X[G];if(z===null||z===void 0)return;if(H.kind==="InputObject"&&H.fields.map)z=YB(z,H.listDepth,(w)=>w&&W(w,H.fields.map,...U)),Z[G]=z;if(H.kind!=="InputObject"||H.value!==null)Z[G]=YB(z,H.listDepth,(w)=>w==null?w:J(w,H,...U))}),Z}}function Sf($){let J=0,W=$;while(W.kind==="List")J++,W=W.type;return J}function YB($,J,W){if(J===0)return W($);if(!Array.isArray($))return $;return $.map((X)=>J>1?YB(X,J-1,W):W(X))}function Tf($){throw TypeError(`Unexpected value: ${$}`)}function UB($){if(!Array.isArray($))throw new V0("List resolvers must return arrays");return!0}function vJ($){return!!($&&(typeof $==="object"||typeof $==="function")&&typeof $.then==="function")}function s$($){if($===void 0)throw new v0(`Received undefined as a type ref.

This is often caused by a circular import
If this ref is imported from a file that re-exports it (like index.ts)
you may be able to resolve this by importing it directly from the file that defines it.
`)}function ZB($){if(!$||typeof $==="function")return;if(!Array.isArray($))throw new v0("interfaces must be an array or function");for(let J of $)if(J===void 0)throw new v0(`Received undefined in list of interfaces.

This is often caused by a circular import
If this ref is imported from a file that re-exports it (like index.ts)
you may be able to resolve this by importing it directly from the file that defines it.

Alternatively you can define interfaces with a function that will be lazily evaluated,
which may resolver issues with circular dependencies:

Example:
builder.objectType('MyObject', {
  interface: () => [Interface1, Interface2],
  ...
});
`)}function ZW($,J){if(typeof $!=="object"||$===null)return;Object.defineProperty($,D5,{enumerable:!1,value:J})}function $K($){if(typeof $==="object"&&$!==null&&D5 in $)return $[D5];return null}function o6($,J,W){if(vJ($))return Promise.resolve($).then(J,W);let X=J($);if(vJ(X))return Promise.resolve(X);return X}function qf($,J,W,X){var Y;let U=FH($,J,X.variableValues),Z=(Y=$.extensions)===null||Y===void 0?void 0:Y.pothosArgMappers;if(Z&&Z.length>0)return JK(Z,U,(H,G)=>G(H,W,X));return U}function JK($,J,W){function X(Y,U){if(U===$.length)return Y;return o6(W(Y,$[U],U),(Z)=>{return Z===null?null:X(Z,U+1)})}return X(J,0)}function AH($,J,W){if(J in $)Object.defineProperty($,J,{value:W,enumerable:!0,configurable:!0,writable:!0});else $[J]=W;return $}var IH=new WeakMap;class D9{onTypeConfig($){return $}onOutputFieldConfig($){return $}onInputFieldConfig($){return $}onEnumValueConfig($){return $}beforeBuild(){}afterBuild($){return $}wrapResolve($,J){return $}wrapSubscribe($,J){return $}wrapArgMappers($,J){return $}wrapResolveType($,J){return $}wrapIsTypeOf($,J){return $}runUnique($,J){if(!IH.has(this.builder))IH.set(this.builder,new Map);if(!IH.get(this.builder).has($)){let W=J();return IH.get(this.builder).set($,W),W}return IH.get(this.builder).get($)}createRequestData($){throw new T8("createRequestData not implemented")}requestData($){return this.requestDataMap($)}constructor($,J){AH(this,"name",void 0),AH(this,"builder",void 0),AH(this,"buildCache",void 0),AH(this,"options",void 0),AH(this,"requestDataMap",S$((W)=>this.createRequestData(W))),this.name=J,this.builder=$.builder,this.buildCache=$,this.options=$.options}}function Q80($,J,W){if(J in $)Object.defineProperty($,J,{value:W,enumerable:!0,configurable:!0,writable:!0});else $[J]=W;return $}class HB extends D9{onTypeConfig($){return this.plugins.reduceRight((J,W)=>J===null?J:W.onTypeConfig(J),$)}onInputFieldConfig($){return this.plugins.reduceRight((J,W)=>J===null?J:W.onInputFieldConfig(J),$)}onOutputFieldConfig($){return this.plugins.reduceRight((J,W)=>J===null?J:W.onOutputFieldConfig(J),$)}onEnumValueConfig($){return this.plugins.reduceRight((J,W)=>J===null?J:W.onEnumValueConfig(J),$)}beforeBuild(){for(let $ of this.plugins)$.beforeBuild()}afterBuild($){return this.plugins.reduceRight((J,W)=>W.afterBuild(J),$)}wrapResolve($,J){let W=this.plugins.reduceRight((Y,U)=>U.wrapResolve(Y,J),$);if(!J.argMappers.length)return this.wrapArgMappers(W,J);let X=J.argMappers;return this.wrapArgMappers((Y,U,Z,H)=>{let G=JK(X,U,(z,w)=>{return w(z,Z,H)});return o6(G,(z)=>W(Y,z,Z,H))},J)}wrapSubscribe($,J){let W=this.plugins.reduceRight((Y,U)=>U.wrapSubscribe(Y,J),$);if(!W||!J.argMappers.length)return this.wrapArgMappers(W,J);let X=J.argMappers;return this.wrapArgMappers((Y,U,Z,H)=>{let G=JK(X,U,(z,w)=>{return w(z,Z,H)});return o6(G,(z)=>W(Y,z,Z,H))},J)}wrapArgMappers($,J){return this.plugins.reduceRight((W,X)=>X.wrapArgMappers(W,J),$)}wrapResolveType($,J){return this.plugins.reduceRight((W,X)=>X.wrapResolveType(W,J),$)}wrapIsTypeOf($,J){return this.plugins.reduceRight((W,X)=>X.wrapIsTypeOf(W,J),$)}constructor($,J){super($,"PothosMergedPlugin"),Q80(this,"plugins",void 0),this.plugins=J}}function bY($,J,W){if(J in $)Object.defineProperty($,J,{value:W,enumerable:!0,configurable:!0,writable:!0});else $[J]=W;return $}var A80=N6,I80=q8,L80=w9;class gY extends H1{constructor($,J){super("Scalar",$,J),bY(this,"kind","Scalar"),bY(this,"$inferType",void 0),bY(this,"$inferInput",void 0),bY(this,A80,void 0),bY(this,I80,void 0),bY(this,L80,void 0)}}function P80($,J,W){if(J in $)Object.defineProperty($,J,{value:W,enumerable:!0,configurable:!0,writable:!0});else $[J]=W;return $}class WK extends gY{constructor($){super($.name),P80(this,"type",void 0),this.type=$}}function h8($,J,W){if(J in $)Object.defineProperty($,J,{value:W,enumerable:!0,configurable:!0,writable:!0});else $[J]=W;return $}class XK{getTypeConfig($,J){let W=this.configStore.getTypeConfig($,J);if(!this.typeConfigs.has(W.name))this.typeConfigs.set(W.name,this.plugin.onTypeConfig(W));return this.typeConfigs.get(W.name)}getInputTypeFieldConfigs($){let J=this.getTypeConfig($,"InputObject"),W=this.types.get(J.name);if(!W)throw new v0(`Input type ${J.name} has not been built yet`);let X=W.getFields(),Y={};for(let Z of Object.keys(X)){var U;Y[Z]=(U=X[Z].extensions)===null||U===void 0?void 0:U.pothosConfig}return Y}getImplementers($){if(this.implementers.has($.name))return this.implementers.get($.name);let J=[...this.configStore.typeConfigs.values()].filter((W)=>W.kind==="Object"&&W.interfaces.find((X)=>this.configStore.getTypeConfig(X).name===$.name));return this.implementers.set($.name,J),J}buildAll(){this.configStore.prepareForBuild();for(let $ of this.configStore.typeConfigs.values())if($.kind==="Enum"||$.kind==="Scalar")this.buildTypeFromConfig($);for(let $ of this.configStore.typeConfigs.values())if($.kind==="InputObject")this.buildTypeFromConfig($);for(let $ of this.types.values())if($ instanceof w5)$.getFields();for(let $ of this.configStore.typeConfigs.values())if($.kind==="Interface")this.buildTypeFromConfig($);for(let $ of this.configStore.typeConfigs.values())if($.kind==="Object")this.buildTypeFromConfig($);for(let $ of this.configStore.typeConfigs.values())if($.kind==="Union")this.buildTypeFromConfig($);for(let $ of this.configStore.typeConfigs.values())if($.kind==="Query"||$.kind==="Mutation"||$.kind==="Subscription")this.buildTypeFromConfig($);for(let $ of this.types.values())if($ instanceof V4||$ instanceof n6)$.getFields();else if($ instanceof k8)$.getTypes()}buildTypeFromConfig($){let J=this.getTypeConfig($.name),{name:W}=J;switch(this.typeConfigs.set(W,J),J.kind){case"Enum":this.addType(W,this.buildEnum(J));break;case"InputObject":this.addType(W,this.buildInputObject(J));break;case"Interface":this.addType(W,this.buildInterface(J));break;case"Scalar":this.addType(W,this.buildScalar(J));break;case"Union":this.addType(W,this.buildUnion(J));break;case"Object":case"Query":case"Mutation":case"Subscription":this.addType(W,this.buildObject(J));break;default:Tf(J)}}addType($,J){if(this.types.has($))throw new v0(`reference or name has already been used to create another type (${J.name})`);this.types.set($,J)}buildOutputTypeParam($){if($.kind==="List"){if($.nullable)return new r1(this.buildOutputTypeParam($.type));return new L0(new r1(this.buildOutputTypeParam($.type)))}if($.nullable)return this.getOutputType($.ref);return new L0(this.getOutputType($.ref))}buildInputTypeParam($){if($.kind==="List"){if($.required)return new L0(new r1(this.buildInputTypeParam($.type)));return new r1(this.buildInputTypeParam($.type))}if($.required)return new L0(this.getInputType($.ref));return this.getInputType($.ref)}buildFields($){let J={};for(let[Y,U]of $){if(!this.outputFieldConfigs.has(U))this.outputFieldConfigs.set(U,this.plugin.onOutputFieldConfig(U));let Z=this.outputFieldConfigs.get(U);if(!Z)continue;let H={...Z},G=new Map;for(let O of Object.keys(H.args))G.set(O,H.args[O]);let z=this.buildInputFields(G),w={};for(let O of Object.keys(H.args))w[O]=this.inputFieldConfigs.get(H.args[O]);H.args=w;var W;let D=this.plugin.wrapResolve((W=H.resolve)!==null&&W!==void 0?W:jJ,H),K=this.plugin.wrapSubscribe(H.subscribe,H);var X;J[Y]={...H,type:this.buildOutputTypeParam(H.type),args:z,extensions:{...H.extensions,pothosResolveWrapped:D!==((X=H.resolve)!==null&&X!==void 0?X:jJ),pothosSubscribeWrapped:K!==H.subscribe,pothosOptions:H.pothosOptions,pothosConfig:H,pothosArgMappers:H.argMappers},resolve:D===jJ?void 0:D,subscribe:K}}return J}buildInputFields($){let J={};for(let[W,X]of $){if(!this.inputFieldConfigs.has(X))this.inputFieldConfigs.set(X,this.plugin.onInputFieldConfig(X));let Y=this.inputFieldConfigs.get(X);if(Y)J[W]={...Y,type:this.buildInputTypeParam(Y.type),extensions:{...Y.extensions,pothosOptions:Y.pothosOptions,pothosConfig:Y}}}return J}getInterfaceFields($){let J=$.getInterfaces().reduce((Y,U)=>Object.assign(Y,this.getFields(U)),{}),W=this.configStore.getFields($.name,"Interface"),X=this.buildFields(W);return{...J,...X}}getObjectFields($){let J=$.getInterfaces().reduce((X,Y)=>Object.assign(X,this.getFields(Y)),{}),W=this.buildFields(this.configStore.getFields($.name,"Object"));return{...J,...W}}getRootFields($){return this.buildFields(this.configStore.getFields($.name,"Object"))}getFields($){if($ instanceof V4){let J=this.configStore.getTypeConfig($.name);if(J.kind==="Query"||J.kind==="Mutation"||J.kind==="Subscription")return this.getRootFields($);return this.getObjectFields($)}if($ instanceof n6)return this.getInterfaceFields($);throw new v0(`Type ${$.name} does not have fields to resolve`)}getInputFields($){return this.buildInputFields(this.configStore.getFields($.name,"InputObject"))}getType($){if($ instanceof WK)return $.type;let J=this.configStore.getTypeConfig($),W=this.types.get(J.name);if(!W)return this.buildTypeFromConfig(J),this.types.get(J.name);return W}getOutputType($){let J=this.getType($);if(J instanceof w5)throw new v0(`Expected ${String($)} to be an output type but it was defined as an InputObject`);return J}getInputType($){let J=this.getType($);if(!J)throw new v0(`Missing implementation of for type ${String($)}`);if(J instanceof V4)throw new v0(`Expected ${J.name} to be an input type but it was defined as a GraphQLObjectType`);if(J instanceof n6)throw new v0(`Expected ${J.name} to be an input type but it was defined as a GraphQLInterfaceType`);if(J instanceof k8)throw new v0(`Expected ${String($)} to be an input type but it was defined as an GraphQLUnionType`);return J}getTypeOfKind($,J){let W=this.getType($);switch(J){case"Object":case"Query":case"Mutation":case"Subscription":if(W instanceof V4)return W;break;case"Interface":if(W instanceof n6)return W;break;case"Union":if(W instanceof k8)return W;break;case"Enum":if(W instanceof i6)return W;break;case"Scalar":if(W instanceof a$)return W;break;case"InputObject":if(W instanceof a$)return W;break;default:break}throw new v0(`Expected ${String($)} to be of type ${J}`)}buildObject($){var J;let W=new V4({...$,extensions:{...$.extensions,pothosOptions:$.pothosOptions,pothosConfig:$},fields:()=>this.getFields(W),isTypeOf:$.kind==="Object"?this.plugin.wrapIsTypeOf((J=$.isTypeOf)!==null&&J!==void 0?J:void 0,$):void 0,interfaces:$.kind==="Object"?()=>$.interfaces.map((X)=>this.getTypeOfKind(X,"Interface")):void 0});return W}buildInterface($){let J=(X,Y,U)=>{let Z=$K(X);if(Z){if(typeof Z==="string")return Z;return this.getTypeConfig(Z).name}var H;return((H=$.resolveType)!==null&&H!==void 0?H:SJ)(X,Y,U,W)},W=new n6({...$,extensions:{...$.extensions,pothosOptions:$.pothosOptions,pothosConfig:$},interfaces:()=>$.interfaces.map((X)=>this.getTypeOfKind(X,"Interface")),fields:()=>this.getFields(W),resolveType:this.plugin.wrapResolveType(J,$)});return W}buildUnion($){let J=(W,X,Y,U)=>{if(typeof W==="object"&&W!==null&&D5 in W){let G=W[D5];if(typeof G==="string")return G;return this.getTypeConfig(G).name}if(!$.resolveType)return SJ(W,X,Y,U);let Z=$.resolveType(W,X,Y,U),H=(G)=>{if(typeof G==="string"||!G)return G;if(G instanceof V4)return G.name;try{return this.configStore.getTypeConfig(G).name}catch{}return G};return vJ(Z)?Z.then(H):H(Z)};return new k8({...$,extensions:{...$.extensions,pothosOptions:$.pothosOptions,pothosConfig:$},types:()=>$.types.map((W)=>this.getTypeOfKind(W,"Object")),resolveType:this.plugin.wrapResolveType(J,$)})}buildInputObject($){let J=new w5({...$,extensions:{...$.extensions,pothosOptions:$.pothosOptions,pothosConfig:$},fields:()=>this.getInputFields(J)});return J}buildScalar($){if($.name==="ID")return H9;if($.name==="Int")return Z9;if($.name==="Float")return $W;if($.name==="Boolean")return n1;if($.name==="String")return Z1;return new a$({...$,extensions:{...$.extensions,pothosOptions:$.pothosOptions,pothosConfig:$}})}buildEnum($){let J={},W=typeof $.values==="function"?$.values():$.values;for(let X of Object.keys($.values)){let Y=W[X];if(!this.enumValueConfigs.has(Y))this.enumValueConfigs.set(Y,this.plugin.onEnumValueConfig(Y));if(this.enumValueConfigs.get(Y))J[X]=this.enumValueConfigs.get(Y)}return new i6({...$,values:J,extensions:{...$.extensions,pothosOptions:$.pothosOptions,pothosConfig:$}})}constructor($,J){h8(this,"types",new Map),h8(this,"builder",void 0),h8(this,"plugin",void 0),h8(this,"options",void 0),h8(this,"configStore",void 0),h8(this,"pluginList",void 0),h8(this,"implementers",new Map),h8(this,"typeConfigs",new Map),h8(this,"enumValueConfigs",new Map),h8(this,"outputFieldConfigs",new Map),h8(this,"inputFieldConfigs",new Map),this.builder=$,this.configStore=$.configStore,this.options=J;let W={};var X;this.pluginList=((X=$.options.plugins)!==null&&X!==void 0?X:[]).map((Y)=>{let U=this.builder.constructor.plugins[Y];if(!U)throw new T8(`No plugin named ${Y} was registered`);return W[Y]=new U(this,Y),W[Y]}),this.plugin=new HB(this,this.pluginList)}}function fY($,J,W){if(J in $)Object.defineProperty($,J,{value:W,enumerable:!0,configurable:!0,writable:!0});else $[J]=W;return $}var _80=w9;class K9 extends H1{addFields($){this.fields.add($);for(let J of this.fieldCbs)for(let[W,X]of Object.entries($()))if(X)J(W,X)}onField($){this.fieldCbs.add($);for(let J of this.fields)for(let[W,X]of Object.entries(J()))if(X)$(W,X)}constructor($){super("InputObject",$),fY(this,"kind","InputObject"),fY(this,"$inferInput",void 0),fY(this,_80,void 0),fY(this,"fields",new Set),fY(this,"fieldCbs",new Set)}}class YK extends K9{implement($){return this.builder.inputType(this,$),this}constructor($,J){super(J),fY(this,"builder",void 0),this.builder=$}}function GB($,J,W){if(J in $)Object.defineProperty($,J,{value:W,enumerable:!0,configurable:!0,writable:!0});else $[J]=W;return $}class LH extends H1{addFields($){for(let J of this.fieldCbs)for(let[W,X]of Object.entries($()))if(X)J(W,X);this.fields.add($)}addInterfaces($){if(Array.isArray($)&&$.length===0)return;if(this.preparedForBuild)this.updateConfig((J)=>({...J,interfaces:[...J.interfaces,...typeof $==="function"?$():$]}));else this.interfaces.push(()=>Array.isArray($)?$:$())}onField($){this.fieldCbs.add($);for(let J of this.fields)for(let[W,X]of Object.entries(J()))if(X)$(W,X)}prepareForBuild(){if(this.preparedForBuild)return;if(super.prepareForBuild(),this.interfaces.length>0)this.updateConfig(($)=>{var J;return{...$,interfaces:[...(J=$.interfaces)!==null&&J!==void 0?J:[],...this.interfaces.flatMap((W)=>W())]}})}constructor(...$){super(...$),GB(this,"fields",new Set),GB(this,"fieldCbs",new Set),GB(this,"interfaces",[])}}function PH($,J,W){if(J in $)Object.defineProperty($,J,{value:W,enumerable:!0,configurable:!0,writable:!0});else $[J]=W;return $}var N80=N6,B80=q8;class O9 extends LH{constructor($,J){super("Interface",$,J),PH(this,"kind","Interface"),PH(this,"$inferType",void 0),PH(this,N80,void 0),PH(this,B80,void 0)}}class UK extends O9{implement($){return this.builder.interfaceType(this,$)}constructor($,J){super(J),PH(this,"builder",void 0),this.builder=$}}function _H($,J,W){if(J in $)Object.defineProperty($,J,{value:W,enumerable:!0,configurable:!0,writable:!0});else $[J]=W;return $}var R80=N6,S80=q8;class j$ extends LH{constructor($,J){super("Object",$,J),_H(this,"kind","Object"),_H(this,"$inferType",void 0),_H(this,R80,void 0),_H(this,S80,void 0)}}class NH extends j${implement($){return this.builder.objectType(this,$)}constructor($,J){super(J),_H(this,"builder",void 0),this.builder=$}}function j80($,J,W){if(J in $)Object.defineProperty($,J,{value:W,enumerable:!0,configurable:!0,writable:!0});else $[J]=W;return $}class mY extends j${constructor(...$){super(...$),j80(this,"kind","Object")}}class yY extends j${}class cY extends j${}function F9($,J,W){if(J in $)Object.defineProperty($,J,{value:W,enumerable:!0,configurable:!0,writable:!0});else $[J]=W;return $}class zB{addFields($,J){this.onTypeConfig($,(W,X)=>{if(!(X instanceof O9||X instanceof j$||X instanceof yY||X instanceof mY||X instanceof cY))throw new v0(`Can not add fields to ${X} because it is not an object`);X.addFields(J)})}addInputFields($,J){this.onTypeConfig($,(W,X)=>{if(!(X instanceof K9))throw new v0(`Can not add fields to ${X} because it is not an input object`);X.addFields(J)})}associateParamWithRef($,J){let W=this.resolveParamAssociations(J);this.paramAssociations.set($,W);var X;let Y=(X=this.pendingTypeConfigResolutions.get($))!==null&&X!==void 0?X:[];if(Y.length>0)if(typeof W==="string"&&this.typeConfigs.has(W))for(let U of Y){let Z=this.typeConfigs.get(W);U(Z,this.implementors.get(Z.name))}else for(let U of Y)this.onTypeConfig(W,U);this.pendingTypeConfigResolutions.delete($)}onTypeConfig($,J){let W=this.resolveParamAssociations($);if(typeof W==="string"&&this.typeConfigs.has(W)){let X=this.typeConfigs.get(W);J(X,this.implementors.get(X.name))}else{if(!this.pendingTypeConfigResolutions.has(W))this.pendingTypeConfigResolutions.set(W,[]);this.pendingTypeConfigResolutions.get(W).push(J)}}onTypeConfigOfKind($,J,W){this.onTypeConfig($,(X)=>{if(X.kind!==J)throw new v0(`Expected ${this.describeRef($)} to be of kind ${J} but it is of kind ${X.kind}`);W(X)})}addTypeRef($){if(this.refs.has($))return;if(!this.pending)$.prepareForBuild();this.refs.add($),$.onConfig((J)=>{let W=this.implementors.get(J.name);if(W&&W!==$)throw new v0(`Duplicate typename: Another type with name ${J.name} already exists.`);if(!W){if(this.implementors.set(J.name,$),this.associateParamWithRef($,J.name),$ instanceof j$||$ instanceof O9||$ instanceof K9){if(!this.fields.has(J.name))this.fields.set(J.name,new Map);this.onPrepare(()=>{$.onField((X,Y)=>{let U=this.fields.get(J.name);if(U.has(X))throw new v0(`Duplicate field ${X} on ${J.name}`);var Z;U.set(X,Y.getConfig(X,(Z=this.typeConfigs.get(J.name))!==null&&Z!==void 0?Z:J))})})}}if(this.typeConfigs.set(J.name,J),this.pendingTypeConfigResolutions.has(J.name)){let X=this.pendingTypeConfigResolutions.get(J.name);for(let Y of X)Y(J,$)}this.pendingTypeConfigResolutions.delete(J.name)})}subscribeToFields($){}hasImplementation($){return this.typeConfigs.has($)}hasConfig($){let J=this.resolveParamAssociations($);if(typeof J!=="string"||!this.typeConfigs.has(J))return!1;return!0}getTypeConfig($,J){let W=this.resolveParamAssociations($);if(typeof W!=="string"||!this.typeConfigs.has(W))throw new v0(`${this.describeRef($)} has not been implemented`);let X=this.typeConfigs.get(W);if(J&&X.graphqlKind!==J)throw new v0(`Expected ref to resolve to a ${J} type, but got ${X.kind}`);return X}getInputTypeRef($){let J=this.resolveParamAssociations($);if($ instanceof H1){if($.kind!=="InputObject"&&$.kind!=="Enum"&&$.kind!=="Scalar")throw new v0(`Expected ${this.describeRef($)} to be an input type but got ${$.kind}`);return $}if(typeof J==="string"&&this.typeConfigs.has(J)){let W=this.implementors.get(J);if(W instanceof H1){if(W.kind!=="InputObject"&&W.kind!=="Enum"&&W.kind!=="Scalar")throw new v0(`Expected ${this.describeRef(W)} to be an input type but got ${W.kind}`);return W}}throw new v0(`${this.describeRef($)} has not been implemented`)}getOutputTypeRef($){let J=this.resolveParamAssociations($);if($ instanceof H1){if($.kind==="InputObject"||$.kind==="InputList")throw new v0(`Expected ${$.name} to be an output type but got ${$.kind}`);return $}if(typeof J==="string"&&this.typeConfigs.has(J)){let W=this.implementors.get(J);if(W instanceof H1){if(W.kind==="InputObject"||W.kind==="InputList")throw new v0(`Expected ${W.name} to be an output type but got ${W.kind}`);return W}}throw new v0(`${this.describeRef($)} has not been implemented`)}getFields($,J){let W=this.getTypeConfig($);if(!this.fields.has($))this.fields.set($,new Map);let X=this.fields.get($);if(J&&W.graphqlKind!==J)throw new v0(`Expected ${$} to be a ${J} type, but found ${W.graphqlKind}`);return X}prepareForBuild(){this.pending=!1;for(let J of this.refs)J.prepareForBuild();let{pendingActions:$}=this;this.pendingActions=[];for(let J of $)J();if(this.pendingTypeConfigResolutions.size>0)throw new v0(`Missing implementations for some references (${[...this.pendingTypeConfigResolutions.keys()].map((J)=>this.describeRef(J)).join(", ")}).`)}onPrepare($){if(this.pending)this.pendingActions.push($);else $()}resolveParamAssociations($){let J=this.paramAssociations.get($);while(J&&this.paramAssociations.has(J))J=this.paramAssociations.get(J);return J!==null&&J!==void 0?J:$}describeRef($){if(typeof $==="string")return $;if($&&$.toString!=={}.toString)return String($);if(typeof $==="function"&&$.name!==(()=>{}).name)return`function ${$.name}`;return"<unnamed ref or enum>"}constructor($){F9(this,"typeConfigs",new Map),F9(this,"fields",new Map),F9(this,"refs",new Set),F9(this,"implementors",new Map),F9(this,"pendingActions",[]),F9(this,"paramAssociations",new Map),F9(this,"pendingTypeConfigResolutions",new Map),F9(this,"pending",!0),F9(this,"builder",void 0),this.builder=$}}function HW($,J,W){if(J in $)Object.defineProperty($,J,{value:W,enumerable:!0,configurable:!0,writable:!0});else $[J]=W;return $}var k80=sD;class ZK{onConfig($){this.pendingActions.push($)}updateConfig($){this.pendingActions.push($)}getConfig($,J,W){let X=this.pendingActions.reduce((Y,U)=>{var Z;return(Z=U(Y))!==null&&Z!==void 0?Z:Y},this.initConfig($,J,W));for(let Y of this.onUseCallbacks)this.onUseCallbacks.delete(Y),Y(X);return X}onFirstUse($){this.onUseCallbacks.add($)}constructor($){HW(this,"kind","Arg"),HW(this,"fieldName",void 0),HW(this,"$inferInput",void 0),HW(this,k80,void 0),HW(this,"pendingActions",[]),HW(this,"initConfig",void 0),HW(this,"onUseCallbacks",new Set),this.initConfig=$}}function GW($,J,W){if(J in $)Object.defineProperty($,J,{value:W,enumerable:!0,configurable:!0,writable:!0});else $[J]=W;return $}var v80=sD;class HK{updateConfig($){this.pendingActions.push($)}getConfig($,J){let W=this.pendingActions.reduce((X,Y)=>{var U;return(U=Y(X))!==null&&U!==void 0?U:X},this.initConfig($,J));for(let X of this.onUseCallbacks)this.onUseCallbacks.delete(X),X(W);return W}onFirstUse($){this.onUseCallbacks.add($)}constructor($){GW(this,"kind","InputObject"),GW(this,"fieldName",void 0),GW(this,"$inferInput",void 0),GW(this,v80,void 0),GW(this,"pendingActions",[]),GW(this,"initConfig",void 0),GW(this,"onUseCallbacks",new Set),this.initConfig=$}}function B6($,J,W){if(J in $)Object.defineProperty($,J,{value:W,enumerable:!0,configurable:!0,writable:!0});else $[J]=W;return $}class CJ{argBuilder(){let $=this.field.bind(this),J=Object.keys(Object.getPrototypeOf(this)).filter((W)=>typeof this[W]==="function"&&Function.prototype[W]===void 0);for(let W of[...Object.keys(this),...J])$[W]=typeof this[W]==="function"?this[W].bind(this):this[W];return $}field($){return this.kind==="Arg"?new ZK((W,X,Y)=>{let U=$;var Z,H;return{name:W,parentField:X,kind:this.kind,graphqlKind:this.kind,parentType:Y.name,type:QH(U.type,this.builder.configStore,(Z=U.required)!==null&&Z!==void 0?Z:this.builder.defaultInputFieldRequiredness),pothosOptions:U,description:U.description,deprecationReason:U.deprecationReason,defaultValue:U.defaultValue,extensions:(H=U.extensions)!==null&&H!==void 0?H:{}}}):new HK((W,X)=>{let Y=$;var U,Z;return{name:W,parentField:void 0,kind:this.kind,graphqlKind:this.kind,parentType:X.name,type:QH(Y.type,this.builder.configStore,(U=Y.required)!==null&&U!==void 0?U:this.builder.defaultInputFieldRequiredness),pothosOptions:Y,description:Y.description,deprecationReason:Y.deprecationReason,defaultValue:Y.defaultValue,extensions:(Z=Y.extensions)!==null&&Z!==void 0?Z:{}}})}helper($){return(...J)=>{let[W={}]=J;return this.field({...W,type:$})}}constructor($,J){B6(this,"kind",void 0),B6(this,"builder",void 0),B6(this,"boolean",this.helper("Boolean")),B6(this,"float",this.helper("Float")),B6(this,"id",this.helper("ID")),B6(this,"int",this.helper("Int")),B6(this,"string",this.helper("String")),B6(this,"booleanList",this.helper(["Boolean"])),B6(this,"floatList",this.helper(["Float"])),B6(this,"idList",this.helper(["ID"])),B6(this,"intList",this.helper(["Int"])),B6(this,"stringList",this.helper(["String"])),B6(this,"listRef",(W,X)=>{var Y;return new YW(W,(Y=X===null||X===void 0?void 0:X.required)!==null&&Y!==void 0?Y:!0)}),this.builder=$,this.kind=J}}function zW($,J,W){if(J in $)Object.defineProperty($,J,{value:W,enumerable:!0,configurable:!0,writable:!0});else $[J]=W;return $}var C80=Pf;class GK{updateConfig($){this.pendingActions.push($)}getConfig($,J){let W=this.pendingActions.reduce((X,Y)=>{var U;return(U=Y(X))!==null&&U!==void 0?U:X},this.initConfig($,J));for(let X of this.onUseCallbacks)this.onUseCallbacks.delete(X),X(W);return W}onFirstUse($){this.onUseCallbacks.add($)}constructor($,J){zW(this,"kind",void 0),zW(this,"fieldName",void 0),zW(this,"$inferType",void 0),zW(this,C80,void 0),zW(this,"pendingActions",[]),zW(this,"initConfig",void 0),zW(this,"onUseCallbacks",new Set),this.kind=$,this.initConfig=J}}function wB($,J,W){if(J in $)Object.defineProperty($,J,{value:W,enumerable:!0,configurable:!0,writable:!0});else $[J]=W;return $}class DB{createField($){return new GK(this.kind,(W,X)=>{var Y;let U={};if($.args)for(let[z,w]of Object.entries($.args))U[z]=w.getConfig(z,W,X);let{resolve:Z}=$;if(((Y=$.extensions)===null||Y===void 0?void 0:Y.pothosExposedField)===W)Z=jJ;let{subscribe:H}=$;var G;return{kind:this.kind,graphqlKind:X.graphqlKind,parentType:X.name,name:W,args:U,argMappers:[],type:eD($.type,this.builder.configStore,(G=$.nullable)!==null&&G!==void 0?G:this.builder.defaultFieldNullability),pothosOptions:$,extensions:{pothosOriginalResolve:Z,pothosOriginalSubscribe:H,...$.extensions},description:$.description,deprecationReason:$.deprecationReason,resolve:Z,subscribe:H}})}exposeField($,{extensions:J,...W}){return this.createField({...W,extensions:{pothosExposedField:$,...J},resolve:(X)=>X[$]})}constructor($,J,W){wB(this,"kind",void 0),wB(this,"graphqlKind",void 0),wB(this,"builder",void 0),this.builder=$,this.kind=J,this.graphqlKind=W}}function T80($,J,W){if(J in $)Object.defineProperty($,J,{value:W,enumerable:!0,configurable:!0,writable:!0});else $[J]=W;return $}class x8 extends DB{boolean(...$){let[J={}]=$;return this.createField({...J,type:"Boolean"})}float(...$){let[J={}]=$;return this.createField({...J,type:"Float"})}id(...$){let[J={}]=$;return this.createField({...J,type:"ID"})}int(...$){let[J={}]=$;return this.createField({...J,type:"Int"})}string(...$){let[J={}]=$;return this.createField({...J,type:"String"})}booleanList(...$){let[J={}]=$;return this.createField({...J,type:["Boolean"]})}floatList(...$){let[J={}]=$;return this.createField({...J,type:["Float"]})}idList(...$){let[J={}]=$;return this.createField({...J,type:["ID"]})}intList(...$){let[J={}]=$;return this.createField({...J,type:["Int"]})}stringList(...$){let[J={}]=$;return this.createField({...J,type:["String"]})}field($){return this.createField($)}listRef($,J){var W;return new UW($,(W=J===null||J===void 0?void 0:J.nullable)!==null&&W!==void 0?W:!1)}constructor(...$){super(...$),T80(this,"arg",new CJ(this.builder,"Arg").argBuilder())}}class uY extends x8{exposeBoolean($,...J){let[W={}]=J;return this.exposeField($,{...W,type:"Boolean"})}exposeFloat($,...J){let[W={}]=J;return this.exposeField($,{...W,type:"Float"})}exposeID($,...J){let[W={}]=J;return this.exposeField($,{...W,type:"ID"})}exposeInt($,...J){let[W={}]=J;return this.exposeField($,{...W,type:"Int"})}exposeString($,...J){let[W={}]=J;return this.exposeField($,{...W,type:"String"})}exposeBooleanList($,...J){let[W={}]=J;return this.exposeField($,{...W,type:["Boolean"]})}exposeFloatList($,...J){let[W={}]=J;return this.exposeField($,{...W,type:["Float"]})}exposeIDList($,...J){let[W={}]=J;return this.exposeField($,{...W,type:["ID"]})}exposeIntList($,...J){let[W={}]=J;return this.exposeField($,{...W,type:["Int"]})}exposeStringList($,...J){let[W={}]=J;return this.exposeField($,{...W,type:["String"]})}expose($,...J){let[W={}]=J;return this.exposeField($,W)}}class wW extends uY{constructor($){super($,"Interface","Interface")}}class DW extends x8{constructor($){super($,"Mutation","Object")}}class TJ extends uY{constructor($){super($,"Object","Object")}}class KW extends x8{constructor($){super($,"Query","Object")}}class OW extends x8{constructor($){super($,"Subscription","Object")}}function BH($,J,W){if(J in $)Object.defineProperty($,J,{value:W,enumerable:!0,configurable:!0,writable:!0});else $[J]=W;return $}var q80=N6,h80=w9;class zK extends H1{constructor($,J){super("Enum",$,J),BH(this,"kind","Enum"),BH(this,"$inferType",void 0),BH(this,"$inferInput",void 0),BH(this,q80,void 0),BH(this,h80,void 0)}}function RH($,J,W){if(J in $)Object.defineProperty($,J,{value:W,enumerable:!0,configurable:!0,writable:!0});else $[J]=W;return $}var x80=N6,b80=q8;class wK extends H1{addTypes($){if(Array.isArray($)&&$.length===0)return;if(this.preparedForBuild)this.updateConfig((J)=>({...J,types:[...J.types,...typeof $==="function"?$():$]}));else this.types.push(()=>Array.isArray($)?$:$())}prepareForBuild(){if(this.preparedForBuild)return;if(super.prepareForBuild(),this.types.length>0)this.updateConfig(($)=>({...$,types:[...$.types,...this.types.flatMap((J)=>J())]}))}constructor($,J){super("Union",$,J),RH(this,"kind","Union"),RH(this,"$inferType",void 0),RH(this,x80,void 0),RH(this,b80,void 0),RH(this,"types",[])}}function b8($,J,W){if(J in $)Object.defineProperty($,J,{value:W,enumerable:!0,configurable:!0,writable:!0});else $[J]=W;return $}class g8{static registerPlugin($,J,W){if(!g8.allowPluginReRegistration&&g8.plugins[$])throw new T8(`Received multiple implementations for plugin ${$}`);if(g8.plugins[$]=J,W)g8.optionNormalizers.set($,W)}objectType($,J,W){s$($),ZB(J.interfaces);var X;let Y=typeof $==="string"?$:(X=J.name)!==null&&X!==void 0?X:$.name,U=$ instanceof H1?$:new j$(Y);if(U.updateConfig({kind:"Object",graphqlKind:"Object",name:Y,interfaces:[],description:J.description,extensions:J.extensions,isTypeOf:J.isTypeOf,pothosOptions:J}),J.interfaces)U.addInterfaces(J.interfaces);if(U!==$&&typeof $!=="string")this.configStore.associateParamWithRef($,U);if(W)U.addFields(()=>W(new TJ(this)));if(J.fields)U.addFields(()=>{let Z=new TJ(this);return J.fields(Z)});return this.configStore.addTypeRef(U),U}objectFields($,J){s$($),this.configStore.addFields($,()=>J(new TJ(this)))}objectField($,J,W){s$($),this.configStore.addFields($,()=>({[J]:W(new TJ(this))}))}queryType(...$){let[J={},W]=$;var X;if(this.queryRef.updateConfig({kind:"Query",graphqlKind:"Object",name:(X=J.name)!==null&&X!==void 0?X:"Query",description:J.description,pothosOptions:J,extensions:J.extensions}),J.name)this.queryRef.name=J.name;if(this.configStore.addTypeRef(this.queryRef),W)this.queryRef.addFields(()=>W(new KW(this)));if(J.fields)this.queryRef.addFields(()=>J.fields(new KW(this)));return this.queryRef}queryFields($){this.configStore.addFields(this.queryRef,()=>$(new KW(this)))}queryField($,J){this.configStore.addFields(this.queryRef,()=>({[$]:J(new KW(this))}))}mutationType(...$){let[J={},W]=$;var X;if(this.mutationRef.updateConfig({kind:"Mutation",graphqlKind:"Object",name:(X=J.name)!==null&&X!==void 0?X:"Mutation",description:J.description,pothosOptions:J,extensions:J.extensions}),this.configStore.addTypeRef(this.mutationRef),J.name)this.mutationRef.name=J.name;if(W)this.configStore.addFields(this.mutationRef,()=>W(new DW(this)));if(J.fields)this.configStore.addFields(this.mutationRef,()=>J.fields(new DW(this)));return this.mutationRef}mutationFields($){this.configStore.addFields(this.mutationRef,()=>$(new DW(this)))}mutationField($,J){this.configStore.addFields(this.mutationRef,()=>({[$]:J(new DW(this))}))}subscriptionType(...$){let[J={},W]=$;var X;if(this.subscriptionRef.updateConfig({kind:"Subscription",graphqlKind:"Object",name:(X=J.name)!==null&&X!==void 0?X:"Subscription",description:J.description,pothosOptions:J,extensions:J.extensions}),this.configStore.addTypeRef(this.subscriptionRef),J.name)this.subscriptionRef.name=J.name;if(W)this.configStore.addFields(this.subscriptionRef,()=>W(new OW(this)));if(J.fields)this.configStore.addFields(this.subscriptionRef,()=>J.fields(new OW(this)));return this.subscriptionRef}subscriptionFields($){this.configStore.addFields(this.subscriptionRef,()=>$(new OW(this)))}subscriptionField($,J){this.configStore.addFields(this.subscriptionRef,()=>({[$]:J(new OW(this))}))}args($){return $(new CJ(this,"Arg"))}interfaceType($,J,W){s$($),ZB(J.interfaces);var X;let Y=typeof $==="string"?$:(X=J.name)!==null&&X!==void 0?X:$.name,U=$ instanceof H1?$:new O9(Y),Z=U.name;if(U.updateConfig({kind:"Interface",graphqlKind:"Interface",name:Z,interfaces:[],description:J.description,pothosOptions:J,extensions:J.extensions,resolveType:J.resolveType}),this.configStore.addTypeRef(U),J.interfaces)U.addInterfaces(J.interfaces);if(U!==$&&typeof $!=="string")this.configStore.associateParamWithRef($,U);if(W)this.configStore.addFields(U,()=>W(new wW(this)));if(J.fields)this.configStore.addFields(U,()=>J.fields(new wW(this)));return U}interfaceFields($,J){s$($),this.configStore.addFields($,()=>J(new wW(this)))}interfaceField($,J,W){s$($),this.configStore.addFields($,()=>({[J]:W(new wW(this))}))}unionType($,J){let W=new wK($,{kind:"Union",graphqlKind:"Union",name:$,types:[],description:J.description,resolveType:J.resolveType,pothosOptions:J,extensions:J.extensions});if(Array.isArray(J.types))for(let X of J.types)s$(X);return this.configStore.addTypeRef(W),W.addTypes(J.types),W}enumType($,J){s$($);let W=typeof $==="string"?$:J.name,X=typeof $==="object"?Rf($,J===null||J===void 0?void 0:J.values):Bf(J.values),Y=new zK(W,{kind:"Enum",graphqlKind:"Enum",name:W,values:X,description:J.description,pothosOptions:J,extensions:J.extensions});if(this.configStore.addTypeRef(Y),typeof $!=="string")this.configStore.associateParamWithRef($,Y);return Y}scalarType($,J){let W=new gY($,{kind:"Scalar",graphqlKind:"Scalar",name:$,description:J.description,parseLiteral:J.parseLiteral,parseValue:J.parseValue,serialize:J.serialize,pothosOptions:J,extensions:J.extensions});return this.configStore.addTypeRef(W),W}addScalarType($,J,...W){let[X={}]=W,Y=J.toConfig();return this.scalarType($,{...Y,...X,extensions:{...Y.extensions,...X.extensions}})}inputType($,J){s$($);let W=typeof $==="string"?$:$.name,X=typeof $==="string"?new K9(W):$;if(X.updateConfig({kind:"InputObject",graphqlKind:"InputObject",name:W,isOneOf:J.isOneOf,description:J.description,pothosOptions:J,extensions:J.extensions}),this.configStore.addTypeRef(X),$!==X&&typeof $!=="string")this.configStore.associateParamWithRef($,X);return this.configStore.addInputFields(X,()=>J.fields(new CJ(this,"InputObject"))),X}inputRef($){return new YK(this,$)}objectRef($){return new NH(this,$)}interfaceRef($){return new UK(this,$)}toSchema(...$){let[J={}]=$,{directives:W,extensions:X}=J,Y=[H9,Z9,$W,Z1,n1];for(let K of Y)if(!this.configStore.hasImplementation(K.name))this.addScalarType(K.name,K);let U=new XK(this,J);U.plugin.beforeBuild(),U.buildAll();let Z=[...U.types.values()],H=this.configStore.hasConfig(this.queryRef)?this.configStore.getTypeConfig(this.queryRef).name:"Query",G=this.configStore.hasConfig(this.mutationRef)?this.configStore.getTypeConfig(this.mutationRef).name:"Mutation",z=this.configStore.hasConfig(this.subscriptionRef)?this.configStore.getTypeConfig(this.subscriptionRef).name:"Subscription",w=new BJ({query:U.types.get(H),mutation:U.types.get(G),subscription:U.types.get(z),extensions:X!==null&&X!==void 0?X:{},directives:W,types:Z}),D=U.plugin.afterBuild(w);return J.sortSchema===!1?D:oD(D)}constructor($){b8(this,"$inferSchemaTypes",void 0),b8(this,"queryRef",new yY("Query")),b8(this,"mutationRef",new mY("Mutation")),b8(this,"subscriptionRef",new cY("Subscription")),b8(this,"configStore",void 0),b8(this,"options",void 0),b8(this,"defaultFieldNullability",void 0),b8(this,"defaultInputFieldRequiredness",void 0),this.options=[...g8.optionNormalizers.values()].reduce((X,Y)=>{if($.defaults&&typeof Y[$.defaults]==="function")return Object.assign(X,Y[$.defaults](X));return X},$),this.configStore=new zB(this);var J;this.defaultFieldNullability=(J=$.defaultFieldNullability)!==null&&J!==void 0?J:$.defaults!=="v3";var W;this.defaultInputFieldRequiredness=(W=$.defaultInputFieldRequiredness)!==null&&W!==void 0?W:!1}}b8(g8,"plugins",{});b8(g8,"optionNormalizers",new Map);b8(g8,"allowPluginReRegistration",!1);var g80=g8,s6=g80;var qJ=x8;var hf=TJ;var DK=CJ,xf=H1;var bf=K9;var gf=O9;var k$=j$,ff=NH;var f80=S$(($)=>{let J;if($.options.drizzle.relations)J=$.options.drizzle.relations;else J=$.options.drizzle.client._.relations;let W={};Object.values(J).forEach(({table:Y})=>{if(wS(Y))Object.entries(q6(Y)).forEach(([U,Z])=>{if(Z.uniqueName)W[Z.uniqueName]=U})});var X;return{skipDeferredFragments:(X=$.options.drizzle.skipDeferredFragments)!==null&&X!==void 0?X:!0,columnToTsName:(Y)=>{if(!Y.uniqueName)throw Error(`Column ${String(Y.name)} has no uniqueName`);if(!(Y.uniqueName in W))throw Error(`Typescript name not found for ${Y.uniqueName}`);return W[Y.uniqueName]},getPrimaryKey:(Y)=>{let U=$.options.drizzle.getTableConfig(J[Y].table),Z=U.columns.find((z)=>z.primary);if(Z)return[Z];let H=U.primaryKeys.find((z)=>z.columns.length>0);if(H)return H.columns;let G=U.columns.find((z)=>z.isUnique);if(G)return[G];throw Error(`Could not find primary key for table ${Y}`)},relations:J}}),mf=S$(($)=>{let J=$.options.drizzle.client,W=typeof J==="function"?S$((X)=>J(X)):(X)=>J;return S$((X)=>{return W(X)})});function v$($){return f80($)}function yf($,J){return mf($)(J)}var cf=S$(()=>new Map);function SH($,J,W=[]){let X="",Y=J;while(Y){if(typeof Y.key==="string")X=X?`${Y.key}.${X}`:Y.key;Y=Y.prev}for(let U of W)X=`${X}.${U}`;return`${$}@${X}`}function FW($,J,W){let X=cf($);for(let[Y,U]of Object.entries(W)){let Z=[...U.indirectPath,Y],H=SH(U.type,J.path,Z);X.set(H,U.mappings)}}function KB($,J,W){let X=cf($),Y=SH(W,J,[]);var U;return(U=X.get(Y))!==null&&U!==void 0?U:null}function KK($,J,W){if($===J)return!0;if($&&J&&typeof $==="object"&&typeof J==="object"){var X,Y;if(Array.isArray($)){if(!Array.isArray(J))return!1;let{length:z}=$;if(J.length!==z)return!1;for(let w=0;w<z;w+=1)if(!KK($[w],J[w]))return!1;return!0}let U=(X=$.valueOf)===null||X===void 0?void 0:X.call($),Z=(Y=J.valueOf)===null||Y===void 0?void 0:Y.call(J);if((U!=null||Z!=null)&&typeof U!=="object")return U===Z;let H=Object.keys($);if(H.length!==Object.keys(J).length)return!1;for(let z of H){if(W===null||W===void 0?void 0:W.has(z))continue;if(!KK($[z],J[z]))return!1}return!0}return!1}function jH($,J,W=!1){if(typeof J==="boolean")return W||!J||Object.keys($.query).length===0;let{with:X,extras:Y,columns:U,...Z}=J;if(X&&Object.entries(X).some(([H,G])=>G&&$.with.has(H)&&!jH($.with.get(H),G)))return!1;if(Y&&Object.entries(Y).some(([H,G])=>{let z=$.extras.get(H);return z&&z!==G}))return!1;return W||KK($.query,Z)}function OK($,J,W){return{table:$,skipDeferredFragments:J,parent:W,query:{},columns:new Set,with:new Map,extras:new Map,mappings:{},allColumns:!1,depth:W?W.depth+1:0}}function K5($,J,W){let{with:X,extras:Y,columns:U,...Z}=typeof W==="boolean"?W===!0?{}:{columns:{}}:W;if(X)for(let[G,z]of Object.entries(X)){let w=J.table.relations[G];if(!w)throw new V0(`Relation ${G} does not exist on ${J.table.name}`);H($.relations[w.targetTableName],G,z)}if(Object.keys(Z).length>0)J.query=Z;if(Y)for(let[G,z]of Object.entries(Y))J.extras.set(G,z);if(J.allColumns)return;if(U&&!J.allColumns)for(let G of Object.keys(U))J.columns.add(G);else J.allColumns=!0;function H(G,z,w){if(!w)return;if(J.with.has(z))K5($,J.with.get(z),w);else{let D=OK(G,J.skipDeferredFragments,J);K5($,D,w),J.with.set(z,D)}}}function E9($,J){let W={...J.query,columns:void 0,with:{},extras:{}};if(!J.allColumns){W.columns={};for(let X of J.columns)W.columns[X]=!0;for(let X of $.getPrimaryKey(J.table.name)){let Y=$.columnToTsName(X);W.columns[Y]=!0}}for(let[X,Y]of J.extras)W.extras[X]=Y;return J.with.forEach((X,Y)=>{W.with[Y]=E9($,X)}),W}var m80=Symbol.for("Pothos.isUsed");function uf($){let J={},W=!0;Object.defineProperty(J,m80,{get(){return W},set(X){W=X},enumerable:!1});for(let X of Object.keys($))W=!1,Object.defineProperty(J,X,{enumerable:!0,configurable:!0,get(){return W=!0,$[X]}});return J}function pY($,J,W,X,Y,U,Z,H){if(U.name.value.startsWith("__"))return;var G;let{pothosDrizzleSelect:z,pothosIndirectInclude:w}=(G=J.extensions)!==null&&G!==void 0?G:{};if(!!(w===null||w===void 0?void 0:w.path)&&w.path.length>0||!!(w===null||w===void 0?void 0:w.paths)&&w.paths.length===0){var D;FB(J,X,U,[],(D=w.paths)!==null&&D!==void 0?D:[w.path],Z,(K,O,F)=>{pY($,K,W,X,Y,O,F,H)},H)}else if(w){pY($,X.schema.getType(w.getType()),W,X,Y,U,Z,H);return}if(!(N0(J)||x0(J)))return;if(z)K5($,Y,z===!0?!0:{...z});if(U.selectionSet&&(!H||!Y.skipDeferredFragments))OB($,J,W,X,Y,U.selectionSet,Z)}function FB($,J,W,X,Y,U,Z,H){for(let G of Y)if(X.length>0)EW($,J,W,[...X,...G],U,Z,H);else EW($,J,W,G,U,Z,H)}function EW($,J,W,X,Y,U,Z=!1){if(X.length===0){U($,W,Y,Z);return}let[H,...G]=X;if(!W.selectionSet||!H)return;for(let D of W.selectionSet.selections)switch(D.kind){case v.FIELD:if(!rf(J,D)&&D.name.value===H.name&&(N0($)||x0($))){var z;let K=b1($.getFields()[D.name.value].type);var w;EW(K,J,D,G,[...Y,(w=(z=D.alias)===null||z===void 0?void 0:z.value)!==null&&w!==void 0?w:D.name.value],U,Z)}continue;case v.FRAGMENT_SPREAD:if(!H.type||J.fragments[D.name.value].typeCondition.name.value===H.type)EW(H.type?J.schema.getType(H.type):$,J,J.fragments[D.name.value],X,Y,U,Z||FK(D,J));continue;case v.INLINE_FRAGMENT:if(!D.typeCondition||!H.type||D.typeCondition.name.value===H.type)EW(D.typeCondition?J.schema.getType(D.typeCondition.name.value):$,J,D,X,Y,U,Z||FK(D,J));continue;default:throw new V0(`Unsupported selection kind ${W.kind}`)}}function OB($,J,W,X,Y,U,Z){let H=J;for(let w of U.selections)switch(w.kind){case v.FIELD:pf($,J,W,X,Y,w,Z);continue;case v.FRAGMENT_SPREAD:var G;if(Y.skipDeferredFragments&&FK(w,X))continue;if(H=X.schema.getType(X.fragments[w.name.value].typeCondition.name.value),N0(J)?H.name!==J.name:((G=H.extensions)===null||G===void 0?void 0:G.pothosDrizzleModel)!==J.extensions.pothosDrizzleModel)continue;OB($,H,W,X,Y,X.fragments[w.name.value].selectionSet,Z);continue;case v.INLINE_FRAGMENT:var z;if(Y.skipDeferredFragments&&FK(w,X))continue;if(H=w.typeCondition?X.schema.getType(w.typeCondition.name.value):J,N0(J)?H.name!==J.name:((z=H.extensions)===null||z===void 0?void 0:z.pothosDrizzleModel)!==J.extensions.pothosDrizzleModel)continue;OB($,H,W,X,Y,w.selectionSet,Z);continue;default:throw new V0(`Unsupported selection kind ${w.kind}`)}}function pf($,J,W,X,Y,U,Z){var H;if(U.name.value.startsWith("__")||rf(X,U))return;let G=J.getFields()[U.name.value];if(!G)throw new V0(`Unknown field ${U.name.value} on ${J.name}`);let z=(H=G.extensions)===null||H===void 0?void 0:H.pothosDrizzleSelect,w,D={};if(typeof z==="function"){let F=qf(G,U,W,X);w=z(F,W,(M,A,I)=>{let P=b1(G.type),Q=typeof M==="function"?M(F,W):M,N=Array.isArray(A)?y80(A,lf(P,X),I?b1(X.schema.getType(I)):void 0):A,_=kH($,X,N?X.schema.getType(N.getType()):P,Y);if(typeof Q==="object"&&Object.keys(Q).length>0)K5($,_,{columns:{},...Q});if(!!(N===null||N===void 0?void 0:N.path)&&N.path.length>0||!!(N===null||N===void 0?void 0:N.paths)&&N.paths.length>0){var L,R,S,k;FB(P,X,U,(S=(R=P.extensions)===null||R===void 0?void 0:(L=R.pothosIndirectInclude)===null||L===void 0?void 0:L.path)!==null&&S!==void 0?S:[],(k=N.paths)!==null&&k!==void 0?k:[N.path],[],(T,q,h,x)=>{pY($,T,W,X,_,q,h,x)})}return pY($,P,W,X,_,U,[]),D=_.mappings,E9($,_)},(M)=>{let A=b1(G.type),I=null;return EW(A,X,U,M.map((P)=>({name:P})),[],(P,Q)=>{I=Q}),I})}else w=z;if(z&&jH(Y,w,!0)){var K;K5($,Y,w);var O;Y.mappings[(O=(K=U.alias)===null||K===void 0?void 0:K.value)!==null&&O!==void 0?O:U.name.value]={field:U.name.value,type:J.name,mappings:D,indirectPath:Z}}}function dY({withUsageCheck:$,...J}){let W=EB(J);FW(J.context,J.info,W.mappings);let X=E9(J.config,W);return $?uf(X):X}function EB({config:$,context:J,info:W,typeName:X,select:Y,path:U=[],paths:Z=[]}){let H=b1(W.returnType),G=X?W.schema.getTypeMap()[X]:H,z=Y?{columns:{},...Y}:void 0,w;if(U.length>0||Z.length>0){var D;let{pothosIndirectInclude:O}=(D=H.extensions)!==null&&D!==void 0?D:{};var K;EW(H,W,W.fieldNodes[0],(K=O===null||O===void 0?void 0:O.path)!==null&&K!==void 0?K:[],[],(F,M,A,I)=>{FB(F,W,M,[],Z.length>0?Z.map((P)=>P.map((Q)=>typeof Q==="string"?{name:Q}:Q)):[U.map((P)=>typeof P==="string"?{name:P}:P)],A,(P,Q,N,_)=>{w=kH($,W,P,void 0,z),pY($,X?G:P,J,W,w,Q,N,_)},I)})}else w=kH($,W,G,void 0,z),pY($,G,J,W,w,W.fieldNodes[0],[]);if(!w)w=kH($,W,G,void 0,z);return w}function df($,J,W,X){let Y=X?W.schema.getTypeMap()[X]:W.parentType,U=kH($,W,Y);if(!(N0(Y)||x0(Y)))throw new V0("Drizzle plugin can only resolve selections for object and interface types");return pf($,Y,J,W,U,W.fieldNodes[0],[]),U}function kH($,J,W,X,Y){let U=lf(W,J);var Z;let{pothosDrizzleTable:H}=(Z=U.extensions)!==null&&Z!==void 0?Z:{};if(!H)throw new V0(`Expected ${U.name} to have a table config`);var G;let z=OK(H,(G=X===null||X===void 0?void 0:X.skipDeferredFragments)!==null&&G!==void 0?G:$.skipDeferredFragments,X);if(Y)K5($,z,Y);return z}function lf($,J){var W;let X=$;while((W=X.extensions)===null||W===void 0?void 0:W.pothosIndirectInclude){var Y;X=J.schema.getType(((Y=X.extensions)===null||Y===void 0?void 0:Y.pothosIndirectInclude).getType())}return X}function y80($,J,W){let X=$.length>0?J:W!==null&&W!==void 0?W:J,Y=[];if(!(N0(X)||x0(X)))throw new V0(`Expected ${X} to be an Object type`);for(let U of $){let Z=X.getFields()[U];if(!Z)throw new V0(`Expected ${X} to have a field ${U}`);if(X=b1(Z.type),!(N0(X)||x0(X)))throw new V0(`Expected ${X} to be an Object or Interface type`);Y.push({name:U,type:X.name})}return{getType:()=>{var U;return(U=W===null||W===void 0?void 0:W.name)!==null&&U!==void 0?U:Y.length>0?Y[Y.length-1].type:J.name},path:Y}}function rf($,J){let W=R$(z9,J,$.variableValues);if((W===null||W===void 0?void 0:W.if)===!0)return!0;let X=R$(G9,J,$.variableValues);if((X===null||X===void 0?void 0:X.if)===!1)return!0;return!1}function FK($,J){let W=J.schema.getDirective("defer");if(!W)return!1;let X=R$(W,$,J.variableValues);return!!X&&X.if!==!1}var c80=100,u80=20;function p80($){if($==null)return null;if($ instanceof Date)return`D:${String(Number($))}`;switch(typeof $){case"number":return`N:${$}`;case"string":return`S:${$}`;case"bigint":return`I:${$}`;default:throw new V0(`Unsupported cursor type ${typeof $}`)}}function d80($){if($ instanceof Date)return`${String(Number($))}`;switch(typeof $){case"number":case"string":case"bigint":return`${$}`;default:throw new V0(`Unsupported ID type ${typeof $}`)}}function tf($,J){if($.length===0)throw new V0("Column serializer must have at least one field");return(W)=>{if($.length>1)return $.map((X)=>X.keyAsName),`${JSON.stringify($.map((X)=>W[J.columnToTsName(X)]))}`;return`${d80(W[J.columnToTsName($[0])])}`}}function l80($,J){if($.length===0)throw new V0("Column serializer must have at least one field");return(W)=>{if($.length>1)return`J:${JSON.stringify($.map((X)=>W[J.columnToTsName(X)]))}`;return p80(W[J.columnToTsName($[0])])}}function EK($,J){if($.length===0)throw new V0("Cursor must have at least one field");let W=l80($,J);return(X)=>{return MH(`DC:${W(X)}`)}}function r80($){if(typeof $!=="string")throw new V0("Cursor must be a string");try{let J=VH($);if(!J.startsWith("DC:"))throw new V0("Invalid cursor");return n80(J.slice(3))}catch{throw new V0(`Invalid cursor: ${$}`)}}function n80($){if(typeof $!=="string")throw new V0("value must be a string");try{let[,J,W]=$.match(/^(S|N|D|J|I):(.*)/);switch(J){case"S":return W;case"N":return Number.parseInt(W,10);case"D":return new Date(Number.parseInt(W,10));case"J":return JSON.parse(W);case"I":return BigInt(W);default:throw new V0(`Invalid cursor type ${J}`)}}catch{throw new V0(`Invalid serialized data: ${$}`)}}function i80($,J){if(!$)return $;try{if(J.dataType.startsWith("number"))return Number.parseInt($,10);if(J.dataType.startsWith("bigint"))return BigInt($);if(J.dataType.startsWith("string"))return $;if(J.dataType==="object date")return new Date($);throw new V0(`Unsupported ID type ${J.dataType}`)}catch(W){if(W instanceof V0)throw W;throw new V0(`Invalid serialized ID: ${$}`)}}function af($){if($.length===0)throw new V0("Column parser must have at least one field");return(J)=>{if($.length===1)return{[$[0].name]:i80(J,$[0])};try{let W=JSON.parse(J);if(!Array.isArray(W))throw new V0(`Expected compound ID to contain an array, but got ${J}`);if(W.length!==$.length)throw new V0(`Expected compound ID to contain ${$.length} elements, but got ${W.length}`);let X={};return $.forEach((Y,U)=>{X[Y.name]=W[U]}),X}catch(W){if(W instanceof V0)throw W;throw new V0(`Invalid serialized ID: ${J}`)}}}function nf($){if($.length===0)throw new V0("Cursor must have at least one field");return(J)=>{let W=r80(J);if($.length===1)return{[$[0].name]:W};if(!Array.isArray(W))throw new V0(`Expected compound cursor to contain an array, but got ${W}`);let X={};return $.forEach((Y,U)=>{X[Y.name]=W[U]}),X}}function t80($,J,W,X){let Y=[],U=[],Z=[],H=X?"desc":"asc",G=X?"asc":"desc";if("table"in W&&W.table&&typeof W.table==="object")Y.push([$.columnToTsName(W),H]),U.push(W),Z.push({direction:"asc",column:W});else if(Array.isArray(W))for(let z of W)Y.push([$.columnToTsName(z),H]),U.push(z),Z.push({direction:"asc",column:z});else{let z=q6(J.table);Object.entries(W).forEach(([w,D])=>{if(D){let K=z[w];U.push(K),Y.push([w,D==="asc"?H:G]),Z.push({direction:D,column:K})}})}return{normalized:Z,columns:U,orderBy:Object.fromEntries(Y)}}function MK({args:$,ctx:J,maxSize:W=c80,defaultSize:X=u80,orderBy:Y,where:U,config:Z,table:H}){let{before:G,after:z,first:w,last:D}=$;if(w!=null&&w<0)throw new V0('Argument "first" must be a non-negative integer');if(D!=null&&D<0)throw new V0('Argument "last" must be a non-negative integer');if(w!=null&&D!=null)throw new V0('Arguments "first" and "last" are not supported at the same time');let K=typeof W==="function"?W($,J):W,O=typeof X==="function"?X($,J):X;var F;let M=Math.min((F=w!==null&&w!==void 0?w:D)!==null&&F!==void 0?F:O,K)+1,I=t80(Z,H,Y,!w&&!!D),P={};for(let N of I.columns)P[Z.columnToTsName(N)]=!0;let Q=[];if(U)Q.push(U);if(z){let _=nf(I.columns)(z),L=I.normalized.map(({direction:R,column:S},k)=>{let T=Z.columnToTsName(S),q=R==="asc"?{[T]:{gt:_[S.name]}}:{[T]:{lt:_[S.name]}};if(k===0)return q;return{AND:[...I.normalized.slice(0,k).map(({column:h})=>{return{[Z.columnToTsName(h)]:_[h.name]}}),q]}});Q.push(L.length>1?{OR:L}:L[0])}if(G){let _=nf(I.columns)(G),L=I.normalized.map(({direction:R,column:S},k)=>{let T=Z.columnToTsName(S),q=R==="desc"?{[T]:{gt:_[S.name]}}:{[T]:{lt:_[S.name]}};if(k===0)return q;return{AND:[...I.normalized.slice(0,k).map(({column:h})=>{return{[Z.columnToTsName(h)]:_[h.name]}}),q]}});Q.push(L.length>1?{OR:L}:L[0])}return{cursorColumns:I.columns,columns:P,orderBy:I.orderBy,limit:M,where:Q.length>1?{AND:Q}:Q[0]}}function VK($,J,W,X,Y,U){var Z,H;let G=$.length===Math.abs(W),z=J.before?!0:J.last?!1:G,w=J.after?!0:!J.first&&!!J.last?G:!1,D=G?$.slice(0,-1):$,K={parent:U,args:J,edges:[],pageInfo:{startCursor:null,endCursor:null,hasPreviousPage:w,hasNextPage:z}},O=D.map((A)=>A==null?null:Y?{connection:K,...A,cursor:X(A),node:Y(A)}:{connection:K,cursor:X(A),node:A});if(J.last&&!J.first)O.reverse();K.edges=O;var F;K.pageInfo.startCursor=(F=(Z=O[0])===null||Z===void 0?void 0:Z.cursor)!==null&&F!==void 0?F:null;var M;return K.pageInfo.endCursor=(M=(H=O[O.length-1])===null||H===void 0?void 0:H.cursor)!==null&&M!==void 0?M:null,K}async function of($,J,W,X,Y,U,Z){let H=X.relations[$],G,z,w=await U((D={})=>{var K;let{cursorColumns:O,...F}=MK({...Y,config:X,orderBy:(K=typeof D.orderBy==="function"?D.orderBy(H.table):D.orderBy)!==null&&K!==void 0?K:X.getPrimaryKey(H.name),table:H});return z=EK(O,X),G=dY({context:Y.ctx,info:J,select:{...F,columns:{...D.columns,...F.columns},where:F.where&&D.where?{AND:[D.where,F.where]}:D.where||F.where},paths:[["nodes"],["edges","node"]],typeName:W,config:X}),G});if(!w)return w;return VK(w,Y.args,G.limit,z,void 0,Z)}function MB($,J,W){if(J in $)Object.defineProperty($,J,{value:W,enumerable:!0,configurable:!0,writable:!0});else $[J]=W;return $}var VB=Symbol.for("Pothos.drizzleTableKey"),a80=VB,o80=Lf;class M9 extends k${addBrand($){if(Array.isArray($)){for(let J of $)ZW(J,this.name);return $}return ZW($,this.name),$}hasBrand($){return typeof $==="object"&&$!==null&&D5 in $&&$[D5]===this.name}constructor($,J){super($),MB(this,a80,void 0),MB(this,o80,void 0),MB(this,"tableName",void 0),this.tableName=J}}function sf($,J,W){if(J in $)Object.defineProperty($,J,{value:W,enumerable:!0,configurable:!0,writable:!0});else $[J]=W;return $}var s80=VB;class lY extends gf{constructor($,J){super($),sf(this,s80,void 0),sf(this,"tableName",void 0),this.tableName=J}}var QB=new WeakMap;function D$($,J,W="object"){if(!QB.has(J))QB.set(J,new Map);let X=QB.get(J);if(!X.has($))X.set($,W==="object"?new M9($,$):new lY($,$));let Y=X.get($);if(W==="interface"&&!(Y instanceof lY)||W==="object"&&!(Y instanceof M9))throw new v0(`Drizzle table ${$} was created as both an object and interface.  Use 'variant' instead of 'name' in one of the implementations`);return Y}var AB,IB,LB=qJ.prototype;LB.drizzleField=function({type:J,resolve:W,...X}){let Y=Array.isArray(J)?J[0]:J,U=typeof Y==="string"?D$(Y,this.builder):Y,Z=Array.isArray(J)?[U]:U;return this.field({...X,type:Z,resolve:(H,G,z,w)=>{return W((D)=>dY({config:v$(this.builder),context:z,select:D,info:w}),H,G,z,w)}})};LB.drizzleFieldWithInput=function({type:J,resolve:W,...X}){let Y=Array.isArray(J)?J[0]:J,U=typeof Y==="string"?D$(Y,this.builder):Y,Z=Array.isArray(J)?[U]:U;return this.fieldWithInput({...X,type:Z,resolve:(H,G,z,w)=>{return W((D)=>dY({config:v$(this.builder),context:z,select:D,info:w}),H,G,z,w)}})};LB.drizzleConnection=function({type:J,maxSize:W=(AB=this.builder.options.drizzle)===null||AB===void 0?void 0:AB.maxConnectionSize,defaultSize:X=(IB=this.builder.options.drizzle)===null||IB===void 0?void 0:IB.defaultConnectionSize,resolve:Y,...U},Z={},H={}){let G=typeof J==="string"?D$(J,this.builder):J,z=this.builder.configStore.getTypeConfig(G).name,w=typeof J==="string"?J:G.tableName;return this.connection({...U,type:G,resolve:(K,O,F,M)=>{return of(w,M,z,v$(this.builder),{ctx:F,maxSize:W,defaultSize:X,args:O},(A)=>{return Y(A,K,O,F,M)},K)}},Z instanceof k$?Z:{...Z,extensions:{...Z===null||Z===void 0?void 0:Z.extensions}},H)};function R6($,J,W){if(J in $)Object.defineProperty($,J,{value:W,enumerable:!0,configurable:!0,writable:!0});else $[J]=W;return $}var e80=qJ;class V9 extends e80{variant($,...J){let[{isNull:W,nullable:X,...Y}={}]=J,U=typeof $==="string"?D$($,this.builder):$,Z=(H,G,z)=>{var w;return z((w=Y.select)!==null&&w!==void 0?w:{})};return this.field({...Y,type:U,extensions:{...Y===null||Y===void 0?void 0:Y.extensions,pothosDrizzleSelect:Z},nullable:X!==null&&X!==void 0?X:!!W,resolve:W?(H,G,z,w)=>{let D=W(H,G,z,w);if(D){if(vJ(D))return D.then((K)=>K?null:H);return null}return H}:(H)=>H})}relation($,...J){var W;let[X={}]=J,Y=v$(this.builder),U=(W=Y.relations)===null||W===void 0?void 0:W[this.table].relations[$],Z=Y.relations[U.targetTableName];if(!Z)throw new v0(`Could not find relation ${$} on table ${this.table}`);var H;let G=(H=X.type)!==null&&H!==void 0?H:D$(Z.name,this.builder),{query:z={},extensions:w,...D}=X,K=(O,F,M)=>{return{columns:{},with:{[$]:{...M(z),...typeof z==="function"?z(O,F):z}}}};return this.field({...D,type:U instanceof LG?[G]:G,extensions:{...w,pothosDrizzleSelect:K},resolve:(O)=>O[$]})}expose(...$){var J;let[W,X={}]=$,U=!!((J=this.builder.configStore.getTypeConfig(this.typename,this.graphqlKind).extensions)===null||J===void 0?void 0:J.pothosDrizzleSelect);return this.exposeField(W,{...X,extensions:{...X.extensions,pothosDrizzleVariant:W,pothosDrizzleSelect:U&&{columns:{[W]:!0}}}})}createExpose($){return(...J)=>{let[W,X={}]=J;return this.expose(W,{...X,type:$})}}constructor($,J,W,X="Object"){var Y,U;super(J,"DrizzleObject",X),R6(this,"exposeBoolean",this.createExpose("Boolean")),R6(this,"exposeFloat",this.createExpose("Float")),R6(this,"exposeInt",this.createExpose("Int")),R6(this,"exposeID",this.createExpose("ID")),R6(this,"exposeString",this.createExpose("String")),R6(this,"exposeBooleanList",this.createExpose(["Boolean"])),R6(this,"exposeFloatList",this.createExpose(["Float"])),R6(this,"exposeIntList",this.createExpose(["Int"])),R6(this,"exposeIDList",this.createExpose(["ID"])),R6(this,"exposeStringList",this.createExpose(["String"])),R6(this,"table",void 0),R6(this,"typename",void 0),R6(this,"relatedConnection",function(H,{maxSize:G=(Y=this.builder.options.drizzle)===null||Y===void 0?void 0:Y.maxConnectionSize,defaultSize:z=(U=this.builder.options.drizzle)===null||U===void 0?void 0:U.defaultConnectionSize,query:w,resolve:D,extensions:K,description:O,...F}={},M={},A={}){var I;let P=v$(this.builder),Q=(I=P.relations)===null||I===void 0?void 0:I[this.table].relations[H],N=P.relations[Q.targetTableName];if(!N)throw new v0(`Could not find relation ${H} on table ${this.table}`);var _;let L=(_=F.type)!==null&&_!==void 0?_:D$(Q.targetTableName,this.builder),R,S=(q,h)=>{var x;let{limit:b,orderBy:r,where:d,...X0}=(x=typeof w==="function"?w(q,h):w)!==null&&x!==void 0?x:{};var i;let{cursorColumns:K0,columns:D0,...U0}=MK({ctx:h,maxSize:G,defaultSize:z,args:q,orderBy:(i=typeof r==="function"?r(N.table):r)!==null&&i!==void 0?i:v$(this.builder).getPrimaryKey(Q.targetTableName),where:d,config:P,table:N});return{select:{...X0,...U0,columns:{...X0.columns,...D0},limit:Math.abs(b!==null&&b!==void 0?b:U0.limit)},cursorColumns:K0}},k=(q,h,x)=>{R!==null&&R!==void 0||(R=this.builder.configStore.getTypeConfig(L).name);let b=x(S(q,h).select,{getType:()=>R,paths:[[{name:"nodes"}],[{name:"edges"},{name:"node"}]]});return{columns:{},with:{[H]:b}}};return this.connection({...F,extensions:{...K,pothosDrizzleSelect:k},type:L,resolve:(q,h,x)=>{let{select:b,cursorColumns:r}=S(h,x);return VK(q[H],h,b.limit,EK(r,P),void 0,q)}},M instanceof k$?M:{...M},A)}),this.table=W,this.typename=$}}function O5($,J,W){if(J in $)Object.defineProperty($,J,{value:W,enumerable:!0,configurable:!0,writable:!0});else $[J]=W;return $}class rY{static forModel($,J,W){return S$((X)=>new rY(X,J,$,W))}sqlForModel($){let J=this.columns.map((W)=>{let X=this.config.columnToTsName(W);if(X in $)return $[X];throw Error(`Primary key column ${X} not found on ${this.modelName}`)});return this.columns.length>1?J:J[0]}getSelection($){let J=SH($.parentType.name,$.path);if(!this.queryCache.has(J)){let W=df(this.config,this.context,$);this.queryCache.set(J,{selection:W,query:E9(this.config,W)})}return this.queryCache.get(J)}getSelectionForField($,J){let W=SH(J,$.path);if(!this.queryCache.has(W)){let X=EB({config:this.config,context:this.context,info:$,typeName:J});this.queryCache.set(W,{selection:X,query:E9(this.config,X)})}return this.queryCache.get(W)}async loadSelection($,J){let{selection:W,query:X}=this.getSelection($),Y=await this.stageQuery(W,X,J);if(Y){let U=W.mappings[$.path.key];if(U)FW(this.context,$,U.mappings)}return Y}async loadSelectionForField($,J,W){let{selection:X,query:Y}=this.getSelectionForField($,W),U=await this.stageQuery(X,Y,J);if(U)FW(this.context,$,X.mappings);return U}stageQuery($,J,W){for(let X of this.staged)if(jH(X.state,J)){if(K5(this.config,X.state,J),!X.models.has(W))X.models.set(W,PB());return X.models.get(W).promise}return this.initLoad($,W)}initLoad($,J){let W=PB(),X={state:$,models:new Map([[J,W]])};this.staged.add(X);let Y=PB(),U=yf(this.builder,this.context);return Y.promise.then(()=>{this.staged.delete(X),U.query[this.modelName].findMany({...E9(this.config,$),where:{RAW:(G)=>I5(this.selectSQL(G),[...X.models.keys()].map((z)=>this.sqlForModel(z)))}}).then((G)=>{for(let[z,w]of X.models.entries()){let D=G.find((K)=>this.primaryKey.every((O)=>K[this.config.columnToTsName(O)]===z[this.config.columnToTsName(O)]));if(D)w.resolve(D!==null&&D!==void 0?D:null);else w.reject(Error(`Model ${this.modelName}(${this.sqlForModel(z)}) not found`))}},(G)=>{for(let z of X.models.values())z.reject(G)})}).catch((Z)=>{for(let H of X.models.values())H.reject(Z)}),setTimeout(()=>Y.resolve(),0),W.promise}constructor($,J,W,X){O5(this,"context",void 0),O5(this,"builder",void 0),O5(this,"modelName",void 0),O5(this,"queryCache",new Map),O5(this,"staged",new Set),O5(this,"config",void 0),O5(this,"table",void 0),O5(this,"columns",void 0),O5(this,"primaryKey",void 0),O5(this,"selectSQL",void 0),this.context=$,this.builder=J,this.modelName=W,this.config=v$(J),this.table=this.config.relations[W],this.primaryKey=this.config.getPrimaryKey(W),this.columns=X!==null&&X!==void 0?X:this.primaryKey,this.selectSQL=(Y)=>{let U=this.columns.map((Z)=>Object.values(q6(Y)).find((H)=>("columnType"in H)&&H.name===Z.name));return U.length>1?E`(${E.join(U,E`, `)})`:U[0].getSQL()}}}function PB(){let $,J;return{promise:new Promise((X,Y)=>{$=X,J=Y}),resolve:$,reject:J}}function ef($,J,W){if(J in $)Object.defineProperty($,J,{value:W,enumerable:!0,configurable:!0,writable:!0});else $[J]=W;return $}var $50=Symbol.for("Pothos.relayIDShapeKey"),J50=$50;class _B extends M9{constructor($,J,W){super($,J),ef(this,J50,void 0),ef(this,"parseId",void 0),this.parseId=W.parseId}}var MW=s6.prototype;MW.drizzleObject=function(J,{select:W,fields:X,...Y}){var U,Z;let H=(Z=(U=Y.variant)!==null&&U!==void 0?U:Y.name)!==null&&Z!==void 0?Z:J,G=Y.variant?new M9(Y.variant,J):D$(J,this,"object");return G.name=H,this.objectType(G,{...Y,extensions:{...Y.extensions,pothosDrizzleModel:J,pothosDrizzleTable:v$(this).relations[J],pothosDrizzleSelect:typeof W==="object"?{columns:{},...W}:W!==null&&W!==void 0?W:!0,pothosDrizzleLoader:rY.forModel(J,this)},name:H,fields:X?()=>X(new V9(G.name,this,J)):void 0}),G};MW.drizzleInterface=function(J,{select:W,fields:X,...Y}){var U,Z;let H=(Z=(U=Y.variant)!==null&&U!==void 0?U:Y.name)!==null&&Z!==void 0?Z:J,G=Y.variant?new lY(Y.variant,J):D$(J,this,"interface");return G.name=H,this.interfaceType(G,{...Y,extensions:{...Y.extensions,pothosDrizzleModel:J,pothosDrizzleTable:v$(this).relations[J],pothosDrizzleSelect:typeof W==="object"?{columns:{},...W}:W!==null&&W!==void 0?W:!0,pothosDrizzleLoader:rY.forModel(J,this)},name:H,fields:X?()=>X(new V9(G.name,this,J,"Interface")):void 0}),G};MW.drizzleNode=function(J,{id:{column:W,...X},name:Y,variant:U,...Z}){var H,G;let z=v$(this),w=z.relations[J],D=typeof W==="function"?W(w.table):W,K=Array.isArray(D)?D:[D],O=(H=(G=this).nodeInterfaceRef)===null||H===void 0?void 0:H.call(G),F=tf(K,z),M=af(K);var A;let I=(A=U!==null&&U!==void 0?U:Y)!==null&&A!==void 0?A:J,P=new _B(I,J,{parseId:(L)=>{let R=M(L);if(Array.isArray(D))return R;return R[z.columnToTsName(D)]}}),Q=rY.forModel(J,this,K);if(!O)throw new T8("builder.drizzleNode requires @pothos/plugin-relay to be installed");let N={...Z,name:Y,variant:U,interfaces:[O],loadWithoutCache:async(L,R,S)=>{let k=await Q(R).loadSelectionForField(S,M(L),I);if(k)ZW(k,I);return k}},_=this.drizzleObject(J,N);if(Z.interfaces)_.addInterfaces(Z.interfaces);return this.configStore.onTypeConfig(_,(L)=>{var R,S;this.objectField(_,(S=(R=this.options.relay)===null||R===void 0?void 0:R.idFieldName)!==null&&S!==void 0?S:"id",(k)=>{var T;return k.globalID({...(T=this.options.relay)===null||T===void 0?void 0:T.idFieldOptions,...X,nullable:!1,args:{},resolve:(q)=>o6(F(q),(h)=>({type:L.name,id:h}))})})}),this.configStore.associateParamWithRef(P,_),P};MW.drizzleObjectField=function(J,W,X){let Y=typeof J==="string"?D$(J,this):J;this.configStore.onTypeConfig(Y,({name:U})=>{this.configStore.addFields(Y,()=>({[W]:X(new V9(U,this,Y.tableName))}))})};MW.drizzleInterfaceField=function(J,W,X){let Y=typeof J==="string"?D$(J,this):J;this.configStore.onTypeConfig(Y,({name:U})=>{this.configStore.addFields(Y,()=>({[W]:X(new V9(U,this,Y.tableName,"Interface"))}))})};MW.drizzleObjectFields=function(J,W){let X=typeof J==="string"?D$(J,this):J;this.configStore.onTypeConfig(X,({name:Y})=>{this.configStore.addFields(X,()=>W(new V9(Y,this,X.tableName)))})};MW.drizzleInterfaceFields=function(J,W){let X=typeof J==="string"?D$(J,this):J;this.configStore.onTypeConfig(X,({name:Y})=>{this.configStore.addFields(X,()=>W(new V9(Y,this,X.tableName,"Interface")))})};var $m="drizzle",Wm=$m;class Jm extends D9{onTypeConfig($){var J;if($.kind!=="Object"&&$.kind!=="Interface")return $;let W=(J=$.extensions)===null||J===void 0?void 0:J.pothosDrizzleModel;for(let Y of $.interfaces){var X;let U=(X=this.buildCache.getTypeConfig(Y,"Interface").extensions)===null||X===void 0?void 0:X.pothosDrizzleModel;if(U){if(W&&W!==U)throw new v0(`DrizzleObjects must be based on the same prisma model as any DrizzleInterfaces they extend. ${$.name} uses ${W} and ${Y.name} uses ${U}`);W=U}}return{...$,extensions:{...$.extensions,pothosDrizzleModel:W}}}onOutputFieldConfig($){var J;if($.kind==="DrizzleObject"&&$.pothosOptions.select&&!((J=$.extensions)===null||J===void 0?void 0:J.pothosDrizzleSelect)){let{select:W}=$.pothosOptions;return{...$,extensions:{...$.extensions,pothosDrizzleSelect:typeof W==="function"?(X,Y,U)=>({columns:{},...W(X,Y,U)}):{columns:{},...W}}}}return{...$}}wrapResolve($,J){var W,X;if(J.kind!=="DrizzleObject"||!((W=J.extensions)===null||W===void 0?void 0:W.pothosDrizzleSelect))return $;let Y=this.buildCache.getTypeConfig(J.parentType),U=new Set([J.parentType]);if(Y.kind==="Interface"||Y.kind==="Object")for(let G of Y.interfaces){var Z;let z=this.buildCache.getTypeConfig(G,"Interface");if((Z=z.extensions)===null||Z===void 0?void 0:Z.pothosDrizzleModel)U.add(z.name)}let H=(X=Y.extensions)===null||X===void 0?void 0:X.pothosDrizzleLoader;if(!H)throw Error(`ModelLoader not found for type ${Y.name}`);return(G,z,w,D)=>{let K=KB(w,D.path,D.parentType.name);if(!K){for(let O of U)if(K=KB(w,D.path,O),K)break}if(K)return FW(w,D,K),$(G,z,w,D);return H(w).loadSelection(D,G).then((O)=>$(O,z,w,D))}}}s6.registerPlugin($m,Jm,{});function Xm($,J){return MH(`${$}:${J}`)}var W50=/^[A-Z_a-z]\w*$/;function Ym($){let J;try{J=VH($).split(":")}catch(Y){throw Y instanceof V0?new V0(`Invalid global ID: ${$}`):Y}let[W,X]=J;if(!W||!X||!W50.test(W))throw new V0(`Invalid global ID: ${$}`);return{typename:W,id:J.length>2?J.slice(1).join(":"):X}}var Um=S$(()=>new Map);async function hJ($,J,W,X){let Y=Um(J),U={},Z={};for(let G of X){if(G==null)continue;let{id:z,typename:w}=G,D=`${w}:${z}`;if(Y.has(D)){Z[D]=Y.get(D);continue}var H;U[w]=(H=U[w])!==null&&H!==void 0?H:new Set,U[w].add(z)}return await Promise.all(Object.keys(U).map(async(G)=>{var z;let w=[...U[G]],K=$.configStore.getTypeConfig(G,"Object").pothosOptions;var O,F;let M=(F=(O=K.brandLoadedObjects)!==null&&O!==void 0?O:(z=$.options.relay)===null||z===void 0?void 0:z.brandLoadedObjects)!==null&&F!==void 0?F:!0;(await X50($,J,W,w,G)).forEach((I,P)=>{if(M)ZW(I,G);Z[`${G}:${w[P]}`]=I})})),X.map((G)=>{var z;return G==null?null:(z=Z[`${G.typename}:${G.id}`])!==null&&z!==void 0?z:null})}async function X50($,J,W,X,Y){let U=Um(J),Z=$.configStore.getTypeConfig(Y,"Object"),H=Z.pothosOptions;if(H.loadMany){let G=Promise.resolve(H.loadMany(X,J));return Promise.all(X.map((z,w)=>{let D=G.then((K)=>K[w]).then((K)=>{return U.set(`${Z.name}:${z}`,K),K});return U.set(`${Z.name}:${z}`,D),D}))}if(H.loadOne)return Promise.all(X.map((G)=>{let z=Promise.resolve(H.loadOne(G,J)).then((w)=>{return U.set(`${Z.name}:${G}`,w),w});return U.set(`${Z.name}:${G}`,z),z}));if(H.loadManyWithoutCache)return H.loadManyWithoutCache(X,J);if(H.loadWithoutCache)return Promise.all(X.map((G)=>Promise.resolve(H.loadWithoutCache(G,J,W))));throw new V0(`${Z.name} does not support loading by id`)}function vH($){return`${$.slice(0,1).toUpperCase()}${$.slice(1)}`}function NB($,J,W,X){var Y;if((Y=$.options.relay)===null||Y===void 0?void 0:Y.encodeGlobalID)return $.options.relay.encodeGlobalID(J,W,X);return Xm(J,W)}function CH($,J,W,X,Y){var U;let Z=((U=$.options.relay)===null||U===void 0?void 0:U.decodeGlobalID)?$.options.relay.decodeGlobalID(J,W):Ym(J);if(Array.isArray(Y)){let z=Y.find(({typename:w})=>w===Z.typename);if(!z)throw new V0(`ID: ${J} is not of type: ${Y.map(({typename:w})=>w).join(", ")}`);if(z.parseId)return{...Z,id:z.parseId(Z.id,W)};return Z}if(Y){var H,G;let z=(G=X.schema.getType(Z.typename))===null||G===void 0?void 0:(H=G.extensions)===null||H===void 0?void 0:H.pothosParseGlobalID;if(z)return{...Z,id:z(Z.id,W)}}return Z}var TH=qJ.prototype;TH.globalIDList=function({resolve:J,...W}){return this.field({...W,type:["ID"],resolve:async(X,Y,U,Z)=>{let H=await J(X,Y,U,Z);if(!H)return H;if(UB(H),Array.isArray(H))return(await Promise.all(H)).map((G)=>G==null||typeof G==="string"?G:NB(this.builder,this.builder.configStore.getTypeConfig(G.type).name,String(G.id),U));return null}})};TH.globalID=function({resolve:J,...W}){return this.field({...W,type:"ID",resolve:async(X,Y,U,Z)=>{let H=await J(X,Y,U,Z);if(!H||typeof H!=="object")return H;let G=H;return NB(this.builder,this.builder.configStore.getTypeConfig(G.type).name,String(G.id),U)}})};TH.node=function({id:J,...W}){return this.field({...W,type:this.builder.nodeInterfaceRef(),nullable:!0,resolve:async(X,Y,U,Z)=>{let H=await J(X,Y,U,Z);if(H==null)return null;let G=typeof H==="string"?CH(this.builder,H,U,Z,!0):H&&{id:H.id,typename:this.builder.configStore.getTypeConfig(H.type).name};return(await hJ(this.builder,U,Z,[G]))[0]}})};TH.nodeList=function({ids:J,...W}){return this.field({...W,nullable:{list:!1,items:!0},type:[this.builder.nodeInterfaceRef()],resolve:async(X,Y,U,Z)=>{let H=await J(X,Y,U,Z);if(UB(H),!Array.isArray(H))return[];let z=(await Promise.all(H)).map((w)=>typeof w==="string"?CH(this.builder,w,U,Z,!0):w&&{id:w.id,typename:this.builder.configStore.getTypeConfig(w.type).name});return hJ(this.builder,U,Z,z)}})};TH.connection=function({type:J,edgesNullable:W,nodeNullable:X,...Y},U={},Z={}){var H;let G=U instanceof k$?U:new k$("Unnamed connection"),z=this.field({...(H=this.builder.options.relay)===null||H===void 0?void 0:H.defaultConnectionFieldOptions,...Y,type:G,args:{...Y.args,...this.arg.connectionArgs()}});if(!(U instanceof k$))z.onFirstUse((w)=>{var D;let K=(D=U.name)!==null&&D!==void 0?D:`${w.parentType}${vH(w.name)}${w.name.toLowerCase().endsWith("connection")?"":"Connection"}`;this.builder.configStore.associateParamWithRef(G,this.builder.connectionObject({type:J,edgesNullable:W,nodeNullable:X,...U,name:K},Z instanceof k$?Z:{name:`${K}Edge`,...Z}))});return z};var BB=DK.prototype;BB.globalIDList=function({for:J,...W}={}){var X,Y;return this.idList({...W,extensions:{...W.extensions,isRelayGlobalID:!0,relayGlobalIDFor:(Y=(X=J&&(Array.isArray(J)?J:[J]))===null||X===void 0?void 0:X.map((U)=>({typename:this.builder.configStore.getTypeConfig(U).name,parseId:"parseId"in U?U.parseId:void 0})))!==null&&Y!==void 0?Y:null}})};BB.globalID=function({for:J,...W}={}){var X,Y;return this.id({...W,extensions:{...W.extensions,isRelayGlobalID:!0,relayGlobalIDFor:(Y=(X=J&&(Array.isArray(J)?J:[J]))===null||X===void 0?void 0:X.map((U)=>({typename:this.builder.configStore.getTypeConfig(U).name,parseId:"parseId"in U?U.parseId:void 0})))!==null&&Y!==void 0?Y:null}})};BB.connectionArgs=function(){var J,W,X,Y,U,Z,H,G;return{before:this.field({...(J=this.builder.options.relay)===null||J===void 0?void 0:J.beforeArgOptions,type:(H=(W=this.builder.options.relay)===null||W===void 0?void 0:W.cursorType)!==null&&H!==void 0?H:"String",required:!1}),after:this.field({...(X=this.builder.options.relay)===null||X===void 0?void 0:X.afterArgOptions,type:(G=(Y=this.builder.options.relay)===null||Y===void 0?void 0:Y.cursorType)!==null&&G!==void 0?G:"String",required:!1}),first:this.field({...(U=this.builder.options.relay)===null||U===void 0?void 0:U.firstArgOptions,type:"Int",required:!1}),last:this.field({...(Z=this.builder.options.relay)===null||Z===void 0?void 0:Z.lastArgOptions,type:"Int",required:!1})}};function qH($,J,W,X,Y){W.addInterfaces([J.nodeInterfaceRef()]),W.addFields(()=>{var U,Z,H;return{[(H=(U=J.options.relay)===null||U===void 0?void 0:U.idFieldName)!==null&&H!==void 0?H:"id"]:new hf(J).globalID({nullable:!1,...(Z=J.options.relay)===null||Z===void 0?void 0:Z.idFieldOptions,...Y.id,args:{},resolve:(G,z,w,D)=>o6(Y.id.resolve(G,z,w,D),(K)=>({type:$,id:K}))})}}),W.updateConfig(({extensions:U,isTypeOf:Z,pothosOptions:H,...G})=>{return{...G,extensions:{...U,pothosParseGlobalID:Y.id.parse},pothosOptions:{...Y,...H},isTypeOf:Z!==null&&Z!==void 0?Z:typeof X==="function"?(z,w,D)=>{if(!z)return!1;if(z instanceof X)return!0;let K=Object.getPrototypeOf(z);try{if(K===null||K===void 0?void 0:K.constructor)return J.configStore.getTypeConfig(K.constructor).name===$}catch{}return!1}:void 0}})}function RB($,J,W){if(J in $)Object.defineProperty($,J,{value:W,enumerable:!0,configurable:!0,writable:!0});else $[J]=W;return $}var Y50=Symbol.for("Pothos.relayIDShapeKey"),U50=Y50;class SB extends k${constructor($,J,W,X){super(J),RB(this,U50,void 0),RB(this,"parseId",void 0),this.parseId=X.id.parse,qH(J,$,this,W,X)}}class jB extends ff{constructor($,J,W){super($,J),RB(this,"parseId",void 0),this.parseId=W.id.parse,qH(J,$,this,void 0,W)}}var Q9=s6.prototype,kB=new WeakMap,vB=new WeakMap,QK=new WeakMap,AK=new WeakMap;Q9.pageInfoRef=function(){var J,W;if(kB.has(this))return kB.get(this);let X=this.objectRef("PageInfo");kB.set(this,X);var Y,U;let{pageInfoCursorType:Z=(Y=(J=this.options.relay)===null||J===void 0?void 0:J.cursorType)!==null&&Y!==void 0?Y:"String",hasNextPageFieldOptions:H={},hasPreviousPageFieldOptions:G={},startCursorFieldOptions:z={},endCursorFieldOptions:w={}}=(U=this.options.relay)!==null&&U!==void 0?U:{};return X.implement({...(W=this.options.relay)===null||W===void 0?void 0:W.pageInfoTypeOptions,fields:(D)=>({hasNextPage:D.exposeBoolean("hasNextPage",{nullable:!1,...H}),hasPreviousPage:D.exposeBoolean("hasPreviousPage",{nullable:!1,...G}),startCursor:D.expose("startCursor",{nullable:!0,...z,type:Z}),endCursor:D.expose("endCursor",{nullable:!0,...w,type:Z})})}),X};Q9.nodeInterfaceRef=function(){var J,W,X;if(vB.has(this))return vB.get(this);let Y=this.interfaceRef("Node");vB.set(this,Y),Y.implement({resolveType:(H,G,z,w)=>{if(!H)return SJ(H,G,z,w);let D=$K(H);if(D)return this.configStore.getTypeConfig(D).name;try{if(typeof H==="object"){let K=H.__typename;if(K)return K;let O=H.__type;if(O){let F=this.configStore.getTypeConfig(O);if(F)return F.name}}}catch{}return SJ(H,G,z,w)},...(J=this.options.relay)===null||J===void 0?void 0:J.nodeTypeOptions,fields:(H)=>{var G,z,w;return{[(w=(G=this.options.relay)===null||G===void 0?void 0:G.idFieldName)!==null&&w!==void 0?w:"id"]:H.globalID({...(z=this.options.relay)===null||z===void 0?void 0:z.idFieldOptions,nullable:!1,resolve:(D)=>{throw new V0("id field not implemented")}})}}});let U=(W=this.options.relay)===null||W===void 0?void 0:W.nodeQueryOptions;if(U!==!1){let H=U===null||U===void 0?void 0:U.resolve;this.queryField("node",(G)=>{var z,w,D,K;return G.field({nullable:!0,...(z=this.options.relay)===null||z===void 0?void 0:z.nodeQueryOptions,type:Y,args:{id:G.arg.globalID({...U===null||U===void 0?void 0:(w=U.args)===null||w===void 0?void 0:w.id,required:!0,extensions:{relayGlobalIDAlwaysParse:!0,...U===null||U===void 0?void 0:(K=U.args)===null||K===void 0?void 0:(D=K.id)===null||D===void 0?void 0:D.extensions}})},resolve:H?(O,F,M,A)=>H(O,F,M,A,(I)=>o6(hJ(this,M,A,[F.id]),(P)=>P[0])):(O,F,M,A)=>o6(hJ(this,M,A,[F.id]),(I)=>I[0])})})}let Z=(X=this.options.relay)===null||X===void 0?void 0:X.nodesQueryOptions;if(Z!==!1){let H=Z===null||Z===void 0?void 0:Z.resolve;this.queryField("nodes",(G)=>{var z,w,D,K;return G.field({nullable:{list:!1,items:!0},...(z=this.options.relay)===null||z===void 0?void 0:z.nodesQueryOptions,type:[Y],args:{ids:G.arg.globalIDList({...Z===null||Z===void 0?void 0:(w=Z.args)===null||w===void 0?void 0:w.ids,required:!0,extensions:{relayGlobalIDAlwaysParse:!0,...Z===null||Z===void 0?void 0:(K=Z.args)===null||K===void 0?void 0:(D=K.ids)===null||D===void 0?void 0:D.extensions}})},resolve:H?(O,F,M,A)=>H(O,F,M,A,(I)=>hJ(this,M,A,F.ids)):(O,F,M,A)=>hJ(this,M,A,F.ids)})})}return Y};Q9.nodeRef=function(J,W){if(typeof J==="string")return new jB(this,J,W);return qH(J.name,this,J,void 0,W),J};Q9.node=function(J,{id:W,name:X,loadMany:Y,loadOne:U,loadWithoutCache:Z,loadManyWithoutCache:H,brandLoadedObjects:G,...z},w){s$(J);let D=typeof J==="string"?J:J instanceof xf?J.name:X,K=new SB(this,D,J,{id:W,loadMany:Y,loadOne:U,loadWithoutCache:Z,loadManyWithoutCache:H,brandLoadedObjects:G});if(typeof J!=="string")this.configStore.associateParamWithRef(J,K);return this.objectType(K,{name:D,...z},w),K};Q9.globalConnectionField=function(J,W){this.globalConnectionFields((X)=>({[J]:W(X)}))};Q9.globalConnectionFields=function(J){let W=(Y)=>{this.configStore.onPrepare(()=>{let U=this.configStore.getTypeConfig(Y);this.objectFields(Y,(Z)=>{let H=this.configStore.getFields(U.name),G={};for(let[z,w]of Object.entries(J(Z)))if(!H.has(z))G[z]=w;return G})})};var X;for(let Y of(X=QK.get(this))!==null&&X!==void 0?X:[])W(Y);if(!AK.has(this))AK.set(this,[]);AK.get(this).push(W)};var Zm=S$(()=>new Map);Q9.relayMutationField=function(J,W,{resolve:X,args:Y,...U},{name:Z=`${vH(J)}Payload`,outputFields:H,interfaces:G,...z}){var w,D,K;let{relay:{clientMutationIdInputOptions:O={},clientMutationIdFieldOptions:F={},mutationInputArgOptions:M={}}={}}=this.options,A=((w=this.options.relay)===null||w===void 0?void 0:w.clientMutationId)&&((D=this.options.relay)===null||D===void 0?void 0:D.clientMutationId)!=="omit",I,P="input";if(!W||W instanceof bf)I=W;else{var Q;let{name:_=`${vH(J)}Input`,argName:L="input",inputFields:R,...S}=W;P=L,I=this.inputType(_,{...(Q=this.options.relay)===null||Q===void 0?void 0:Q.defaultMutationInputTypeOptions,...S,fields:(k)=>{var T;return{...R(k),...A?{clientMutationId:k.id({...O,required:((T=this.options.relay)===null||T===void 0?void 0:T.clientMutationId)!=="optional"})}:{}}}})}let N=this.objectRef(Z).implement({...(K=this.options.relay)===null||K===void 0?void 0:K.defaultPayloadTypeOptions,...z,interfaces:G,fields:(_)=>{var L;return{...H(_),...A?{clientMutationId:_.id({nullable:((L=this.options.relay)===null||L===void 0?void 0:L.clientMutationId)==="optional",...F,resolve:(R,S,k,T)=>Zm(k).get(String(T.path.prev.key))})}:{}}}});return this.mutationField(J,(_)=>{var L;return _.field({...(L=this.options.relay)===null||L===void 0?void 0:L.relayMutationFieldOptions,...U,type:N,args:{...Y,...I?{[P]:_.arg({...M,type:I,required:!0})}:{}},resolve:(R,S,k,T)=>{if(I)Zm(k).set(String(T.path.key),S[P].clientMutationId);return X(R,S,k,T)}})}),{inputType:I,payloadType:N}};Q9.connectionObject=function({type:J,name:W,edgesNullable:X,nodeNullable:Y,edgesField:U,...Z},H){var G,z,w;s$(J);var D;let{edgesFieldOptions:{nullable:K={items:this.defaultFieldNullability,list:this.defaultFieldNullability},...O}={},pageInfoFieldOptions:F={}}=(D=this.options.relay)!==null&&D!==void 0?D:{},M=this.objectRef(W),A=H instanceof k$?H:this.edgeObject({name:`${W.replace(/Connection$/,"")}Edge`,...H,nodeNullable:Y,type:J}),I=Z.fields;var P;let{nodesOnConnection:Q}=(P=this.options.relay)!==null&&P!==void 0?P:{},N=X!==null&&X!==void 0?X:K;var _;let L=!!((_=typeof N==="object"?N.list:N)!==null&&_!==void 0?_:!0);var R;let S=typeof N==="object"&&"items"in N?N.items:(R=(z=this.options.relay)===null||z===void 0?void 0:(G=z.nodeFieldOptions)===null||G===void 0?void 0:G.nullable)!==null&&R!==void 0?R:!0;if(this.objectType(M,{...(w=this.options.relay)===null||w===void 0?void 0:w.defaultConnectionTypeOptions,...Z,fields:(T)=>{var q,h,x;return{pageInfo:T.field({nullable:!1,...F,type:this.pageInfoRef(),resolve:(b)=>b.pageInfo}),edges:T.field({nullable:X!==null&&X!==void 0?X:K,...O,...U,type:[A],resolve:(b)=>b.edges}),...Q?{nodes:T.field({...typeof Q==="object"?Q:{},type:[J],nullable:{list:L,items:S||((x=Y!==null&&Y!==void 0?Y:(h=this.options.relay)===null||h===void 0?void 0:(q=h.nodeFieldOptions)===null||q===void 0?void 0:q.nullable)!==null&&x!==void 0?x:this.defaultFieldNullability)},resolve:(b)=>o6(b.edges,(r)=>{if(!r)return r;if(Array.isArray(r))return r.map((d)=>d===null||d===void 0?void 0:d.node);if(r[Symbol.asyncIterator])return async function*(){for await(let d of r)yield d.node}();return function*(){for(let d of r)if(vJ(d))yield Promise.resolve(d).then((X0)=>X0===null||X0===void 0?void 0:X0.node);else yield d===null||d===void 0?void 0:d.node}()})})}:{},...I===null||I===void 0?void 0:I(T)}}}),!QK.has(this))QK.set(this,[]);QK.get(this).push(M);var k;for(let T of(k=AK.get(this))!==null&&k!==void 0?k:[])T(M);return M};Q9.edgeObject=function({type:J,name:W,nodeNullable:X,nodeField:Y,...U}){var Z,H;s$(J);var G,z;let{edgeCursorType:w=(G=(Z=this.options.relay)===null||Z===void 0?void 0:Z.cursorType)!==null&&G!==void 0?G:"String",cursorFieldOptions:D={},nodeFieldOptions:{nullable:K=this.defaultFieldNullability,...O}={}}=(z=this.options.relay)!==null&&z!==void 0?z:{},F=this.objectRef(W),M=U.fields;return this.objectType(F,{...(H=this.options.relay)===null||H===void 0?void 0:H.defaultEdgeTypeOptions,...U,fields:(A)=>({node:A.field({nullable:X!==null&&X!==void 0?X:K,...O,...Y,type:J,resolve:(I)=>I.node}),cursor:A.expose("cursor",{nullable:!1,type:w,...D}),...M===null||M===void 0?void 0:M(A)})}),F};function Z50($,J,W){if(J in $)Object.defineProperty($,J,{value:W,enumerable:!0,configurable:!0,writable:!0});else $[J]=W;return $}var Hm="relay",zm=Hm;class Gm extends D9{onOutputFieldConfig($){let J=kf($.args,this.buildCache,(Y)=>{var U;if((U=Y.extensions)===null||U===void 0?void 0:U.isRelayGlobalID){var Z,H,G,z;return(z=(G=(Z=Y.extensions)===null||Z===void 0?void 0:Z.relayGlobalIDFor)!==null&&G!==void 0?G:(H=Y.extensions)===null||H===void 0?void 0:H.relayGlobalIDAlwaysParse)!==null&&z!==void 0?z:!1}return null},this.mappingCache);if(!J)return $;let W=Cf(J,(Y,U,Z,H)=>{var G;return CH(this.builder,String(Y),Z,H,(G=U.value)!==null&&G!==void 0?G:!1)});var X;return{...$,argMappers:[...(X=$.argMappers)!==null&&X!==void 0?X:[],(Y,U,Z)=>W(Y,void 0,U,Z)]}}constructor(...$){super(...$),Z50(this,"mappingCache",new Map)}}s6.registerPlugin(Hm,Gm,{v3:($)=>{var J,W,X,Y,U,Z,H,G,z,w,D,K,O,F,M,A,I;return{relayOptions:void 0,relay:{...$.relayOptions,clientMutationId:(z=(J=$.relayOptions)===null||J===void 0?void 0:J.clientMutationId)!==null&&z!==void 0?z:"required",cursorType:(w=(W=$.relayOptions)===null||W===void 0?void 0:W.cursorType)!==null&&w!==void 0?w:"ID",edgeCursorType:(K=(D=(X=$.relayOptions)===null||X===void 0?void 0:X.edgeCursorType)!==null&&D!==void 0?D:(Y=$.relayOptions)===null||Y===void 0?void 0:Y.cursorType)!==null&&K!==void 0?K:"String",pageInfoCursorType:(F=(O=(U=$.relayOptions)===null||U===void 0?void 0:U.pageInfoCursorType)!==null&&O!==void 0?O:(Z=$.relayOptions)===null||Z===void 0?void 0:Z.cursorType)!==null&&F!==void 0?F:"String",edgesFieldOptions:{...$.relayOptions.edgesFieldOptions,nullable:(M=(H=$.relayOptions.edgesFieldOptions)===null||H===void 0?void 0:H.nullable)!==null&&M!==void 0?M:{list:!1,items:!0}},nodeFieldOptions:{...$.relayOptions.nodeFieldOptions,nullable:(A=(G=$.relayOptions.nodeFieldOptions)===null||G===void 0?void 0:G.nullable)!==null&&A!==void 0?A:!1},brandLoadedObjects:(I=$.relayOptions.brandLoadedObjects)!==null&&I!==void 0?I:!1}}}});var wm=qJ.prototype;function H50($){return`${$.slice(0,1).toUpperCase()}${$.slice(1)}`}function G50({parentTypeName:$,fieldName:J}){return`${$}${H50(J)}Input`}wm.fieldWithInput=function({typeOptions:{name:J,...W}={},argOptions:{name:X="input",...Y}={},args:U,input:Z,...H}){var G;let z=this.builder.inputRef(J!==null&&J!==void 0?J:"UnnamedWithInput"),w=this.field({args:{...U,[X]:this.arg({required:!0,...(G=this.builder.options.withInput)===null||G===void 0?void 0:G.argOptions,...Y,type:z})},...H});return w.onFirstUse((D)=>{var K,O;let{name:F=G50,...M}=(O=(K=this.builder.options.withInput)===null||K===void 0?void 0:K.typeOptions)!==null&&O!==void 0?O:{},A=J!==null&&J!==void 0?J:F({parentTypeName:D.parentType,fieldName:D.name});z.name=A,this.builder.inputType(z,{fields:()=>Z,...M,...W})}),w};Object.defineProperty(wm,"input",{get:function(){return new DK(this.builder,"InputObject")}});var Dm="withInput",Om=Dm;class Km extends D9{}s6.registerPlugin(Dm,Km);var xJ=new s6({plugins:[zm,Om,Wm],drizzle:{client:u8,relations:bG,getTableConfig:Sk}});xJ.queryType({});var CB=xJ.drizzleObject("user",{name:"User",description:"A user of the system",fields:($)=>({email:$.exposeString("email"),name:$.exposeString("name"),emailVerified:$.exposeBoolean("emailVerified"),image:$.exposeString("image",{nullable:!0}),createdAt:$.string({resolve:(J)=>J.createdAt?.toISOString()??""}),fullName:$.string({resolve:(J,W,X,Y)=>`${J.name}`})})});xJ.drizzleObject("account",{name:"Account",fields:($)=>({id:$.exposeString("id"),providerId:$.exposeString("providerId"),accountId:$.exposeString("accountId"),createdAt:$.string({resolve:(J)=>J.createdAt?.toISOString()??""})})});xJ.drizzleObject("session",{name:"Session",fields:($)=>({id:$.exposeString("id"),token:$.exposeString("token"),expiresAt:$.string({resolve:(J)=>J.expiresAt?.toISOString()??""}),ipAddress:$.exposeString("ipAddress",{nullable:!0}),userAgent:$.exposeString("userAgent",{nullable:!0})})});xJ.queryType({description:"The query type for the user module",fields:($)=>({me:$.field({type:CB,nullable:!0,resolve:async(J,W,X)=>{let Y=X.session;if(!Y?.user?.id)return null;let[U]=await X.db.select().from(U6).where(y1(U6.id,Y.user.id)).limit(1);return U??null}}),users:$.field({type:[CB],resolve:async(J,W,X)=>{return u8.select().from(U6)}}),user:$.field({type:CB,nullable:!0,args:{id:$.arg.string({required:!0})},resolve:async(J,W,X)=>{let[Y]=await X.db.select().from(U6).where(y1(U6.id,W.id)).limit(1);return Y??null}})})});var Fm=xJ.toSchema({});var bJ={red:"\x1B[31m",yellow:"\x1B[33m",magenta:"\x1B[35m",cyan:"\x1B[36m",reset:"\x1B[0m"},Em=bJ.yellow+"WARN"+bJ.reset,Mm=bJ.cyan+"INFO"+bJ.reset,Vm=bJ.red+"ERR"+bJ.reset,Qm=bJ.magenta+"DEBUG"+bJ.reset,hH={debug:0,info:1,warn:2,error:3,silent:4},IK=()=>{},LK=($)=>(...J)=>console.log($,...J),z50=console.debug?(...$)=>console.debug(Qm,...$):LK(Qm),w50=console.info?(...$)=>console.info(Mm,...$):LK(Mm),D50=console.warn?(...$)=>console.warn(Em,...$):LK(Em),K50=console.error?(...$)=>console.error(Vm,...$):LK(Vm),PK=($=globalThis.process?.env.DEBUG==="1"?"debug":"info")=>{let J=hH[$];return{debug:J>hH.debug?IK:z50,info:J>hH.info?IK:w50,warn:J>hH.warn?IK:D50,error:J>hH.error?IK:K50}};var _K=Symbol.for("@whatwg-node/promise-helpers/FakePromise");function G1($){return $?.then!=null}function O50($){let J=$;return J&&J.then&&J.catch&&J.finally}function W0($,J,W,X){let Y=d0().then($).then(J,W);if(X)Y=Y.finally(X);return bH(Y)}function d0($){if($&&O50($))return $;if(G1($))return{then:(J,W)=>d0($.then(J,W)),catch:(J)=>d0($.then((W)=>W,J)),finally:(J)=>d0(J?M50($,J):$),[Symbol.toStringTag]:"Promise"};return{then(J){if(J)try{return d0(J($))}catch(W){return nY(W)}return this},catch(){return this},finally(J){if(J)try{return d0(J()).then(()=>$,()=>$)}catch(W){return nY(W)}return this},[Symbol.toStringTag]:"Promise",__fakePromiseValue:$,[_K]:"resolved"}}function xH(){if(Promise.withResolvers)return Promise.withResolvers();let $,J;return{promise:new Promise(function(Y,U){$=Y,J=U}),get resolve(){return $},get reject(){return J}}}function z4($,J,W){if($?.length===0)return;let X=$[Symbol.iterator](),Y=0;function U(){let{done:Z,value:H}=X.next();if(Z)return;let G=!1;function z(){G=!0}return W0(function(){return J(H,z,Y++)},function(D){if(D)W?.push(D);if(G)return;return U()})}return U()}function nY($){return{then(J,W){if(W)try{return d0(W($))}catch(X){return nY(X)}return this},catch(J){if(J)try{return d0(J($))}catch(W){return nY(W)}return this},finally(J){if(J)try{J()}catch(W){return nY(W)}return this},__fakeRejectError:$,[Symbol.toStringTag]:"Promise",[_K]:"rejected"}}function A9($,J,W,X){if(Symbol.asyncIterator in $)$=$[Symbol.asyncIterator]();let Y,U,Z;if(X){let z;Z=(w)=>{return z||=W0(X,()=>w,()=>w),z}}if(typeof $.return==="function")Y=$.return,U=(z)=>{let w=()=>{throw z};return Y.call($).then(w,w)};function H(z){if(z.done)return Z?Z(z):z;return W0(()=>z.value,(w)=>W0(()=>J(w),Am,U))}let G;if(W){let z,w=W;G=(D)=>{return z||=W0(()=>D,(K)=>W0(()=>w(K),Am,U)),z}}return{next(){return $.next().then(H,G)},return(){let z=Y?Y.call($).then(H,G):d0({value:void 0,done:!0});return Z?z.then(Z):z},throw(z){if(typeof $.throw==="function")return $.throw(z).then(H,G);if(U)return U(z);return nY(z)},[Symbol.asyncIterator](){return this}}}function Am($){return{value:$,done:!1}}function F50($){return $?.[_K]==="resolved"}function E50($){return $?.[_K]==="rejected"}function M50($,J){if("finally"in $)return $.finally(J);return $.then((W)=>{let X=J();return G1(X)?X.then(()=>W):W},(W)=>{let X=J();if(G1(X))return X.then(()=>{throw W});else throw W})}function bH($){if(F50($))return $.__fakePromiseValue;if(E50($))throw $.__fakeRejectError;return $}var Im='<!doctype html><html lang=en><head><meta charset=utf-8><title>__TITLE__</title><link rel=icon href=https://raw.githubusercontent.com/graphql-hive/graphql-yoga/refs/heads/main/website/src/app/favicon.ico><link crossorigin rel=stylesheet href=https://unpkg.com/@graphql-yoga/graphiql@4.4.1/dist/graphiql.css></head><body id=body class=no-focus-outline><noscript>You need to enable JavaScript to run this app.</noscript><div id=root>Loading __TITLE__...</div><script>function prepareBlob(r){const o=new Blob([r],{type:"application/javascript"});return URL.createObjectURL(o)}const workers={},workerUrls={editorWorkerService:"https://unpkg.com/@graphql-yoga/graphiql@4.4.1/dist/monacoeditorwork/editor.worker.bundle.js",json:"https://unpkg.com/@graphql-yoga/graphiql@4.4.1/dist/monacoeditorwork/json.worker.bundle.js",graphql:"https://unpkg.com/@graphql-yoga/graphiql@4.4.1/dist/monacoeditorwork/graphql.worker..bundle.js"};function prepareWorkers(){return Promise.all(Object.entries(workerUrls).map(async([r,o])=>{const e=await fetch(o),t=await e.text();workers[r]=prepareBlob(t)}))}self.MonacoEnvironment={globalAPI:!1,getWorkerUrl:function(r,o){return workers[o]}}</script><script src=https://unpkg.com/@graphql-yoga/graphiql@4.4.1/dist/yoga-graphiql.umd.js></script><script>prepareWorkers().finally(()=>{YogaGraphiQL.renderYogaGraphiQL(root,__OPTS__)})</script></body></html>';function V50({headers:$,method:J}){return J==="GET"&&!!$?.get("accept")?.includes("text/html")}var Q50=($)=>Im.replace("__TITLE__",$?.title||"Yoga GraphiQL").replace("__OPTS__",JSON.stringify($??{}));function Lm($){let J=$.logger??console,W;if(typeof $?.options==="function")W=$?.options;else if(typeof $?.options==="object")W=()=>$?.options;else if($?.options===!1)W=()=>!1;else W=()=>({});let X=$?.render??Q50,Y,U=({URLPattern:Z})=>{return Y||=new Z({pathname:$.graphqlEndpoint}),Y};return{onRequest({request:Z,serverContext:H,fetchAPI:G,endResponse:z,url:w}){if(V50(Z)&&(Z.url.endsWith($.graphqlEndpoint)||Z.url.endsWith(`${$.graphqlEndpoint}/`)||w.pathname===$.graphqlEndpoint||w.pathname===`${$.graphqlEndpoint}/`||U(G).test(w)))return J.debug("Rendering GraphiQL"),W0(()=>W(Z,H),(D)=>{if(D)return W0(()=>X({...D===!0?{}:D}),(K)=>{let O=new G.Response(K,{headers:{"Content-Type":"text/html"},status:200});z(O)})})}}}var Pm=($)=>{if($==null)return{};if(wH($))return{onPluginInit({setSchema:W}){W($)}};if("then"in $){let W;return{onRequestParse(){return{onRequestParseDone(){if(!W)return W0(()=>$,(X)=>{W=X})}}},onEnveloped({setSchema:X}){if(!W)throw Error("You provide a promise of a schema but it hasn't been resolved yet. Make sure you use this plugin with GraphQL Yoga.");X(W)}}}let J=new WeakMap;return{onRequestParse({request:W,serverContext:X}){return{onRequestParseDone(){return W0(()=>$({...X,request:W}),(Y)=>{J.set(W,Y)})}}},onEnveloped({setSchema:W,context:X}){if(X?.request==null)throw Error("Request object is not available in the context. Make sure you use this plugin with GraphQL Yoga.");let Y=J.get(X.request);if(Y==null)throw Error("No schema found for this request. Make sure you use this plugin with GraphQL Yoga.");W(Y)}}};function b4($){return NK($,[])}function NK($,J){switch(typeof $){case"string":return JSON.stringify($);case"function":return $.name?`[function ${$.name}]`:"[function]";case"object":return A50($,J);default:return String($)}}function _m($){if($.name="GraphQLError")return $.toString();return`${$.name}: ${$.message};
 ${$.stack}`}function A50($,J){if($===null)return"null";if($ instanceof Error){if($.name==="AggregateError")return _m($)+`
`+Nm($.errors,J);return _m($)}if(J.includes($))return"[Circular]";let W=[...J,$];if(I50($)){let X=$.toJSON();if(X!==$)return typeof X==="string"?X:NK(X,W)}else if(Array.isArray($))return Nm($,W);return L50($,W)}function I50($){return typeof $.toJSON==="function"}function L50($,J){let W=Object.entries($);if(W.length===0)return"{}";if(J.length>3)return"["+P50($)+"]";return"{ "+W.map(([Y,U])=>Y+": "+NK(U,J)).join(", ")+" }"}function Nm($,J){if($.length===0)return"[]";if(J.length>3)return"[Array]";let W=$.length,X=[];for(let Y=0;Y<W;++Y)X.push(NK($[Y],J));return"["+X.join(", ")+"]"}function P50($){let J=Object.prototype.toString.call($).replace(/^\[object /,"").replace(/]$/,"");if(J==="Object"&&typeof $.constructor==="function"){let W=$.constructor.name;if(typeof W==="string"&&W!=="")return W}return J}var _50=["message","locations","path","nodes","source","positions","originalError","name","stack","extensions"];function N50($){return $!=null&&typeof $==="object"&&Object.keys($).every((J)=>_50.includes(J))}function Y0($,J){if(J?.originalError&&!(J.originalError instanceof Error)&&N50(J.originalError))J.originalError=Y0(J.originalError.message,J.originalError);if(iZ.major>=17)return new m($,J);return new m($,J?.nodes,J?.source,J?.positions,J?.path,J?.originalError,J?.extensions)}function Bm($){return $!=null&&typeof $==="object"&&Symbol.iterator in $}function TB($){return typeof $==="object"&&$!==null}function Rm($,J,W){let X=W;for(let Y of $)X=W0(()=>X,(U)=>J(U,Y));return X}function BK($,J){return Object.prototype.hasOwnProperty.call($,J)}function qB($,J,W={}){let X={},U=(J.arguments??[]).reduce((Z,H)=>({...Z,[H.name.value]:H}),{});for(let{name:Z,type:H,defaultValue:G}of $.args){let z=U[Z];if(!z){if(G!==void 0)X[Z]=G;else if(M0(H))throw Y0(`Argument "${Z}" of required type "${b4(H)}" was not provided.`,{nodes:[J]});continue}let w=z.value,D=w.kind===v.NULL;if(w.kind===v.VARIABLE){let O=w.name.value;if(W==null||!BK(W,O)){if(G!==void 0)X[Z]=G;else if(M0(H))throw Y0(`Argument "${Z}" of required type "${b4(H)}" was provided the variable "$${O}" which was not provided a runtime value.`,{nodes:[w]});continue}D=W[O]==null}if(D&&M0(H))throw Y0(`Argument "${Z}" of non-null type "${b4(H)}" must not be null.`,{nodes:[w]});let K=a6(w,H,W);if(K===void 0)throw Y0(`Argument "${Z}" has invalid value ${$1(w)}.`,{nodes:[w]});X[Z]=K}return X}function gJ($){let J=new WeakMap;return function(X){let Y=J.get(X);if(Y===void 0){let U=$(X);return J.set(X,U),U}return Y}}function Sm($){let J=new WeakMap;return function(X,Y,U){let Z=J.get(X);if(!Z){Z=new WeakMap,J.set(X,Z);let z=new WeakMap;Z.set(Y,z);let w=$(X,Y,U);return z.set(U,w),w}let H=Z.get(Y);if(!H){H=new WeakMap,Z.set(Y,H);let z=$(X,Y,U);return H.set(U,z),z}let G=H.get(U);if(G===void 0){let z=$(X,Y,U);return H.set(U,z),z}return G}}function jm($){let J=new WeakMap;return function(X,Y,U,Z,H){let G=J.get(X);if(!G){G=new WeakMap,J.set(X,G);let O=new WeakMap;G.set(Y,O);let F=new WeakMap;O.set(U,F);let M=new WeakMap;F.set(Z,M);let A=$(X,Y,U,Z,H);return M.set(H,A),A}let z=G.get(Y);if(!z){z=new WeakMap,G.set(Y,z);let O=new WeakMap;z.set(U,O);let F=new WeakMap;O.set(Z,F);let M=$(X,Y,U,Z,H);return F.set(H,M),M}let w=z.get(U);if(!w){w=new WeakMap,z.set(U,w);let O=new WeakMap;w.set(Z,O);let F=$(X,Y,U,Z,H);return O.set(H,F),F}let D=w.get(Z);if(!D){D=new WeakMap,w.set(Z,D);let O=$(X,Y,U,Z,H);return D.set(H,O),O}let K=D.get(H);if(K===void 0){let O=$(X,Y,U,Z,H);return D.set(H,O),O}return K}}function km($,J,W){let Y=vm($).get(J);if(Y==null)throw Y0(`Schema is not configured to execute ${J} operation.`,{nodes:W});return Y}var u71=gJ(function(J){let W=B50(J);return new Set([...W].map((X)=>X.name))}),B50=gJ(function(J){let W=vm(J);return new Set(W.values())}),vm=gJ(function(J){let W=new Map,X=J.getQueryType();if(X)W.set("query",X);let Y=J.getMutationType();if(Y)W.set("mutation",Y);let U=J.getSubscriptionType();if(U)W.set("subscription",U);return W});class iY extends Map{get[Symbol.toStringTag](){return"AccumulatorMap"}add($,J){let W=this.get($);if(W===void 0)this.set($,[J]);else W.push(J)}}var Cm=new o$({name:"defer",description:"Directs the executor to defer this fragment when the `if` argument is true or undefined.",locations:[z0.FRAGMENT_SPREAD,z0.INLINE_FRAGMENT],args:{if:{type:new L0(n1),description:"Deferred when true or undefined.",defaultValue:!0},label:{type:Z1,description:"Unique name"}}}),Tm=new o$({name:"stream",description:"Directs the executor to stream plural fields when the `if` argument is true or undefined.",locations:[z0.FIELD],args:{if:{type:new L0(n1),description:"Stream when true or undefined.",defaultValue:!0},label:{type:Z1,description:"Unique name"},initialCount:{defaultValue:0,type:Z9,description:"Number of items to return immediately"}}});function tY($,J,W,X,Y,U,Z,H){for(let G of Y.selections)switch(G.kind){case v.FIELD:{if(!hB(W,G))continue;U.add(R50(G),G);break}case v.INLINE_FRAGMENT:{if(!hB(W,G)||!qm($,G,X))continue;let z=hm(W,G);if(z){let w=new iY;tY($,J,W,X,G.selectionSet,w,Z,H),Z.push({label:z.label,fields:w})}else tY($,J,W,X,G.selectionSet,U,Z,H);break}case v.FRAGMENT_SPREAD:{let z=G.name.value;if(!hB(W,G))continue;let w=hm(W,G);if(H.has(z)&&!w)continue;let D=J[z];if(!D||!qm($,D,X))continue;if(!w)H.add(z);if(w){let K=new iY;tY($,J,W,X,D.selectionSet,K,Z,H),Z.push({label:w.label,fields:K})}else tY($,J,W,X,D.selectionSet,U,Z,H);break}}}function xB($,J,W,X,Y){let U=new iY,Z=[];return tY($,J,W,X,Y,U,Z,new Set),{fields:U,patches:Z}}function hB($,J){if(R$(z9,J,$)?.if===!0)return!1;if(R$(G9,J,$)?.if===!1)return!1;return!0}function qm($,J,W){let X=J.typeCondition;if(!X)return!0;let Y=g1($,X);if(Y===W)return!0;if(a4(Y))return $.getPossibleTypes(Y).includes(W);return!1}function R50($){return $.alias?$.alias.value:$.name.value}function hm($,J){let W=R$(Cm,J,$);if(!W)return;if(W.if===!1)return;return{label:typeof W.label==="string"?W.label:void 0}}var xm=jm(function(J,W,X,Y,U){let Z=new iY,H=new Set,G=[],z={fields:Z,patches:G};for(let w of U)if(w.selectionSet)tY(J,W,X,Y,w.selectionSet,Z,G,H);return z});function aY($){return $?.[Symbol.asyncIterator]!=null}function VW($,J,W){return{prev:$,key:J,typename:W}}function g4($){let J=[],W=$;while(W)J.push(W.key),W=W.prev;return J.reverse()}function bm($){return $.map((J)=>typeof J==="number"?"["+J.toString()+"]":"."+J).join("")}function oY($,J){let W={...J,...$};for(let X of Object.keys(W))if(X in $&&X in J)W[X]=(Y,U)=>$[X](Y,()=>J[X](Y,U));return W}var QW=($)=>({fn(J,W){if(!J)return W;return(...X)=>{let Y;return J($,()=>{Y=W(...X)}),Y}},asyncFn(J,W){if(!J)return W;return(...X)=>{let Y;return W0(()=>J($,()=>{return Y=W(...X),G1(Y)?Y.then(()=>{return}):void 0}),()=>{return Y})}}});var gm=new WeakMap;var DX1=Symbol("ENVELOP_IS_INTROSPECTION");function S50($){return $.length===1?$[0]:{schema:$[0],document:$[1],rootValue:$[2],contextValue:$[3],variableValues:$[4],operationName:$[5],fieldResolver:$[6],subscribeFieldResolver:$[7]}}var bB=($)=>(...J)=>$(S50(J));function j50($){return $.length===1?$[0]:{schema:$[0],document:$[1],rootValue:$[2],contextValue:$[3],variableValues:$[4],operationName:$[5],fieldResolver:$[6],typeResolver:$[7]}}var gB=($)=>(...J)=>$(j50(J));function C$($){return typeof $==="object"&&$!=null&&typeof $[Symbol.asyncIterator]==="function"}function fB($,J){if(C$($.result))return{onNext:J};J({args:$.args,result:$.result,setResult:$.setResult});return}function mB($,J){let W;function X(){if(!W)W=$[Symbol.asyncIterator]();return W}let Y=!1;return{[Symbol.asyncIterator](){return this},next(){return X().next().then((U)=>{if(U.done&&Y===!1)Y=!0,J();return U})},return(){let U=X().return?.();if(Y===!1)Y=!0,J();return U||d0({done:!0,value:void 0})},throw(U){let Z=X().throw?.();if(Z)return Z;throw U},[Symbol.asyncDispose||Symbol.for("Symbol.asyncDispose")](){return d0()}}}function fm($,J){let W;function X(){if(!W)W=$[Symbol.asyncIterator]();return W}return{[Symbol.asyncIterator](){return this},next(){return X().next().catch((Y)=>{return J(Y),{done:!0,value:void 0}})},return(){return X().return?.()||d0({done:!0,value:void 0})},throw(Y){let U=X().throw?.();if(U)return U;throw Y},[Symbol.asyncDispose||Symbol.for("Symbol.asyncDispose")](){return d0()}}}function RK($){throw Error(`No \`${$}\` function found! Register it using "useEngine" plugin.`)}function mm({plugins:$}){let J=null,W=!1,X=()=>RK("parse"),Y=()=>RK("validate"),U=()=>RK("execute"),Z=()=>RK("subscribe"),H,G=(Q,N=-1)=>{if(J===Q)return;if(J=Q,W){for(let[_,L]of $.entries())if(_!==N)L.onSchemaChange&&L.onSchemaChange({schema:J,replaceSchema:(R)=>{G(R,_)}})}},z=[];for(let Q=0;Q<$.length;Q++){let N=$[Q],_=[];N.onPluginInit?.({plugins:$,addPlugin:(L)=>{_.push(L)},setSchema:(L)=>G(L,Q),registerContextErrorHandler:(L)=>z.push(L)}),_.length&&$.splice(Q+1,0,..._)}let w={init:[],parse:[],validate:[],subscribe:[],execute:[],context:[]};for(let{onContextBuilding:Q,onExecute:N,onParse:_,onSubscribe:L,onValidate:R,onEnveloped:S,instrumentation:k}of $)if(S&&w.init.push(S),Q&&w.context.push(Q),N&&w.execute.push(N),_&&w.parse.push(_),L&&w.subscribe.push(L),R&&w.validate.push(R),k)H=H?oY(H,k):k;let D=(Q)=>{for(let[N,_]of w.init.entries())_({context:Q,extendContext:(L)=>{if(!Q)return;Object.assign(Q,L)},setSchema:(L)=>G(L,N)})},K=w.parse.length?(Q)=>(N,_)=>{let L=null,R=X,S=Q,k=[];for(let T of w.parse){let q=T({context:S,extendContext:(h)=>{Object.assign(S,h)},params:{source:N,options:_},parseFn:R,setParseFn:(h)=>{R=h},setParsedDocument:(h)=>{L=h}});if(q)k.push(q)}if(L===null)try{L=R(N,_)}catch(T){L=T}for(let T of k)T({context:S,extendContext:(q)=>{Object.assign(S,q)},replaceParseResult:(q)=>{L=q},result:L});if(L===null)throw Error("Failed to parse document.");if(L instanceof Error)throw L;return gm.set(L,N.toString()),L}:()=>X,O=w.validate.length?(Q)=>(N,_,L,R,S)=>{let k=L?[...L]:void 0,T=Y,q=null,h=Q,x=[];for(let r of w.validate){let d=r({context:h,extendContext:(X0)=>{Object.assign(h,X0)},params:{schema:N,documentAST:_,rules:k,typeInfo:R,options:S},validateFn:T,addValidationRule:(X0)=>{if(!k)k=[];k.push(X0)},setValidationFn:(X0)=>{T=X0},setResult:(X0)=>{q=X0}});d&&x.push(d)}if(!q)q=T(N,_,k,R,S);if(!q)return;let b=q.length===0;for(let r of x)r({valid:b,result:q,context:h,extendContext:(d)=>{Object.assign(h,d)},setResult:(d)=>{q=d}});return q}:()=>Y,F=w.context.length?(Q)=>(N)=>{let _=[],L=Q;if(N)Object.assign(L,N);let R=!1;return W0(()=>z4(w.context,(S,k)=>S({context:L,extendContext:(T)=>{Object.assign(L,T)},breakContextBuilding:()=>{R=!0,k()}}),_),()=>{if(!R)return W0(()=>z4(_,(S)=>S({context:L,extendContext(k){Object.assign(L,k)}})),()=>L);return L},(S)=>{let k=S;for(let T of z)T({context:L,error:k,setError:(q)=>{k=q}});throw k})}:(Q)=>(N)=>{if(N)Object.assign(Q,N);return Q},A=w.subscribe.length?bB((Q)=>{let N=Z,_=[],L=Q.contextValue||{},R;return W0(()=>z4(w.subscribe,(S,k)=>S({subscribeFn:N,setSubscribeFn:(T)=>{N=T},context:L,extendContext:(T)=>{Object.assign(L,T)},args:Q,setResultAndStopExecution:(T)=>{R=T,k()}}),_),()=>{let S=[],k=[];for(let{onSubscribeResult:T,onSubscribeError:q}of _){if(T)S.push(T);if(q)k.push(q)}return W0(()=>R||N(Q),(T)=>{let q=[],h=[];for(let x of S){let b=x({args:Q,result:T,setResult:(r)=>{T=r}});if(b){if(b.onNext)q.push(b.onNext);if(b.onEnd)h.push(b.onEnd)}}if(q.length&&C$(T))T=A9(T,(x)=>W0(()=>z4(q,(b)=>b({args:Q,result:x,setResult:(r)=>x=r})),()=>x));if(h.length&&C$(T))T=mB(T,()=>{for(let x of h)x()});if(k.length&&C$(T))T=fm(T,(x)=>{let b=x;for(let r of k)r({error:b,setError:(d)=>{b=d}});throw b});return T})})}):bB(Z),P=w.execute.length?gB((Q)=>{let N=U,_,L=[],R=[],S=Q.contextValue||{};return W0(()=>z4(w.execute,(k,T)=>k({executeFn:N,setExecuteFn:(q)=>{N=q},setResultAndStopExecution:(q)=>{_=q,T()},context:S,extendContext:(q)=>{if(typeof q==="object")Object.assign(S,q);else throw Error(`Invalid context extension provided! Expected "object", got: "${JSON.stringify(q)}" (${typeof q})`)},args:Q}),L),()=>W0(()=>_||N({...Q,contextValue:S}),(k)=>W0(()=>z4(L,(T)=>T.onExecuteDone?.({args:Q,result:k,setResult:(q)=>{k=q}}),R),()=>{let T=[],q=[];for(let{onNext:h,onEnd:x}of R){if(h)T.push(h);if(x)q.push(x)}if(T.length&&C$(k))k=A9(k,(h)=>W0(()=>z4(T,(x)=>x({args:Q,result:h,setResult:(b)=>{h=b}})),()=>h));if(q.length&&C$(k))k=mB(k,()=>{for(let h of q)h()});return k})))}):gB(U);if(W=!0,J)for(let[Q,N]of $.entries())N.onSchemaChange?.({schema:J,replaceSchema:(_)=>G(_,Q)});return{getCurrentSchema(){return J},init:D,parse:K,validate:O,execute:P,subscribe:A,contextFactory:F,instrumentation:H}}function k50($){return $!=null}function ym($){let J=$.plugins.filter(k50),W=mm({plugins:J}),X=W.instrumentation,Y=(U={})=>{let Z=QW({context:U}),H=W;return Z.fn(X?.init,W.init)(U),{parse:Z.fn(X?.parse,H.parse(U)),validate:Z.fn(X?.validate,H.validate(U)),contextFactory:Z.fn(X?.context,H.contextFactory(U)),execute:Z.asyncFn(X?.execute,H.execute),subscribe:Z.asyncFn(X?.subscribe,H.subscribe),schema:H.getCurrentSchema()}};return Y._plugins=J,Y}var v50="Unexpected error.";function C50($){return $ instanceof Error&&$.name==="GraphQLError"}function cm($){if(C50($)){if($.originalError!=null)return cm($.originalError);return!0}return!1}function T50($,J,W){let X=Error($);if(X.name="GraphQLError",W){let Y=J instanceof Error?{message:J.message,stack:J.stack}:{message:String(J)};Object.defineProperty(X,"extensions",{get(){return Y}})}return Object.defineProperty(X,"toJSON",{value(){return{message:X.message,extensions:X.extensions}}}),X}var q50=($)=>(J,W)=>{if(cm(J))return J;return T50(W,J,$)},h50=globalThis.process?.env?.NODE_ENV==="development",x50=q50(h50),b50=($,J)=>({result:W,setResult:X})=>{if(W.errors!=null)X({...W,errors:W.errors.map((Y)=>$(Y,J))})};function um($){let J=$?.maskError??x50,W=$?.errorMessage||v50,X=b50(J,W);return{onPluginInit(Y){Y.registerContextErrorHandler(({error:U,setError:Z})=>{Z(J(U,W))})},onExecute(){return{onExecuteDone(Y){return fB(Y,X)}}},onSubscribe(){return{onSubscribeResult(Y){return fB(Y,X)},onSubscribeError({error:Y,setError:U}){U(J(Y,W))}}}}}var pm=($)=>({onContextBuilding({context:J,extendContext:W}){return W0(()=>$(J),(X)=>W(X))}});var dm=($)=>{return{onExecute:({setExecuteFn:J})=>{if($.execute)J($.execute)},onParse:({setParseFn:J})=>{if($.parse)J($.parse)},onValidate:({setValidationFn:J,addValidationRule:W})=>{if($.validate)J($.validate);$.specifiedRules?.map(W)},onSubscribe:({setSubscribeFn:J})=>{if($.subscribe)J($.subscribe)}}};class AW extends Error{error;suppressed;constructor($,J,W){super(W);this.error=$,this.suppressed=J,this.name="SuppressedError",Error.captureStackTrace(this,this.constructor)}}var i1={get dispose(){return Symbol.dispose||Symbol.for("dispose")},get asyncDispose(){return Symbol.asyncDispose||Symbol.for("asyncDispose")}};function SK($){return $?.[i1.dispose]!=null}function lm($){return $?.[i1.asyncDispose]!=null}var g50=globalThis.SuppressedError||AW;class jK{callbacks=[];get disposed(){return this.callbacks.length===0}use($){if(lm($))this.callbacks.push(()=>$[i1.asyncDispose]());else if(SK($))this.callbacks.push(()=>$[i1.dispose]());return $}adopt($,J){if(J)this.callbacks.push(()=>J($));return $}defer($){if($)this.callbacks.push($)}move(){let $=new jK;return $.callbacks=this.callbacks,this.callbacks=[],$}disposeAsync(){return this[i1.asyncDispose]()}_error;_iterateCallbacks(){let $=this.callbacks.pop();if($)return W0($,()=>this._iterateCallbacks(),(J)=>{return this._error=this._error?new g50(J,this._error):J,this._iterateCallbacks()})}[i1.asyncDispose](){let $=this._iterateCallbacks();if($?.then)return $.then(()=>{if(this._error){let J=this._error;throw this._error=void 0,J}});if(this._error){let J=this._error;throw this._error=void 0,J}return}[Symbol.toStringTag]="AsyncDisposableStack"}var f50=globalThis.SuppressedError||AW;class kK{callbacks=[];get disposed(){return this.callbacks.length===0}use($){if(SK($))this.callbacks.push(()=>$[i1.dispose]());return $}adopt($,J){if(J)this.callbacks.push(()=>J($));return $}defer($){if($)this.callbacks.push($)}move(){let $=new kK;return $.callbacks=this.callbacks,this.callbacks=[],$}dispose(){return this[i1.dispose]()}_error;_iterateCallbacks(){let $=this.callbacks.pop();if($){try{$()}catch(J){this._error=this._error?new f50(J,this._error):J}return this._iterateCallbacks()}}[i1.dispose](){if(this._iterateCallbacks(),this._error){let $=this._error;throw this._error=void 0,$}}[Symbol.toStringTag]="DisposableStack"}var pX1=globalThis.DisposableStack||kK,rm=globalThis.AsyncDisposableStack||jK,dX1=globalThis.SuppressedError||AW;function f8($){if($ instanceof Error)return $;if(typeof $==="object"&&$!=null){if("message"in $&&typeof $.message==="string"){let J;if("cause"in $)J={cause:$.cause};let W=Error($.message,J);if("stack"in $&&typeof $.stack==="string")W.stack=$.stack;if("name"in $&&typeof $.name==="string")W.name=$.name;return W}}return Error(String($))}function nm($){let J=$[Symbol.asyncIterator](),W,X,Y=!1;async function U(){if(Y)return{value:void 0,done:!0};try{if(!W){if(X)return await X,await U();let G;X=new Promise((w)=>{G=w});let z=await J.next();if(z.done)return Y=!0,await U();return W=z.value[Symbol.asyncIterator](),X=void 0,G(),await U()}let Z=W,H=await W.next();if(!H.done)return H;if(W===Z)W=void 0;return await U()}catch(Z){throw Y=!0,Z}}return{next:U,async return(){return Y=!0,await Promise.all([W?.return?.(),J.return?.()]),{value:void 0,done:!0}},async throw(Z){throw Y=!0,await Promise.all([W?.throw?.(Z),J.throw?.(Z)]),Z},[Symbol.asyncIterator](){return this},async[i1.asyncDispose](){Y=!0,await Promise.all([W?.[i1.asyncDispose]?.(),J?.[i1.asyncDispose]?.()])}}}function yB($,J){if(!$)throw Error(J!=null?J:"Unexpected invariant triggered.")}function cB($,J,W){J?.throwIfAborted();let X=Object.create(null),Y=[];for(let Z in $){let H=W0(()=>$[Z],(G)=>{X[Z]=G});if(G1(H))Y.push(H)}if(!Y.length)return X;let U=Y.length===1?Y[0]:Promise.all(Y);if(W)return Promise.race([W,U]).then(()=>X);return U.then(()=>X)}function im($,J,W,X){let Y=[],U=X?.maxErrors;try{let Z=m50($,J,W,(H)=>{if(U!=null&&Y.length>=U)throw Y0("Too many errors processing variables, error limit reached. Execution aborted.");Y.push(H)});if(Y.length===0)return{coerced:Z}}catch(Z){Y.push(Z)}return{errors:Y}}function m50($,J,W,X){let Y={};for(let U of J){let Z=U.variable.name.value,H=g1($,U.type);if(!x4(H)){let z=$1(U.type);X(Y0(`Variable "$${Z}" expected value of type "${z}" which cannot be used as an input type.`,{nodes:U.type}));continue}if(!BK(W,Z)){if(U.defaultValue)Y[Z]=a6(U.defaultValue,H);else if(M0(H)){let z=b4(H);X(Y0(`Variable "$${Z}" of required type "${z}" was not provided.`,{nodes:U}))}continue}let G=W[Z];if(G===null&&M0(H)){let z=b4(H);X(Y0(`Variable "$${Z}" of non-null type "${z}" must not be null.`,{nodes:U}));continue}Y[Z]=pD(G,H,(z,w,D)=>{let K=`Variable "$${Z}" got invalid value `+b4(w);if(z.length>0)K+=` at "${Z}${bm(z)}"`;X(Y0(K+"; "+D.message,{nodes:U,originalError:D}))})}return Y}var y50=Sm(($,J,W)=>xm($.schema,$.fragments,$.variableValues,J,W));function Xy($){let J=Uy($);if(!("schema"in J))return{errors:J.map((W)=>{return Object.defineProperty(W,"extensions",{value:{...W.extensions,http:{...W.extensions?.http||{},status:400}}}),W})};return Yy(J)}function Yy($){return $.signal?.throwIfAborted(),W0(()=>p50($),(J)=>{let W=tm(J,$.errors);if($.subsequentPayloads.size>0)return{initialResult:{...W,hasNext:!0},subsequentResults:Y90($)};return W},(J)=>{if($.signal?.throwIfAborted(),J.errors)$.errors.push(...J.errors);else $.errors.push(J);return tm(null,$.errors)})}function tm($,J){return J.length===0?{data:$}:{errors:J,data:$}}var c50=gJ(function(J){let W=Object.create(null);for(let X of J.definitions)if(X.kind===v.FRAGMENT_DEFINITION)W[X.name.value]=X;return W});function Uy($){let{schema:J,document:W,rootValue:X,contextValue:Y,variableValues:U,operationName:Z,fieldResolver:H,typeResolver:G,subscribeFieldResolver:z,signal:w}=$;w?.throwIfAborted(),vY(J);let D=c50(W),K;for(let I of W.definitions)switch(I.kind){case v.OPERATION_DEFINITION:if(Z==null){if(K!==void 0)return[Y0("Must provide operation name if query contains multiple operations.",{extensions:{code:"OPERATION_RESOLUTION_FAILURE"}})];K=I}else if(I.name?.value===Z)K=I;break;default:}if(K==null){if(Z!=null)return[Y0(`Unknown operation named "${Z}".`,{extensions:{code:"OPERATION_RESOLUTION_FAILURE"}})];return[Y0("Must provide an operation.",{extensions:{code:"OPERATION_RESOLUTION_FAILURE"}})]}let O=K.variableDefinitions??[],F=im(J,O,U??{},{maxErrors:50});if(F.errors)return F.errors;w?.throwIfAborted();let M,A;if(w){let I=new Set,P=xH();A=P.promise;let Q=()=>{P.reject(w.reason),w.removeEventListener("abort",Q)};w.addEventListener("abort",Q,{once:!0}),A.catch(()=>{for(let N of I)N();I.clear()}),M=(N)=>{I.add(N)}}return{schema:J,fragments:D,rootValue:X,contextValue:Y,operation:K,variableValues:F.coerced,fieldResolver:H??em,typeResolver:G??a50,subscribeFieldResolver:z??em,subsequentPayloads:new Set,errors:[],signal:w,onSignalAbort:M,signalPromise:A}}function u50($,J){return{...$,rootValue:J,subsequentPayloads:new Set,errors:[]}}function p50($){let{operation:J,schema:W,fragments:X,variableValues:Y,rootValue:U}=$,Z=km(W,J.operation,[J]);if(Z==null)Y0(`Schema is not configured to execute ${J.operation} operation.`,{nodes:J});let{fields:H,patches:G}=xB(W,X,Y,Z,J.selectionSet),z=void 0,w;if(J.operation==="mutation")w=d50($,Z,U,z,H);else w=pB($,Z,U,z,H);for(let D of G){let{label:K,fields:O}=D;Ky($,Z,U,O,K,z)}return w}function d50($,J,W,X,Y){return Rm(Y,(U,[Z,H])=>{let G=VW(X,Z,J.name);return $.signal?.throwIfAborted(),W0(()=>Zy($,J,W,H,G),(z)=>{if(z===void 0)return U;return U[Z]=z,U})},Object.create(null))}function pB($,J,W,X,Y,U){let Z=Object.create(null),H=!1;try{for(let[G,z]of Y){$.signal?.throwIfAborted();let w=VW(X,G,J.name),D=Zy($,J,W,z,w,U);if(D!==void 0){if(Z[G]=D,G1(D))H=!0}}}catch(G){if(G!==$.signal?.reason&&H)return W0(()=>cB(Z,$.signal),()=>{throw G},()=>{throw G});throw G}if(!H)return Z;return cB(Z,$.signal,$.signalPromise)}function Zy($,J,W,X,Y,U){let Z=U?.errors??$.errors,H=Fy($.schema,J,X[0]);if(!H)return;let G=H.type,z=H.resolve??$.fieldResolver,w=Hy($,H,X,J,Y);try{$.signal?.throwIfAborted();let D=qB(H,X[0],$.variableValues),K=$.contextValue,O=z(W,D,K,w),F;if(G1(O))F=O.then((M)=>fJ($,G,X,w,Y,M,U));else F=fJ($,G,X,w,Y,O,U);if(G1(F))return F.then(void 0,(M)=>{if(M instanceof AggregateError){let P;for(let Q of M.errors){Q=f8(Q);let N=o4(Q,X,g4(Y));P=e6(N,G,Z),e$($,Y,U)}return P}M=f8(M);let A=o4(M,X,g4(Y)),I=e6(A,G,Z);return e$($,Y,U),I});return F}catch(D){if(D instanceof AggregateError){let M;for(let A of D.errors){A=f8(A);let I=o4(A,X,g4(Y));M=e6(I,G,Z),e$($,Y,U)}return M}let K=f8(D),O=o4(K,X,g4(Y)),F=e6(O,G,Z);return e$($,Y,U),F}}function Hy($,J,W,X,Y){return{fieldName:J.name,fieldNodes:W,returnType:J.type,parentType:X,path:Y,schema:$.schema,fragments:$.fragments,rootValue:$.rootValue,operation:$.operation,variableValues:$.variableValues,signal:$.signal}}var l50="CRITICAL_ERROR";function e6($,J,W){if(M0(J))throw $;if($.extensions?.[l50])throw $;return W.push($),null}function fJ($,J,W,X,Y,U,Z){if(U instanceof Error)throw U;if(M0(J)){let H=fJ($,J.ofType,W,X,Y,U,Z);if(H===null)throw Error(`Cannot return null for non-nullable field ${X.parentType.name}.${X.fieldName}.`);return H}if(U==null)return null;if(w1(J))return n50($,J,W,X,Y,U,Z);if(t4(J))return i50(J,U);if(a4(J))return t50($,J,W,X,Y,U,Z);if(N0(J))return uB($,J,W,X,Y,U,Z);console.assert(!1,"Cannot complete value of unexpected output type: "+b4(J))}function Gy($,J,W){if(typeof W.key==="number")return;let X=R$(Tm,J[0],$.variableValues);if(!X)return;if(X.if===!1)return;return yB(typeof X.initialCount==="number","initialCount must be a number"),yB(X.initialCount>=0,"initialCount must be a positive integer"),{initialCount:X.initialCount,label:typeof X.label==="string"?X.label:void 0}}async function r50($,J,W,X,Y,U,Z){if($.signal?.throwIfAborted(),U.return)$.onSignalAbort?.(()=>{U.return?.()});let H=Z?.errors??$.errors,G=Gy($,W,Y),z=!1,w=[],D=0;while(!0){if(G&&typeof G.initialCount==="number"&&D>=G.initialCount){W90(D,U,$,W,X,J,Y,G.label,Z);break}let K=VW(Y,D,void 0),O;try{if(O=await U.next(),O.done)break}catch(F){let M=f8(F),A=o4(M,W,g4(K));w.push(e6(A,J,H));break}if(zy(O.value,w,H,$,J,W,X,K,Z))z=!0;D+=1}return z?Promise.all(w):w}function n50($,J,W,X,Y,U,Z){let H=J.ofType,G=Z?.errors??$.errors;if(aY(U)){let F=U[Symbol.asyncIterator]();return r50($,H,W,X,Y,F,Z)}if(!Bm(U))throw Y0(`Expected Iterable, but did not find one for field "${X.parentType.name}.${X.fieldName}".`);let z=Gy($,W,Y),w=!1,D=Z,K=[],O=0;for(let F of U){let M=VW(Y,O,void 0);if(z&&typeof z.initialCount==="number"&&O>=z.initialCount){D=$90(Y,M,F,$,W,X,H,z.label,D),O++;continue}if(zy(F,K,G,$,H,W,X,M,Z))w=!0;O++}return w?Promise.all(K):K}function zy($,J,W,X,Y,U,Z,H,G){try{let z;if(G1($))z=$.then((w)=>fJ(X,Y,U,Z,H,w,G));else z=fJ(X,Y,U,Z,H,$,G);if(G1(z))return J.push(z.then(void 0,(w)=>{w=f8(w);let D=o4(w,U,g4(H)),K=e6(D,Y,W);return e$(X,H,G),K})),!0;J.push(z)}catch(z){let w=f8(z),D=o4(w,U,g4(H)),K=e6(D,Y,W);e$(X,H,G),J.push(K)}return!1}function i50($,J){let W;try{W=$.serialize(J)}catch(X){if(X instanceof m)throw Error(X.message);throw X}if(W==null)throw Error(`Expected \`${b4($)}.serialize(${b4(J)})\` to return non-nullable value, returned: ${b4(W)}`);return W}function t50($,J,W,X,Y,U,Z){let H=J.resolveType??$.typeResolver,G=$.contextValue,z=H(U,G,X,J);if(G1(z))return z.then((w)=>uB($,am(w,$,J,W,X,U),W,X,Y,U,Z));return uB($,am(z,$,J,W,X,U),W,X,Y,U,Z)}function am($,J,W,X,Y,U){if($==null)throw Y0(`Abstract type "${W.name}" must resolve to an Object type at runtime for field "${Y.parentType.name}.${Y.fieldName}". Either the "${W.name}" type should provide a "resolveType" function or each possible type should provide an "isTypeOf" function.`,{nodes:X});if(N0($)){if(iZ.major>=16)throw Y0("Support for returning GraphQLObjectType from resolveType was removed in graphql-js@16.0.0 please return type name instead.");$=$.name}if(typeof $!=="string")throw Y0(`Abstract type "${W.name}" must resolve to an Object type at runtime for field "${Y.parentType.name}.${Y.fieldName}" with value ${b4(U)}, received "${b4($)}".`);let Z=J.schema.getType($);if(Z==null)throw Y0(`Abstract type "${W.name}" was resolved to a type "${$}" that does not exist inside the schema.`,{nodes:X});if(!N0(Z))throw Y0(`Abstract type "${W.name}" was resolved to a non-object type "${$}".`,{nodes:X});if(!J.schema.isSubType(W,Z))throw Y0(`Runtime Object type "${Z.name}" is not a possible type for "${W.name}".`,{nodes:X});return Z}function uB($,J,W,X,Y,U,Z){if(J.isTypeOf){let H=J.isTypeOf(U,$.contextValue,X);if(G1(H))return H.then((G)=>{if(!G)throw om(J,U,W);return sm($,J,W,Y,U,Z)});if(!H)throw om(J,U,W)}return sm($,J,W,Y,U,Z)}function om($,J,W){return Y0(`Expected value of type "${$.name}" but got: ${b4(J)}.`,{nodes:W})}function sm($,J,W,X,Y,U){let{fields:Z,patches:H}=y50($,J,W),G=pB($,J,Y,X,Z,U);for(let z of H){let{label:w,fields:D}=z;Ky($,J,Y,D,w,X,U)}return G}var a50=function($,J,W,X){if(TB($)&&typeof $.__typename==="string")return $.__typename;let Y=W.schema.getPossibleTypes(X),U=[];for(let Z=0;Z<Y.length;Z++){let H=Y[Z];if(H.isTypeOf){let G=H.isTypeOf($,J,W);if(G1(G))U[Z]=G;else if(G)return H.name}}if(U.length)return Promise.all(U).then((Z)=>{for(let H=0;H<Z.length;H++)if(Z[H])return Y[H].name})},em=function($,J,W,X){if(TB($)||typeof $==="function"){let Y=$[X.fieldName];if(typeof Y==="function")return $[X.fieldName](J,W,X);return Y}};function wy($){let J=Uy($);if(!("schema"in J)){for(let X of J){let Y=X.extensions||={},U=Y.http||={};U.status=400,X.extensions.code="BAD_USER_INPUT"}return{errors:J}}let W=s50(J);if(G1(W))return W.then((X)=>$y(J,X));return $y(J,W)}function Dy($){return $?.initialResult}function dB($){let J=$.subsequentResults,W=!1,X=!1;return{[Symbol.asyncIterator](){return this},next(){if(X)return d0({value:void 0,done:X});if(W)return J.next();return W=!0,d0({value:$.initialResult,done:X})},return(){return X=!0,J.return()},throw(Y){return X=!0,J.throw(Y)},[i1.asyncDispose](){return X=!0,J?.[i1.asyncDispose]?.()}}}async function*o50($){if("initialResult"in $)yield*dB($);else yield $}function $y($,J){if(!aY(J))return J;return nm(A9(J,(W)=>W0(()=>Yy(u50($,W)),o50),(W)=>{if(W instanceof AggregateError)throw AggregateError(W.errors.map((X)=>Jy(X,$.operation)),W.message);throw Jy(W,$.operation)}))}function Jy($,J){return Y0($.message,{originalError:$,nodes:[J]})}function s50($){try{let J=e50($);if(G1(J))return J.then(void 0,(W)=>({errors:[W]}));return J}catch(J){return{errors:[J]}}}function e50($){let{schema:J,fragments:W,operation:X,variableValues:Y,rootValue:U}=$,Z=J.getSubscriptionType();if(Z==null)throw Y0("Schema is not configured to execute subscription operation.",{nodes:X});let{fields:H}=xB(J,W,Y,Z,X.selectionSet),[G,z]=[...H.entries()][0],w=z[0].name.value,D=Fy(J,Z,z[0]);if(!D)throw Y0(`The subscription field "${w}" is not defined.`,{nodes:z});let K=VW(void 0,G,Z.name),O=Hy($,D,z,Z,K);try{let F=qB(D,z[0],Y),M=$.contextValue,I=(D.subscribe??$.subscribeFieldResolver)(U,F,M,O);if(G1(I))return I.then((P)=>Wy(P,$.signal,$.onSignalAbort)).then(void 0,(P)=>{throw o4(P,z,g4(K))});return Wy(I,$.signal,$.onSignalAbort)}catch(F){throw o4(F,z,g4(K))}}function Wy($,J,W){if(J?.throwIfAborted(),$ instanceof Error)throw $;if(!aY($))throw Y0(`Subscription field must return Async Iterable. Received: ${b4($)}.`);if(W)return{[Symbol.asyncIterator](){let X=$[Symbol.asyncIterator]();if(X.return)W?.(()=>{X.return?.()});return X}};return $}function Ky($,J,W,X,Y,U,Z){let H=new Oy({label:Y,path:U,parentContext:Z,exeContext:$}),G;try{if(G=pB($,J,W,U,X,H),G1(G))G=G.then(null,(z)=>{return H.errors.push(z),null})}catch(z){H.errors.push(z),G=null}H.addData(G)}function $90($,J,W,X,Y,U,Z,H,G){let z=new lB({label:H,path:J,parentContext:G,exeContext:X}),w;try{try{if(G1(W))w=W.then((K)=>fJ(X,Z,Y,U,J,K,z));else w=fJ(X,Z,Y,U,J,W,z);if(G1(w))w=w.then(void 0,(K)=>{K=f8(K);let O=o4(K,Y,g4(J)),F=e6(O,Z,z.errors);return e$(X,J,z),F})}catch(K){let O=f8(K),F=o4(O,Y,g4(J));w=e6(F,Z,z.errors),e$(X,J,z)}}catch(K){return z.errors.push(K),e$(X,$,z),z.addItems(null),z}let D;if(G1(w))D=w.then((K)=>[K],(K)=>{return z.errors.push(K),e$(X,$,z),null});else D=[w];return z.addItems(D),z}async function J90($,J,W,X,Y,U,Z){let H;try{let{value:z,done:w}=await $.next();if(w)return U.setIsCompletedIterator(),{done:w,value:void 0};H=z}catch(z){let w=f8(z),D=o4(w,W,g4(Z));return{done:!0,value:e6(D,Y,U.errors)}}let G;try{if(G=fJ(J,Y,W,X,Z,H,U),G1(G))G=G.then(void 0,(z)=>{let w=o4(z,W,g4(Z)),D=e6(w,Y,U.errors);return e$(J,Z,U),D});return{done:!1,value:G}}catch(z){let w=o4(z,W,g4(Z)),D=e6(w,Y,U.errors);return e$(J,Z,U),{done:!1,value:D}}}async function W90($,J,W,X,Y,U,Z,H,G){let z=$,w=G??void 0;while(!0){let D=VW(Z,z,void 0),K=new lB({label:H,path:D,parentContext:w,iterator:J,exeContext:W}),O;try{O=await J90(J,W,X,Y,U,K,D)}catch(I){if(K.errors.push(I),e$(W,Z,K),K.addItems(null),J?.return)J.return().catch(()=>{});return}let{done:F,value:M}=O,A;if(G1(M))A=M.then((I)=>[I],(I)=>{return K.errors.push(I),e$(W,Z,K),null});else A=[M];if(K.addItems(A),F)break;w=K,z++}}function e$($,J,W){let X=g4(J);$.subsequentPayloads.forEach((Y)=>{if(Y===W)return;for(let U=0;U<X.length;U++)if(Y.path[U]!==X[U])return;if(rB(Y)&&Y.iterator?.return)Y.iterator.return().catch(()=>{});$.subsequentPayloads.delete(Y)})}function X90($){let J=[];for(let W of $.subsequentPayloads){let X={};if(!W.isCompleted)continue;if($.subsequentPayloads.delete(W),rB(W)){let Y=W.items;if(W.isCompletedIterator)continue;X.items=Y}else{let Y=W.data;X.data=Y??null}if(X.path=W.path,W.label)X.label=W.label;if(W.errors.length>0)X.errors=W.errors;J.push(X)}return J}function Y90($){let J=!1;async function W(){if(J)return{value:void 0,done:!0};let Y=Array.from($.subsequentPayloads).map((H)=>H.promise);if($.signalPromise)await Promise.race([$.signalPromise,...Y]);else await Promise.race(Y);if(J)return{value:void 0,done:!0};let U=X90($),Z=$.subsequentPayloads.size>0;if(!U.length&&Z)return W();if(!Z)J=!0;return{value:U.length?{incremental:U,hasNext:Z}:{hasNext:Z},done:!1}}function X(){let Y=[];return $.subsequentPayloads.forEach((U)=>{if(rB(U)&&U.iterator?.return)Y.push(U.iterator.return())}),Promise.all(Y)}return{[Symbol.asyncIterator](){return this},next:W,async return(){return await X(),J=!0,{value:void 0,done:!0}},async throw(Y){throw await X(),J=!0,Y},async[i1.asyncDispose](){await X(),J=!0}}}class Oy{type;errors;label;path;promise;data;parentContext;isCompleted;_exeContext;_resolve;constructor($){this.type="defer",this.label=$.label,this.path=g4($.path),this.parentContext=$.parentContext,this.errors=[],this._exeContext=$.exeContext,this._exeContext.subsequentPayloads.add(this),this.isCompleted=!1,this.data=null,this.promise=new Promise((J)=>{this._resolve=(W)=>{J(W)}}).then((J)=>{this.data=J,this.isCompleted=!0})}addData($){let J=this.parentContext?.promise;if(J){this._resolve?.(J.then(()=>$));return}this._resolve?.($)}}class lB{type;errors;label;path;items;promise;parentContext;iterator;isCompletedIterator;isCompleted;_exeContext;_resolve;constructor($){this.type="stream",this.items=null,this.label=$.label,this.path=g4($.path),this.parentContext=$.parentContext,this.iterator=$.iterator,this.errors=[],this._exeContext=$.exeContext,this._exeContext.subsequentPayloads.add(this),this.isCompleted=!1,this.items=null,this.promise=new Promise((J)=>{this._resolve=(W)=>{J(W)}}).then((J)=>{this.items=J,this.isCompleted=!0})}addItems($){let J=this.parentContext?.promise;if(J){this._resolve?.(J.then(()=>$));return}this._resolve?.($)}setIsCompletedIterator(){this.isCompletedIterator=!0}}function rB($){return $.type==="stream"}function Fy($,J,W){let X=W.name.value;if(X===PJ.name&&$.getQueryType()===J)return PJ;else if(X===_J.name&&$.getQueryType()===J)return _J;else if(X===NJ.name)return NJ;return J.getFields()[X]}function vK($){let J=kJ($.document,$.operationName);if(J==null)throw Error("Must provide an operation.");if(J.operation==="subscription")return wy($);return W0(()=>Xy($),(W)=>{if(Dy(W))return dB(W);return W})}var MY1=gJ(function(J){return function(X){return vK({schema:J,document:X.document,variableValues:X.variables,operationName:X.operationName,rootValue:X.rootValue,contextValue:X.context,signal:X.signal||X.info?.signal})}});var aH={};x$(aH,{fetch:()=>Wd,crypto:()=>Md,createFetch:()=>Pd,btoa:()=>Vd,WritableStream:()=>Gd,URLSearchParams:()=>G2,URLPattern:()=>Id,URL:()=>Ld,TransformStream:()=>zd,TextEncoderStream:()=>Od,TextEncoder:()=>Qd,TextDecoderStream:()=>Kd,TextDecoder:()=>Ad,Response:()=>Ud,Request:()=>Yd,ReadableStream:()=>Hd,Headers:()=>Xd,FormData:()=>Zd,File:()=>Ed,DecompressionStream:()=>Dd,CompressionStream:()=>wd,Blob:()=>Fd});var Jd=$d(),qW0=nB(),w4=Jd();if(!qW0())try{globalThis.libcurl=globalThis.libcurl||(()=>{throw new Error("Cannot require module "+"node-libcurl");})()}catch($){}var{fetch:Wd,Headers:Xd,Request:Yd,Response:Ud,FormData:Zd,ReadableStream:Hd,WritableStream:Gd,TransformStream:zd,CompressionStream:wd,DecompressionStream:Dd,TextDecoderStream:Kd,TextEncoderStream:Od,Blob:Fd,File:Ed,crypto:Md,btoa:Vd,TextEncoder:Qd,TextDecoder:Ad,URLPattern:Id,URL:Ld,URLSearchParams:G2}=w4,Pd=Jd;function Nd($){return $!=null&&typeof $==="object"&&typeof $[Symbol.asyncIterator]==="function"}function hW0($){if($.socket?.localPort)return $.socket?.localPort;let W=($.headers?.[":authority"]||$.headers?.host)?.split(":")?.[1];if(W)return W;return 80}function xW0($){if($.headers?.[":authority"])return $.headers?.[":authority"];if($.headers?.host)return $.headers?.host;let J=hW0($);if($.hostname)return $.hostname+":"+J;let W=$.socket?.localAddress;if(W&&!W?.includes("::")&&!W?.includes("ffff"))return`${W}:${J}`;return"localhost"}function bW0($){let J=xW0($),W=$.protocol||($.socket?.encrypted?"https":"http"),X=$.originalUrl||$.url||"/graphql";return`${W}://${J}${X}`}function gW0($){let J=$[Symbol.toStringTag];if(typeof $==="string"||J==="Uint8Array"||J==="Blob"||J==="FormData"||J==="URLSearchParams"||Nd($))return!0;return!1}function pR($,J,W,X){let Y=$.raw||$.req||$,U=bW0(Y);if($.query){let z=new J.URL(U);for(let w in $.query)z.searchParams.set(w,$.query[w]);U=z.toString()}let Z=$.headers;if($.headers?.[":method"]){Z={};for(let z in $.headers)if(!z.startsWith(":"))Z[z]=$.headers[z]}let H=X?iR():new AbortController;if(W?.once){let z=()=>{if(!H.signal.aborted)Object.defineProperty(Y,"aborted",{value:!0}),H.abort(W.errored??void 0)};W.once("error",z),W.once("close",z),W.once("finish",()=>{W.removeListener("close",z)})}if($.method==="GET"||$.method==="HEAD")return new J.Request(U,{method:$.method,headers:Z,signal:H.signal});let G=$.body;if(G!=null&&Object.keys(G).length>0){if(gW0(G))return new J.Request(U,{method:$.method||"GET",headers:Z,body:G,signal:H.signal});let z=new J.Request(U,{method:$.method||"GET",headers:Z,signal:H.signal});if(!z.headers.get("content-type")?.includes("json"))z.headers.set("content-type","application/json; charset=utf-8");return new Proxy(z,{get:(w,D,K)=>{switch(D){case"json":return()=>d0(G);case"text":return()=>d0(JSON.stringify(G));default:if(globalThis.Bun)return Reflect.get(w,D);return Reflect.get(w,D,K)}}})}return new J.Request(U,{method:$.method,headers:Z,signal:H.signal,body:Y,duplex:"half"})}function Bd($){return $.read!=null}function Rd($){return Bd($)}function dR($){return $!=null&&$.setHeader!=null&&$.end!=null&&$.once!=null&&$.write!=null}function fW0($){return $!=null&&$.getReader!=null}function Sd($){return $!=null&&$.request!=null&&$.respondWith!=null}function mW0($){$?.socket?.setTimeout?.(0),$?.socket?.setNoDelay?.(!0),$?.socket?.setKeepAlive?.(!0)}function RW($){$.end(null,null,null)}function yW0($,J){let W=!1,X=()=>{W=!0};$.once("error",X),$.once("close",X),$.once("finish",()=>{$.removeListener("close",X),$.removeListener("error",X)});let Y=J[Symbol.asyncIterator](),U=()=>Y.next().then(({done:Z,value:H})=>{if(W||Z)return;return W0(()=>oH(H,$),()=>W?RW($):U())});return U()}function oH($,J){if(!J.write($))return new Promise((X)=>J.once("drain",X))}var cW0=globalThis.process?.versions?.node?.startsWith("1");function jd($,J,W,X){if(J.closed||J.destroyed||J.writableEnded)return;if(!$){J.statusCode=404,RW(J);return}if(X&&$.headers?.headersInit&&!Array.isArray($.headers.headersInit)&&!$.headers.headersInit.get&&!$.headers._map&&!$.headers._setCookies?.length)J.writeHead($.status,$.statusText,$.headers.headersInit);else{if(J.setHeaders&&!cW0)J.setHeaders($.headers);else{let Z=!1;$.headers.forEach((H,G)=>{if(G==="set-cookie"){if(Z)return;Z=!0;let z=$.headers.getSetCookie?.();if(z){J.setHeader("set-cookie",z);return}}J.setHeader(G,H)})}J.writeHead($.status,$.statusText)}if($.bodyType==="String")return W0(()=>oH($.bodyInit,J),()=>RW(J));let Y=$._buffer;if(Y)return W0(()=>oH(Y,J),()=>RW(J));let U=$.body;if(U==null){RW(J);return}if(U[Symbol.toStringTag]==="Uint8Array")return W0(()=>oH(U,J),()=>RW(J));if(mW0(W),Bd(U)){J.once("close",()=>{U.destroy()}),U.pipe(J,{end:!0});return}if(fW0(U))return uW0(W,J,U);if(Nd(U))return yW0(J,U)}function uW0($,J,W){let X=W.getReader();$?.once?.("error",(U)=>{X.cancel(U)});function Y(){return X.read().then(({done:U,value:Z})=>U?RW(J):W0(()=>oH(Z,J),Y))}return Y()}function kd($){return $!=null&&typeof $==="object"&&(("body"in $)||("cache"in $)||("credentials"in $)||("headers"in $)||("integrity"in $)||("keepalive"in $)||("method"in $)||("mode"in $)||("redirect"in $)||("referrer"in $)||("referrerPolicy"in $)||("signal"in $)||("window"in $))}function SW(...$){let[J,...W]=$.filter((X)=>X!=null&&typeof X==="object");return W.forEach((X)=>{let Y=Object.getOwnPropertyNames(X).reduce((U,Z)=>{if(Object.getOwnPropertyDescriptor(X,Z))U[Z]=Object.getOwnPropertyDescriptor(X,Z);return U},{});Object.getOwnPropertySymbols(X).forEach((U)=>{let Z=Object.getOwnPropertyDescriptor(X,U);if(Z?.enumerable)Y[U]=Z}),Object.defineProperties(J,Y)}),J}function lR($,J){return new J($.stack||$.message||$.toString(),{status:$.status||500})}function rR($,J){if($==null){if(J==null)return{};return{waitUntil:J}}return SW(Object.create($),{waitUntil:J},$)}function nR($,J){if(J?.aborted)throw J.reason;if(G1($)&&J){let X=function(){W.reject(J.reason)},W=xH();return J.addEventListener("abort",X,{once:!0}),$.then(function(U){W.resolve(U)}).catch(function(U){W.reject(U)}).finally(()=>{J.removeEventListener("abort",X)}),W.promise}return $}var pW0=["SIGINT","exit","SIGTERM"],YO=new Set,_d=!1;function dW0(){if(_d)return;_d=!0;for(let $ of pW0)globalThis.process.once($,function(){return Promise.allSettled([...YO].map((W)=>!W.disposed&&W.disposeAsync()))})}function vd($){if(globalThis.process){if(dW0(),!YO.has($))YO.add($),$.defer(()=>{YO.delete($)})}}class Cd extends EventTarget{aborted=!1;_onabort=null;_reason;constructor(){super();let $=globalThis.process?.getBuiltinModule?.("node:events");if($?.kMaxEventTargetListeners)this[$.kMaxEventTargetListeners]=0}throwIfAborted(){if(this._nativeCtrl?.signal?.throwIfAborted)return this._nativeCtrl.signal.throwIfAborted();if(this.aborted)throw this._reason}_nativeCtrl;ensureNativeCtrl(){if(!this._nativeCtrl){let $=this.aborted;if(this._nativeCtrl=new AbortController,$)this._nativeCtrl.abort(this._reason)}return this._nativeCtrl}abort($){if(this._nativeCtrl?.abort)return this._nativeCtrl?.abort($);this._reason=$||new DOMException("This operation was aborted","AbortError"),this.aborted=!0,this.dispatchEvent(new Event("abort"))}get signal(){if(this._nativeCtrl?.signal)return this._nativeCtrl.signal;return this}get reason(){if(this._nativeCtrl?.signal)return this._nativeCtrl.signal.reason;return this._reason}get onabort(){if(this._onabort)return this._onabort;return this._onabort}set onabort($){if(this._nativeCtrl?.signal){this._nativeCtrl.signal.onabort=$;return}if(this._onabort)this.removeEventListener("abort",this._onabort);if(this._onabort=$,$)this.addEventListener("abort",$)}}function iR(){if(globalThis.Bun||globalThis.Deno)return new AbortController;return new Proxy(new Cd,{get($,J,W){if(J.toString().includes("kDependantSignals")){let X=$.ensureNativeCtrl();return Reflect.get(X.signal,J,X.signal)}return Reflect.get($,J,W)},set($,J,W,X){if(J.toString().includes("kDependantSignals")){let Y=$.ensureNativeCtrl();return Reflect.set(Y.signal,J,W,Y.signal)}return Reflect.set($,J,W,X)},getPrototypeOf(){return AbortSignal.prototype}})}function Td($){return!!$.onData}function qd({req:$,res:J,fetchAPI:W,controller:X}){let Y=$.getMethod(),U,Z=[],H=[(_)=>{Z.push(_)}],G=(_)=>{for(let L of H)L(_)},z=!1,w=[()=>{z=!0}],D=()=>{for(let _ of w)_()};J.onData(function(_,L){if(G(Buffer.from(Buffer.from(_,0,_.byteLength))),L)D()});let K;if(Y!=="get"&&Y!=="head"){U="half",X.signal.addEventListener("abort",()=>{D()},{once:!0});let _;K=()=>{if(!_)_=new W.ReadableStream({start(L){for(let R of Z)L.enqueue(R);if(z){L.close();return}H.push((R)=>{L.enqueue(R)}),w.push(()=>{if(X.signal.reason){L.error(X.signal.reason);return}if(L.desiredSize)L.close()})}});return _}}let O=new W.Headers;$.forEach((_,L)=>{O.append(_,L)});let F=`http://localhost${$.getUrl()}`,M=$.getQuery();if(M)F+=`?${M}`;let A;function I(){if(!K)return null;if(z)return Q();return K()}let P=new W.Request(F,{method:Y,headers:O,get body(){return I()},signal:X.signal,duplex:U});function Q(){if(!A)A=Z.length===1?Z[0]:Buffer.concat(Z);return A}function N(){if(z)return d0(Q());return new Promise((_,L)=>{try{w.push(()=>{_(Q())})}catch(R){L(R)}})}return Object.defineProperties(P,{body:{get(){return I()},configurable:!0,enumerable:!0},json:{value(){return N().then((_)=>_.toString("utf8")).then((_)=>JSON.parse(_))},configurable:!0,enumerable:!0},text:{value(){return N().then((_)=>_.toString("utf8"))},configurable:!0,enumerable:!0},arrayBuffer:{value(){return N()},configurable:!0,enumerable:!0}}),P}function lW0($,J){return new J.WritableStream({write(W){$.cork(()=>{$.write(W)})},close(){$.cork(()=>{$.end()})}})}function hd($,J,W,X){if(!J){$.writeStatus("404 Not Found"),$.end();return}let Y=J._buffer,U=J.bodyType==="String"?J.bodyInit:void 0;if(W.signal.aborted)return;if($.cork(()=>{$.writeStatus(`${J.status} ${J.statusText}`);let Z=!1;for(let[H,G]of J.headers)if(H!=="content-length"){if(H==="set-cookie"){if(Z)continue;Z=!0;let z=J.headers.getSetCookie?.();if(z){for(let w of z)$.writeHeader(H,w);continue}}$.writeHeader(H,G)}if(U)$.end(U);else if(Y)$.end(Y);else if(!J.body)$.end()}),U||Y||!J.body)return;return W.signal.addEventListener("abort",()=>{if(!J.body?.locked)J.body?.cancel(W.signal.reason)},{once:!0}),J.body.pipeTo(lW0($,X),{signal:W.signal}).catch((Z)=>{if(W.signal.aborted)return;throw Z})}function rW0($){try{return!!$?.request}catch{return!1}}var nW0={};function xd($,J){let W=J?.__useSingleWriteHead==null?!0:J.__useSingleWriteHead,X={...aH,...J?.fetchAPI},Y=J?.__useCustomAbortCtrl==null?X.Request!==globalThis.Request:J.__useCustomAbortCtrl,U=typeof $==="function"?$:$.handle,Z=[],H=[],G,z=new Set,w;function D(){if(!w){if(w=new rm,J?.disposeOnProcessTerminate)vd(w);w.defer(()=>{if(z.size>0)return Promise.allSettled(z).then(()=>{z.clear()},()=>{z.clear()})})}return w}function K(S){if(G1(S))D(),z.add(S),S.then(()=>{z.delete(S)},(k)=>{console.error(`Unexpected error while waiting: ${k.message||k}`),z.delete(S)})}if(J?.plugins!=null)for(let S of J.plugins){if(S.instrumentation)G=G?oY(G,S.instrumentation):S.instrumentation;if(S.onRequest)Z.push(S.onRequest);if(S.onResponse)H.push(S.onResponse);let k=S[i1.dispose];if(k)D().defer(k);let T=S[i1.asyncDispose];if(T)D().defer(T);if(S.onDispose)D().defer(S.onDispose)}let O=Z.length>0||H.length>0?function(k,T){let q=U,h;if(Z.length===0)return r();let x=k.parsedUrl||new Proxy(nW0,{get(d,X0,i){return x=new X.URL(k.url,"http://localhost"),Reflect.get(x,X0,x)}});function b(d){if(H.length===0)return d;return W0(()=>z4(H,(X0)=>X0({request:k,response:d,serverContext:T,setResponse(i){d=i},fetchAPI:X})),()=>d)}function r(){if(!h)return W0(()=>q(k,T),b);return b(h)}return W0(()=>z4(Z,(d,X0)=>d({request:k,setRequest(i){k=i},serverContext:T,fetchAPI:X,url:x,requestHandler:q,setRequestHandler(i){q=i},endResponse(i){if(h=i,i)X0()}})),r)}:U;if(G?.request){let S=O;O=(k,T)=>{return QW({request:k}).asyncFn(G.request,S)(k,T)}}function F(S,...k){let T=k.length>1?SW(...k):k[0]||{};if(!T.waitUntil)T.waitUntil=K;let q=pR(S,X,void 0,Y);return O(q,T)}function M(S,k,...T){let q=k.raw||k,h=T.length>1?SW(...T):T[0]||{};if(!h.waitUntil)h.waitUntil=K;let x=pR(S,X,q,Y);return O(x,h)}function A(S,k,...T){let q={req:S,res:k,waitUntil:K};return bH(d0().then(()=>M(S,k,q,...T)).catch((h)=>lR(h,X.Response)).then((h)=>jd(h,k,S,W)).catch((h)=>console.error(`Unexpected error while handling request: ${h.message||h}`)))}function I(S,k,...T){let q={res:S,req:k,waitUntil:K},x=T.filter((K0)=>K0!=null).length>0?SW(q,...T):q,b=Y?iR():new AbortController,r=S.end.bind(S),d=!1;S.end=function(K0){return d=!0,r(K0)},S.onAborted.bind(S)(function(){b.abort()}),S.onAborted=function(K0){b.signal.addEventListener("abort",K0,{once:!0})};let i=qd({req:k,res:S,fetchAPI:X,controller:b});return W0(()=>W0(()=>O(i,x),(K0)=>K0,(K0)=>lR(K0,X.Response)),(K0)=>{if(!b.signal.aborted&&!d)return W0(()=>hd(S,K0,b,X),(D0)=>D0,(D0)=>{console.error(`Unexpected error while handling request: ${D0.message||D0}`)})})}function P(S,...k){if(!S.respondWith||!S.request)throw TypeError(`Expected FetchEvent, got ${S}`);let T=k.filter((x)=>x!=null),q=T.length>0?SW({},S,...T):rR(S),h=O(S.request,q);S.respondWith(h)}function Q(S,...k){let T=k.filter((h)=>h!=null),q=T.length>1?SW({},...T):rR(T[0],T[0]==null||T[0].waitUntil==null?K:void 0);return O(S,q)}let N=(S,...k)=>{if(typeof S==="string"||"href"in S){let[q,...h]=k;if(kd(q)){let b=new X.Request(S,q),r=Q(b,...h),d=q.signal;if(d)return nR(r,d);return r}let x=new X.Request(S);return Q(x,...k)}let T=Q(S,...k);return nR(T,S.signal)},_=(S,...k)=>{let[T,...q]=k;if(Rd(S)){if(!dR(T))throw TypeError(`Expected ServerResponse, got ${T}`);return A(S,T,...q)}if(Td(S))return I(S,T,...q);if(dR(T))throw TypeError("Got Node response without Node request");if(rW0(S)){if(Sd(S))return P(S,...k);return Q(S.request,S,...k)}return N(S,...k)},L={handleRequest:Q,fetch:N,handleNodeRequest:F,handleNodeRequestAndResponse:M,requestListener:A,handleEvent:P,handleUWS:I,handle:_,get disposableStack(){return D()},[i1.asyncDispose](){if(w&&!w.disposed)return w.disposeAsync();return d0()},dispose(){if(w&&!w.disposed)return w.disposeAsync();return d0()},waitUntil:K},R=new Proxy(_,{has:(S,k)=>{return k in L||k in _||$&&k in $},get:(S,k)=>{if(globalThis.Deno||k===Symbol.asyncDispose||k===Symbol.dispose){let h=Reflect.get(L,k,L);if(h)return h}let T=L[k];if(T){if(T.bind)return T.bind(L);return T}let q=_[k];if(q){if(q.bind)return q.bind(_);return q}if($){let h=$[k];if(h){if(h.bind)return function(...x){let b=$[k](...x);if(b===$)return R;return b};return h}}},apply(S,k,T){return _(...T)}});return R}function iW0($,J){let W=$.headers.get("origin");if(J===!1||W==null)return null;let X={};if(J.origin==null||J.origin.length===0||J.origin.includes("*"))X["Access-Control-Allow-Origin"]=W,X.Vary="Origin";else if(typeof J.origin==="string")X["Access-Control-Allow-Origin"]=J.origin;else if(Array.isArray(J.origin))if(J.origin.length===1)X["Access-Control-Allow-Origin"]=J.origin[0];else if(J.origin.includes(W))X["Access-Control-Allow-Origin"]=W,X.Vary="Origin";else X["Access-Control-Allow-Origin"]="null";if(J.methods?.length)X["Access-Control-Allow-Methods"]=J.methods.join(", ");else{let Y=$.headers.get("access-control-request-method");if(Y)X["Access-Control-Allow-Methods"]=Y}if(J.allowedHeaders?.length)X["Access-Control-Allow-Headers"]=J.allowedHeaders.join(", ");else{let Y=$.headers.get("access-control-request-headers");if(Y)if(X["Access-Control-Allow-Headers"]=Y,X.Vary)X.Vary+=", Access-Control-Request-Headers";else X.Vary="Access-Control-Request-Headers"}if(J.credentials!=null){if(J.credentials===!0)X["Access-Control-Allow-Credentials"]="true"}else if(X["Access-Control-Allow-Origin"]!=="*")X["Access-Control-Allow-Credentials"]="true";if(J.exposedHeaders)X["Access-Control-Expose-Headers"]=J.exposedHeaders.join(", ");if(J.maxAge)X["Access-Control-Max-Age"]=J.maxAge.toString();return X}function tW0($,J,W){return W0(()=>J($,W),(X)=>iW0($,X))}function bd($){let J=()=>({});if($!=null){if(typeof $==="function")J=$;else if(typeof $==="object"){let W={...$};J=()=>W}else if($===!1)J=()=>!1}return{onRequest({request:W,fetchAPI:X,endResponse:Y}){if(W.method.toUpperCase()==="OPTIONS"){let U=new X.Response(null,{status:204,headers:{"Content-Length":"0"}});Y(U)}},onResponse({request:W,serverContext:X,response:Y}){return W0(()=>tW0(W,J,X),(U)=>{if(U!=null)for(let Z in U)Y.headers.set(Z,U[Z])})}}}function aW0($){return $!=null&&typeof $==="object"&&"errors"in $}function oW0($){return $!=null&&typeof $.toString==="function"}function V5($){return $ instanceof m}function UO($){if($ instanceof m){if($.originalError!=null)return UO($.originalError);return!0}return!1}function tR($){return typeof $==="object"&&$?.constructor?.name==="DOMException"&&($.name==="AbortError"||$.name==="TimeoutError")}function sH($,J,W){let X=new Set;if(aW0($))for(let Y of $.errors){let U=sH(Y,J,W);for(let Z of U)X.add(Z)}else if(tR($))W.debug("Request aborted");else if(J){let Y=J.maskError($,J.errorMessage,J.isDev);if(Y!==$)W.error($);X.add(V5(Y)?Y:Y0(Y.message,{originalError:Y}))}else if(V5($))X.add($);else if($ instanceof Error)X.add(Y0($.message,{originalError:$}));else if(typeof $==="string")X.add(Y0($,{extensions:{code:"INTERNAL_SERVER_ERROR",unexpected:!0}}));else if(oW0($))X.add(Y0($.toString(),{extensions:{code:"INTERNAL_SERVER_ERROR",unexpected:!0}}));else W.error($),X.add(Y0("Unexpected error.",{extensions:{http:{unexpected:!0}}}));return Array.from(X)}function z2($,J={},W=!1){let X,Y=!1;if("extensions"in $&&$.extensions?.http){if($.extensions.http.headers)Object.assign(J,$.extensions.http.headers);if($.extensions.http.status)X=$.extensions.http.status}if("errors"in $&&$.errors?.length){for(let U of $.errors)if(U.extensions?.http){if(U.extensions.http.headers)Object.assign(J,U.extensions.http.headers);if(W&&U.extensions.http.spec)continue;if(U.extensions.http.status&&(!X||U.extensions.http.status>X))X=U.extensions.http.status}else if(!UO(U)||U.extensions?.unexpected)Y=!0}else X||=200;if(!X)if(Y&&!("data"in $))X=500;else X=200;return{status:X,headers:J}}function gd($){return Array.isArray($)&&$.length>0&&$.some(V5)}function fd($){return{onResponse({response:J}){yd(J.headers,$)}}}function md($){return{onRequest({request:J}){yd(J.headers,$)}}}function yd($,J){for(let W of $.keys())if(!J.includes(W))$.delete(W)}function aR($){let J=$.get("operationName")||void 0,W=$.get("query")||void 0,X=$.get("variables")||void 0,Y=$.get("extensions")||void 0;return{operationName:J,query:W,variables:X?JSON.parse(X):void 0,extensions:Y?JSON.parse(Y):void 0}}function cd($){let J=new G2($);return aR(J)}function _9($,J){let W=$.headers.get("content-type");return W=W?.split(",")[0]||null,W===J||!!W?.startsWith(`${J};`)}function ud($){return $.method==="GET"}function pd($){let J=$.url.substring($.url.indexOf("?")+1),W=new G2(J);return aR(W)}function dd($){return $.method==="POST"&&_9($,"application/x-www-form-urlencoded")}function ld($){return $.text().then(cd)}function rd($){return $.method==="POST"&&_9($,"application/graphql")}function nd($){return $.text().then((J)=>({query:J}))}function id($){return $.method==="POST"&&(_9($,"application/json")||_9($,"application/graphql+json"))}function td($){return W0(()=>$.json(),(J)=>{if(J==null)throw Y0(`POST body is expected to be object but received ${J}`,{extensions:{http:{status:400},code:"BAD_REQUEST"}});let W=typeof J;if(W!=="object")throw Y0(`POST body is expected to be object but received ${W}`,{extensions:{http:{status:400},code:"BAD_REQUEST"}});return J},(J)=>{if(J instanceof m)throw J;let W={http:{spec:!0,status:400},code:"BAD_REQUEST"};if(J instanceof Error)W.originalError={name:J.name,message:J.message};throw Y0("POST body sent invalid JSON.",{extensions:W})})}function ad($,J,W){J.split&&(J=J.split("."));var X=0,Y=J.length,U=$,Z,H;while(X<Y){if(H=""+J[X++],H==="__proto__"||H==="constructor"||H==="prototype")break;U=U[H]=X===Y?W:typeof(Z=U[H])===typeof J?Z:J[X]*0!==0||!!~(""+J[X]).indexOf(".")?{}:[]}}function od($){return $.method==="POST"&&_9($,"multipart/form-data")}function sd($){return W0(()=>$.formData(),(J)=>{let W=J.get("operations");if(!W)throw Y0('Missing multipart form field "operations"');if(typeof W!=="string")throw Y0('Multipart form field "operations" must be a string');let X;try{X=JSON.parse(W)}catch{throw Y0('Multipart form field "operations" must be a valid JSON string')}let Y=J.get("map");if(Y!=null){if(typeof Y!=="string")throw Y0('Multipart form field "map" must be a string');let U;try{U=JSON.parse(Y)}catch{throw Y0('Multipart form field "map" must be a valid JSON string')}for(let Z in U){let H=J.get(Z),G=U[Z];for(let z of G)ad(X,z,H)}}return X},(J)=>{if(J instanceof Error&&J.message.startsWith("File size limit exceeded: "))throw Y0(J.message,{extensions:{http:{status:413}}});throw J})}var sW0=new Set(["query","variables","operationName","extensions"]);function eW0($,J){if($==null||typeof $!=="object")throw Y0('Invalid "params" in the request body',{extensions:{http:{spec:!0,status:400},code:"BAD_REQUEST"}});for(let W in $){if($[W]==null)continue;if(!sW0.has(W)){if(J?.includes(W))continue;throw Y0(`Unexpected parameter "${W}" in the request body.`,{extensions:{http:{status:400},code:"BAD_REQUEST"}})}}}function $X0($,J){if(!JX0($))throw Y0(`Expected params to be an object but given ${eH($)}.`,{extensions:{http:{status:400,headers:{Allow:"GET, POST"}},code:"BAD_REQUEST"}});if(eW0($,J),$.query==null)throw Y0("Must provide query string.",{extensions:{http:{spec:!0,status:400,headers:{Allow:"GET, POST"}},code:"BAD_REQUEST"}});let W=eH($.query);if(W!=="string")throw Y0(`Expected "query" param to be a string, but given ${W}.`,{extensions:{http:{status:400,headers:{Allow:"GET, POST"}},code:"BAD_REQUEST"}});let X=eH($.variables);if(!["object","null","undefined"].includes(X))throw Y0(`Expected "variables" param to be empty or an object, but given ${X}.`,{extensions:{http:{status:400,headers:{Allow:"GET, POST"}},code:"BAD_REQUEST"}});let Y=eH($.extensions);if(!["object","null","undefined"].includes(Y))throw Y0(`Expected "extensions" param to be empty or an object, but given ${Y}.`,{extensions:{http:{status:400,headers:{Allow:"GET, POST"}},code:"BAD_REQUEST"}});return $}function ed($){return{onParams({params:J}){$X0(J,$)}}}function eH($){if($===null)return"null";if(Array.isArray($))return"array";return typeof $}function JX0($){return eH($)==="object"}function WX0($){return $==="GET"||$==="POST"}function $l(){return{onRequestParse({request:$}){if(!WX0($.method))throw Y0("GraphQL only supports GET and POST requests.",{extensions:{http:{status:405,headers:{Allow:"GET, POST"}},code:"BAD_REQUEST"}})}}}function Jl(){return{onValidate(){return({valid:$,result:J})=>{if(!$)for(let W of J)W.extensions||={},W.extensions.code||="GRAPHQL_VALIDATION_FAILED",W.extensions.http||={},W.extensions.http.spec=W.extensions.http.spec==null?!0:W.extensions.http.spec,W.extensions.http.status||=400}}}}function Wl($){return{onRequestParse(){return{onRequestParseDone({requestParserResult:J}){if(Array.isArray(J)){if(!$)throw Y0("Batching is not supported.",{extensions:{http:{status:400},code:"BAD_REQUEST"}});if(J.length>$)throw Y0(`Batching is limited to ${$} operations per request.`,{extensions:{http:{status:413},code:"BAD_REQUEST"}})}}}}}}function XX0($,J,W){let X=J?kJ(J,W)??void 0:void 0;if(!X)throw Y0("Could not determine what operation to execute.",{extensions:{code:"OPERATION_RESOLUTION_FAILURE",http:{status:400}}});if(X.operation==="mutation"&&$==="GET")throw Y0("Can only perform a mutation operation from a POST request.",{extensions:{http:{status:405,headers:{Allow:"POST"}},code:"BAD_REQUEST"}})}function Xl(){return{onParse(){return({result:$,context:{request:J,params:{operationName:W}={}}})=>{if(!J)return;if($ instanceof Error){if($ instanceof m){let X=$.extensions||={};X.code||="GRAPHQL_PARSE_FAILED";let Y=X.http||={};Y.spec||=!0,Y.status||=400}}else XX0(J.method,$,W)}}}}function Yl({id:$=Date.now().toString(),logger:J=console,endpoint:W="/health"}={}){return{onRequest({endResponse:X,fetchAPI:Y,request:U}){if(U.url.endsWith(W)){J.debug("Responding Health Check");let Z=new Y.Response(null,{status:200,headers:{"x-yoga-id":$}});X(Z)}}}}var w2=typeof performance==="object"&&performance&&typeof performance.now==="function"?performance:Date,Zl=new Set,oR=typeof process==="object"&&!!process?process:{},Hl=($,J,W,X)=>{typeof oR.emitWarning==="function"?oR.emitWarning($,J,W,X):console.error(`[${W}] ${J}: ${$}`)},ZO=globalThis.AbortController,Ul=globalThis.AbortSignal;if(typeof ZO>"u"){Ul=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(X,Y){this._onabort.push(Y)}},ZO=class{constructor(){J()}signal=new Ul;abort(X){if(this.signal.aborted)return;this.signal.reason=X,this.signal.aborted=!0;for(let Y of this.signal._onabort)Y(X);this.signal.onabort?.(X)}};let $=oR.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",J=()=>{if(!$)return;$=!1,Hl("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",J)}}var YX0=($)=>!Zl.has($),RU1=Symbol("type"),lJ=($)=>$&&$===Math.floor($)&&$>0&&isFinite($),Gl=($)=>!lJ($)?null:$<=Math.pow(2,8)?Uint8Array:$<=Math.pow(2,16)?Uint16Array:$<=Math.pow(2,32)?Uint32Array:$<=Number.MAX_SAFE_INTEGER?$G:null;class $G extends Array{constructor($){super($);this.fill(0)}}class D2{heap;length;static#$=!1;static create($){let J=Gl($);if(!J)return[];D2.#$=!0;let W=new D2($,J);return D2.#$=!1,W}constructor($,J){if(!D2.#$)throw TypeError("instantiate Stack using Stack.create(n)");this.heap=new J($),this.length=0}push($){this.heap[this.length++]=$}pop(){return this.heap[--this.length]}}class HO{#$;#J;#W;#X;#Y;#Z;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#H;#w;#z;#G;#U;#Q;#O;#D;#F;#E;#M;#L;#A;#I;#P;#N;#V;static unsafeExposeInternals($){return{starts:$.#A,ttls:$.#I,sizes:$.#L,keyMap:$.#z,keyList:$.#G,valList:$.#U,next:$.#Q,prev:$.#O,get head(){return $.#D},get tail(){return $.#F},free:$.#E,isBackgroundFetch:(J)=>$.#K(J),backgroundFetch:(J,W,X,Y)=>$.#g(J,W,X,Y),moveToTail:(J)=>$.#h(J),indexes:(J)=>$.#k(J),rindexes:(J)=>$.#v(J),isStale:(J)=>$.#_(J)}}get max(){return this.#$}get maxSize(){return this.#J}get calculatedSize(){return this.#w}get size(){return this.#H}get fetchMethod(){return this.#Y}get memoMethod(){return this.#Z}get dispose(){return this.#W}get disposeAfter(){return this.#X}constructor($){let{max:J=0,ttl:W,ttlResolution:X=1,ttlAutopurge:Y,updateAgeOnGet:U,updateAgeOnHas:Z,allowStale:H,dispose:G,disposeAfter:z,noDisposeOnSet:w,noUpdateTTL:D,maxSize:K=0,maxEntrySize:O=0,sizeCalculation:F,fetchMethod:M,memoMethod:A,noDeleteOnFetchRejection:I,noDeleteOnStaleGet:P,allowStaleOnFetchRejection:Q,allowStaleOnFetchAbort:N,ignoreFetchAbort:_}=$;if(J!==0&&!lJ(J))throw TypeError("max option must be a nonnegative integer");let L=J?Gl(J):Array;if(!L)throw Error("invalid max value: "+J);if(this.#$=J,this.#J=K,this.maxEntrySize=O||this.#J,this.sizeCalculation=F,this.sizeCalculation){if(!this.#J&&!this.maxEntrySize)throw TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!=="function")throw TypeError("sizeCalculation set to non-function")}if(A!==void 0&&typeof A!=="function")throw TypeError("memoMethod must be a function if defined");if(this.#Z=A,M!==void 0&&typeof M!=="function")throw TypeError("fetchMethod must be a function if specified");if(this.#Y=M,this.#N=!!M,this.#z=new Map,this.#G=Array(J).fill(void 0),this.#U=Array(J).fill(void 0),this.#Q=new L(J),this.#O=new L(J),this.#D=0,this.#F=0,this.#E=D2.create(J),this.#H=0,this.#w=0,typeof G==="function")this.#W=G;if(typeof z==="function")this.#X=z,this.#M=[];else this.#X=void 0,this.#M=void 0;if(this.#P=!!this.#W,this.#V=!!this.#X,this.noDisposeOnSet=!!w,this.noUpdateTTL=!!D,this.noDeleteOnFetchRejection=!!I,this.allowStaleOnFetchRejection=!!Q,this.allowStaleOnFetchAbort=!!N,this.ignoreFetchAbort=!!_,this.maxEntrySize!==0){if(this.#J!==0){if(!lJ(this.#J))throw TypeError("maxSize must be a positive integer if specified")}if(!lJ(this.maxEntrySize))throw TypeError("maxEntrySize must be a positive integer if specified");this.#S()}if(this.allowStale=!!H,this.noDeleteOnStaleGet=!!P,this.updateAgeOnGet=!!U,this.updateAgeOnHas=!!Z,this.ttlResolution=lJ(X)||X===0?X:1,this.ttlAutopurge=!!Y,this.ttl=W||0,this.ttl){if(!lJ(this.ttl))throw TypeError("ttl must be a positive integer if specified");this.#B()}if(this.#$===0&&this.ttl===0&&this.#J===0)throw TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#$&&!this.#J){if(YX0("LRU_CACHE_UNBOUNDED"))Zl.add("LRU_CACHE_UNBOUNDED"),Hl("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning","LRU_CACHE_UNBOUNDED",HO)}}getRemainingTTL($){return this.#z.has($)?1/0:0}#B(){let $=new $G(this.#$),J=new $G(this.#$);this.#I=$,this.#A=J,this.#q=(Y,U,Z=w2.now())=>{if(J[Y]=U!==0?Z:0,$[Y]=U,U!==0&&this.ttlAutopurge){let H=setTimeout(()=>{if(this.#_(Y))this.#C(this.#G[Y],"expire")},U+1);if(H.unref)H.unref()}},this.#R=(Y)=>{J[Y]=$[Y]!==0?w2.now():0},this.#j=(Y,U)=>{if($[U]){let Z=$[U],H=J[U];if(!Z||!H)return;Y.ttl=Z,Y.start=H,Y.now=W||X();let G=Y.now-H;Y.remainingTTL=Z-G}};let W=0,X=()=>{let Y=w2.now();if(this.ttlResolution>0){W=Y;let U=setTimeout(()=>W=0,this.ttlResolution);if(U.unref)U.unref()}return Y};this.getRemainingTTL=(Y)=>{let U=this.#z.get(Y);if(U===void 0)return 0;let Z=$[U],H=J[U];if(!Z||!H)return 1/0;let G=(W||X())-H;return Z-G},this.#_=(Y)=>{let U=J[Y],Z=$[Y];return!!Z&&!!U&&(W||X())-U>Z}}#R=()=>{};#j=()=>{};#q=()=>{};#_=()=>!1;#S(){let $=new $G(this.#$);this.#w=0,this.#L=$,this.#T=(J)=>{this.#w-=$[J],$[J]=0},this.#f=(J,W,X,Y)=>{if(this.#K(W))return 0;if(!lJ(X))if(Y){if(typeof Y!=="function")throw TypeError("sizeCalculation must be a function");if(X=Y(W,J),!lJ(X))throw TypeError("sizeCalculation return invalid (expect positive integer)")}else throw TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return X},this.#x=(J,W,X)=>{if($[J]=W,this.#J){let Y=this.#J-$[J];while(this.#w>Y)this.#b(!0)}if(this.#w+=$[J],X)X.entrySize=W,X.totalCalculatedSize=this.#w}}#T=($)=>{};#x=($,J,W)=>{};#f=($,J,W,X)=>{if(W||X)throw TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#k({allowStale:$=this.allowStale}={}){if(this.#H)for(let J=this.#F;;){if(!this.#m(J))break;if($||!this.#_(J))yield J;if(J===this.#D)break;else J=this.#O[J]}}*#v({allowStale:$=this.allowStale}={}){if(this.#H)for(let J=this.#D;;){if(!this.#m(J))break;if($||!this.#_(J))yield J;if(J===this.#F)break;else J=this.#Q[J]}}#m($){return $!==void 0&&this.#z.get(this.#G[$])===$}*entries(){for(let $ of this.#k())if(this.#U[$]!==void 0&&this.#G[$]!==void 0&&!this.#K(this.#U[$]))yield[this.#G[$],this.#U[$]]}*rentries(){for(let $ of this.#v())if(this.#U[$]!==void 0&&this.#G[$]!==void 0&&!this.#K(this.#U[$]))yield[this.#G[$],this.#U[$]]}*keys(){for(let $ of this.#k()){let J=this.#G[$];if(J!==void 0&&!this.#K(this.#U[$]))yield J}}*rkeys(){for(let $ of this.#v()){let J=this.#G[$];if(J!==void 0&&!this.#K(this.#U[$]))yield J}}*values(){for(let $ of this.#k())if(this.#U[$]!==void 0&&!this.#K(this.#U[$]))yield this.#U[$]}*rvalues(){for(let $ of this.#v())if(this.#U[$]!==void 0&&!this.#K(this.#U[$]))yield this.#U[$]}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find($,J={}){for(let W of this.#k()){let X=this.#U[W],Y=this.#K(X)?X.__staleWhileFetching:X;if(Y===void 0)continue;if($(Y,this.#G[W],this))return this.get(this.#G[W],J)}}forEach($,J=this){for(let W of this.#k()){let X=this.#U[W],Y=this.#K(X)?X.__staleWhileFetching:X;if(Y===void 0)continue;$.call(J,Y,this.#G[W],this)}}rforEach($,J=this){for(let W of this.#v()){let X=this.#U[W],Y=this.#K(X)?X.__staleWhileFetching:X;if(Y===void 0)continue;$.call(J,Y,this.#G[W],this)}}purgeStale(){let $=!1;for(let J of this.#v({allowStale:!0}))if(this.#_(J))this.#C(this.#G[J],"expire"),$=!0;return $}info($){let J=this.#z.get($);if(J===void 0)return;let W=this.#U[J],X=this.#K(W)?W.__staleWhileFetching:W;if(X===void 0)return;let Y={value:X};if(this.#I&&this.#A){let U=this.#I[J],Z=this.#A[J];if(U&&Z){let H=U-(w2.now()-Z);Y.ttl=H,Y.start=Date.now()}}if(this.#L)Y.size=this.#L[J];return Y}dump(){let $=[];for(let J of this.#k({allowStale:!0})){let W=this.#G[J],X=this.#U[J],Y=this.#K(X)?X.__staleWhileFetching:X;if(Y===void 0||W===void 0)continue;let U={value:Y};if(this.#I&&this.#A){U.ttl=this.#I[J];let Z=w2.now()-this.#A[J];U.start=Math.floor(Date.now()-Z)}if(this.#L)U.size=this.#L[J];$.unshift([W,U])}return $}load($){this.clear();for(let[J,W]of $){if(W.start){let X=Date.now()-W.start;W.start=w2.now()-X}this.set(J,W.value,W)}}set($,J,W={}){if(J===void 0)return this.delete($),this;let{ttl:X=this.ttl,start:Y,noDisposeOnSet:U=this.noDisposeOnSet,sizeCalculation:Z=this.sizeCalculation,status:H}=W,{noUpdateTTL:G=this.noUpdateTTL}=W,z=this.#f($,J,W.size||0,Z);if(this.maxEntrySize&&z>this.maxEntrySize){if(H)H.set="miss",H.maxEntrySizeExceeded=!0;return this.#C($,"set"),this}let w=this.#H===0?void 0:this.#z.get($);if(w===void 0){if(w=this.#H===0?this.#F:this.#E.length!==0?this.#E.pop():this.#H===this.#$?this.#b(!1):this.#H,this.#G[w]=$,this.#U[w]=J,this.#z.set($,w),this.#Q[this.#F]=w,this.#O[w]=this.#F,this.#F=w,this.#H++,this.#x(w,z,H),H)H.set="add";G=!1}else{this.#h(w);let D=this.#U[w];if(J!==D){if(this.#N&&this.#K(D)){D.__abortController.abort(Error("replaced"));let{__staleWhileFetching:K}=D;if(K!==void 0&&!U){if(this.#P)this.#W?.(K,$,"set");if(this.#V)this.#M?.push([K,$,"set"])}}else if(!U){if(this.#P)this.#W?.(D,$,"set");if(this.#V)this.#M?.push([D,$,"set"])}if(this.#T(w),this.#x(w,z,H),this.#U[w]=J,H){H.set="replace";let K=D&&this.#K(D)?D.__staleWhileFetching:D;if(K!==void 0)H.oldValue=K}}else if(H)H.set="update"}if(X!==0&&!this.#I)this.#B();if(this.#I){if(!G)this.#q(w,X,Y);if(H)this.#j(H,w)}if(!U&&this.#V&&this.#M){let D=this.#M,K;while(K=D?.shift())this.#X?.(...K)}return this}pop(){try{while(this.#H){let $=this.#U[this.#D];if(this.#b(!0),this.#K($)){if($.__staleWhileFetching)return $.__staleWhileFetching}else if($!==void 0)return $}}finally{if(this.#V&&this.#M){let $=this.#M,J;while(J=$?.shift())this.#X?.(...J)}}}#b($){let J=this.#D,W=this.#G[J],X=this.#U[J];if(this.#N&&this.#K(X))X.__abortController.abort(Error("evicted"));else if(this.#P||this.#V){if(this.#P)this.#W?.(X,W,"evict");if(this.#V)this.#M?.push([X,W,"evict"])}if(this.#T(J),$)this.#G[J]=void 0,this.#U[J]=void 0,this.#E.push(J);if(this.#H===1)this.#D=this.#F=0,this.#E.length=0;else this.#D=this.#Q[J];return this.#z.delete(W),this.#H--,J}has($,J={}){let{updateAgeOnHas:W=this.updateAgeOnHas,status:X}=J,Y=this.#z.get($);if(Y!==void 0){let U=this.#U[Y];if(this.#K(U)&&U.__staleWhileFetching===void 0)return!1;if(!this.#_(Y)){if(W)this.#R(Y);if(X)X.has="hit",this.#j(X,Y);return!0}else if(X)X.has="stale",this.#j(X,Y)}else if(X)X.has="miss";return!1}peek($,J={}){let{allowStale:W=this.allowStale}=J,X=this.#z.get($);if(X===void 0||!W&&this.#_(X))return;let Y=this.#U[X];return this.#K(Y)?Y.__staleWhileFetching:Y}#g($,J,W,X){let Y=J===void 0?void 0:this.#U[J];if(this.#K(Y))return Y;let U=new ZO,{signal:Z}=W;Z?.addEventListener("abort",()=>U.abort(Z.reason),{signal:U.signal});let H={signal:U.signal,options:W,context:X},G=(F,M=!1)=>{let{aborted:A}=U.signal,I=W.ignoreFetchAbort&&F!==void 0;if(W.status)if(A&&!M){if(W.status.fetchAborted=!0,W.status.fetchError=U.signal.reason,I)W.status.fetchAbortIgnored=!0}else W.status.fetchResolved=!0;if(A&&!I&&!M)return w(U.signal.reason);let P=K;if(this.#U[J]===K)if(F===void 0)if(P.__staleWhileFetching)this.#U[J]=P.__staleWhileFetching;else this.#C($,"fetch");else{if(W.status)W.status.fetchUpdated=!0;this.set($,F,H.options)}return F},z=(F)=>{if(W.status)W.status.fetchRejected=!0,W.status.fetchError=F;return w(F)},w=(F)=>{let{aborted:M}=U.signal,A=M&&W.allowStaleOnFetchAbort,I=A||W.allowStaleOnFetchRejection,P=I||W.noDeleteOnFetchRejection,Q=K;if(this.#U[J]===K){if(!P||Q.__staleWhileFetching===void 0)this.#C($,"fetch");else if(!A)this.#U[J]=Q.__staleWhileFetching}if(I){if(W.status&&Q.__staleWhileFetching!==void 0)W.status.returnedStale=!0;return Q.__staleWhileFetching}else if(Q.__returned===Q)throw F},D=(F,M)=>{let A=this.#Y?.($,Y,H);if(A&&A instanceof Promise)A.then((I)=>F(I===void 0?void 0:I),M);U.signal.addEventListener("abort",()=>{if(!W.ignoreFetchAbort||W.allowStaleOnFetchAbort){if(F(void 0),W.allowStaleOnFetchAbort)F=(I)=>G(I,!0)}})};if(W.status)W.status.fetchDispatched=!0;let K=new Promise(D).then(G,z),O=Object.assign(K,{__abortController:U,__staleWhileFetching:Y,__returned:void 0});if(J===void 0)this.set($,O,{...H.options,status:void 0}),J=this.#z.get($);else this.#U[J]=O;return O}#K($){if(!this.#N)return!1;let J=$;return!!J&&J instanceof Promise&&J.hasOwnProperty("__staleWhileFetching")&&J.__abortController instanceof ZO}async fetch($,J={}){let{allowStale:W=this.allowStale,updateAgeOnGet:X=this.updateAgeOnGet,noDeleteOnStaleGet:Y=this.noDeleteOnStaleGet,ttl:U=this.ttl,noDisposeOnSet:Z=this.noDisposeOnSet,size:H=0,sizeCalculation:G=this.sizeCalculation,noUpdateTTL:z=this.noUpdateTTL,noDeleteOnFetchRejection:w=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:D=this.allowStaleOnFetchRejection,ignoreFetchAbort:K=this.ignoreFetchAbort,allowStaleOnFetchAbort:O=this.allowStaleOnFetchAbort,context:F,forceRefresh:M=!1,status:A,signal:I}=J;if(!this.#N){if(A)A.fetch="get";return this.get($,{allowStale:W,updateAgeOnGet:X,noDeleteOnStaleGet:Y,status:A})}let P={allowStale:W,updateAgeOnGet:X,noDeleteOnStaleGet:Y,ttl:U,noDisposeOnSet:Z,size:H,sizeCalculation:G,noUpdateTTL:z,noDeleteOnFetchRejection:w,allowStaleOnFetchRejection:D,allowStaleOnFetchAbort:O,ignoreFetchAbort:K,status:A,signal:I},Q=this.#z.get($);if(Q===void 0){if(A)A.fetch="miss";let N=this.#g($,Q,P,F);return N.__returned=N}else{let N=this.#U[Q];if(this.#K(N)){let k=W&&N.__staleWhileFetching!==void 0;if(A){if(A.fetch="inflight",k)A.returnedStale=!0}return k?N.__staleWhileFetching:N.__returned=N}let _=this.#_(Q);if(!M&&!_){if(A)A.fetch="hit";if(this.#h(Q),X)this.#R(Q);if(A)this.#j(A,Q);return N}let L=this.#g($,Q,P,F),S=L.__staleWhileFetching!==void 0&&W;if(A){if(A.fetch=_?"stale":"refresh",S&&_)A.returnedStale=!0}return S?L.__staleWhileFetching:L.__returned=L}}async forceFetch($,J={}){let W=await this.fetch($,J);if(W===void 0)throw Error("fetch() returned undefined");return W}memo($,J={}){let W=this.#Z;if(!W)throw Error("no memoMethod provided to constructor");let{context:X,forceRefresh:Y,...U}=J,Z=this.get($,U);if(!Y&&Z!==void 0)return Z;let H=W($,Z,{options:U,context:X});return this.set($,H,U),H}get($,J={}){let{allowStale:W=this.allowStale,updateAgeOnGet:X=this.updateAgeOnGet,noDeleteOnStaleGet:Y=this.noDeleteOnStaleGet,status:U}=J,Z=this.#z.get($);if(Z!==void 0){let H=this.#U[Z],G=this.#K(H);if(U)this.#j(U,Z);if(this.#_(Z)){if(U)U.get="stale";if(!G){if(!Y)this.#C($,"expire");if(U&&W)U.returnedStale=!0;return W?H:void 0}else{if(U&&W&&H.__staleWhileFetching!==void 0)U.returnedStale=!0;return W?H.__staleWhileFetching:void 0}}else{if(U)U.get="hit";if(G)return H.__staleWhileFetching;if(this.#h(Z),X)this.#R(Z);return H}}else if(U)U.get="miss"}#y($,J){this.#O[J]=$,this.#Q[$]=J}#h($){if($!==this.#F){if($===this.#D)this.#D=this.#Q[$];else this.#y(this.#O[$],this.#Q[$]);this.#y(this.#F,$),this.#F=$}}delete($){return this.#C($,"delete")}#C($,J){let W=!1;if(this.#H!==0){let X=this.#z.get($);if(X!==void 0)if(W=!0,this.#H===1)this.#c(J);else{this.#T(X);let Y=this.#U[X];if(this.#K(Y))Y.__abortController.abort(Error("deleted"));else if(this.#P||this.#V){if(this.#P)this.#W?.(Y,$,J);if(this.#V)this.#M?.push([Y,$,J])}if(this.#z.delete($),this.#G[X]=void 0,this.#U[X]=void 0,X===this.#F)this.#F=this.#O[X];else if(X===this.#D)this.#D=this.#Q[X];else{let U=this.#O[X];this.#Q[U]=this.#Q[X];let Z=this.#Q[X];this.#O[Z]=this.#O[X]}this.#H--,this.#E.push(X)}}if(this.#V&&this.#M?.length){let X=this.#M,Y;while(Y=X?.shift())this.#X?.(...Y)}return W}clear(){return this.#c("delete")}#c($){for(let J of this.#v({allowStale:!0})){let W=this.#U[J];if(this.#K(W))W.__abortController.abort(Error("deleted"));else{let X=this.#G[J];if(this.#P)this.#W?.(W,X,$);if(this.#V)this.#M?.push([W,X,$])}}if(this.#z.clear(),this.#U.fill(void 0),this.#G.fill(void 0),this.#I&&this.#A)this.#I.fill(0),this.#A.fill(0);if(this.#L)this.#L.fill(0);if(this.#D=0,this.#F=0,this.#E.length=0,this.#w=0,this.#H=0,this.#V&&this.#M){let J=this.#M,W;while(W=J?.shift())this.#X?.(...W)}}}var UX0=1024,ZX0=3600000;function GO({max:$=UX0,ttl:J=ZX0}={}){return new HO({max:$,ttl:J})}function zl({documentCache:$=GO(),errorCache:J=GO(),validationCache:W=!0}){let X=GO();return{onParse({params:Y,setParsedDocument:U}){let Z=Y.source.toString(),H=$.get(Z);if(H){U(H);return}let G=J.get(Z);if(G)throw G;return({result:z})=>{if(z!=null)if(z instanceof Error)J.set(Z,z);else $.set(Z,z)}},onValidate({params:{schema:Y,documentAST:U,rules:Z},setResult:H}){if(Y==null)return;if(W!==!1){let G=Z?.map((K)=>K.name).join(",")||"",z=X.get(G);if(!z)z=new WeakMap,X.set(G,z);let w=z.get(Y);if(!w)w=new WeakMap,z.set(Y,w);let D=w.get(U);if(D){H(D);return}return({result:K})=>{if(K!=null)w?.set(U,K)}}}}}var HX0=()=>!0;function K2($){let J=$.match||HX0;return{onRequestParse({request:W,setRequestParser:X}){if(J(W))X($.parse)}}}function wl($){let J=($.headers.get("accept")||"*/*").replace(/\s/g,"").toLowerCase().split(","),W=[];for(let X of J){let[Y,...U]=X.split(";");if(Y===void 0)continue;if((U?.find((H)=>H.includes("charset="))||"charset=utf-8")!=="charset=utf-8")continue;W.push(Y)}return W.reverse()}function Dl($,J){let[W,X]=$.split("/"),[Y,U]=J.split("/");if((Y==="*"||Y===W)&&(U==="*"||U===X))return!0;return!1}function O2($){if(Array.isArray($))return`[${$.map((X)=>{let Y=Kl(X);return(X.stringify||JSON.stringify)(Y)}).join(",")}]`;let J=Kl($);return($.stringify||JSON.stringify)(J)}function Kl($){if($.errors?.length||$.extensions?.http){let J={...$};if(J.errors&&=J.errors.map(Ol),J.extensions){let{http:W,...X}=$.extensions;J.extensions=Object.keys(X).length?X:void 0}return J}return $}function Ol($){if(V5($)){let J="toJSON"in $&&typeof $.toJSON==="function"?$.toJSON():Object($),{http:W,unexpected:X,...Y}=J.extensions||{};return Y0($.message,{nodes:$.nodes,source:$.source,positions:$.positions,path:$.path,originalError:Ol($.originalError||void 0),extensions:Object.keys(Y).length?Y:void 0})}return $}function Fl($,J){let X=z2($,{Connection:"keep-alive","Content-Type":'multipart/mixed; boundary="-"',"Transfer-Encoding":"chunked"}),Y,U=new J.TextEncoder,Z=new J.ReadableStream({start(H){if(C$($))Y=$[Symbol.asyncIterator]();else{let G=!1;Y={next:()=>{if(G)return d0({done:!0,value:null});return G=!0,d0({done:!1,value:$})}}}H.enqueue(U.encode(`\r
`)),H.enqueue(U.encode("---"))},pull(H){return W0(()=>Y.next(),({done:G,value:z})=>{if(z!=null){H.enqueue(U.encode(`\r
`)),H.enqueue(U.encode("Content-Type: application/json; charset=utf-8")),H.enqueue(U.encode(`\r
`));let w=O2(z),D=U.encode(w);H.enqueue(U.encode("Content-Length: "+D.byteLength)),H.enqueue(U.encode(`\r
`)),H.enqueue(U.encode(`\r
`)),H.enqueue(D),H.enqueue(U.encode(`\r
`)),H.enqueue(U.encode("---"))}if(G)H.enqueue(U.encode(`--\r
`)),H.close()},(G)=>{H.error(G)})},cancel(H){if(Y.return)return W0(()=>Y.return?.(H),()=>{})}});return new J.Response(Z,X)}function El($,J,W){if(aY($))return new J.Response(null,{status:406,statusText:"Not Acceptable",headers:{accept:"application/json; charset=utf-8, application/graphql-response+json; charset=utf-8"}});let X={"Content-Type":W+"; charset=utf-8"},Y=z2($,X,W==="application/json"&&!Array.isArray($)&&gd($.errors)&&$.errors.some((Z)=>!Z.extensions?.originalError||V5(Z.extensions.originalError))),U=O2($);return new J.Response(U,Y)}function Ml(){return function(J,W){let X=12000;if(globalThis.process?.env?.NODE_ENV==="test")X=300;let U=z2(J,{"Content-Type":"text/event-stream",Connection:"keep-alive","Cache-Control":"no-cache","Content-Encoding":"none"},!0),Z,H,G=new W.TextEncoder,z=new W.ReadableStream({start(w){if(w.enqueue(G.encode(`:

`)),H=setInterval(()=>{if(!w.desiredSize){clearInterval(H);return}w.enqueue(G.encode(`:

`))},X),C$(J))Z=J[Symbol.asyncIterator]();else{let D=!1;Z={next:()=>{if(D)return d0({done:!0,value:null});return D=!0,d0({done:!1,value:J})}}}},pull(w){return W0(()=>Z.next(),(D)=>{if(D.value!=null){w.enqueue(G.encode(`event: next
`));let K=O2(D.value);w.enqueue(G.encode(`data: ${K}

`))}if(D.done)w.enqueue(G.encode(`event: complete
`)),w.enqueue(G.encode(`data:

`)),clearInterval(H),w.close()},(D)=>{w.error(D)})},cancel(w){if(clearInterval(H),Z.return)return W0(()=>Z.return?.(w),()=>{})}});return new W.Response(z,U)}}var GX0={mediaTypes:["multipart/mixed"],asyncIterables:!0,processResult:Fl};function zX0(){return{mediaTypes:["text/event-stream"],asyncIterables:!0,processResult:Ml()}}var Vl={mediaTypes:["application/graphql-response+json","application/json"],asyncIterables:!1,processResult:El};function Ql(){let $=new WeakMap,J=zX0(),W=[J,GX0,Vl],X=[J,Vl];return{onSubscribe({args:{contextValue:Y}}){if(Y.request)$.set(Y.request,!0)},onResultProcess({request:Y,result:U,acceptableMediaTypes:Z,setResultProcessor:H}){let z=$.get(Y)?X:W,w=wl(Y),D=C$(U);for(let K of z)for(let O of w){if(D&&!K.asyncIterables)continue;for(let F of K.mediaTypes)if(Z.push(F),Dl(F,O))H(K.processResult,F)}}}}var Al="<!doctype html><html lang=en><head><meta charset=utf-8><title>Welcome to GraphQL Yoga</title><link rel=icon href=https://raw.githubusercontent.com/graphql-hive/graphql-yoga/refs/heads/main/website/src/app/favicon.ico><style>body,html{padding:0;margin:0;height:100%;font-family:Inter,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Fira Sans','Droid Sans','Helvetica Neue',sans-serif;color:#fff;background-color:#000}main>section.hero{display:flex;height:90vh;justify-content:center;align-items:center;flex-direction:column}.logo{display:flex;align-items:center}.buttons{margin-top:24px}h1{font-size:80px}h2{color:#888;max-width:50%;margin-top:0;text-align:center}a{color:#fff;text-decoration:none;margin-left:10px;margin-right:10px;font-weight:700;transition:color .3s ease;padding:4px;overflow:visible}a.graphiql:hover{color:rgba(255,0,255,.7)}a.docs:hover{color:rgba(28,200,238,.7)}a.tutorial:hover{color:rgba(125,85,245,.7)}svg{margin-right:24px}.not-what-your-looking-for{margin-top:5vh}.not-what-your-looking-for>*{margin-left:auto;margin-right:auto}.not-what-your-looking-for>p{text-align:center}.not-what-your-looking-for>h2{color:#464646}.not-what-your-looking-for>p{max-width:600px;line-height:1.3em}.not-what-your-looking-for>pre{max-width:300px}</style></head><body id=body><main><section class=hero><div class=logo><div><svg xmlns=http://www.w3.org/2000/svg viewBox=\"-0.41 0.445 472.812 499.811\" height=150><defs><linearGradient id=paint0_linear_1677_11483 x1=16 y1=14 x2=87.2132 y2=44.5982 gradientUnits=userSpaceOnUse gradientTransform=\"matrix(8.139854, 0, 0, 8.139854, -130.346407, -113.25101)\"><stop stop-color=#7433FF /><stop offset=1 stop-color=#FFA3FD /></linearGradient><linearGradient id=paint1_linear_1677_11483 x1=16 y1=14 x2=87.2132 y2=44.5982 gradientUnits=userSpaceOnUse gradientTransform=\"matrix(8.139854, 0, 0, 8.139854, -130.346407, -113.25101)\"><stop stop-color=#7433FF /><stop offset=1 stop-color=#FFA3FD /></linearGradient><linearGradient id=paint2_linear_1677_11483 x1=16 y1=14 x2=87.2132 y2=44.5982 gradientUnits=userSpaceOnUse gradientTransform=\"matrix(8.139854, 0, 0, 8.139854, -130.346407, -113.25101)\"><stop stop-color=#7433FF /><stop offset=1 stop-color=#FFA3FD /></linearGradient><linearGradient id=paint3_linear_1677_11483 x1=16 y1=14 x2=87.2132 y2=44.5982 gradientUnits=userSpaceOnUse><stop stop-color=#7433FF /><stop offset=1 stop-color=#FFA3FD /></linearGradient><linearGradient id=paint4_linear_1677_11483 x1=16 y1=14 x2=87.2132 y2=44.5982 gradientUnits=userSpaceOnUse><stop stop-color=#7433FF /><stop offset=1 stop-color=#FFA3FD /></linearGradient><linearGradient id=paint5_linear_1677_11483 x1=16 y1=14 x2=87.2132 y2=44.5982 gradientUnits=userSpaceOnUse><stop stop-color=#7433FF /><stop offset=1 stop-color=#FFA3FD /></linearGradient><filter id=filter0_f_1677_11483 x=23 y=-25 width=100 height=100 filterUnits=userSpaceOnUse color-interpolation-filters=sRGB><feFlood flood-opacity=0 result=BackgroundImageFix /><feBlend mode=normal in=SourceGraphic in2=BackgroundImageFix result=shape /><feGaussianBlur stdDeviation=12 result=effect1_foregroundBlur_1677_11483 /></filter><filter id=filter1_f_1677_11483 x=-24 y=19 width=100 height=100 filterUnits=userSpaceOnUse color-interpolation-filters=sRGB><feFlood flood-opacity=0 result=BackgroundImageFix /><feBlend mode=normal in=SourceGraphic in2=BackgroundImageFix result=shape /><feGaussianBlur stdDeviation=12 result=effect1_foregroundBlur_1677_11483 /></filter><linearGradient id=paint6_linear_1677_11483 x1=30 y1=28 x2=66.1645 y2=44.4363 gradientUnits=userSpaceOnUse gradientTransform=\"matrix(8.139854, 0, 0, 8.139854, -130.346407, -113.25101)\"><stop stop-color=#7433FF /><stop offset=1 stop-color=#FFA3FD /></linearGradient><filter id=filter2_f_1677_11483 x=-12 y=-44 width=100 height=100 filterUnits=userSpaceOnUse color-interpolation-filters=sRGB><feFlood flood-opacity=0 result=BackgroundImageFix /><feBlend mode=normal in=SourceGraphic in2=BackgroundImageFix result=shape /><feGaussianBlur stdDeviation=12 result=effect1_foregroundBlur_1677_11483 /></filter><filter id=filter3_f_1677_11483 x=13 y=19 width=100 height=100 filterUnits=userSpaceOnUse color-interpolation-filters=sRGB><feFlood flood-opacity=0 result=BackgroundImageFix /><feBlend mode=normal in=SourceGraphic in2=BackgroundImageFix result=shape /><feGaussianBlur stdDeviation=12 result=effect1_foregroundBlur_1677_11483 /></filter></defs><mask id=mask0_1677_11483 style=mask-type:alpha maskUnits=userSpaceOnUse x=16 y=14 width=58 height=62><path d=\"M21 25.3501C21.7279 25.3501 22.4195 25.5056 23.0433 25.7853L42.1439 14.8C43.0439 14.3 44.1439 14 45.1439 14C46.2439 14 47.2439 14.3 48.1439 14.8L64.5439 24.3C63.3439 25.1 62.4439 26.3 61.8439 27.7L45.9438 18.5C45.6439 18.3 45.344 18.3 45.0441 18.3C44.7441 18.3 44.4439 18.4 44.1439 18.5L25.8225 29.0251C25.9382 29.4471 26 29.8914 26 30.3501C26 33.1115 23.7614 35.3501 21 35.3501C18.2386 35.3501 16 33.1115 16 30.3501C16 27.5887 18.2386 25.3501 21 25.3501Z\" fill=url(#paint3_linear_1677_11483) /><path d=\"M67.2438 35.0329C65.3487 34.3219 64 32.4934 64 30.35C64 27.5886 66.2386 25.35 69 25.35C71.7614 25.35 74 27.5886 74 30.35C74 32.1825 73.0142 33.7848 71.5439 34.6554V55.2C71.5439 57.4 70.3439 59.4 68.5439 60.5L52.1439 69.9C52.1439 68.4 51.6438 66.9 50.7438 65.8L66.3439 56.8C66.9439 56.5 67.2438 55.9 67.2438 55.2V35.0329Z\" fill=url(#paint4_linear_1677_11483) /><path d=\"M49.8439 69.1055C49.9458 69.5034 50 69.9204 50 70.3501C50 73.1115 47.7614 75.3501 45 75.3501C42.5102 75.3501 40.4454 73.5302 40.0633 71.1481L21.8439 60.6C19.9439 59.5 18.8439 57.5 18.8439 55.3V36.8C19.5439 37 20.3439 37.2 21.0439 37.2C21.7439 37.2 22.4439 37.1 23.0439 36.9V55.3C23.0439 56 23.4438 56.6 23.9438 56.9L41.3263 66.9583C42.2398 65.9694 43.5476 65.3501 45 65.3501C47.3291 65.3501 49.2862 66.9426 49.8419 69.0981L49.8436 69.0997L49.8439 69.1055Z\" fill=url(#paint5_linear_1677_11483) /></mask><mask id=mask1_1677_11483 style=mask-type:alpha maskUnits=userSpaceOnUse x=30 y=28 width=30 height=30><path fill-rule=evenodd clip-rule=evenodd d=\"M49.3945 32.3945C49.3945 34.7088 47.5796 38.5469 45 38.5469C42.4271 38.5469 40.6055 34.7112 40.6055 32.3945C40.6055 29.9714 42.5769 28 45 28C47.4231 28 49.3945 29.9714 49.3945 32.3945ZM35.332 49.0433V48.2148C35.332 42.8117 37.8535 41.0004 39.8796 39.545L39.8801 39.5447C40.3928 39.1767 40.8604 38.8404 41.2488 38.4742C42.3293 39.6642 43.626 40.3047 45 40.3047C46.3752 40.3047 47.6725 39.6642 48.7529 38.4754C49.1408 38.841 49.6078 39.1773 50.1199 39.5447L50.1204 39.545C52.1465 41.0004 54.668 42.8117 54.668 48.2148V49.0433L53.8406 49.092C49.9848 49.3185 46.8646 46.9002 45 43.5777C43.1159 46.935 39.9847 49.318 36.1594 49.092L35.332 49.0433ZM58.1463 51.0747L58.1463 51.0746C57.0179 50.891 50.0128 49.7507 45.0007 55.693C40.0116 49.7553 33.1965 50.8592 31.9095 51.0677L31.9095 51.0677C31.7906 51.087 31.7189 51.0986 31.7002 51.0963C31.7005 51.0969 31.7011 51.1045 31.7023 51.1187C31.726 51.4003 31.9682 54.2745 34.0566 56.2422L30 58H60L55.8956 56.2422C57.8537 54.4764 58.1396 52.2685 58.2508 51.4092V51.4091C58.2697 51.2628 58.2836 51.1556 58.2998 51.0963C58.2881 51.0977 58.2356 51.0892 58.1463 51.0747ZM40.4836 50.104C42.3956 49.3212 43.6746 48.1737 45 46.61C46.332 48.1841 47.6159 49.3259 49.5164 50.104C49.5356 50.1425 49.5557 50.1805 49.5756 50.2182C49.5793 50.2253 49.583 50.2323 49.5867 50.2393C48.0911 50.8127 46.4264 51.825 45.0047 53.1444C43.5906 51.8221 41.9673 50.8196 40.4256 50.2153C40.4455 50.1784 40.4648 50.1415 40.4836 50.104Z\" fill=black /></mask><path d=\"M 40.59 93.095 C 46.517 93.095 52.14 94.365 57.22 96.635 L 212.7 7.22 C 220.025 3.149 228.978 0.706 237.12 0.706 C 246.073 0.706 254.213 3.149 261.54 7.22 L 395.032 84.547 C 385.264 91.059 377.939 100.827 373.055 112.224 L 243.631 37.338 C 241.19 35.71 238.747 35.71 236.305 35.71 C 233.863 35.71 231.42 36.523 228.978 37.338 L 79.84 123.009 C 80.786 126.443 81.29 130.058 81.29 133.793 C 81.29 156.269 63.065 174.493 40.59 174.493 C 18.116 174.493 -0.109 156.269 -0.109 133.793 C -0.109 111.32 18.116 93.095 40.59 93.095 Z\" fill=url(#paint0_linear_1677_11483) /><path d=\"M 417.01 171.913 C 401.585 166.126 390.603 151.238 390.603 133.793 C 390.603 111.32 408.83 93.095 431.303 93.095 C 453.777 93.095 472.001 111.32 472.001 133.793 C 472.001 148.706 463.976 161.755 452.011 168.835 L 452.011 336.07 C 452.011 353.977 442.243 370.258 427.591 379.21 L 294.098 455.726 C 294.098 443.516 290.029 431.306 282.703 422.353 L 409.683 349.093 C 414.568 346.651 417.01 341.767 417.01 336.07 L 417.01 171.913 Z\" fill=url(#paint1_linear_1677_11483) /><path d=\"M 275.376 449.253 C 276.206 452.495 276.646 455.889 276.646 459.389 C 276.646 481.863 258.422 500.087 235.947 500.087 C 215.679 500.087 198.87 485.272 195.761 465.883 L 47.46 380.025 C 31.995 371.071 23.041 354.792 23.041 336.884 L 23.041 186.296 C 28.738 187.923 35.25 189.553 40.948 189.553 C 46.646 189.553 52.345 188.738 57.228 187.111 L 57.228 336.884 C 57.228 342.582 60.485 347.465 64.554 349.908 L 206.042 431.777 C 213.481 423.728 224.127 418.689 235.947 418.689 C 254.905 418.689 270.833 431.656 275.36 449.196 L 275.376 449.214 L 275.376 449.253 Z\" fill=url(#paint2_linear_1677_11483) /><g mask=url(#mask0_1677_11483) transform=\"matrix(8.139854, 0, 0, 8.139854, -130.346375, -113.251038)\"><g filter=url(#filter0_f_1677_11483)><circle cx=73 cy=25 r=26 fill=#ED2E7E /></g><g filter=url(#filter1_f_1677_11483)><circle cx=26 cy=69 r=26 fill=#1CC8EE /></g></g><path fill-rule=evenodd clip-rule=evenodd d=\"M 271.713 150.431 C 271.713 169.275 256.948 200.517 235.947 200.517 C 215.003 200.517 200.172 169.292 200.172 150.431 C 200.172 130.708 216.225 114.666 235.947 114.666 C 255.67 114.666 271.713 130.708 271.713 150.431 Z M 157.251 285.952 L 157.251 279.212 C 157.251 235.233 177.771 220.485 194.27 208.641 C 198.447 205.644 202.247 202.901 205.414 199.923 C 214.204 209.608 224.763 214.826 235.947 214.826 C 247.138 214.826 257.697 209.608 266.496 199.931 C 269.653 202.911 273.456 205.644 277.622 208.641 C 294.114 220.485 314.642 235.233 314.642 279.212 L 314.642 285.952 L 307.912 286.351 C 276.525 288.191 251.128 268.509 235.947 241.468 C 220.611 268.795 195.126 288.191 163.981 286.351 L 157.251 285.952 Z M 342.953 302.492 C 333.771 300.994 276.751 291.715 235.955 340.082 C 195.345 291.749 139.865 300.734 129.389 302.436 C 128.428 302.59 127.841 302.688 127.687 302.665 C 127.687 302.673 127.695 302.729 127.702 302.85 C 127.897 305.138 129.867 328.532 146.872 344.55 L 113.849 358.862 L 358.044 358.862 L 324.639 344.55 C 340.576 330.177 342.905 312.202 343.807 305.212 C 343.962 304.022 344.077 303.153 344.206 302.665 C 344.108 302.68 343.686 302.606 342.953 302.492 Z M 199.188 294.59 C 214.751 288.215 225.161 278.879 235.947 266.15 C 246.788 278.96 257.241 288.255 272.707 294.59 C 272.869 294.898 273.031 295.207 273.196 295.518 C 273.219 295.574 273.252 295.631 273.285 295.688 C 261.107 300.361 247.555 308.598 235.989 319.334 C 224.477 308.573 211.258 300.417 198.715 295.493 C 198.87 295.191 199.033 294.891 199.188 294.59 Z\" fill=url(#paint6_linear_1677_11483) /><g mask=url(#mask1_1677_11483) transform=\"matrix(8.139854, 0, 0, 8.139854, -130.346375, -113.251038)\"><g filter=url(#filter2_f_1677_11483)><circle cx=38 cy=6 r=26 fill=#ED2E7E /></g><g filter=url(#filter3_f_1677_11483)><circle cx=63 cy=69 r=26 fill=#1CC8EE /></g></g></svg></div><h1>GraphQL Yoga</h1><p>Version: 5.16.0</p></div><h2>The batteries-included cross-platform GraphQL Server.</h2><div class=buttons><a href=https://www.the-guild.dev/graphql/yoga-server/docs class=docs>Read the Docs</a> <a href=https://www.the-guild.dev/graphql/yoga-server/tutorial/basic class=tutorial>Start the Tutorial </a><a href=__GRAPHIQL_LINK__ class=graphiql>Visit GraphiQL</a></div></section><section class=not-what-your-looking-for><h2>Not the page you are looking for? \uD83D\uDC40</h2><p>This page is shown be default whenever a 404 is hit.<br>You can disable this by behavior via the <code>landingPage</code> option.</p><pre>\n          <code>\nimport { createYoga } from 'graphql-yoga';\n\nconst yoga = createYoga({\n  landingPage: false\n})\n          </code>\n        </pre><p>If you expected this page to be the GraphQL route, you need to configure Yoga. Currently, the GraphQL route is configured to be on <code>__GRAPHIQL_LINK__</code>.</p><pre>\n          <code>\nimport { createYoga } from 'graphql-yoga';\n\nconst yoga = createYoga({\n  graphqlEndpoint: '__REQUEST_PATH__',\n})\n          </code>\n        </pre></section></main></body></html>";var wX0=function(J){return new J.fetchAPI.Response(Al.replace(/__GRAPHIQL_LINK__/g,J.graphqlEndpoint).replace(/__REQUEST_PATH__/g,J.url.pathname),{status:200,statusText:"OK",headers:{"Content-Type":"text/html"}})};function Il($){let J;function W({URLPattern:Y}){return J||=new Y({pathname:$.graphqlEndpoint}),J}let X=$.landingPageRenderer||wX0;return{onRequest({request:Y,fetchAPI:U,endResponse:Z,url:H}){if(!Y.url.endsWith($.graphqlEndpoint)&&!Y.url.endsWith(`${$.graphqlEndpoint}/`)&&H.pathname!==$.graphqlEndpoint&&H.pathname!==`${$.graphqlEndpoint}/`&&!W(U).test(H)){if($.showLandingPage===!0&&Y.method==="GET"&&!!Y.headers?.get("accept")?.includes("text/html")){let G=X({request:Y,fetchAPI:U,url:H,graphqlEndpoint:$.graphqlEndpoint,get urlPattern(){return W(U)}});if(G1(G))return G.then(Z);Z(G);return}Z(new U.Response("",{status:404,statusText:"Not Found"}))}}}}function zO({request:$,result:J,fetchAPI:W,onResultProcessHooks:X,serverContext:Y}){let U,Z=[],H="*/*";return W0(()=>z4(X,(G)=>G({request:$,acceptableMediaTypes:Z,result:J,setResult(z){J=z},resultProcessor:U,setResultProcessor(z,w){U=z,H=w},serverContext:Y})),()=>{if(!U)return new W.Response(null,{status:406,statusText:"Not Acceptable",headers:{accept:Z.join("; charset=utf-8, ")}});return U(J,W,H)})}function Ll({params:$,enveloped:J}){let W=J.parse($.query),X=J.validate(J.schema,W);if(X.length>0)return{errors:X};return W0(()=>J.contextFactory(),(Y)=>{let U={schema:J.schema,document:W,contextValue:Y,variableValues:$.variables,operationName:$.operationName};return(kJ(W,$.operationName)?.operation==="subscription"?J.subscribe:J.execute)(U)})}function Pl($){if(V5($))return $.toJSON();if($ instanceof Error)return{message:$.message,stack:$.stack,cause:$.cause};return $}var _l=($,J,W=globalThis.process?.env?.NODE_ENV==="development")=>{if(UO($))return $;let X={code:"INTERNAL_SERVER_ERROR",unexpected:!0},Y={extensions:X};if(V5($)){if(Y.nodes=$.nodes,Y.source=$.source,Y.positions=$.positions,Y.path=$.path,W&&$.originalError)X.originalError=Pl($.originalError);if($.extensions?.http)X.http=$.extensions.http}else if(W)X.originalError=Pl($);return Y0(J,Y)};class Nl{getEnveloped;logger;graphqlEndpoint;fetchAPI;plugins;instrumentation;onRequestParseHooks;onParamsHooks;onExecutionResultHooks;onResultProcessHooks;maskedErrorsOpts;id;version="5.16.0";constructor($){if(this.id=$?.id??"yoga",this.fetchAPI={...aH},$?.fetchAPI){for(let H in $.fetchAPI)if($.fetchAPI[H])this.fetchAPI[H]=$.fetchAPI[H]}let J=$?.logging==null?!0:$.logging;this.logger=typeof J==="boolean"?J===!0?PK():PK("silent"):typeof J==="string"?PK(J):J;let W=typeof $?.maskedErrors==="object"&&$.maskedErrors.maskError||_l,X=new WeakSet;this.maskedErrorsOpts=$?.maskedErrors===!1?null:{errorMessage:"Unexpected error.",...typeof $?.maskedErrors==="object"?$.maskedErrors:{},maskError:(H,G)=>{if(X.has(H))return H;let z=W(H,G,this.maskedErrorsOpts?.isDev);if(z!==H)this.logger.error(H);return X.add(z),z}};let Y=this.maskedErrorsOpts==null?null:this.maskedErrorsOpts,U=0;if($?.batching)if(typeof $.batching==="boolean")U=10;else U=$.batching.limit??10;this.graphqlEndpoint=$?.graphqlEndpoint||"/graphql";let Z=this.graphqlEndpoint;this.plugins=[dm({parse:ID,validate:tD,execute:vK,subscribe:vK,specifiedRules:qY}),!!$?.schema&&Pm($.schema),$?.allowedHeaders?.request!=null&&md($.allowedHeaders.request),$?.context!=null&&pm((H)=>{if($?.context){if(typeof $.context==="function")return $.context(H);return $.context}return{}}),Yl({id:this.id,logger:this.logger,endpoint:$?.healthCheckEndpoint}),$?.cors!==!1&&bd($?.cors),$?.graphiql!==!1&&Lm({graphqlEndpoint:Z,options:$?.graphiql,render:$?.renderGraphiQL,logger:this.logger}),K2({match:ud,parse:pd}),K2({match:id,parse:td}),$?.multipart!==!1&&K2({match:od,parse:sd}),K2({match:rd,parse:nd}),K2({match:dd,parse:ld}),Ql(),...$?.plugins??[],$?.parserAndValidationCache!==!1&&zl(!$?.parserAndValidationCache||$?.parserAndValidationCache===!0?{}:$?.parserAndValidationCache),Wl(U),ed($?.extraParamNames),Il({graphqlEndpoint:Z,showLandingPage:$?.landingPage!==!1,landingPageRenderer:typeof $?.landingPage==="function"?$.landingPage:void 0}),$l(),Xl(),Y!==null&&{onSubscribe(){return{onSubscribeError({error:H}){if(tR(H))throw H}}}},Y!==null&&um(Y),$?.allowedHeaders?.response!=null&&fd($.allowedHeaders.response),Jl()],this.getEnveloped=ym({plugins:this.plugins}),this.plugins=this.getEnveloped._plugins,this.onRequestParseHooks=[],this.onParamsHooks=[],this.onExecutionResultHooks=[],this.onResultProcessHooks=[];for(let H of this.plugins)if(H){if(H.onYogaInit)H.onYogaInit({yoga:this});if(H.onRequestParse)this.onRequestParseHooks.push(H.onRequestParse);if(H.onParams)this.onParamsHooks.push(H.onParams);if(H.onExecutionResult)this.onExecutionResultHooks.push(H.onExecutionResult);if(H.onResultProcess)this.onResultProcessHooks.push(H.onResultProcess);if(H.instrumentation)this.instrumentation=this.instrumentation?oY(this.instrumentation,H.instrumentation):H.instrumentation}}handleParams=({request:$,context:J,params:W})=>{let X=J.request===$?{params:W}:{request:$,params:W};Object.assign(J,X);let Y=this.getEnveloped(J);return this.logger.debug("Processing GraphQL Parameters"),W0(()=>W0(()=>Ll({params:W,enveloped:Y}),(U)=>{return this.logger.debug("Processing GraphQL Parameters done."),U},(U)=>{return{errors:sH(U,this.maskedErrorsOpts,this.logger)}}),(U)=>{if(C$(U))U=A9(U,(Z)=>Z,(Z)=>{if(Z.name==="AbortError")throw this.logger.debug("Request aborted"),Z;return{errors:sH(Z,this.maskedErrorsOpts,this.logger)}});return U})};getResultForParams=({params:$,request:J},W)=>{let X,Y=this.handleParams;return W0(()=>z4(this.onParamsHooks,(U)=>U({params:$,request:J,setParams(Z){$=Z},paramsHandler:Y,setParamsHandler(Z){Y=Z},setResult(Z){X=Z},fetchAPI:this.fetchAPI,context:W})),()=>W0(()=>X||Y({request:J,params:$,context:W}),(U)=>W0(()=>z4(this.onExecutionResultHooks,(Z)=>Z({result:U,setResult(H){U=H},request:J,context:W})),()=>U)))};parseRequest=($,J)=>{let W=new Proxy({},{get:(U,Z,H)=>{return W=new this.fetchAPI.URL($.url,"http://localhost"),Reflect.get(W,Z,W)}}),X,Y=[];return W0(()=>z4(this.onRequestParseHooks,(U)=>W0(()=>U({request:$,url:W,requestParser:X,serverContext:J,setRequestParser(Z){X=Z}}),(Z)=>Z?.onRequestParseDone),Y),()=>{if(this.logger.debug("Parsing request to extract GraphQL parameters"),!X)return{response:new this.fetchAPI.Response(null,{status:415,statusText:"Unsupported Media Type"})};return W0(()=>X($),(U)=>{return W0(()=>z4(Y,(Z)=>Z({requestParserResult:U,setRequestParserResult(H){U=H}})),()=>({requestParserResult:U}))})})};handle=($,J)=>{let W=this.instrumentation&&QW({request:$}),X=this.instrumentation?.requestParse?W.asyncFn(this.instrumentation?.requestParse,this.parseRequest):this.parseRequest;return bH(d0().then(()=>X($,J)).then(({response:Y,requestParserResult:U})=>{if(Y)return Y;let Z=this.instrumentation?.operation?(H,G)=>{return QW({context:G,request:H.request}).asyncFn(this.instrumentation?.operation,this.getResultForParams)(H,G)}:this.getResultForParams;return W0(()=>Array.isArray(U)?Promise.all(U.map((H)=>Z({params:H,request:$},Object.create(J)))):Z({params:U,request:$},J),(H)=>{return((this.instrumentation?.resultProcess)?W.asyncFn(this.instrumentation.resultProcess,zO):zO)({request:$,result:H,fetchAPI:this.fetchAPI,onResultProcessHooks:this.onResultProcessHooks,serverContext:J})})}).catch((Y)=>{let Z={errors:sH(Y,this.maskedErrorsOpts,this.logger)};return zO({request:$,result:Z,fetchAPI:this.fetchAPI,onResultProcessHooks:this.onResultProcessHooks,serverContext:J})}))}}function Bl($){let J=new Nl($);return xd(J,{fetchAPI:J.fetchAPI,plugins:J.plugins,disposeOnProcessTerminate:$.disposeOnProcessTerminate})}var Rl=Bl({schema:Fm,graphqlEndpoint:"/graphql",landingPage:!0,graphiql:{endpoint:"/graphql",title:"Madame GraphQL",defaultQuery:`
      query {
        hello
      }
    `},context:({request:$})=>{return{}}});function Sl($){$.use("*",async(J,W)=>{J.set("db",u8);let X=await JD.api.getSession({headers:J.req.raw.headers});J.set("session",X),await W()})}function DX0(){let{process:$,Deno:J}=globalThis;return!(typeof J?.noColor==="boolean"?J.noColor:$!==void 0?"NO_COLOR"in $?.env:!1)}async function jl(){let{navigator:$}=globalThis,J="cloudflare:workers";return!($!==void 0&&$.userAgent==="Cloudflare-Workers"?await(async()=>{try{return"NO_COLOR"in((await import("cloudflare:workers")).env??{})}catch{return!1}})():!DX0())}var KX0=($)=>{let[J,W]=[",","."];return $.map((Y)=>Y.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+J)).join(W)},OX0=($)=>{let J=Date.now()-$;return KX0([J<1000?J+"ms":Math.round(J/1000)+"s"])},FX0=async($)=>{if(await jl())switch($/100|0){case 5:return`\x1B[31m${$}\x1B[0m`;case 4:return`\x1B[33m${$}\x1B[0m`;case 3:return`\x1B[36m${$}\x1B[0m`;case 2:return`\x1B[32m${$}\x1B[0m`}return`${$}`};async function kl($,J,W,X,Y=0,U){let Z=J==="<--"?`${J} ${W} ${X}`:`${J} ${W} ${X} ${await FX0(Y)} ${U}`;$(Z)}var vl=($=console.log)=>{return async function(W,X){let{method:Y,url:U}=W.req,Z=U.slice(U.indexOf("/",8));await kl($,"<--",Y,Z);let H=Date.now();await X(),await kl($,"-->",Y,Z,W.res.status,OX0(H))}};var rJ=new nZ;Sl(rJ);rJ.use(vl());rJ.route("/",o_);rJ.all("/graphql",($)=>Rl.handle($.req.raw));rJ.get("/health",($)=>$.text("ok"));rJ.get("/test",async($)=>{let J=await u8.select().from(U6).limit(1);return $.json(J)});var Cl=process.env.PORT||3000;setInterval(()=>{let $=process.memoryUsage();console.log("=== Memory Report ==="),console.log("Process Memory (Total):"),console.log(`  RSS (Total Process): ${($.rss/1024/1024).toFixed(2)} MB \u2190 TOTAL memory used`),console.log(""),console.log("JavaScript Heap:"),console.log(`  Heap Total: ${($.heapTotal/1024/1024).toFixed(2)} MB`),console.log(`  Heap Used: ${($.heapUsed/1024/1024).toFixed(2)} MB \u2190 Your app's JS objects`),console.log(`  External: ${($.external/1024/1024).toFixed(2)} MB`),console.log(`====================
`)},5000);var GH1={port:Cl,fetch:rJ.fetch};console.log(`\uD83D\uDE80 Server running at http://localhost:${Cl}`);export{GH1 as default};
